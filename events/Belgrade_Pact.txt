###########################
# Belgrade Pact Events
###########################

add_namespace = pact

###########################
# Formation of the Pact
###########################

# Belgrade pact formed
country_event = {
	id = pact.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.1" }
	title = pact.1.t
	desc = pact.1.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes

	option = {
		name = pact.1.a # Open the Congress
		add_political_power = 50
		set_country_flag = SER_founded_belgradepact
		create_faction = Belgrade_Pact

		hidden_effect = {
			country_event = { id = worldtension.18 days = 1 }
			add_opinion_modifier = { target = BUL modifier = Belgrade_Pact_anti_bulgaria }
			reverse_add_opinion_modifier = { target = BUL modifier = Belgrade_Pact_joined_against_us }
			every_country = {
				limit = {
					OR = {
						tag = GER
						tag = AUS
						is_subject_of = AUS
						is_subject_of = GER
						tag = OTT
						tag = ALB
					}
				}
				add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_joined_boo }
			}
			OTT = { country_event = ottfor.5 }
		}
	}
}

# Invitation to the Belgrade Pact
country_event = {
	id = pact.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.2" }
	title = pact.2.t
	desc = pact.2.d
	picture = GFX_report_event_generic_conference

	is_triggered_only = yes

	option = {
		name = pact.2.a # Join the Belgrade Pact
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				has_game_rule = {
					rule = SER_belgrade_pact_member
					option = SER_BELGRADE_PACT_MEMBER_SER_ALONE
				}
			}
			modifier = {
				factor = 0
				tag = GRE
				has_game_rule = {
					rule = SER_belgrade_pact_member
					option = SER_BELGRADE_PACT_MEMBER_SER_ROM
				}
			}
			modifier = {
				factor = 0
				tag = ROM
				has_game_rule = {
					rule = SER_belgrade_pact_member
					option = SER_BELGRADE_PACT_MEMBER_SER_GRE
				}
			}
		}

		SER = {
			add_to_faction = ROOT
			add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_joined_yay }
			hidden_effect = { country_event = pact.3 } # Notify Serbia of joining
		}
		reverse_add_opinion_modifier = { target = BUL modifier = Belgrade_Pact_joined_against_us }

		hidden_effect = {
			add_opinion_modifier = { target = BUL modifier = Belgrade_Pact_anti_bulgaria }

			every_country = {
				limit = {
					OR = {
						tag = GER
						tag = AUS
						is_subject_of = AUS
						is_subject_of = GER
						tag = OTT
						tag = ALB
					}
				}
				add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_joined_boo }
			}
		}
	}

	option = {
		name = pact.2.b # We have no interest
		ai_chance = {
			factor = 0
			modifier = {
				add = 100
				has_game_rule = {
					rule = SER_belgrade_pact_member
					option = SER_BELGRADE_PACT_MEMBER_SER_ALONE
				}
			}
			modifier = {
				add = 100
				tag = GRE
				has_game_rule = {
					rule = SER_belgrade_pact_member
					option = SER_BELGRADE_PACT_MEMBER_SER_ROM
				}
			}
			modifier = {
				add = 100
				tag = ROM
				has_game_rule = {
					rule = SER_belgrade_pact_member
					option = SER_BELGRADE_PACT_MEMBER_SER_GRE
				}
			}
		}

		add_political_power = -100

		SER = {
			country_event = { id = pact.4 } # Notify Serbia of the refusal
			add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_refused }
		}

		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						tag = BUL
						tag = GER
						tag = AUS
						is_subject_of = GER
						is_subject_of = AUS
						tag = OTT
						tag = ALB
					}
				}
				add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_did_not_join_yay }
			}
		}
	}
}

# A country joins the pact
country_event = {
	id = pact.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.3" }
	title = pact.3.t
	desc = pact.3.d
	picture = GFX_report_event_generic_conference

	is_triggered_only = yes

	option = {
		name = pact.3.a # Welcome
		effect_tooltip = {
			add_to_faction = FROM
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_country_flag = SER_pactnews }
					GRE = {
						OR = {
							exists = no
							has_war = yes
							is_in_faction_with = ROOT
						}
					}
					ROM = {
						OR = {
							exists = no
							has_war = yes
							is_in_faction_with = ROOT
						}
					}
					MNT = {
						OR = {
							exists = no
							has_war = yes
							is_in_faction_with = ROOT
						}
					}
				}
				set_country_flag = SER_pactnews
				news_event = { id = worldnews.18 days = 1 }
				BUL = { country_event = pact.8 }

				every_country = {
					limit = {
						exists = yes
						OR = {
							tag = GER
							tag = AUS
							tag = HUN
							tag = ALB
						}
					}
					country_event = { id = pact.9 days = 2 }
				}
			}
		}
	}
}

# A country refuses to join the pact
country_event = {
	id = pact.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.4" }
	title = pact.4.t
	desc = pact.4.d
	picture = GFX_report_event_generic_conference

	is_triggered_only = yes

	option = {
		name = pact.4.a # We don't need them
	}
}

# Dissolution of the pact if nobody joins
country_event = {
	id = pact.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.5" }
	title = pact.5.t
	desc = pact.5.d
	picture = GFX_report_event_generic_conference

	fire_only_once = yes

	trigger = {
		tag = SER
		has_country_flag = { flag = SER_founded_belgradepact days > 30 }
		is_faction_leader = yes
		has_war = no
		NOT = {
			any_allied_country = {
				is_subject = no
			}
			ROM = {
				exists = yes
				is_subject = no
				is_in_faction = no
				NOT = { has_country_flag = SER_invited_to_belgradepact }
			}
			GRE = {
				exists = yes
				is_subject = no
				is_in_faction = no
				NOT = { has_country_flag = SER_invited_to_belgradepact }
			}
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	option = {
		name = pact.5.a
		dismantle_faction = yes
		if = {
			limit = { NOT = { has_global_flag = balkan_war_ended } }
			clr_country_flag = SER_founded_belgradepact
		}
	}
}

# Bulgaria: The Belgrade Pact
country_event = {
	id = pact.8
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.8" }
	title = pact.8.t
	desc = pact.8.d
	picture = GFX_report_event_generic_conference

	is_triggered_only = yes

	trigger = {
		SER = {
			is_faction_leader = yes
			exists = yes
		}
	}

	option = {
		name = pact.8.a # Not good
	}
}


###########################
# Support for Bulgaria
###########################

# Germany/Austria/Hungary/Albania: The Belgrade Pact
country_event = {
	id = pact.9
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.9" }
	title = pact.9.t
	desc = pact.9.d
	picture = GFX_report_event_soviet_finnish_pact

	is_triggered_only = yes

	trigger = {
		OR = {
			tag = GER
			tag = AUS
			tag = HUN
			tag = ALB
		}
		SER = {
			is_faction_leader = yes
			exists = yes
		}
		BUL = {
			exists = yes
			is_subject = no
		}
	}

	option = {
		name = pact.9.a # Support Bulgaria
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0
				OR = {
					tag = AUS
					tag = HUN
				}
			}
			modifier = {
				factor = 0
				has_opinion_modifier = BUL_bulgarian_embargo
			}
		}
		
		send_equipment = {
			target = BUL
			type = infantry_equipment
			amount = 500
		}

		set_country_flag = SER_supported_bulgaria

		every_country = {
			limit = {
				is_subject_of = ROOT
				NOT = { tag = HUN }
			}
			set_country_flag = SER_supported_bulgaria
		}

		SER = {
			add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_supported_enemy }
			country_event = { id = pact.10 days = 1 }
		}
		BUL = {
			add_opinion_modifier = { target = ROOT modifier = Belgrade_Pact_supported_us }
			country_event = { id = pact.11 days = 1 }
		}
	}
	option = {
		name = pact.9.b # Avoid the Balkans
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT_OTT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT_SUBMIT_TO_OTT
					}
				}
			}
		}
		add_political_power = -25
	}
}

# Serbia: <country> supports Bulgaria!
country_event = {
	id = pact.10
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.10" }
	title = pact.10.t
	desc = pact.10.d
	picture = GFX_report_event_soviet_finnish_pact

	is_triggered_only = yes

	option = {
		name = pact.10.a # This is not good
	}
}

# Bulgaria: <country> supports us
country_event = {
	id = pact.11
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.11" }
	title = pact.11.t
	desc = pact.11.d
	picture = GFX_report_event_soviet_finnish_pact

	is_triggered_only = yes

	option = {
		name = pact.11.a # Good
		effect_tooltip = {
			FROM = {
				send_equipment = {
					target = BUL
					type = infantry_equipment
					amount = 500
				}
			}
		}
	}
}


###########################
# War starts
###########################

# Bulgaria: Ultimatum from Serbia
country_event = {
	id = pact.17
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.17" }
	title = pact.17.t
	desc = pact.17.d
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes

	option = {
		name = pact.17.a # Then it is war
		ai_chance = {
			factor = 99
			modifier = {
				factor = 0
				has_game_rule = {
					rule = BUL_fourth_balkan_war
					option = BUL_FOURTH_BALKAN_WAR_SUBMIT
				}
			}
		}
		add_political_power = 100
		SER = {
			country_event = pact.18
		}
	}
	option = {
		name = pact.17.b # Give in to their demands
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_VS_PACT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_VS_PACT_OTT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_VS_PACT_SUBMIT_TO_OTT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT_OTT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT_SUBMIT_TO_OTT
					}
				}
			}
			modifier = {
				factor = 5
				NOT = {
					GER = {
						has_country_flag = SER_supported_bulgaria
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					NOT = {
						GRE = { is_in_faction_with = SER }
					}
					NOT = {
						ROM = { is_in_faction_with = SER }
					}
				}
				NOT = {
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_SUBMIT
					}
				}
			}
		}
		set_country_flag = BUL_surrender_no_war
		add_political_power = -200

		belgrade_pact_gain_land_from_bulgaria = yes

		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						tag = SER
						tag = OTT
						is_in_faction_with = SER
						has_country_flag = SER_supported_bulgaria
					}
				}
				country_event = pact.19
			}
		}
	}
}

# Serbia: Ultimatum refused, war starts
country_event = {
	id = pact.18
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.18" }
	title = pact.18.t
	desc = pact.18.d
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes

	option = {
		name = pact.18.a # They had their chance!
		set_global_flag = balkan_war_started
		add_political_power = 100
		add_manpower = 5000
		declare_war_on = {
			target = BUL
			type = annex_everything
		}

		# Notify all Pact members
		every_country = {
			limit = {
				NOT = { tag = SER }
				is_in_faction_with = SER
			}
			country_event = pact.20 # Pact members: the war has started
		}

		hidden_effect = {
			add_ideas = has_scripted_peace
			BUL = { add_ideas = has_scripted_peace }
			news_event = { id = worldnews.37 days = 1 }
			country_event = worldtension.5
		}
	}
}

# The Bulgarians fold
country_event = {
	id = pact.19
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.19" }
	title = pact.19.t
	desc = pact.19.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		name = pact.19.a # They had no choice.
		trigger = {
			NOT = { has_country_flag = SER_supported_bulgaria }
		}

		add_political_power = 200
		if = {
			limit = { tag = GRE }
			set_country_flag = balkan_war_victory
		}
	}
	option = {
		name = pact.19.b # Peace in our time.
		trigger = { has_country_flag = SER_supported_bulgaria }
	}
	option = {
		name = pact.19.c # Damn, we could have used that
		trigger = { tag = OTT }
	}
}

# Pact members: the war has started
country_event = {
	id = pact.20
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.20" }
	title = pact.20.t
	desc = pact.20.d
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes

	option = {
		name = pact.20.a # Onwards to victory
		add_political_power = 100
		add_manpower = 5000
	}
}

# Ottomans: do we demand Western Thrace?
country_event = {
	id = pact.21
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.21" }
	title = pact.21.t
	desc = pact.21.d
	picture = GFX_report_event_GRE_army

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = pact.21.a #Make the demand
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_VS_PACT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT
					}
				}
			}
			modifier = {
				factor = 0.5
				has_war = yes
			}
		}
		BUL = {
			add_opinion_modifier = { target = OTT modifier = KR_outraged }
			country_event = { id = pact.22 hours = 8 }
		}
	}
	option = {
		name = pact.21.b #We'd rather not
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_VS_PACT_OTT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT_OTT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_VS_PACT_SUBMIT_TO_OTT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT_SUBMIT_TO_OTT
					}
				}
			}
			modifier = {
				factor = 0.5
				SER = {
					is_in_faction_with = GRE
					is_in_faction_with = ROM
				}
			}
		}
		add_political_power = -50
	}
}

# Bulgaria: receives the Ottoman demands
country_event = {
	id = pact.22
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.22" }
	title = pact.22.t
	desc = pact.22.d
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes

	trigger = {
		has_war_with = SER
		OR = {
			owns_state = 184 #Western Thrace
			owns_state = 1089 #Momchilgrad
		}
	}

	option = {
		name = pact.22.a #Give them what they want
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_VS_PACT_OTT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT_OTT
					}
				}
			}
			modifier = {
				factor = 1.5
				SER = {
					is_in_faction_with = GRE
					is_in_faction_with = ROM
				}
			}
		}
		add_political_power = -100
		add_stability = -0.05
		every_owned_state = {
			limit = {
				OR = {
					state = 184 #Western Thrace
					state = 1089 #Momchilgrad
				}
			}
			OTT = { transfer_state = PREV }
			if = {
				limit = { 341 = { OTT_is_autonomous_region = yes } } #Adrianople
				ott_set_authority_vilayet_low = yes
			}
			else_if = {
				limit = { 341 = { OTT_is_vilayet = yes } } #Adrianople
				ott_set_authority_vilayet_medium = yes
			}
			else = {
				ott_set_authority_vilayet_high = yes
			}
		}
		OTT = {
			country_event = pact.23
		}
	}
	option = {
		name = pact.22.b #Never! We'll defeat them as well!
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_VS_PACT_SUBMIT_TO_OTT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT_SUBMIT_TO_OTT
					}
				}
			}
			modifier = {
				factor = 0.5
				surrender_progress > 0.20
			}
		}
		add_war_support = 0.10
		add_political_power = 50
		OTT = {
			country_event = pact.24
		}
	}
}

# Ottomans: Bulgaria agrees
country_event = {
	id = pact.23
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.23" }
	title = pact.23.t
	desc = pact.23.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		name = pact.23.a
		set_country_flag = SER_supported_bulgaria
		add_political_power = 100
		country_event = {
			id = ottkem.63
			days = 1
		}
		country_event = {
			id = ottkem.64
			days = 60
		}
	}
}

# Ottomans: Bulgaria refuses
country_event = {
	id = pact.24
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.24" }
	title = pact.24.t
	desc = pact.24.d
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes

	option = {
		name = pact.24.a
		set_country_flag = OTT_war_for_thrace
		declare_war_on = {
			target = BUL
			type = annex_everything
		}
		OTT = {
			hidden_effect = {
				if = {
					limit = {
						has_government = authoritarian_democrat
					}
					country_event = {
						id = ottkem.60
						days = 3
					}
				}
			}
		}
	}
}

# Bulgaria: warned that Ottomans are on the move
country_event = {
	id = pact.25
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.25" }
	title = pact.25.t
	desc = pact.25.d
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes

	option = {
		name = pact.25.a
		add_opinion_modifier = { target = OTT modifier = KR_disapproves_of_govt }
	}
}

# Bulgaria: aid from Germany arrives
country_event = {
	id = pact.26
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.26" }
	title = pact.26.t
	desc = pact.26.d

	is_triggered_only = yes

	option = {
		name = pact.26.a # Great
		custom_effect_tooltip = pact.26.tt
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_template = "Ekspeditsionno Otdelenie" }
				}
				division_template = {
					name = "Ekspeditsionno Otdelenie"
					is_locked = yes
					division_names_group = BUL_INF_01
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
						infantry = { x = 2 y = 0 }
						infantry = { x = 2 y = 1 }
						infantry = { x = 2 y = 2 }
					}
					support = {
						artillery = { x = 0 y = 0 }
					}
				}
			}
			random_owned_controlled_state = {
				prioritize = {
					48
				}
				create_unit = {
					division = "name = \"1-va Vŭnshni Ekspeditsionni Sili\" division_template = \"Ekspeditsionno Otdelenie\"  start_experience_factor = 0.1"
					owner = BUL
				}
				create_unit = {
					division = "name = \"2-ra Vŭnshni Ekspeditsionni Sili\" division_template = \"Ekspeditsionno Otdelenie\"  start_experience_factor = 0.1"
					owner = BUL
				}
			}
		}

		set_country_flag = BUL_received_aid

		hidden_effect = {
			add_opinion_modifier = {
				target = FROM
				modifier = Belgrade_Pact_sent_promised_aid
			}
		}
	}
}


###########################
# End of the war, lessons learned
###########################

# End of the war: lessons learned for Germany, if it sent aid
country_event = {
	id = pact.34
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.34" }
	title = pact.34.t
	desc = pact.34.d

	fire_only_once = yes

	trigger = {
		tag = GER
		has_country_flag = SER_supported_bulgaria
		BUL = { has_country_flag = BUL_received_aid }
		has_global_flag = balkan_war_ended
	}

	mean_time_to_happen = {
		days = 7
	}

	option = {
		name = pact.34.a # Great!

		army_experience = 10
		navy_experience = 10
		air_experience = 10

		add_manpower = 2500

		add_political_power = 25

		clr_country_flag = SER_supported_bulgaria

		hidden_effect = {
			BUL = {
				if = {
					limit = { has_template = "Ekspeditsionno Otdelenie" }
					delete_unit_template_and_units = { division_template = "Ekspeditsionno Otdelenie" }
				}
			}
		}
	}
}


###########################
# Peace events
###########################

### Bulgaria: we're losing, sue for peace?
country_event = {
	id = pact.35
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.35" }
	title = pact.35.t
	desc = pact.35.d
	picture = GFX_report_event_czech_soldiers_02

	fire_only_once = yes

	trigger = {
		tag = BUL
		has_war_with = SER
		surrender_progress > 0.7
		SER = {
			is_in_faction = yes
			has_country_flag = SER_founded_belgradepact
		}
		has_global_flag = balkan_war_started
		NOT = { has_global_flag = balkan_war_ended }
	}

	mean_time_to_happen = {
		days = 3
	}

	option = {
		name = pact.35.a # Sue for peace.
		add_political_power = -50
		SER = { country_event = pact.36 } # Send the peace offer to Serbia
	}
	option = {
		name = pact.35.b # We can still win this!
		trigger = { is_ai = no }
		add_political_power = -100
		add_war_support = -0.10
	}
}

# Serbia: Bulgaria asks for peace
country_event = {
	id = pact.36
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.36" }
	title = pact.36.t
	desc = pact.36.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = pact.36.a # We are triumphant!
		add_political_power = 200
		set_global_flag = balkan_war_ended

		BUL = { white_peace_with_ROOT = yes }

		# separate peace for Ottomans if they joined the war
		hidden_effect = {
			every_state = {
				limit = {
					is_owned_by = BUL
					is_controlled_by = OTT
					is_core_of = OTT
				}
				set_state_flag = SER_transfer_to_OTT
			}
			if = {
				limit = {
					OTT = { has_country_flag = OTT_war_for_thrace }
				}
				OTT = {
					country_event = { id = pact.39 hours = 8 }
				}
			}
		}

		# separate peace for non-Pact Greece
		if = {
			limit = {
				GRE = {
					NOT = { is_in_faction_with = SER }
					has_war_with = BUL
				}
			}
			hidden_effect = {
				GRE = {
					country_event = { id = pact.54 hours = 9 }
				}
			}
		}

		# separate peace for Romania if they are at war but didn't join the Pact
		if = {
			limit = {
				BUL = { has_war_with = ROM }
				ROM = {
					NOT = { is_in_faction_with = SER }
				}
			}
			hidden_effect = {
				ROM = { set_country_flag = ROM_independent_war_with_bulgaria }
				BUL = { white_peace = ROM }
			}
		}

		# separate peace for Albania if it joined the war
		if = {
			limit = {
				ALB = {
					has_country_flag = ALB_joined_BUL_war
					has_war_with = SER
				}
			}
			ALB = {
				white_peace_with_ROOT = yes
			}
		}
		if = {
			limit = {
				ALB = {
					is_subject = no
					is_in_faction = no
					has_war_with = BUL
				}
			}
			hidden_effect = {
				ALB = { white_peace = BUL }
			}
		}
		if = {
			limit = {
				ALB = {
					is_subject = no
					is_in_faction = no
					has_war_with = OTT
				}
			}
			hidden_effect = {
				ALB = { white_peace = OTT }
			}
		}

		# cede disputed land with custom effect
		belgrade_pact_gain_land_from_bulgaria = yes
		
		every_country = {
			limit = { is_subject_of = BUL }
			BUL = {
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_free
				}
			}
		}

		hidden_effect = {
			# Let Bulgaria know that Serbia accepted the peace offer
			BUL = { country_event = pact.37 }

			# Let all other Pact members know that peace is signed
			every_country = {
				limit = {
					NOT = { tag = SER }
					is_in_faction_with = SER
				}
				country_event = pact.38
			}
		}
	}

	option = {
		name = pact.36.b # They will be crushed
		trigger = { is_ai = no }
		add_political_power = -50
		BUL = {
			country_event = pact.46 # Notify Bulgaria of refusal
		}
	}
}

# Bulgaria: Serbia accepted our peace offer
country_event = {
	id = pact.37
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.37" }
	title = pact.37.t
	desc = pact.37.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		name = pact.37.a # At least we exist!
		set_country_flag = BUL_balkan_peace_loss
		if = {
			limit = {
				OR = {
					has_idea = limited_conscription
					has_idea = extensive_conscription
					has_idea = service_by_requirement
					has_idea = all_adults_serve
					has_idea = scraping_the_barrel
				}
			}
			add_ideas = volunteer_only
		}
		if = {
			limit = { NOT = { has_idea = civilian_economy } }
			add_ideas = civilian_economy
		}
		if = {
			limit = { is_ai = yes }
			hidden_effect = {
				country_event = { id = kr.political.121 days = 3 }
			}
		}
		effect_tooltip = {
			SER = {
				white_peace = BUL
			}
		}
	}
}

# Pact members: peace signed
country_event = {
	id = pact.38
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.38" }
	title = pact.38.t
	desc = pact.38.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		name = pact.38.a # The Belgrade Pact stands triumphant!
		add_political_power = 200

		if = {
			limit = { tag = GRE }
			set_country_flag = balkan_war_victory
		}

		effect_tooltip = {
			SER = {
				white_peace = BUL
			}
		}
	}
}

# Ottomans: Serbia made peace
country_event = {
	id = pact.39
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.39" }
	title = pact.39.t
	picture = GFX_report_event_generic_sign_treaty2

	desc = {
		text = pact.39.d.gained
		trigger = {
			OR = {
				184 = { has_state_flag = SER_transfer_to_OTT }
				1089 = { has_state_flag = SER_transfer_to_OTT }
			}
		}
	}
	desc = {
		text = pact.39.d.nogain
		trigger = {
			NOT = {
				184 = { has_state_flag = SER_transfer_to_OTT }
				1089 = { has_state_flag = SER_transfer_to_OTT }
			}
		}
	}

	is_triggered_only = yes

	trigger = {
		has_war_with = BUL
		has_country_flag = OTT_war_for_thrace
	}

	option = {
		name = pact.39.a #End the war
		clr_country_flag = OTT_war_for_thrace
		BUL = { white_peace_with_ROOT = yes }
		if = {
			limit = {
				ALB = {
					has_country_flag = ALB_joined_BUL_war
					has_war_with = OTT
				}
			}
			ALB = { white_peace_with_ROOT = yes }
		}
		every_state = {
			limit = { has_state_flag = SER_transfer_to_OTT }
			clr_state_flag = SER_transfer_to_OTT
		}
	}
	option = {
		name = pact.39.b #Continue the war
		trigger = {
			NOT = {
				184 = { has_state_flag = SER_transfer_to_OTT }
				1089 = { has_state_flag = SER_transfer_to_OTT }
			}
			OR = {
				184 = { is_owned_by = BUL }
				1089 = { is_owned_by = BUL }
			}
		}
		add_political_power = -50
		every_state = {
			limit = { has_state_flag = SER_transfer_to_OTT }
			clr_state_flag = SER_transfer_to_OTT
		}
	}
}

### Ottomans: We have what we came for - make peace?
country_event = {
	id = pact.40
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.40" }
	title = pact.40.t
	desc = pact.40.d
	picture = GFX_report_event_czech_soldiers_02

	fire_only_once = yes

	trigger = {
		tag = OTT
		has_war_with = BUL
		has_country_flag = OTT_war_for_thrace
		OR = {
			184 = { is_owned_by = BUL }
			1089 = { is_owned_by = BUL }
		}
		184 = {
			OR = {
				is_controlled_by = OTT
				NOT = { is_owned_by = BUL }
			}
		}
		1089 = {
			OR = {
				is_controlled_by = OTT
				NOT = { is_owned_by = BUL }
			}
		}
		controls_state = 341 #Adrianople
		controls_state = 773 #Constantinople
		BUL = {
			OR = {
				has_war_with = SER
				surrender_progress > 0.4
			}
		}
	}

	mean_time_to_happen = {
		days = 15
	}

	option = {
		name = pact.40.a #Make peace
		BUL = { country_event = pact.41 }
	}
	option = {
		name = pact.40.b #Continue the war!
		trigger = { is_ai = no }
		clr_country_flag = OTT_war_for_thrace
		add_political_power = -100
		add_war_support = -0.10
	}
}

# Bulgaria: Make peace with Ottomans?
country_event = {
	id = pact.41
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.41" }
	title = pact.41.t
	desc = pact.41.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	immediate = {
		OTT = {
			save_event_target_as = white_peace_receiver
		}
	}
	option = {
		name = pact.41.a #Agree
		add_political_power = -50
		every_owned_state = {
			limit = {
				is_core_of = OTT
				OR = {
					is_controlled_by = OTT
					is_controlled_by = BUL
				}
			}
			OTT = { transfer_state = PREV }
			if = {
				limit = { 341 = { OTT_is_autonomous_region = yes } } #Adrianople
				ott_set_authority_vilayet_low = yes
			}
			else_if = {
				limit = { 341 = { OTT_is_vilayet = yes } } #Adrianople
				ott_set_authority_vilayet_medium = yes
			}
			else = {
				ott_set_authority_vilayet_high = yes
			}
		}
		OTT = {
			clr_country_flag = OTT_war_for_thrace
			white_peace_with_ROOT = yes
		}

		# separate peace for Albania if it joined the war
		if = {
			limit = {
				ALB = {
					has_country_flag = ALB_joined_BUL_war
					has_war_with = OTT
				}
			}
			ALB = {
				white_peace_with_TARGET = yes
			}
		}
	}
	option = {
		name = pact.41.b #No peace
		trigger = { is_ai = no }
		add_war_support = -0.10
		OTT = {
			clr_country_flag = OTT_war_for_thrace
			country_event = pact.46
		}
	}
}

### Ottomans: we are losing the war
country_event = {
	id = pact.42
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.42" }
	title = pact.42.t
	desc = pact.42.d
	picture = GFX_report_event_czech_soldiers_02

	fire_only_once = yes

	trigger = {
		tag = OTT
		has_war_with = BUL
		has_country_flag = OTT_war_for_thrace
		OR = {
			184 = { is_owned_by = BUL }
			1089 = { is_owned_by = BUL }
		}
		NOT = {
			controls_state = 184 #Western Thrace
			controls_state = 1089 #Momchilgrad
			controls_state = 341 #Adrianople
			controls_state = 773 #Constantinople
		}
	}

	mean_time_to_happen = {
		days = 15
	}

	option = {
		name = pact.42.a #Make peace
		BUL = { country_event = pact.43 }
	}
	option = {
		name = pact.42.b #Refuse
		trigger = { is_ai = no }
		add_political_power = -100
		add_war_support = -0.10
	}
}

# Bulgaria: end the war?
country_event = {
	id = pact.43
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.43" }
	title = pact.43.t
	desc = pact.43.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	immediate = {
		OTT = {
			save_event_target_as = white_peace_receiver
		}
	}
	option = {
		name = pact.43.a #Make peace
		add_political_power = 200
		184 = { remove_core_of = OTT }
		1089 = { remove_core_of = OTT }
		OTT = {
			every_owned_state = {
				limit = { is_claim_or_core_of_ROOT = yes }
				BUL = { transfer_state = PREV }
			}
			clr_country_flag = OTT_war_for_thrace
			white_peace_with_ROOT = yes
		}

		# separate peace for Albania if it joined the war
		if = {
			limit = {
				ALB = {
					has_country_flag = ALB_joined_BUL_war
					has_war_with = OTT
				}
			}
			ALB = {
				white_peace_with_TARGET = yes
			}
		}
	}
	option = {
		name = pact.43.b #Refuse
		trigger = { is_ai = no }
		add_war_support = -0.10
		OTT = {
			country_event = pact.46
		}
	}
}

# <country> refuses our peace offer
country_event = {
	id = pact.46
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.46" }
	title = pact.46.t
	desc = pact.46.d

	is_triggered_only = yes

	option = {
		name = pact.46.a # We need to turn the tide
		add_war_support = 0.10
	}
}

### Serbia: we're losing, sue for peace?
country_event = {
	id = pact.47
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.47" }
	title = pact.47.t
	desc = pact.47.d
	picture = GFX_report_event_czech_soldiers_02

	fire_only_once = yes

	trigger = {
		tag = SER
		has_war_with = BUL
		is_in_faction = yes
		has_country_flag = SER_founded_belgradepact

		has_global_flag = balkan_war_started
		NOT = { has_global_flag = balkan_war_ended }
		BUL = {
			NOT = { surrender_progress > 0.7 }
		}

		# Morava or Nis is occupied by the enemy
		OR = {
			has_capitulated = yes
			767 = {
				is_owned_by = SER
				controller = { has_war_with = SER }
			}
			108 = {
				is_owned_by = SER
				controller = { has_war_with = SER }
			}
		}

		# Greece or Romania has also to be in a bad shape
		if = {
			limit = { is_in_faction_with = GRE }
			GRE = { surrender_progress > 0.40 }
		}
		if = {
			limit = { is_in_faction_with = ROM }
			ROM = { surrender_progress > 0.60 }
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	option = {
		name = pact.47.a # Sue for peace.
		BUL = { country_event = pact.48 }
	}
	option = {
		name = pact.47.b # We can still win this
		trigger = { is_ai = no }
		add_political_power = -100
	}
}

# Bulgaria: Serbia offers peace
country_event = {
	id = pact.48
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.48" }
	title = pact.48.t
	desc = pact.48.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			every_country = {
				limit = {
					has_war_with = BUL
					is_ally_with = SER
				}
				set_country_flag = SER_joined_balkan_war
			}
			SER = {
				save_event_target_as = white_peace_receiver
			}
		}
	}

	option = {
		name = pact.48.a # We are triumphant
		set_global_flag = balkan_war_ended
		add_political_power = 200

		SER = {
			white_peace_with_ROOT = yes
			hidden_effect = { set_faction_leader = yes }
		}

		# separate peace for Albania if it joined the war
		if = {
			limit = {
				ALB = {
					has_country_flag = ALB_joined_BUL_war
					has_war_with = SER
				}
			}
			ALB = { white_peace_with_TARGET = yes }
		}

		effect_tooltip = {
			SER = { dismantle_faction = yes }
		}

		every_state = {
			limit = {
				owner = { has_country_flag = SER_joined_balkan_war }
				OR = {
					state = 767 #Nis
					state = 841 #Pirot
					state = 106 #Macedonia
					state = 772 #Dobrogea
					state = 77 #Silistria
					state = 1076 #Southern Macedonia
					state = 989 #Salonika
					state = 731 #Central Macedonia
					state = 769 #Western Thrace
					state = 184 #Eastern Thrace
					is_claim_or_core_of_ROOT = yes
				}
			}
			if = {
				limit = {
					NOT = {
						state = 731
						is_claim_or_core_of_ROOT = yes
					}
				}
				add_claim_by = BUL
			}
			if = {
				limit = {
					state = 731
					NOT = { is_core_of = BUL }
				}
				add_core_of = BUL
			}
			BUL = { transfer_state = PREV }
		}

		if = {
			limit = {
				ROM = {
					has_country_flag = SER_joined_balkan_war
					owns_state = 81
				}
			}
			81 = { set_demilitarized_zone = yes } # Oltenia
		}
		if = {
			limit = {
				GRE = {
					has_country_flag = SER_joined_balkan_war
					owns_state = 768
				}
			}
			768 = { set_demilitarized_zone = yes } # Thessalia
		}
		if = {
			limit = {
				ALB = {
					overlord = { has_country_flag = SER_joined_balkan_war }
				}
			}
			ALB = {
				overlord = {
					set_autonomy = {
						target = ALB
						autonomy_state = autonomy_free
					}
				}
			}
		}

		if = {
			limit = {
				ALB = { has_country_flag = ALB_joined_BUL_war }
			}
			every_state = {
				limit = {
					owner = { has_country_flag = SER_joined_balkan_war }
					OR = {
						is_core_of = ALB
						is_claimed_by = ALB
					}
				}
				ALB = { transfer_state = PREV }
			}
		}

		add_timed_idea = {
			idea = BUL_reparation_payments_from_serbia
			days = 1460
		}

		hidden_effect = {
			# Notify all Pact members of peace
			SER = {
				country_event = { id = pact.49 hours = 4 }
			}
			if = {
				limit = {
					ROM = { has_country_flag = SER_joined_balkan_war }
				}
				ROM = {
					country_event = { id = pact.50 hours = 4 }
				}
			}
			if = {
				limit = {
					GRE = { has_country_flag = SER_joined_balkan_war }
				}
				GRE = {
					country_event = { id = pact.51 hours = 4 }
				}
			}
		}
	}
	option = {
		name = pact.48.b # No, they shall be crushed.
		trigger = { is_ai = no }
		add_political_power = -100
		SER = { country_event = pact.46 } # Notify Serbia of refusal
	}
}

# Serbia: peace was signed, we lost the war
country_event = {
	id = pact.49
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.49" }
	title = pact.49.t
	desc = pact.49.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		name = pact.49.a # At least we exist
		clr_country_flag = SER_joined_balkan_war
		dismantle_faction = yes
		add_timed_idea = {
			idea = SER_reparation_payments
			days = 1460
		}
	}
}

# Romania: peace was signed, we lost the war
country_event = {
	id = pact.50
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.50" }
	title = pact.50.t
	desc = pact.50.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		name = pact.50.a # At least we exist
		set_country_flag = SER_lost_balkan_war
		clr_country_flag = SER_joined_balkan_war
		effect_tooltip = {
			SER = { dismantle_faction = yes }
		}
	}
}

# Greece: peace was signed, we lost the war
country_event = {
	id = pact.51
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.51" }
	title = pact.51.t
	desc = pact.51.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		name = pact.51.a # At least we exist
		set_country_flag = SER_lost_balkan_war
		clr_country_flag = SER_joined_balkan_war
		effect_tooltip = {
			SER = { dismantle_faction = yes }
		}

		hidden_effect = {
			country_event = { id = gre.17 days = 5 } # Massive demonstrations after Balkan War loss
		}
	}
}

# Double-check balkan war ending global
country_event = {
	id = pact.52
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.52" }
	title = pact.52.t
	desc = pact.52.d
	picture = GFX_report_event_czech_soldiers_02

	fire_only_once = yes

	trigger = {
		OR = {
			tag = SER
			tag = BUL
		}
		has_global_flag = balkan_war_started
		if = {
			limit = { tag = SER }
			NOT = { has_war_with = BUL }
		}
		if = {
			limit = { tag = BUL }
			NOT = { has_war_with = SER }
		}
		NOT = { has_global_flag = balkan_war_ended }
	}

	mean_time_to_happen = {
		months = 1
	}

	option = {
		name = pact.52.a
		set_global_flag = balkan_war_ended
	}
}

# Double-check removal of Ottoman war flag
country_event = {
	id = pact.53
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.53" }
	title = pact.53.t
	desc = pact.53.d
	picture = GFX_report_event_czech_soldiers_02

	fire_only_once = yes

	trigger = {
		tag = OTT
		has_country_flag = OTT_war_for_thrace
		NOT = { has_war_with = BUL }
	}

	mean_time_to_happen = {
		months = 1
	}

	option = {
		name = pact.53.a
		clr_country_flag = OTT_war_for_thrace
	}
}

# Non-Pact Greece: Serbia made peace
country_event = {
	id = pact.54
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.54" }
	title = pact.54.t
	desc = pact.54.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	trigger = {
		has_war_with = BUL
		BUL = {
			OR = {
				any_owned_state = { is_core_of = GRE }
				owns_state = 731
				owns_state = 769
				owns_state = 184
			}
		}
	}

	option = {
		name = pact.54.a #End the war
		BUL = { white_peace_with_ROOT = yes }

		every_state = {
			limit = {
				is_owned_by = BUL
				OR = {
					is_core_of = GRE
					state = 731 #Western Salonica
					state = 769 #Eastern Salonica
					state = 184 #Western Thrace
				}
			}
			if = {
				limit = {
					NOT = { is_claimed_by = GRE }
					NOT = { is_core_of = GRE }
				}
				add_core_of = GRE
			}
			if = {
				limit = { is_claimed_by = GRE }
				hidden_effect = { remove_claim_by = GRE }
				add_core_of = GRE
			}
			GRE = { transfer_state = PREV }
		}
	}
	option = {
		name = pact.54.b #Continue the war
		add_political_power = -50
		add_war_support = -0.10
	}
}


###########################
# Post-war Belgrade Pact occupation of Bulgaria
###########################

# Set up occupation zones
country_event = {
	id = pact.64
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.64" }
	title = pact.64.t
	desc = pact.64.d
	picture = GFX_report_event_generic_diplomacy2

	fire_only_once = yes

	trigger = {
		tag = SER
		is_faction_leader = yes
		has_country_flag = SER_founded_belgradepact
		has_war = no

		# When the war has started and Bulgaria doesn't exist, it probably is annexed by Serbia
		has_global_flag = balkan_war_started
		NOT = {
			country_exists = BUL
			has_global_flag = balkan_war_ended
		}

		# Serbia or another Pact ally controls a Bulgarian core state that is not their core
		owns_state = 48 #Sofia
		212 = { is_owned_by_ROOT_or_ally = yes } #Plovdiv
		771 = { is_owned_by_ROOT_or_ally = yes } #Varna
	}

	mean_time_to_happen = {
		days = 3
	}

	option = {
		name = pact.64.a # Occupy Bulgaria
		set_country_flag = SER_occupation_of_bulgaria
		add_ideas = SER_occupation_of_bulgaria_idea

		belgrade_pact_occupies_bulgaria = yes

		every_country = {
			limit = {
				NOT = { tag = SER }
				is_in_faction_with = SER
				any_owned_state = {
					is_claim_or_core_of_PREV = no
					is_core_of = BUL
				}
			}
			country_event = { id = pact.65 hours = 6 }
		}
	}
	option = {
		name = pact.64.b # Let them have their independence
		trigger = { is_ai = no }

		add_political_power = -100

		# Transfer all Bulgarian states to Bulgaria
		every_owned_state = {
			limit = {
				OR = {
					state = 48 #Sofia
					state = 1090 #Vidin
					state = 770 #Pleven
					state = 212 #Plovdiv
					state = 1089 #Momchilgrad
					state = 771 #Varna
					state = 211 #Burgas
				}
				is_core_of = BUL
			}
			BUL = {
				transfer_state = PREV
			}
		}

		# Pact members asked to give up land
		every_country = {
			limit = {
				NOT = { tag = SER }
				is_in_faction_with = SER
			}
			country_event = pact.68
		}
	}
}

# Pact members: Serbia asks to set up occupation zones
country_event = {
	id = pact.65
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.65" }
	title = pact.65.t
	desc = pact.65.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = pact.65.a # Very well
		set_country_flag = SER_occupation_of_bulgaria

		belgrade_pact_occupies_bulgaria = yes
	}

	option = {
		name = pact.65.b # No
		trigger = { is_ai = no }
		add_political_power = -200

		effect_tooltip = {
			SER = { remove_from_faction = ROOT }
		}

		SER = {
			country_event = { id = pact.66 hours = 6 }
		}
	}
}

# Serbia: [Country] refuses to set up occupation zone
country_event = {
	id = pact.66
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.66" }
	title = pact.66.t
	desc = pact.66.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = pact.66.a # This is outrageous!
		remove_from_faction = FROM

		reverse_add_opinion_modifier = {
			target = SER
			modifier = Belgrade_Pact_refused_occupation_zone
		}
	}
}

# End of the occupation of Bulgaria (Triggered by Serbian focus)
country_event = {
	id = pact.67
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.67" }
	title = pact.67.t
	desc = pact.67.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = pact.67.a # End the occupation
		clr_country_flag = SER_occupation_of_bulgaria

		# Transfer all Bulgarian states to Bulgaria
		every_owned_state = {
			limit = {
				is_claim_or_core_of_ROOT = no
				OR = {
					state = 48 #Sofia
					state = 1090 #Vidin
					state = 770 #Pleven
					state = 212 #Plovdiv
					state = 1089 #Momchilgrad
					state = 771 #Varna
					state = 211 #Burgas
				}
			}
			BUL = { transfer_state = PREV }
		}

		puppet = BUL

		# Bulgaria transfer some factories
		belgrade_pact_loot_factory_from_bulgaria = yes

		# Ask Pact members to cede their occupied lands to Bulgaria
		every_country = {
			limit = {
				NOT = { tag = SER }
				is_in_faction_with = SER
			}
			country_event = pact.68
		}

		BUL = {
			country_event = { id = pact.69 days = 3 }
		}
	}
}

# Pact members: end of the occupation, cede land to Bulgaria?
country_event = {
	id = pact.68
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.68" }
	title = pact.68.t
	desc = pact.68.d

	is_triggered_only = yes

	trigger = {
		OR = {
			owns_state = 48 #Sofia
			owns_state = 1090 #Vidin
			owns_state = 770 #Pleven
			owns_state = 212 #Plovdiv
			owns_state = 1089 #Momchilgrad
			owns_state = 771 #Varna
			owns_state = 211 #Burgas
		}
	}

	option = {
		name = pact.68.a # Agree
		clr_country_flag = SER_occupation_of_bulgaria

		# Transfer all Bulgarian states to Bulgaria
		every_owned_state = {
			limit = {
				is_not_claim_or_core_of_ROOT = yes
				OR = {
					state = 48 #Sofia
					state = 1090 #Vidin
					state = 770 #Pleven
					state = 212 #Plovdiv
					state = 1089 #Momchilgrad
					state = 771 #Varna
					state = 211 #Burgas
				}
			}
			BUL = {
				transfer_state = PREV
			}
		}

		# Bulgaria transfers some factories to this country
		belgrade_pact_loot_factory_from_bulgaria = yes
	}

	option = {
		name = pact.68.b # No, we keep what we have
		trigger = { is_ai = no }
		clr_country_flag = SER_occupation_of_bulgaria

		add_political_power = -50
		SER = { remove_from_faction = ROOT }

		reverse_add_opinion_modifier = {
			target = SER
			modifier = Belgrade_Pact_refused_to_end_occupation
		}
	}
}

# Bulgaria renounces its claims
country_event = {
	id = pact.69
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.69" }
	title = pact.69.t
	desc = pact.69.d

	is_triggered_only = yes

	option = {
		name = pact.69.a # We have no choice
		add_political_power = -100
		every_state = {
			limit = {
				OR = {
					is_core_of = BUL
					is_claimed_by = BUL
				}
				NOT = {
					is_owned_by = BUL
					state = 48 #Sofia
					state = 1090 #Vidin
					state = 770 #Pleven
					state = 212 #Plovdiv
					state = 1089 #Momchilgrad
					state = 771 #Varna
					state = 211 #Burgas
				}
			}
			if = {
				limit = { is_claimed_by = BUL }
				remove_claim_by = BUL
			}
			if = {
				limit = { is_core_of = BUL }
				remove_core_of = BUL
				add_claim_by = BUL
			}
		}

		hidden_effect = {
			# Remove all negative opinion modifiers
			every_country = {
				limit = {
					OR = {
						tag = SER
						tag = GRE
						tag = ROM
						tag = MNT
					}
				}
				remove_opinion_modifier = { target = BUL modifier = embargo }
				remove_opinion_modifier = { target = BUL modifier = Balkans_hates_bulgaria }
			}

			remove_opinion_modifier = { target = SER modifier = Balkans_hates_neighbours }
			remove_opinion_modifier = { target = GRE modifier = Balkans_hates_neighbours }
			remove_opinion_modifier = { target = ROM modifier = Balkans_hates_neighbours }
		}
	}
}


###########################
# Albania vs. the Belgrade Pact
# (and other bad choices)
###########################

### Albania: start of the war, support Bulgaria?
country_event = {
	id = pact.70
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.70" }
	title = pact.70.t
	desc = pact.70.d
	picture = GFX_report_event_czech_soldiers_02

	trigger = {
		tag = ALB
		has_country_flag = SER_supported_bulgaria
		is_subject = no
		can_declare_war_on = SER
		SER = {
			has_country_flag = SER_founded_belgradepact
			is_faction_leader = yes
			has_war_with = BUL
		}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		days = 14
	}

	option = {
		name = pact.70.a # Send aid
		trigger = {
			OR = {
				has_manpower > 1000
				has_equipment = { infantry_equipment > 1000 }
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT_OTT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT_SUBMIT_TO_OTT
					}
				}
			}
		}

		add_manpower = -1000
		hidden_effect = {
			BUL = { add_manpower = 1000 }
		}
		send_equipment = {
			target = BUL
			type = infantry_equipment
			amount = 1000
		}
	}

	option = {
		name = pact.70.b # Offer an alliance
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_VS_PACT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_VS_PACT_OTT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_VS_PACT_SUBMIT_TO_OTT
					}
				}
			}
		}
		BUL = {
			country_event = { id = pact.71 days = 1 }
		}
	}

	option = {
		name = pact.70.c # We can't do anything
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT_OTT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT_SUBMIT_TO_OTT
					}
				}
			}
		}
		clr_country_flag = SER_supported_bulgaria
	}
}

# Bulgaria: The Albanians offer an alliance
country_event = {
	id = pact.71
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.71" }
	title = pact.71.t
	desc = pact.71.d
	picture = GFX_report_event_czech_soldiers_02

	is_triggered_only = yes

	trigger = {
		has_war_with = SER
	}

	option = {
		name = pact.71.a # Of course
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.5
				NOT = {
					GRE = { is_in_faction_with = SER }
				}
			}
		}
		ALB = {
			country_event = { id = pact.72 hours = 4 }
			add_to_war = {
				targeted_alliance = BUL
				enemy = SER
			}
		}
		hidden_effect = {
			BUL = { give_military_access = ALB }
			ALB = { give_military_access = BUL }
		}
	}

	option = {
		name = pact.71.b # We don't need them.
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT_OTT
					}
					has_game_rule = {
						rule = BUL_fourth_balkan_war
						option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT_SUBMIT_TO_OTT
					}
				}
			}
		}
		ALB = {
			country_event = { id = pact.73 hours = 4 }
		}
	}
}

# Albania: Bulgaria accepts our alliance
country_event = {
	id = pact.72
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.72" }
	title = pact.72.t
	desc = pact.72.d
	picture = GFX_report_event_czech_soldiers_02

	is_triggered_only = yes

	option = {
		name = pact.72.a # Together, we will defeat the Belgrade Pact.
		set_country_flag = ALB_joined_BUL_war
		effect_tooltip = {
			add_to_war = {
				targeted_alliance = BUL
				enemy = SER
			}
		}
	}
}

# Albania: Bulgaria refuses our alliance
country_event = {
	id = pact.73
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.73" }
	title = pact.73.t
	desc = pact.73.d
	picture = GFX_report_event_czech_soldiers_02

	is_triggered_only = yes

	option = {
		name = pact.73.a # Good luck on your own then.
		clr_country_flag = SER_supported_bulgaria
	}
}

### Albania: we're losing, sue for peace?
country_event = {
	id = pact.74
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.74" }
	title = pact.74.t
	desc = pact.74.d

	trigger = {
		tag = ALB
		has_country_flag = ALB_joined_BUL_war

		BUL = {
			OR = {
				exists = no
				is_subject = yes
				NOT = { has_war_with = SER }
				surrender_progress > 0.50
			}
		}

		has_war_with = SER
		SER = { is_faction_leader = yes }

		surrender_progress > 0.25
	}

	mean_time_to_happen = {
		days = 3
	}

	fire_only_once = yes

	option = {
		name = pact.74.a # Sue for peace.
		add_political_power = -50
		SER = { country_event = pact.75 } # Send the peace offer to Serbia
	}
	option = {
		name = pact.74.b # We can still win this!
		trigger = { is_ai = no }
		clr_country_flag = ALB_joined_BUL_war
		add_political_power = -100
	}
}

# Serbia: The Albanians offer peace
country_event = {
	id = pact.75
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.75" }
	title = pact.75.t
	desc = pact.75.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		name = pact.75.a # The Belgrade Pact stands triumphant
		ALB = { white_peace_with_ROOT = yes }

		belgrade_pact_gain_land_from_albania = yes

		hidden_effect = {
			# Notify all Pact members
			every_country = {
				limit = {
					NOT = { tag = SER }
					is_in_faction_with = SER
				}
				country_event = pact.77
			}
		}
	}
	option = {
		name = pact.75.b # No, they shall be crushed
		trigger = { is_ai = no }
		add_political_power = -100
		ALB = { country_event = pact.46 } # Notify Albanians of refusal
	}
}

# Pact members: Peace with the Albania
country_event = {
	id = pact.77
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.77" }
	title = pact.77.t
	desc = pact.77.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		name = pact.77.a # Belgrade Pact stands triumphant
		effect_tooltip = {
			SER = { white_peace = ALB }
		}
	}
}

### Serbia: Defeated Bulgaria but Albanians are pushing us back
country_event = {
	id = pact.78
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.78" }
	title = pact.78.t
	desc = pact.78.d
	picture = GFX_report_event_czech_soldiers_02

	trigger = {
		tag = SER
		is_faction_leader = yes
		has_country_flag = SER_founded_belgradepact
		surrender_progress > 0.50

		BUL = {
			OR = {
				exists = no
				is_subject_of = SER
				has_capitulated = yes
			}
		}

		has_war_with = ALB

		ALB = {
			controls_state = 765 #Kossovo
			controls_all_owned_states = yes
			has_country_flag = ALB_joined_BUL_war
		}
	}

	mean_time_to_happen = {
		days = 30
	}

	fire_only_once = yes

	option = {
		name = pact.78.a # Sue for peace.
		add_political_power = -50
		ALB = { country_event = pact.79 } # Send the peace offer to the Albanians
	}

	option = {
		name = pact.78.b # We can still win this!
		trigger = { is_ai = no }
		add_political_power = -100
	}
}

# Albanians: Serbia offers peace
country_event = {
	id = pact.79
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.79" }
	title = pact.79.t
	desc = pact.79.d
	picture = GFX_report_event_czech_soldiers_02

	is_triggered_only = yes

	option = {
		name = pact.79.a # Enough bloodshed. End this war.
		clr_country_flag = ALB_joined_BUL_war

		every_state = {
			limit = {
				owner = { is_in_faction_with = SER }
				OR = {
					is_core_of = ALB
					is_claimed_by = ALB
					state = 106 #Macedonia
					state = 185 #Epirus
				}
			}
			if = {
				limit = {
					NOT = {
						is_claimed_by = ALB
						is_core_of = ALB
					}
				}
				add_claim_by = ALB
			}
			ALB = { transfer_state = PREV }
		}

		SER = { white_peace_with_ROOT = yes }

		hidden_effect = {
			# Notify all Pact members of peace
			every_country = {
				limit = {
					OR = {
						tag = SER
						is_in_faction_with = SER
					}
				}
				country_event = pact.80
			}
		}
	}

	option = {
		name = pact.79.b # No, they shall be crushed
		trigger = { is_ai = no }
		clr_country_flag = ALB_joined_BUL_war
		add_political_power = -100
		SER = { country_event = pact.46 } # Notify Serbia of refusal
	}
}

# Pact members: peace was signed
country_event = {
	id = pact.80
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.80" }
	title = pact.80.t
	desc = pact.80.d

	is_triggered_only = yes

	option = {
		name = pact.80.a # Unfortunate
		add_political_power = -100
		effect_tooltip = {
			ALB = { white_peace = SER }
		}
	}
}

# Double-check removal of Albanian war flag
country_event = {
	id = pact.81
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.81" }
	title = pact.81.t
	desc = pact.81.d
	picture = GFX_report_event_czech_soldiers_02

	fire_only_once = yes

	trigger = {
		tag = ALB
		has_country_flag = ALB_joined_BUL_war
		NOT = { has_war_with = SER }
	}

	mean_time_to_happen = {
		months = 1
	}

	option = {
		name = pact.81.a
		clr_country_flag = ALB_joined_BUL_war
	}
}


###########################
# Belgrade Pact vs. Austria
###########################

# Preventing Pact members from collapsing just because Serbia has
country_event = {
	id = pact.100
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.100" }

	hidden = yes
	is_triggered_only = yes

	trigger = {
		is_in_faction_with = SER
		SER = { is_faction_leader = yes }
		is_major = no
		has_war = yes
		NOT = { has_country_flag = belgrade_pact_major }
	}

	option = {
		set_country_flag = belgrade_pact_major
		set_major = yes
	}
}

# Re-setting their major status
country_event = {
	id = pact.101
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.101" }

	hidden = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = belgrade_pact_major
		is_major = yes
		OR = {
			has_war = no
			NOT = { is_in_faction_with = SER }
		}
	}

	option = {
		clr_country_flag = belgrade_pact_major
		set_major = no
	}
}

###########################
# Transfer events
###########################

# Transfering Dobruzha
country_event = {
	id = pact.111
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.111" }
	title = annexation_DOBROGEA_CONQ
	desc = annexation_DOBROGEA_CONQ_desc
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes

	option = { #Give to Romania
		name = pact.111.a
		trigger = {
			ROM = { is_ally_of_ROOT = yes }
			NOT = {
				tag = ROM
				tag = BUL
			}
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 5
				ROM = {
					is_in_faction_with = ROOT
					is_subject = no
				}
			}
		}
		every_owned_state = {
			limit = {
				is_not_claim_or_core_of_ROOT = yes
				state = 77
			}
			if = {
				limit = {
					NOT = { is_claimed_by = ROM }
					NOT = { is_core_of = ROM }
				}
				add_claim_by = ROM
			}
			ROM = { transfer_state = PREV }
		}
		every_owned_state = {
			limit = {
				is_not_claim_or_core_of_ROOT = yes
				state = 772
			}
			if = {
				limit = { is_claimed_by = ROM }
				remove_claim_by = ROM
			}
			if = {
				limit = { NOT = { is_core_of = ROM } }
				add_core_of = ROM
			}
			ROM = { transfer_state = PREV }
		}
		recheck_annexations = yes
	}
	option = { #Give to Bulgaria
		name = pact.111.b
		trigger = {
			BUL = { is_ally_of_ROOT = yes }
			NOT = {
				tag = ROM
				tag = BUL
			}
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 5
				BUL = {
					is_in_faction_with = ROOT
					is_subject = no
				}
			}
		}
		every_owned_state = {
			limit = {
				is_not_claim_or_core_of_ROOT = yes
				OR = {
					state = 77
					state = 772
				}
			}
			if = {
				limit = { is_claimed_by = BUL }
				remove_claim_by = BUL
			}
			if = {
				limit = { NOT = { is_core_of = BUL } }
				add_core_of = BUL
			}
			BUL = { transfer_state = PREV }
		}
		recheck_annexations = yes
	}
	option = { #Divide it up
		name = pact.111.c
		trigger = {
			772 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			77 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			BUL = { is_ally_of_ROOT = yes }
			ROM = { is_ally_of_ROOT = yes }
			NOT = {
				tag = BUL
				tag = ROM
			}
		}
		ai_chance = {
			factor = 40
		}
		772 = {
			if = {
				limit = { is_claimed_by = ROM }
				remove_claim_by = ROM
			}
			if = {
				limit = { NOT = { is_core_of = ROM } }
				add_core_of = ROM
			}
			ROM = { transfer_state = PREV }
		}
		77 = {
			if = {
				limit = { is_claimed_by = BUL }
				remove_claim_by = BUL
			}
			if = {
				limit = { NOT = { is_core_of = BUL } }
				add_core_of = BUL
			}
			BUL = { transfer_state = PREV }
		}
		recheck_annexations = yes
	}
	option = { #annex
		name = annex.17.h
		trigger = {
			tag = ROM
		}
		ai_chance = {
			factor = 1000
		}
		every_owned_state = {
			limit = { state = 77 }
			if = {
				limit = { is_not_claim_or_core_of_ROOT = yes }
				add_claim_by = ROOT
			}
		}
		every_owned_state = {
			limit = { state = 772 }
			if = {
				limit = { is_claimed_by = ROOT }
				remove_claim_by = ROOT
			}
			if = {
				limit = { NOT = { is_core_of = ROOT } }
				add_core_of = ROOT
			}
		}
		recheck_annexations = yes
	}
	option = { #annex
		name = annex.17.h
		trigger = {
			tag = BUL
		}
		ai_chance = {
			factor = 1000
		}
		every_owned_state = {
			limit = {
				OR = {
					state = 77
					state = 772
				}
			}
			if = {
				limit = { is_claimed_by = ROOT }
				remove_claim_by = ROOT
			}
			if = {
				limit = { NOT = { is_core_of = ROOT } }
				add_core_of = ROOT
			}
		}
		recheck_annexations = yes
	}
	option = { #occupy
		name = annex.occupation
		trigger = {
			NOT = {
				tag = ROM
				tag = BUL
			}
		}
		ai_chance = {
			factor = 0
		}
		set_country_flag = DOBROGEA_CONQ
		occupy_small_country = yes
	}
}

# Transfering East and West Salonica
country_event = {
	id = pact.112
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.112" }
	title = annexation_SALONICA_CONQ
	desc = annexation_SALONICA_CONQ_desc
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes

	option = { #Give to Greece
		name = pact.112.a
		trigger = {
			GRE = { is_ally_of_ROOT = yes }
			NOT = {
				tag = GRE
				tag = BUL
			}
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 5
				GRE = {
					is_in_faction_with = ROOT
					is_subject = no
				}
			}
		}
		every_owned_state = {
			limit = {
				is_not_claim_or_core_of_ROOT = yes
				OR = {
					state = 731
					state = 769
				}
			}
			save_event_target_as = transfer_state
			if = {
				limit = {
					NOT = { is_claimed_by = GRE }
					NOT = { is_core_of = GRE }
				}
				add_claim_by = GRE
			}
			GRE = {
				transfer_state = PREV
				country_event = gre.257
			}
		}
		recheck_annexations = yes
	}
	option = { #Give to Bulgaria
		name = pact.111.b
		trigger = {
			BUL = { is_ally_of_ROOT = yes }
			NOT = {
				tag = GRE
				tag = BUL
			}
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 5
				BUL = {
					is_in_faction_with = ROOT
					is_subject = no
				}
			}
			modifier = {
				factor = 0.01
				BUL = {
					NOT = { owns_state = 106 }
				}
			}
		}
		every_owned_state = {
			limit = {
				is_not_claim_or_core_of_ROOT = yes
				OR = {
					state = 731
					state = 769
				}
			}
			if = {
				limit = { is_claimed_by = BUL }
				remove_claim_by = BUL
			}
			if = {
				limit = { NOT = { is_core_of = BUL } }
				add_core_of = BUL
			}
			BUL = { transfer_state = PREV }
		}
		recheck_annexations = yes
	}
	option = { #Divide it up
		name = pact.111.c
		trigger = {
			731 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			769 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			BUL = { is_ally_of_ROOT = yes }
			GRE = { is_ally_of_ROOT = yes }
			NOT = {
				tag = BUL
				tag = GRE
			}
		}
		ai_chance = {
			factor = 40
			modifier = {
				factor = 10
				BUL = {
					NOT = { owns_state = 106 }
				}
			}
		}
		731 = {
			if = {
				limit = {
					NOT = { is_claimed_by = GRE }
					NOT = { is_core_of = GRE }
				}
				add_claim_by = GRE
			}
			save_event_target_as = transfer_state
			GRE = {
				transfer_state = PREV
				country_event = gre.257
			}
		}
		769 = {
			if = {
				limit = { is_claimed_by = BUL }
				remove_claim_by = BUL
			}
			if = {
				limit = { NOT = { is_core_of = BUL } }
				add_core_of = BUL
			}
			BUL = { transfer_state = PREV }
		}
		recheck_annexations = yes
	}
	option = { #Divide it up
		name = pact.111.c
		trigger = {
			731 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			769 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			BUL = { is_ally_of_ROOT = yes }
			GRE = { is_ally_of_ROOT = no }
			OR = {
				SER = { is_ally_of_ROOT = yes }
				tag = SER
			}
			NOT = {
				tag = BUL
				tag = GRE
			}
		}
		ai_chance = {
			factor = 40
			modifier = {
				factor = 10
				BUL = {
					NOT = { owns_state = 106 }
				}
			}
		}
		if = {
			limit = { NOT = { tag = SER } }
			SER = {
				transfer_state = 731
			}
		}
		769 = {
			if = {
				limit = { is_claimed_by = BUL }
				remove_claim_by = BUL
			}
			if = {
				limit = { NOT = { is_core_of = BUL } }
				add_core_of = BUL
			}
			BUL = { transfer_state = PREV }
		}
		recheck_annexations = yes
	}
	option = { #Grant it to GRE
		name = pact.112.e
		trigger = {
			NOT = {
				GRE = { is_ally_of_ROOT = yes }
				BUL = { is_ally_of_ROOT = yes }
				tag = GRE
				tag = BUL
			}
			GRE = {
				owns_state = 1076
				ROOT_can_grant_land = yes
			}
		}
		ai_chance = {
			factor = 20
		}
		every_owned_state = {
			limit = {
				is_not_claim_or_core_of_ROOT = yes
				OR = {
					state = 731
					state = 769
				}
			}
			save_event_target_as = transfer_state
			if = {
				limit = {
					NOT = { is_claimed_by = GRE }
					NOT = { is_core_of = GRE }
				}
				add_claim_by = GRE
			}
			GRE = {
				transfer_state = PREV
				country_event = gre.257
			}
		}
		recheck_annexations = yes
	}
	option = { #annex
		name = annex.17.h
		trigger = {
			tag = GRE
		}
		ai_chance = {
			factor = 1000
		}
		every_owned_state = {
			limit = {
				OR = {
					state = 731
					state = 769
				}
			}
			if = {
				limit = {
					NOT = { is_claimed_by = GRE }
					NOT = { is_core_of = GRE }
				}
				add_claim_by = GRE
			}
		}
		recheck_annexations = yes
	}
	option = { #annex
		name = annex.17.h
		trigger = {
			tag = BUL
		}
		ai_chance = {
			factor = 1000
		}
		every_owned_state = {
			limit = {
				OR = {
					state = 731
					state = 769
				}
			}
			if = {
				limit = { is_claimed_by = ROOT }
				remove_claim_by = ROOT
			}
			if = {
				limit = { NOT = { is_core_of = ROOT } }
				add_core_of = ROOT
			}
		}
		recheck_annexations = yes
	}
	option = { #occupy
		name = annex.occupation
		trigger = {
			NOT = {
				tag = GRE
				tag = BUL
			}
		}
		ai_chance = {
			factor = 0
		}
		set_country_flag = SALONICA_CONQ
		occupy_small_country = yes
	}
}

# Transferring Western Thrace
country_event = {
	id = pact.113
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.113" }
	title = annexation_THRACE_CONQ
	desc = annexation_THRACE_CONQ_desc
	picture = GFX_report_event_GRE_army

	is_triggered_only = yes

	option = { #Give to Greece
		name = pact.112.a
		trigger = {
			GRE = {
				is_ally_of_ROOT = yes
				OR = {
					owns_state = 769
					owns_state = 184
				}
			}
			NOT = {
				tag = GRE
				tag = BUL
				tag = OTT
				tag = TUR
			}
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 5
				GRE = {
					is_in_faction_with = ROOT
					is_subject = no
				}
			}
		}
		every_owned_state = {
			limit = {
				is_not_claim_or_core_of_ROOT = yes
				OR = {
					state = 184 #Western Thrace
					state = 1089 #Kardzhali
				}
			}
			save_event_target_as = transfer_state
			if = {
				limit = {
					NOT = { is_claimed_by = GRE }
					NOT = { is_core_of = GRE }
				}
				add_claim_by = GRE
			}
			GRE = {
				transfer_state = PREV
				hidden_effect = { country_event = gre.257 }
			}
		}
		recheck_annexations = yes
	}
	option = { #Give to Bulgaria
		name = pact.111.b
		trigger = {
			BUL = { is_ally_of_ROOT = yes }
			NOT = {
				tag = GRE
				tag = BUL
				tag = OTT
				tag = TUR
			}
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 5
				BUL = {
					is_in_faction_with = ROOT
					is_subject = no
				}
			}
		}
		every_owned_state = {
			limit = {
				is_not_claim_or_core_of_ROOT = yes
				OR = {
					state = 1089
					state = 184
				}
			}
			if = {
				limit = { is_claimed_by = BUL }
				remove_claim_by = BUL
			}
			if = {
				limit = { NOT = { is_core_of = BUL } }
				add_core_of = BUL
			}
			BUL = { transfer_state = PREV }
		}
		recheck_annexations = yes
	}
	option = { #Give to Serbia
		name = pact.111.f
		trigger = {
			SER = { is_ally_of_ROOT = yes }
			1089 = { is_claimed_by = SER }
			NOT = {
				tag = GRE
				tag = BUL
				tag = OTT
				tag = TUR
				tag = SER
			}
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 5
				SER = {
					is_in_faction_with = ROOT
					is_subject = no
				}
			}
		}
		every_owned_state = {
			limit = {
				is_not_claim_or_core_of_ROOT = yes
				OR = {
					state = 1089
					state = 184
				}
			}
			SER = { transfer_state = PREV }
		}
		recheck_annexations = yes
	}
	option = { #Give to Turks
		name = pact.113.a
		trigger = {
			var:341.owner = {
				OR = {
					tag = TUR
					tag = OTT
				}
				is_ally_of_ROOT = yes
			}
			NOT = {
				tag = GRE
				tag = BUL
				tag = OTT
				tag = TUR
			}
		}
		ai_chance = {
			factor = 90
		}
		every_owned_state = {
			limit = {
				is_not_claim_or_core_of_ROOT = yes
				OR = {
					state = 1089
					state = 184
				}
			}
			if = {
				limit = { is_claimed_by = var:341.owner }
				remove_claim_by = var:341.owner
			}
			if = {
				limit = { NOT = { is_core_of = var:341.owner } }
				add_core_of = var:341.owner
			}
			var:341.owner = { transfer_state = PREV }
		}
		recheck_annexations = yes
	}
	option = { #Divide it up
		name = pact.111.c
		trigger = {
			1089 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			184 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			BUL = { is_ally_of_ROOT = yes }
			GRE = {
				is_ally_of_ROOT = yes
				owns_state = 769
			}
			NOT = {
				tag = BUL
				tag = GRE
				tag = OTT
				tag = TUR
			}
		}
		ai_chance = {
			factor = 40
		}
		184 = {
			if = {
				limit = {
					NOT = { is_claimed_by = GRE }
					NOT = { is_core_of = GRE }
				}
				add_claim_by = GRE
			}
			save_event_target_as = transfer_state
			GRE = {
				transfer_state = PREV
				hidden_effect = { country_event = gre.257 }
			}
		}
		1089 = {
			if = {
				limit = { is_claimed_by = BUL }
				remove_claim_by = BUL
			}
			if = {
				limit = { NOT = { is_core_of = BUL } }
				add_core_of = BUL
			}
			BUL = { transfer_state = PREV }
		}
		recheck_annexations = yes
	}
	option = { #Divide it up
		name = pact.111.c
		trigger = {
			1089 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
				is_claimed_by = SER
			}
			184 = {
				is_owned_by = ROOT
				is_claim_or_core_of_ROOT = no
			}
			BUL = { exists = no }
			SER = { is_ally_of_ROOT = yes }
			GRE = {
				is_ally_of_ROOT = yes
				owns_state = 769
			}
			NOT = {
				tag = BUL
				tag = GRE
				tag = OTT
				tag = TUR
				tag = SER
			}
		}
		ai_chance = {
			factor = 40
		}
		184 = {
			if = {
				limit = {
					NOT = { is_claimed_by = GRE }
					NOT = { is_core_of = GRE }
				}
				add_claim_by = GRE
			}
			save_event_target_as = transfer_state
			GRE = {
				transfer_state = PREV
				hidden_effect = { country_event = gre.257 }
			}
		}
		1089 = {
			SER = { transfer_state = PREV }
		}
		recheck_annexations = yes
	}
	option = { #annex
		name = annex.17.h
		trigger = {
			tag = GRE
		}
		ai_chance = {
			factor = 1000
		}
		every_owned_state = {
			limit = {
				OR = {
					state = 1089
					state = 184
				}
			}
			if = {
				limit = {
					NOT = { is_claimed_by = GRE }
					NOT = { is_core_of = GRE }
				}
				add_claim_by = GRE
			}
		}
		recheck_annexations = yes
	}
	option = { #annex
		name = annex.17.h
		trigger = {
			OR = {
				tag = BUL
				tag = TUR
				tag = OTT
			}
		}
		ai_chance = {
			factor = 1000
		}
		every_owned_state = {
			limit = {
				OR = {
					state = 1089
					state = 184
				}
			}
			if = {
				limit = { is_claimed_by = ROOT }
				remove_claim_by = ROOT
			}
			if = {
				limit = { NOT = { is_core_of = ROOT } }
				add_core_of = ROOT
			}
		}
		recheck_annexations = yes
	}
	option = { #occupy
		name = annex.occupation
		trigger = {
			NOT = {
				tag = GRE
				tag = BUL
				tag = TUR
				tag = OTT
			}
		}
		ai_chance = {
			factor = 0
		}
		set_country_flag = THRACE_CONQ
		occupy_small_country = yes
	}
}

###########################
# 2nd Congress events
###########################

# Victory in the Balkan War
country_event = {
	id = pact.200
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.200" }
	title = pact.200.t
	desc = pact.200.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		name = pact.200.a #Organise a new conference
		ROM = {
			country_event = { id = pact.201 days = 2 }
		}
		GRE = {
			country_event = { id = pact.201 days = 2 }
		}
		hidden_effect = {
			country_event = { id = pact.202 days = 4 }
			country_event = { id = pact.205 days = 8 }
		}
	}
}

# An invitation from Serbia
country_event = {
	id = pact.201
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.201" }
	title = pact.201.t
	desc = pact.201.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		name = pact.201.a #Very well, we shall attend
		add_to_array = { SER.SER_attending_congress = ROOT }
	}
}

# Invite Italy/Poland?
country_event = {
	id = pact.202
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.202" }
	title = pact.202.t

	desc = {
		text = pact.202.d.ITA
		trigger = {
			ITA = {
				exists = yes
				is_subject = no
				is_in_faction = no
				NOT = {
					has_war_with = ROOT
					has_war_with = VNC
				}
				has_government = national_populist
			}
			AUS = {
				OR = {
					owns_state = 783 #Trentino
					owns_state = 736 #Austrian Littoral
				}
			}
			NOT = {
				POL = {
					exists = yes
					is_subject = no
					is_in_faction = no
					NOT = { has_war_with = ROOT }
					OR = {
						has_government = paternal_autocrat
						has_government = national_populist
					}
				}
				91 = { owned_by_austria_or_puppet = yes }
			}
		}
	}
	desc = {
		text = pact.202.d.POL
		trigger = {
			POL = {
				exists = yes
				is_subject = no
				is_in_faction = no
				NOT = { has_war_with = ROOT }
				OR = {
					has_government = paternal_autocrat
					has_government = national_populist
				}
			}
			91 = { owned_by_austria_or_puppet = yes }
			NOT = {
				ITA = {
					exists = yes
					is_subject = no
					is_in_faction = no
					NOT = {
						has_war_with = ROOT
						has_war_with = VNC
					}
					has_government = national_populist
				}
				AUS = {
					OR = {
						owns_state = 783 #Trentino
						owns_state = 736 #Austrian Littoral
					}
				}
			}
		}
	}
	desc = {
		text = pact.202.d.ITA_POL
		trigger = {
			ITA = {
				exists = yes
				is_subject = no
				is_in_faction = no
				NOT = {
					has_war_with = ROOT
					has_war_with = VNC
				}
				has_government = national_populist
			}
			AUS = {
				OR = {
					owns_state = 783 #Trentino
					owns_state = 736 #Austrian Littoral
				}
			}
			POL = {
				exists = yes
				is_subject = no
				is_in_faction = no
				NOT = { has_war_with = ROOT }
				OR = {
					has_government = paternal_autocrat
					has_government = national_populist
				}
			}
			91 = { owned_by_austria_or_puppet = yes }
		}
	}

	trigger = {
		can_declare_war_on = AUS
		OR = {
			AND = {
				ITA = {
					exists = yes
					is_subject = no
					is_in_faction = no
					NOT = {
						has_war_with = ROOT
						has_war_with = VNC
					}
					has_government = national_populist
				}
				AUS = {
					OR = {
						owns_state = 783 #Trentino
						owns_state = 736 #Austrian Littoral
					}
				}
			}
			AND = {
				POL = {
					exists = yes
					is_subject = no
					is_in_faction = no
					NOT = { has_war_with = ROOT }
					OR = {
						has_government = paternal_autocrat
						has_government = national_populist
					}
				}
				91 = { owned_by_austria_or_puppet = yes }
			}
		}
	}

	is_triggered_only = yes

	option = {
		name = pact.202.a #All help is welcome
		ITA = {
			if = {
				limit = {
					exists = yes
					is_subject = no
					is_in_faction = no
					NOT = {
						has_war_with = ROOT
						has_war_with = VNC
					}
					has_government = national_populist
				}
				country_event = { id = pact.201 days = 2 }
			}
		}
		POL = {
			if = {
				limit = {
					exists = yes
					is_subject = no
					is_in_faction = no
					NOT = { has_war_with = ROOT }
					OR = {
						has_government = paternal_autocrat
						has_government = national_populist
					}
				}
				country_event = { id = pact.201 days = 2 }
			}
		}
	}

	option = {
		name = pact.202.b #Don't bother
		trigger = { is_ai = no }
	}
}

# Italy/Poland Invited to Attend
country_event = {
	id = pact.203
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.203" }
	title = pact.203.t
	desc = pact.203.d

	trigger = {
		can_declare_war_on = AUS
		is_subject = no
		is_in_faction = no
		NOT = { has_war_with = ROOT }
		OR = {
			has_socialist_government = yes
			has_government = paternal_autocrat
			has_government = national_populist
		}
	}

	is_triggered_only = yes

	option = {
		name = pact.203.a #Very well, we shall attend
		add_to_array = { SER.SER_attending_congress = ROOT }
		FROM = { country_event = pact.204 }
	}

	option = {
		name = pact.203.b #This is a waste of time
		trigger = { is_ai = no }
	}
}

# FROM will attend
country_event = {
	id = pact.204
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.204" }
	title = pact.204.t
	desc = pact.204.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		name = pact.204.a #Excellent
		add_political_power = 5
		add_opinion_modifier = {
			target = FROM
			modifier = KR_pleased
		}
	}
}

# The delegates arrive
country_event = {
	id = pact.205
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.205" }
	title = pact.205.t
	desc = pact.205.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		name = pact.205.a #Let the Congress begin!
		country_event = { id = pact.206 days = 1 }
	}
}

# Deciding on a Goal
country_event = {
	id = pact.206
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.206" }
	title = pact.206.t
	desc = pact.206.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		name = pact.206.a #A war with Austria
		ai_chance = {
			factor = 90
		}
		set_country_flag = SER_war_against_austria
		country_event = { id = pact.209 days = 5 }
		hidden_effect = {
			for_each_scope_loop = {
				array = SER.SER_attending_congress
				country_event = { id = pact.207 days = 2 }
			}
		}
	}

	option = {
		name = pact.206.b #Force them with diplomacy
		ai_chance = {
			factor = 10
		}
		set_country_flag = SER_diplomacy_with_austria
		AUS = {
			country_event = { id = pact.216 days = 5 }
		}
		hidden_effect = {
			for_each_scope_loop = {
				array = SER.SER_attending_congress
				country_event = { id = pact.214 days = 2 }
			}
		}
	}
}

# The Congress chooses to attack Austria
country_event = {
	id = pact.207
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.207" }
	title = pact.207.t
	desc = pact.207.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		name = pact.207.a #We support this initiative
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				tag = GRE
				766 = {
					owner = {
						NOT = { is_ally_with = AUS }
					}
				}
			}
			modifier = {
				add = -60
				tag = GRE
				766 = {
					owner = { is_ally_with = AUS }
				}
			}
		}
		add_to_array = { SER.SER_will_attack_austria = ROOT }
	}

	option = {
		name = pact.207.b #What? No!
		trigger = {
			NOT = { tag = ROM }
		}
		ai_chance = {
			factor = 0
			modifier = {
				add = 100
				tag = GRE
				766 = {
					owner = {
						NOT = { is_ally_with = AUS }
					}
				}
			}
			modifier = {
				add = 60
				tag = GRE
				766 = {
					owner = { is_ally_with = AUS }
				}
			}
		}
		if = {
			limit = { is_in_faction_with = FROM }
			leave_faction = yes

		}
		remove_from_array = { SER.SER_attending_congress = ROOT }
		FROM = { country_event = pact.208 }
	}
}

# FROM leaves the Congress
country_event = {
	id = pact.208
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.208" }
	title = pact.208.t

	desc = {
		text = pact.208.d.war
		trigger = { has_country_flag = SER_war_against_austria }
	}
	desc = {
		text = pact.208.d.diplomacy
		trigger = { has_country_flag = SER_diplomacy_with_austria }
	}

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		name = pact.208.a #Their loss
		add_opinion_modifier = {
			target = FROM
			modifier = KR_disapproves_of_govt
		}
	}
}

# The Question of Claims (SER)
country_event = {
	id = pact.209
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.209" }
	title = pact.209.t
	desc = pact.209.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		name = pact.209.a #We shall free the Slavs!
		add_state_claim = 45 #Vojvodina
		add_state_claim = 102 #Slovenia
		add_state_claim = 103 #Lika
		add_state_claim = 104 #Bosnia
		add_state_claim = 105 #Montenegro
		add_state_claim = 109 #Posavina
		add_state_claim = 163 #Dalmatia
		add_state_claim = 736 #Istria
		add_state_claim = 794 #Syrmia
		add_state_claim = 875 #West Banat
		hidden_effect = {
			if = {
				limit = {
					is_in_array = { SER.SER_attending_congress = ROM }
				}
				ROM = {
					country_event = { id = pact.210 days = 2 }
				}
			}
			if = {
				limit = {
					is_in_array = { SER.SER_attending_congress = GRE }
				}
				GRE = {
					country_event = { id = pact.211 days = 2 }
				}
			}
			if = {
				limit = {
					is_in_array = { SER.SER_attending_congress = POL }
				}
				POL = {
					country_event = { id = pact.212 days = 2 }
				}
			}
			if = {
				limit = {
					is_in_array = { SER.SER_attending_congress = ITA }
				}
				ITA = {
					country_event = { id = pact.213 days = 2 }
				}
			}
			country_event = { id = pact.214 days = 6 }
		}
	}
}

# The Question of Claims (ROM)
country_event = {
	id = pact.210
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.210" }
	title = pact.210.t
	desc = pact.210.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		name = pact.210.a #We will reunite with Transylvania!
		add_state_claim = 76 #Cluj
		add_state_claim = 80 #Cernauti
		add_state_claim = 82 #Banat
		add_state_claim = 83 #Partium
		add_state_claim = 84 #Transylvania
		add_state_claim = 713 #Suceava
		add_state_claim = 789 #Szeklerland
	}
}

# The Question of Claims (GRE)
country_event = {
	id = pact.211
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.211" }
	title = pact.211.t
	desc = pact.211.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		name = pact.211.a #We have no claims.
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				766 = {
					owner = { is_ally_with = AUS }
				}
			}
		}
	}

	option = {
		name = pact.211.b #Northern Epirus belongs to us!
		ai_chance = { factor = 1 }
		trigger = {
			766 = {
				owner = { is_ally_with = AUS }
			}
		}
		add_state_claim = 766 #Northern Epirus
	}
}

# The Question of Claims (POL)
country_event = {
	id = pact.212
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.212" }
	title = pact.212.t
	desc = pact.212.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		name = pact.212.a #We shall free Galicia!
		add_state_claim = 88 #Krakow
		add_state_claim = 89 #Stanislawow
		add_state_claim = 91 #Lwow
	}
}

# The Question of Claims (ITA)
country_event = {
	id = pact.213
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.213" }
	title = pact.213.t
	desc = pact.213.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		name = pact.213.a #We shall recover Istria and Trento!
		add_state_claim = 736 #Istria
		add_state_claim = 783 #Trentino
	}
}

# The Congress has Ended
country_event = {
	id = pact.214
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.214" }
	title = pact.214.t
	desc = pact.214.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		name = pact.214.a #Onwards!
		unlock_decision_tooltip = SER_Attack_Austria
	}
}

# The Congress chooses to negotiate with Austria
country_event = {
	id = pact.215
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.215" }
	title = pact.215.t
	desc = pact.215.d

	is_triggered_only = yes

	option = {
		name = pact.215.a #We support this initiative
	}

	option = {
		name = pact.215.b #What? No!
		trigger = {
			is_ai = no
			NOT = { tag = ROM }
		}
		if = {
			limit = { is_in_faction_with = FROM }
			leave_faction = yes
		}
		remove_from_array = { SER.SER_attending_congress = ROOT }
		FROM = { country_event = pact.208 }
	}
}

# An Invitation to Belgrade? (AUS)
country_event = {
	id = pact.216
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.216" }
	title = pact.216.t
	desc = pact.216.d

	trigger = {
		SER = { can_declare_war_on = AUS }
	}

	is_triggered_only = yes

	#option = {
	#	name = pact.216.a #A chance for peace, perhaps?
	#}

	option = {
		name = pact.216.b #We reject their ridiculous offer!
		FROM = {
			country_event = { id = pact.217 days = 3 }
		}
	}
}

# Austria Refuses
country_event = {
	id = pact.217
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.217" }
	title = pact.217.t
	desc = pact.217.d

	trigger = {
		can_declare_war_on = AUS
	}

	is_triggered_only = yes

	option = {
		name = pact.217.a #War it shall be, then.
		hidden_effect = {
			for_each_scope_loop = {
				array = SER.SER_attending_congress
				country_event = { id = pact.207 days = 2 }
			}
			country_event = { id = pact.209 days = 5 }
		}
	}
}

# Economic Council
country_event = {#Pact of Organization invitation
	id = pact.300
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.300" }
	title = pact.300.t
	desc = pact.300.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		name = pact.300.a #Of course
		ai_chance = { factor = 10 }
		custom_effect_tooltip = BP_economic_integration_tt
		set_country_flag = BP_accepted_economic_union
		if = {
			limit = {
				NOT = {
					is_in_array = { global.balkan_economic_union = ROOT }
				}
			}
			add_to_array = { global.balkan_economic_union = ROOT }
		}
	}

	option = {
		name = pact.300.b #Ew, economic integration
		ai_chance = { factor = 0 }
		FROM = { country_event = pact.301 }
	}
}
country_event = {#FROM refuses
	id = pact.301
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.301" }
	title = pact.301.t
	desc = pact.301.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		name = pact.301.a #Whatever
		add_political_power = -5
	}
}
country_event = {#Formation of the Economic Council (initiator)
	id = pact.302
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.302" }
	title = pact.302.t
	desc = pact.302.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = pact.302.a #Woop woop
		if = {
			limit = {
				check_variable = { global.balkan_economic_union^num = 1 }
			}
			add_ideas = BP_economic_council_1
		}
		else_if = {
			limit = {
				check_variable = { global.balkan_economic_union^num = 2 }
			}
			add_ideas = BP_economic_council_2
		}
		else_if = {
			limit = {
				check_variable = { global.balkan_economic_union^num = 3 }
			}
			add_ideas = BP_economic_council_3
		}
		every_other_country = {
			limit = {
				OR = {
					is_in_array = { global.balkan_economic_union = THIS }
					AND = {
						OR = {
							tag = ALB
							tag = BOS
							tag = BUL
							tag = CRO
							tag = GRE
							tag = HUN
							tag = ROM
						}
						is_subject = yes
						overlord = {
							is_in_array = { global.balkan_economic_union = THIS }
						}
					}
				}
			}
			country_event = pact.303
		}
	}
}
country_event = {#Formation of the Economic Council (others)
	id = pact.303
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.303" }
	title = pact.303.t
	desc = pact.303.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = pact.303.a #Woop woop
		if = {
			limit = {
				check_variable = { global.balkan_economic_union^num = 1 }
			}
			add_ideas = BP_economic_council_1
		}
		else_if = {
			limit = {
				check_variable = { global.balkan_economic_union^num = 2 }
			}
			add_ideas = BP_economic_council_2
		}
		else_if = {
			limit = {
				check_variable = { global.balkan_economic_union^num = 3 }
			}
			add_ideas = BP_economic_council_3
		}
	}
}
country_event = { #Economic Council upgraded
	id = pact.304
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.304" }
	title = pact.304.t
	desc = pact.304.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		name = pact.304.a #Woop woop
		if = {
			limit = { has_idea = BP_economic_council_1 }
			swap_ideas = {
				remove_idea = BP_economic_council_1
				add_idea = BP_economic_council_upgraded_1
			}
		}
		else_if = {
			limit = { has_idea = BP_economic_council_2 }
			swap_ideas = {
				remove_idea = BP_economic_council_2
				add_idea = BP_economic_council_upgraded_2
			}
		}
		else_if = {
			limit = { has_idea = BP_economic_council_3 }
			swap_ideas = {
				remove_idea = BP_economic_council_3
				add_idea = BP_economic_council_upgraded_3
			}
		}
	}
}
country_event = {#Kicked out of the Economic Council
	id = pact.305
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.305" }
	title = pact.305.t

	desc = {
		text = pact.305.d.war
		trigger = {
			has_socialist_government = no
		}
	}
	desc = {
		text = pact.305.d.revolution
		trigger = {
			has_socialist_government = yes
		}
	}

	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		name = pact.305.a
		if = {
			limit = { has_idea = BP_economic_council_1 }
			remove_ideas = BP_economic_council_1
		}
		else_if = {
			limit = { has_idea = BP_economic_council_upgraded_1 }
			remove_ideas = BP_economic_council_upgraded_1
		}
		else_if = {
			limit = { has_idea = BP_economic_council_2 }
			remove_ideas = BP_economic_council_2
		}
		else_if = {
			limit = { has_idea = BP_economic_council_upgraded_2 }
			remove_ideas = BP_economic_council_upgraded_2
		}
		else_if = {
			limit = { has_idea = BP_economic_council_2 }
			remove_ideas = BP_economic_council_2
		}
		else_if = {
			limit = { has_idea = BP_economic_council_upgraded_2 }
			remove_ideas = BP_economic_council_upgraded_2
		}
		if = {
			limit = {
				is_in_array = { global.balkan_economic_union = ROOT }
			}
			remove_from_array = { global.balkan_economic_union = ROOT }
		}
	}
}
country_event = { #Economic Council upgraded
	id = pact.306
	immediate = { log = "[GetDateText]: [Root.GetName]: event pact.306" }
	title = pact.306.t
	desc = pact.306.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		name = pact.306.a #Woop woop
		if = {
			limit = { has_idea = BP_economic_council_1 }
			swap_ideas = {
				remove_idea = BP_economic_council_1
				add_idea = BP_economic_council_2
			}
		}
		else_if = {
			limit = { has_idea = BP_economic_council_2 }
			swap_ideas = {
				remove_idea = BP_economic_council_2
				add_idea = BP_economic_council_3
			}
		}
		else_if = {
			limit = { has_idea = BP_economic_council_upgraded_1 }
			swap_ideas = {
				remove_idea = BP_economic_council_upgraded_1
				add_idea = BP_economic_council_upgraded_2
			}
		}
		else_if = {
			limit = { has_idea = BP_economic_council_upgraded_2 }
			swap_ideas = {
				remove_idea = BP_economic_council_upgraded_2
				add_idea = BP_economic_council_upgraded_3
			}
		}
	}
}
