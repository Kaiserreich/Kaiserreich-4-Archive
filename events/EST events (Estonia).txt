#####################
## Estonian Events ##
## Written by Fort ##
#####################

add_namespace = estonia_events

country_event = { # Baltic German Schools
	id = estonia_events.5
	title = estonia_events.5.t
	desc = estonia_events.5.d
	picture = GFX_report_event_generic_books
	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event estonia_events.5 option estonia_events.5.a"
		name = estonia_events.5.a # Yes
		add_political_power = 30
		add_stability = -0.02
	}
	option = {
		log = "[GetLogInfo]: event estonia_events.5 option estonia_events.5.b"
		name = estonia_events.5.b # No
		add_political_power = -50
		add_stability = 0.02
	}
}

country_event = { #The Decree of Tallinn
	id = estonia_events.15
	title = estonia_events.15.t
	desc = estonia_events.15.d
	picture = GFX_report_event_estonia_sirk

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event estonia_events.15 option estonia_events.15.a"
		name = estonia_events.15.a
		hidden_effect = {
			country_event = { id = estonia_events.21 days = 10 }
			DEN = { country_event = { id = denmark_events.1017 days = 3 } }
		}
	}
}

country_event = { #Sirk Makes His Move
	id = estonia_events.21
	title = estonia_events.21.t
	desc = estonia_events.21.d
	picture = GFX_report_event_generic_scandal
	is_triggered_only = yes

	option = { # yes
		log = "[GetLogInfo]: event estonia_events.21 option estonia_events.21.a"
		name = estonia_events.21.a
		ai_chance = {
			base = 25
			modifier = {
				factor = 0
				has_game_rule = { rule = EST_path option = EST_PATH_SOCCON }
			}
			modifier = {
				factor = 0
				has_game_rule = { rule = EST_path option = EST_PATH_MARLIB }
			}
			modifier = {
				factor = 0
				has_game_rule = { rule = EST_path option = EST_PATH_SOCLIB }
			}
			modifier = {
				factor = 0
				has_game_rule = { rule = EST_path option = EST_PATH_SOCDEM }
			}
		}
		hidden_effect = {
			country_event = { id = estonia_events.25 days = 5 }
		}
	}
	option = { # no
		log = "[GetLogInfo]: event estonia_events.21 option estonia_events.21.b"
		name = estonia_events.21.b
		ai_chance = {
			base = 75
			modifier = {
				factor = 0
				has_game_rule = { rule = EST_path option = EST_PATH_AUTDEM }
			}
		}
		hidden_effect = {
			country_event = { id = estonia_events.30 days = 5 }
		}
	}
}

country_event = { #Opposition Denounces Sirk
	id = estonia_events.25
	title = estonia_events.25.t
	desc = estonia_events.25.d
	picture = GFX_report_event_POL_radio

	is_triggered_only = yes

	option = { #I Hate Sirk
		log = "[GetLogInfo]: event estonia_events.25 option estonia_events.25.a"
		name = estonia_events.25.a
		add_political_power = -10
		add_popularity = {
			ideology = paternal_autocrat
			popularity = -0.05
		}
		country_event = { id = estonia_events.26 days = 5 }
	}
}

country_event = { #Opposition to Sirks
	id = estonia_events.26
	title = estonia_events.26.t
	desc = estonia_events.26.d
	picture = GFX_report_event_SWE_Revolutionary_Committee

	is_triggered_only = yes

	option = { #Opposition Unites
		log = "[GetLogInfo]: event estonia_events.26 option estonia_events.26.a"
		name = estonia_events.26.a
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				has_game_rule = { rule = EST_path option = EST_PATH_PATAUT }
			}
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.15
		}
		hidden_effect = {
			country_event = { id = estonia_events.27 days = 5 }
		}
	}
	option = { #Opposition Divided
		log = "[GetLogInfo]: event estonia_events.26 option estonia_events.26.b"
		name = estonia_events.26.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				has_game_rule = { rule = EST_path option = EST_PATH_AUTDEM }
			}
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.05
		}
		hidden_effect = {
			country_event = { id = estonia_events.28 days = 5 }
		}
	}
}

country_event = { #Coup Succeeds
	id = estonia_events.27
	title = estonia_events.27.t
	desc = estonia_events.27.d
	picture = GFX_report_event_POL_army_march
	is_triggered_only = yes

	option = { #Ismaalit Victory
		log = "[GetLogInfo]: event estonia_events.27 option estonia_events.27.a"
		name = estonia_events.27.a
		set_politics = {
			ruling_party = authoritarian_democrat
			elections_allowed = no
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.15
		}
		hidden_effect = {
			mark_focus_tree_layout_dirty = yes
			country_event = { id = estonia_events.29 months = 24 }
		}
	}
}

country_event = { #Coup Fails
	id = estonia_events.28
	title = estonia_events.28.t
	desc = estonia_events.28.d
	picture = GFX_report_event_SWE_coup

	is_triggered_only = yes

	option = { #Sirk's Dictatorship Rises
		log = "[GetLogInfo]: event estonia_events.28 option estonia_events.28.a"
		name = estonia_events.28.a
		add_stability = 0.05
		retire_character = EST_johan_laidoner
		add_popularity = {
			ideology = paternal_autocrat
			popularity = 0.1
		}
		set_party_name = {
			ideology = paternal_autocrat
			name = EST_paternal_autocrat_vaps_party
			long_name = EST_paternal_autocrat_vaps_party_long
		}
	}
}

country_event = { #Artur Sirk Defenestrated
	id = estonia_events.29
	title = estonia_events.29.t
	desc = estonia_events.29.d
	picture = GFX_report_event_POL_funeral

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event estonia_events.29 option estonia_events.29.a"
		name = estonia_events.29.a
		EST_artur_sirk = { kill_character = yes }
		promote_character = EST_andres_larka
	}
}

country_event = { #Referendum Failed
	id = estonia_events.30
	title = estonia_events.30.t
	desc = estonia_events.30.d
	picture = GFX_report_event_SWE_socdem_cabinet

	is_triggered_only = yes

	option = { #PER swells up
		log = "[GetLogInfo]: event estonia_events.30 option estonia_events.30.a"
		name = estonia_events.30.a
		add_popularity = {
			ideology = social_conservative
			popularity = 0.1
		}
		add_popularity = {
			ideology = paternal_autocrat
			popularity = -0.05
		}
		hidden_effect = {
			country_event = { id = estonia_events.31 days = 5 }
		}
	}
}

country_event = { #Patriotic League submits to National Front
	id = estonia_events.31
	title = estonia_events.31.t
	desc = estonia_events.31.d
	picture = GFX_report_event_SWE_socdem_cabinet

	is_triggered_only = yes

	option = { #PER gains strength
		log = "[GetLogInfo]: event estonia_events.31 option estonia_events.31.a"
		name = estonia_events.31.a
		add_popularity = {
			ideology = social_conservative
			popularity = 0.05
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.025
		}
		hidden_effect = {
			country_event = { id = estonia_events.32 days = 10 }
		}
	}
}

country_event = { #Anti-Vapsid Media Rages
	id = estonia_events.32
	title = estonia_events.32.t
	desc = estonia_events.32.d
	picture = GFX_report_event_POL_radio

	is_triggered_only = yes

	option = { #Get Dunked on Sirk
		log = "[GetLogInfo]: event estonia_events.32 option estonia_events.32.a"
		name = estonia_events.32.a
		hidden_effect = {
			country_event = { id = estonia_events.33 days = 10 }
		}
	}
}

country_event = { #Will Sirk Bend the Knee?
	id = estonia_events.33
	title = estonia_events.33.t
	desc = estonia_events.33.d
	picture = GFX_report_event_DEN_government

	is_triggered_only = yes

	option = { #Sirk Gives Up
		log = "[GetLogInfo]: event estonia_events.33 option estonia_events.33.a"
		name = estonia_events.33.a
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				has_game_rule = { rule = EST_path option = EST_PATH_PATAUT }
			}
		}
		hidden_effect = {
			country_event = { id = estonia_events.34 days = 5 }
		}
	}
	option = { #Sirk Waits it out
		log = "[GetLogInfo]: event estonia_events.33 option estonia_events.33.b"
		name = estonia_events.33.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = EST_path option = DEFAULT } }
				NOT = { has_game_rule = { rule = EST_path option = EST_PATH_PATAUT } }
			}
		}
		hidden_effect = {
			country_event = { id = estonia_events.35 days = 14 }
		}
	}
}

country_event = { #Sirk Loses
	id = estonia_events.34
	title = estonia_events.34.t
	desc = estonia_events.34.d
	picture = GFX_report_event_DEN_constitution_day

	is_triggered_only = yes

	option = { #Sirk Gives Up
		log = "[GetLogInfo]: event estonia_events.34 option estonia_events.34.a"
		name = estonia_events.34.a
		hidden_effect = {
			country_event = { id = estonia_events.29 months = 24 }
		}
		set_politics = {
			ruling_party = social_conservative
		}
		mark_focus_tree_layout_dirty = yes
		add_popularity = {
			ideology = social_conservative
			popularity = 0.25
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.3
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.15
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.15
		}
	}
}

country_event = { #Sirk Wins
	id = estonia_events.35
	title = estonia_events.35.t
	desc = estonia_events.35.d
	picture = GFX_report_event_DEN_constitution_day

	is_triggered_only = yes

	option = { #Sirk Wins
		log = "[GetLogInfo]: event estonia_events.35 option estonia_events.35.a"
		name = estonia_events.35.a
		add_popularity = {
			ideology = paternal_autocrat
			popularity = 0.08
		}
		set_party_name = {
			ideology = paternal_autocrat
			name = EST_paternal_autocrat_vaps_party
			long_name = EST_paternal_autocrat_vaps_party_long
		}
	}
}

country_event = { #Estonia enters agreement with Germany
	id = estonia_events.36
	title = estonia_events.36.t
	desc = estonia_events.36.d
	picture = GFX_report_event_generic_conference3

	is_triggered_only = yes

	option = { #Accept Estonia into Mitteleuropa
		log = "[GetLogInfo]: event estonia_events.36 option estonia_events.36.a"
		name = estonia_events.36.a
		ai_chance = { base = 100 }
		hidden_effect = {
			FROM = { country_event = { id = estonia_events.37 days = 1 } }
		}
	}
	option = { #Refuse to let Estonia join
		log = "[GetLogInfo]: event estonia_events.36 option estonia_events.36.b"
		name = estonia_events.36.b
		ai_chance = { base = 0 }
		hidden_effect = {
			FROM = { country_event = { id = estonia_events.38 days = 1 } }
		}
	}
}

country_event = { #Estonia joins Mitteleuropa
	id = estonia_events.37
	title = estonia_events.37.t
	desc = estonia_events.37.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = { #Accept Estonia into the Mitteleuropa
		log = "[GetLogInfo]: event estonia_events.37 option estonia_events.37.a"
		name = estonia_events.37.a
		GER_add_to_mitteleuropa = yes
	}
}

country_event = { #Estonia refused
	id = estonia_events.38
	title = estonia_events.38.t
	desc = estonia_events.38.d
	picture = GFX_report_event_generic_diplomacy4

	is_triggered_only = yes

	option = { #refused
		log = "[GetLogInfo]: event estonia_events.38 option estonia_events.38.a"
		name = estonia_events.38.a
		set_country_flag = EST_refused_by_germany
		hidden_effect = {
			remove_targeted_decision = { target = GER decision = EST_join_reichspakt }
		}
	}
}

country_event = { #Estonia Russian Trade?, now applies to Germany too
	id = estonia_events.39
	title = estonia_events.39.t
	desc = estonia_events.39.d
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	option = { #Yes please
		log = "[GetLogInfo]: event estonia_events.39 option estonia_events.39.a"
		name = estonia_events.39.a
		ai_chance = { base = 100 }
		FROM = { country_event = { id = estonia_events.40 days = 1 } }
	}
	option = { #No thank you
		log = "[GetLogInfo]: event estonia_events.39 option estonia_events.39.b"
		name = estonia_events.39.b
		ai_chance = { base = 0 }
		FROM = { country_event = { id = estonia_events.41 days = 1 } }
	}
}

country_event = { #They said yes
	id = estonia_events.40
	title = estonia_events.40.t
	desc = estonia_events.40.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes

	option = { #Nice
		log = "[GetLogInfo]: event estonia_events.40 option estonia_events.40.a"
		name = estonia_events.40.a
		if = {
			limit = { FROM = { tag = GER } }
			add_ideas = EST_german_trade
		}
		else = {
			add_ideas = EST_russian_trade
		}
	}
}
country_event = { #They said no
	id = estonia_events.41
	title = estonia_events.41.t
	desc = estonia_events.41.d
	picture = GFX_report_event_generic_diplomacy4
	is_triggered_only = yes

	option = { #awwww
		log = "[GetLogInfo]: event estonia_events.41 option estonia_events.41.a"
		name = estonia_events.41.a
	}
}
country_event = { #Control the Unions
	id = estonia_events.42
	title = estonia_events.42.t
	desc = estonia_events.42.d
	picture = GFX_report_event_generic_strike

	is_triggered_only = yes

	immediate = {
		if = {
			limit = { NOT = { has_country_flag = EST_ismaalit_support } }
			set_country_flag = { flag = EST_ismaalit_support value = 0 }
		}
	}

	option = { #Autonomy for Unions
		log = "[GetLogInfo]: event estonia_events.42 option estonia_events.42.a"
		name = estonia_events.42.a
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.05
		}
	}
	option = { #Puppet Unions
		log = "[GetLogInfo]: event estonia_events.42 option estonia_events.42.b"
		name = estonia_events.42.b
		add_political_power = -25
		modify_country_flag = { flag = EST_ismaalit_support value = 1 }
	}
}
country_event = { #Control the Plutocrats
	id = estonia_events.43
	title = estonia_events.43.t
	desc = estonia_events.43.d
	picture = GFX_report_event_SWE_syndies

	is_triggered_only = yes

	immediate = {
		if = {
			limit = { NOT = { has_country_flag = EST_ismaalit_support } }
			set_country_flag = { flag = EST_ismaalit_support value = 0 }
		}
	}

	option = { #Offer Seats in the Upper Senate
		log = "[GetLogInfo]: event estonia_events.43 option estonia_events.43.a"
		name = estonia_events.43.a
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.05
		}
	}
	option = { #Subordinate the Plutocrats to the Party
		log = "[GetLogInfo]: event estonia_events.43 option estonia_events.43.b"
		name = estonia_events.43.b
		add_political_power = -25
		modify_country_flag = { flag = EST_ismaalit_support value = 1 }
	}
}
country_event = { #Reform the Bureaucracy
	id = estonia_events.44
	title = estonia_events.44.t
	desc = estonia_events.44.d
	picture = GFX_report_event_estonia_gov

	is_triggered_only = yes

	immediate = {
		if = {
			limit = { NOT = { has_country_flag = EST_ismaalit_support } }
			set_country_flag = { flag = EST_ismaalit_support value = 0 }
		}
	}

	option = { #Appeal to the Lower House
		log = "[GetLogInfo]: event estonia_events.44 option estonia_events.44.a"
		name = estonia_events.44.a
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.05
		}
	}
	option = { #Appoint loyal administrators
		log = "[GetLogInfo]: event estonia_events.44 option estonia_events.44.b"
		name = estonia_events.44.b
		add_political_power = -25
		modify_country_flag = { flag = EST_ismaalit_support value = 1 }
	}
}
country_event = { #Success or Failure of Sidelining the Legislature
	id = estonia_events.45
	title = {
		text = estonia_events.45.t1
		trigger = {
			has_country_flag = { flag = EST_ismaalit_support value < 1 }
		}
	}
	title = {
		text = estonia_events.45.t2
		trigger = {
			has_country_flag = { flag = EST_ismaalit_support value > 0 }
			has_country_flag = { flag = EST_ismaalit_support value < 3 }
		}
	}
	title = {
		text = estonia_events.45.t3
		trigger = {
			has_country_flag = { flag = EST_ismaalit_support value > 2 }
		}
	}
	desc = {
		text = estonia_events.45.d1
		trigger = {
			has_country_flag = { flag = EST_ismaalit_support value < 1 }
		}
	}
	desc = {
		text = estonia_events.45.d2
		trigger = {
			has_country_flag = { flag = EST_ismaalit_support value > 0 }
			has_country_flag = { flag = EST_ismaalit_support value < 3 }
		}
	}
	desc = {
		text = estonia_events.45.d3
		trigger = {
			has_country_flag = { flag = EST_ismaalit_support value > 2 }
		}
	}
	picture = GFX_report_event_DEN_constitution_day

	is_triggered_only = yes

	option = { #1/3rd failure
		log = "[GetLogInfo]: event estonia_events.45 option estonia_events.45.a"
		name = estonia_events.45.a
		trigger = {
			has_country_flag = { flag = EST_ismaalit_support value < 1 }
		}
		add_stability = -0.1
		add_political_power = -100
		set_politics = {
			ruling_party = social_conservative
			elections_allowed = no
		}
		mark_focus_tree_layout_dirty = yes
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.2
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.15
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.1
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.05
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.05
		}
	}
	option = { #partial success
		log = "[GetLogInfo]: event estonia_events.45 option estonia_events.45.b"
		name = estonia_events.45.b
		trigger = {
			has_country_flag = { flag = EST_ismaalit_support value > 0 }
			has_country_flag = { flag = EST_ismaalit_support value < 3 }
		}
		add_stability = 0.05
		add_political_power = 50
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.05
		}
	}
	option = { #success
		log = "[GetLogInfo]: event estonia_events.45 option estonia_events.45.c"
		name = estonia_events.45.c
		trigger = {
			has_country_flag = { flag = EST_ismaalit_support value > 2 }
		}
		add_stability = 0.1
		add_political_power = 100
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.2
		}
	}
}

country_event = { #Democratic Constitution of Estonia 1/3 - Status of the Executive
	id = estonia_events.46
	title = estonia_events.46.t
	desc = estonia_events.46.d
	picture = GFX_report_event_generic_diplomacy1
	is_triggered_only = yes

	option = { #Executive elected by Riigikogu
		log = "[GetLogInfo]: event estonia_events.46 option estonia_events.46.a"
		name = estonia_events.46.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = EST_path option = DEFAULT } }
				NOT = { has_game_rule = { rule = EST_path option = EST_PATH_SOCCON } }
			}
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.05
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.05
		}
	}
	option = { #Executive elected by popular vote
		log = "[GetLogInfo]: event estonia_events.46 option estonia_events.46.b"
		name = estonia_events.46.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				has_game_rule = { rule = EST_path option = EST_PATH_SOCCON }
			}
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.05
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.05
		}
		add_to_variable = { EST_liberal_constitution = 1 }
	}
}

country_event = { #Democratic Constitution of Estonia 2/3 - Status of the Supreme Court
	id = estonia_events.47
	title = estonia_events.47.t
	desc = estonia_events.47.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = { #Supreme Court approved by Riigikogu
		log = "[GetLogInfo]: event estonia_events.47 option estonia_events.47.a"
		name = estonia_events.47.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = EST_path option = EST_PATH_SOCLIB }
					has_game_rule = { rule = EST_path option = EST_PATH_SOCDEM }
				}
			}
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.05
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.05
		}
	}
	option = { #Supreme Court approved by executive
		log = "[GetLogInfo]: event estonia_events.47 option estonia_events.47.b"
		name = estonia_events.47.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = EST_path option = EST_PATH_SOCCON }
					has_game_rule = { rule = EST_path option = EST_PATH_MARLIB }
				}
			}
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.05
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.05
		}
		add_to_variable = { EST_liberal_constitution = 1 }
	}
}

country_event = { #Democratic Constitution of Estonia 3/3 - Status of the Riigikogu
	id = estonia_events.48
	title = estonia_events.48.t
	desc = estonia_events.48.d
	picture = GFX_report_event_generic_diplomacy1
	is_triggered_only = yes

	option = { #First Past the Post Voting
		log = "[GetLogInfo]: event estonia_events.48 option estonia_events.48.a"
		name = estonia_events.48.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				has_game_rule = { rule = EST_path option = EST_PATH_SOCDEM }
			}
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.05
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.05
		}
	}
	option = { #Proportional Representation Voting
		log = "[GetLogInfo]: event estonia_events.48 option estonia_events.48.b"
		name = estonia_events.48.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = EST_path option = DEFAULT } }
				NOT = { has_game_rule = { rule = EST_path option = EST_PATH_SOCDEM } }
			}
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.05
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.05
		}
		add_to_variable = { EST_liberal_constitution = 1 }
	}
}

country_event = { #Announcing the Democratic Constitution
	id = estonia_events.49
	title = estonia_events.49.t
	desc = {
		text = estonia_events.49.d1
		trigger = {
			check_variable = { EST_liberal_constitution = 0 }
		}
	}
	desc = {
		text = estonia_events.49.d2
		trigger = {
			check_variable = { EST_liberal_constitution = 1 }
		}
	}
	desc = {
		text = estonia_events.49.d3
		trigger = {
			check_variable = { EST_liberal_constitution = 2 }
		}
	}
	desc = {
		text = estonia_events.49.d4
		trigger = {
			check_variable = { EST_liberal_constitution = 3 }
		}
	}

	picture = GFX_report_event_DEN_constitution_day

	trigger = {
		has_elected_government = yes
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event estonia_events.49 option estonia_events.49.a"
		name = estonia_events.49.a
		trigger = {
			check_variable = { EST_liberal_constitution = 0 }
		}
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = social_conservative
					last_election = "[CURRENT_DATE]"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
	}
	option = {
		log = "[GetLogInfo]: event estonia_events.49 option estonia_events.49.b"
		name = estonia_events.49.b
		trigger = {
			check_variable = { EST_liberal_constitution = 1 }
		}
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = market_liberal
					last_election = "[CURRENT_DATE]"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
	}
	option = {
		log = "[GetLogInfo]: event estonia_events.49 option estonia_events.49.c"
		name = estonia_events.49.c
		trigger = {
			check_variable = { EST_liberal_constitution = 2 }
		}
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = social_liberal
					last_election = "[CURRENT_DATE]"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
	}
	option = {
		log = "[GetLogInfo]: event estonia_events.49 option estonia_events.49.d"
		name = estonia_events.49.d
		trigger = {
			check_variable = { EST_liberal_constitution = 3 }
		}
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = social_democrat
					last_election = "[CURRENT_DATE]"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
	}
}

country_event = { #EST asks to join faction
	id = estonia_events.83
	title = estonia_events.83.t
	desc = estonia_events.83.d
	picture = GFX_report_event_generic_diplomacy5

	is_triggered_only = yes

	option = { #Yes
		log = "[GetLogInfo]: event estonia_events.83 option estonia_events.83.a"
		name = estonia_events.83.a
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				tag = GER
				has_government = paternal_autocrat
			}
		}
		if = {
			limit = { has_idea = SCA_nordic_council_idea }
			FROM = { add_ideas = SCA_nordic_council_idea }
		}
		add_to_faction = FROM
		hidden_effect = {
			EST = {
				remove_targeted_decision = { target = GER decision = EST_join_reichspakt }
				remove_targeted_decision = { target = RUS decision = EST_join_moscow_accord }
				remove_targeted_decision = { target = SCA decision = EST_join_nordic_council }
				remove_targeted_decision = { target = SWE decision = EST_join_nordic_council }
				diplomatic_relation = {
					country = LAT
					relation = guarantee
					active = no
				}
				if = {
					limit = {
						has_idea = EST_russian_trade
					}
					swap_ideas = {
						remove_idea = EST_russian_trade
						add_idea = EST_german_trade
					}
				}
			}
			LAT = {
				diplomatic_relation = {
					country = EST
					relation = guarantee
					active = no
				}
			}
		}
	}
	option = { #No
		log = "[GetLogInfo]: event estonia_events.83 option estonia_events.83.b"
		name = estonia_events.83.b
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				tag = RUS
				RUS_is_expansionist = yes
			}
			modifier = {
				add = 100
				tag = GER
				has_government = paternal_autocrat
			}
			modifier = {
				factor = 0
				tag = RUS
				has_game_rule = { rule = EST_forpol option = EST_FORPOL_RUS }
			}
		}
		FROM = { country_event = estonia_events.84 }
	}
}

country_event = { #They said no
	id = estonia_events.84
	title = estonia_events.84.t
	desc = estonia_events.84.d
	picture = GFX_report_event_generic_diplomacy4

	is_triggered_only = yes

	option = { #Yes
		log = "[GetLogInfo]: event estonia_events.84 option estonia_events.84.a"
		name = estonia_events.84.a
		if = {
			limit = { FROM = { tag = GER } }
			set_country_flag = EST_refused_by_germany
			hidden_effect = {
				remove_targeted_decision = { target = GER decision = EST_join_reichspakt }
			}
		}
		if = {
			limit = { FROM = { tag = RUS } }
			set_country_flag = EST_refused_by_russia
			hidden_effect = {
				remove_targeted_decision = { target = RUS decision = EST_join_moscow_accord }
			}
		}
	}
}

country_event = {#Election Event
	id = estonia_events.87
	title = estonia_events.87.t
	desc = estonia_events.87.d
	picture = GFX_report_event_SWE_Elections

	trigger = {
		has_elected_government = yes
	}

	is_triggered_only = yes

	option = {#SocCons Win
		log = "[GetLogInfo]: event estonia_events.87 option estonia_events.87.a"
		name = estonia_events.87.a
		ai_chance = {
			base = 25
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = EST_path option = DEFAULT } }
				NOT = { has_game_rule = { rule = EST_path option = EST_PATH_SOCCON } }
			}
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.2
		}
		set_politics = {
			ruling_party = social_conservative
			elections_allowed = yes
		}
	}
	option = {#MarLibs Win
		log = "[GetLogInfo]: event estonia_events.87 option estonia_events.87.b"
		name = estonia_events.87.b
		ai_chance = {
			base = 25
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = EST_path option = DEFAULT } }
				NOT = { has_game_rule = { rule = EST_path option = EST_PATH_MARLIB } }
			}
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.2
		}
		set_politics = {
			ruling_party = market_liberal
			elections_allowed = yes
		}
	}
	option = {#SocLibs Win
		log = "[GetLogInfo]: event estonia_events.87 option estonia_events.87.c"
		name = estonia_events.87.c
		ai_chance = {
			base = 25
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = EST_path option = DEFAULT } }
				NOT = { has_game_rule = { rule = EST_path option = EST_PATH_SOCLIB } }
			}
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.2
		}
		set_politics = {
			ruling_party = social_liberal
			elections_allowed = yes
		}
	}
	option = {#SocDems Win
		log = "[GetLogInfo]: event estonia_events.87 option estonia_events.87.e"
		name = estonia_events.87.e
		ai_chance = {
			base = 25
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = EST_path option = DEFAULT } }
				NOT = { has_game_rule = { rule = EST_path option = EST_PATH_SOCDEM } }
			}
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.2
		}
		set_politics = {
			ruling_party = social_democrat
			elections_allowed = yes
		}
	}
}
country_event = { #Estonia petitions to join the Nordic Federation
	id = estonia_events.88
	title = estonia_events.88.t
	desc = estonia_events.88.d
	picture = GFX_report_event_SWE_military_meeting

	is_triggered_only = yes

	option = { #Welcome!
		log = "[GetLogInfo]: event estonia_events.88 option estonia_events.88.a"
		name = estonia_events.88.a
		if = {
			limit = { FROM = { has_government = social_democrat } }
			add_to_variable = { SCA.socdem_gov_var = 1 }
		}
		else_if = {
			limit = { FROM = { has_marlib_or_soclib_government = yes } }
			add_to_variable = { SCA.liberal_gov_var = 1 }
		}
		else_if = {
			limit = { FROM = { has_government = social_conservative } }
			add_to_variable = { SCA.soccon_gov_var = 1 }
		}
		FROM = {
			hidden_effect = { every_owned_state = { save_current_factory_count = yes } }
			every_subject_country = {
				set_temp_variable = { target = event_target:colony_country }
				ROOT = { puppet_country_without_changing_government = yes }
			}
			every_core_state = { add_core_of = ROOT }
			every_unit_leader = {
				set_character_flag = EST_leader
				set_nationality = ROOT
			}
		}
		every_state = {
			limit = { is_claimed_by = FROM }
			add_claim_by = ROOT
		}
		annex_country = {
			target = FROM
			transfer_troops = yes
		}
		hidden_effect = { every_owned_state = { restore_previous_factory_count = yes } }
		if = {
			limit = { FROM = { is_ai = no } }
			ROOT = { change_tag_from = FROM }
		}
	}

	option = { #I think not!
		log = "[GetLogInfo]: event estonia_events.88 option estonia_events.88.b"
		name = estonia_events.88.b
		ai_chance = { base = 0 }
		EST = { country_event = estonia_events.89 }
	}
}

country_event = { #Nordic Federation Rejects
	id = estonia_events.89
	title = estonia_events.89.t
	desc = estonia_events.89.d
	picture = GFX_report_event_SWE_military_meeting

	is_triggered_only = yes

	option = { #Gah
		log = "[GetLogInfo]: event estonia_events.89 option estonia_events.89.a"
		name = estonia_events.89.a
	}
}

country_event = { #Hidden event to have PatAuts stay neutral 50% of the time, and others stay neutral if set to by the game rules
	id = estonia_events.90
	title = estonia_events.90.t
	desc = estonia_events.90.d
	picture = GFX_report_event_SWE_military_meeting
	hidden = yes
	is_triggered_only = yes

	option = { #Try to join the MA, and then RP
		log = "[GetLogInfo]: event estonia_events.90 option estonia_events.90.a"
		name = estonia_events.90.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				has_game_rule = { rule = EST_forpol option = EST_FORPOL_NEUT }
			}
		}
	}

	option = { #Always stay neutral
		log = "[GetLogInfo]: event estonia_events.90 option estonia_events.90.b"
		name = estonia_events.90.b
		trigger = { is_ai = yes }
		ai_chance = {
			base = 0
			modifier = {
				add = 50
				has_government = paternal_autocrat
			}
			modifier = {
				add = 50
				has_game_rule = { rule = EST_forpol option = EST_FORPOL_NEUT }
			}
			modifier = {
				add = -50
				OR = {
					has_game_rule = { rule = EST_forpol option = EST_FORPOL_RUS }
					has_game_rule = { rule = EST_forpol option = EST_FORPOL_GER }
				}
			}
		}
		set_country_flag = RUS_alliance_refused_@FROM
		set_country_flag = EST_refused_by_germany
		set_country_flag = EST_refused_by_russia
		hidden_effect = {
			remove_targeted_decision = { target = GER decision = EST_join_reichspakt }
			remove_targeted_decision = { target = RUS decision = EST_join_moscow_accord }
		}
	}
}
