###########################
# Ausgleich Events 3.0
###########################
# By ~mw~
###########################

add_namespace = ausgleich.new

# hidden event to determine AI path (doesn't use on_startup to prevent save determinism)
country_event = {
	id = ausgleich.new.99

	trigger = {
		NOT = { has_global_flag = AUS_AI_ausgleich_pluralism }
		NOT = { has_global_flag = AUS_AI_ausgleich_status_quo }
		NOT = { has_global_flag = AUS_AI_ausgleich_military_occupation }
	}

	hidden = yes
	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.99 option 1"
		ai_chance = { base = 65 }
		set_global_flag = AUS_AI_ausgleich_pluralism
	}
	option = {
		log = "[GetLogInfo]: event ausgleich.new.99 option 2"
		ai_chance = { base = 10 }
		set_global_flag = AUS_AI_ausgleich_status_quo
	}
	option = {
		log = "[GetLogInfo]: event ausgleich.new.99 option 3"
		ai_chance = { base = 25 }
		set_global_flag = AUS_AI_ausgleich_military_occupation
	}
}

### Ausgleich Preparations
country_event = {
	id = ausgleich.new.100
	title = ausgleich.new.100.t
	desc = ausgleich.new.100.d

	trigger = {
		tag = AUS
		is_subject = no
	}

	is_triggered_only = yes

	option = { # very well
		log = "[GetLogInfo]: event ausgleich.new.100 option ausgleich.new.100.a"
		name = ausgleich.new.100.a
		hidden_effect = {
			HUN = {
				country_event = { id = ausgleich.new.101 days = 2 }
			}
			country_event = { id = ausgleich.new.200 days = 2 }

			if = {
				limit = { has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_STATUS_QUO } }
				set_global_flag = AUS_AI_ausgleich_status_quo
			}
			else_if = {
				limit = { has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_PATAUT } }
				set_global_flag = AUS_AI_ausgleich_military_occupation
			}
			else_if = {
				limit = {
					OR = {
						has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR }
						has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_SUCCESS }
					}
				}
				set_global_flag = AUS_AI_ausgleich_pluralism
			}
			else = {
				country_event = { id = ausgleich.new.99 days = 1 }
			}
		}
	}
}

### Hungary receives an invitation
country_event = {
	id = ausgleich.new.101
	title = ausgleich.new.101.t
	desc = ausgleich.new.101.d

	is_triggered_only = yes

	option = { # we'll see what comes of this
		log = "[GetLogInfo]: event ausgleich.new.101 option ausgleich.new.101.a"
		name = ausgleich.new.101.a
		hidden_effect = {
			AUS = {
				country_event = { id = ausgleich.new.102 days = 2 }
			}
		}
	}
}

### Hungary agrees to come
country_event = {
	id = ausgleich.new.102
	title = ausgleich.new.102.t
	desc = ausgleich.new.102.d

	is_triggered_only = yes

	option = { # we'll see what comes of this
		log = "[GetLogInfo]: event ausgleich.new.102 option ausgleich.new.102.a"
		name = ausgleich.new.102.a
	}
}

### Invite not only Hungary?
country_event = {
	id = ausgleich.new.200
	title = ausgleich.new.200.t
	desc = ausgleich.new.200.d

	is_triggered_only = yes

	option = { # No way. This is between us and the Magyars.
		log = "[GetLogInfo]: event ausgleich.new.200 option ausgleich.new.200.a"
		name = ausgleich.new.200.a
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				NOT = { has_global_flag = AUS_AI_ausgleich_status_quo }
			}
		}
		add_political_power = 20
		set_global_flag = AUS_ausgleich_hungary_only
		hidden_effect = {
			country_event = { id = ausgleich.new.300 days = 2 }
		}
	}
	option = { # You are right. Invite the Bohemians, Galicians and Illyrians.
		log = "[GetLogInfo]: event ausgleich.new.200 option ausgleich.new.200.b"
		name = ausgleich.new.200.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				has_global_flag = AUS_AI_ausgleich_status_quo
			}
		}
		add_political_power = -20
		set_global_flag = AUS_ausgleich_kingdoms
		hidden_effect = {
			HUN = {
				country_event = { id = ausgleich.new.201 days = 2 }
			}
			CZE = {
				country_event = { id = ausgleich.new.202 days = 2 }
			}
			GAL = {
				country_event = { id = ausgleich.new.202 days = 2 }
			}
			CRO = {
				country_event = { id = ausgleich.new.202 days = 2 }
			}
			country_event = { id = ausgleich.new.300 days = 2 }
		}
	}
	option = { # You are right. Invite all peoples of the Dual Monarchy.
		log = "[GetLogInfo]: event ausgleich.new.200 option ausgleich.new.200.c"
		name = ausgleich.new.200.c
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				has_global_flag = AUS_AI_ausgleich_status_quo
			}
		}
		add_political_power = -100
		set_global_flag = AUS_ausgleich_peoples
		hidden_effect = {
			HUN = {
				country_event = { id = ausgleich.new.201 days = 2 }
			}
			CZE = {
				country_event = { id = ausgleich.new.202 days = 2 }
			}
			GAL = {
				country_event = { id = ausgleich.new.202 days = 2 }
			}
			CRO = {
				country_event = { id = ausgleich.new.202 days = 2 }
			}
			country_event = { id = ausgleich.new.300 days = 2 }
		}
	}
}

### HUN: Austria invites other delegations to the Ausgleich
country_event = {
	id = ausgleich.new.201

	title = {
		text = ausgleich.new.201.t_kingdoms
		trigger = {
			has_global_flag = AUS_ausgleich_kingdoms
		}
	}
	title = {
		text = ausgleich.new.201.t_peoples
		trigger = {
			has_global_flag = AUS_ausgleich_peoples
		}
	}
	desc = {
		text = ausgleich.new.201.d_kingdoms
		trigger = {
			has_global_flag = AUS_ausgleich_kingdoms
		}
	}
	desc = {
		text = ausgleich.new.201.d_peoples
		trigger = {
			has_global_flag = AUS_ausgleich_peoples
		}
	}

	is_triggered_only = yes

	option = { # formally protest
		log = "[GetLogInfo]: event ausgleich.new.201 option ausgleich.new.201.a"
		name = ausgleich.new.201.a
		ai_chance = { base = 60 }

		#small opinion modifiers
		hidden_effect = {
			AUS = {
				country_event = { id = ausgleich.new.203 days = 2 }
			}
		}
	}
	option = { # boycott the ausgleich
		log = "[GetLogInfo]: event ausgleich.new.201 option ausgleich.new.201.b"
		name = ausgleich.new.201.b
		ai_chance = {
			base = 10
			modifier = {
				factor = 3
				has_global_flag = AUS_ausgleich_peoples
			}
		}

		#heavy opinion modifiers
		set_global_flag = AUS_ausgleich_boycott
		hidden_effect = {
			AUS = {
				country_event = { id = ausgleich.new.203 days = 2 }
			}
		}
	}
	option = { # do nothing
		log = "[GetLogInfo]: event ausgleich.new.201 option ausgleich.new.201.c"
		name = ausgleich.new.201.c
		ai_chance = {
			base = 30
			modifier = {
				factor = 0.5
				has_global_flag = AUS_ausgleich_peoples
			}
		}
	}
}

### BOH/CZE/GAL is invited to the Ausgleich
country_event = {
	id = ausgleich.new.202
	title = ausgleich.new.202.t
	desc = ausgleich.new.202.d
	picture = GFX_report_event_AUS_Ausgleich_prag

	is_triggered_only = yes

	option = { # very good
		log = "[GetLogInfo]: event ausgleich.new.202 option ausgleich.new.202.a"
		trigger = {
			has_global_flag = AUS_ausgleich_kingdoms
		}
		name = ausgleich.new.202.a
		#opinion modifier
		hidden_effect = {
			AUS = {
				country_event = { id = ausgleich.new.203 days = 2 }
			}
		}
	}
	option = { # Agree and send a mixed delegation
		log = "[GetLogInfo]: event ausgleich.new.202 option ausgleich.new.202.b"
		name = ausgleich.new.202.b
		trigger = {
			has_global_flag = AUS_ausgleich_peoples
		}
		#opinion modifier
		hidden_effect = {
			AUS = {
				country_event = { id = ausgleich.new.203 days = 2 }
			}
		}
	}
	option = { # Send a majority-dominated delegation
		log = "[GetLogInfo]: event ausgleich.new.202 option ausgleich.new.202.c"
		name = ausgleich.new.202.c
		trigger = {
			has_global_flag = AUS_ausgleich_peoples
		}
		#opinion modifier
		hidden_effect = {
			AUS = {
				country_event = { id = ausgleich.new.203 days = 2 }
			}
		}
	}
}

### Reactions to the invitations
country_event = {
	id = ausgleich.new.203

	title = {
		text = ausgleich.new.203.t_HUN
		trigger = {
			FROM = { tag = HUN }
		}
	}
	title = {
		text = ausgleich.new.203.t_other
		trigger = {
			NOT = { FROM = { tag = HUN } }
		}
	}
	desc = {
		text = ausgleich.new.203.d_HUN
		trigger = {
			FROM = { tag = HUN }
		}
	}
	desc = {
		text = ausgleich.new.203.d_other
		trigger = {
			NOT = { FROM = { tag = HUN } }
		}
	}

	is_triggered_only = yes

	option = { # It's the way forward
		log = "[GetLogInfo]: event ausgleich.new.203 option ausgleich.new.203.a"
		name = ausgleich.new.203.a
		trigger = {
			FROM = { tag = HUN }
		}
		add_political_power = -10
	}
	option = { # Excellent
		log = "[GetLogInfo]: event ausgleich.new.203 option ausgleich.new.203.b"
		name = ausgleich.new.203.b
		trigger = {
			NOT = { FROM = { tag = HUN } }
		}
		add_political_power = 10
	}
}

#########################
### AUSGLEICH of 1937 ###
#########################

### Ausgleich begins
country_event = {
	id = ausgleich.new.300

	title = {
		text = ausgleich.new.300.t_hungary
		trigger = {
			has_global_flag = AUS_ausgleich_hungary_only
		}
	}
	title = {
		text = ausgleich.new.300.t_delegations_no_boycott
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
		}
	}
	title = {
		text = ausgleich.new.300.t_delegations_boycott
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
		}
	}

	desc = {
		text = ausgleich.new.300.d_hungary
		trigger = {
			has_global_flag = AUS_ausgleich_hungary_only
		}
	}
	desc = {
		text = ausgleich.new.300.d_delegations_no_boycott
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
		}
	}
	desc = {
		text = ausgleich.new.300.d_delegations_boycott
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
		}
	}

	is_triggered_only = yes

	option = { # Excellent
		log = "[GetLogInfo]: event ausgleich.new.300 option ausgleich.new.300.a"
		name = ausgleich.new.300.a
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
		}
		add_political_power = 10
		hidden_effect = {
			country_event = { id = ausgleich.new.310 days = 2 }
		}
	}
	option = { # Excellent
		log = "[GetLogInfo]: event ausgleich.new.300 option ausgleich.new.300.b"
		name = ausgleich.new.300.b
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
		}
		add_political_power = 10
		hidden_effect = {
			country_event = { id = ausgleich.new.312 days = 2 }
		}
	}
}

### Hungarian delegate makes speech
country_event = {
	id = ausgleich.new.310
	title = ausgleich.new.310.t
	desc = ausgleich.new.310.d

	is_triggered_only = yes

	option = { # how insolent
		log = "[GetLogInfo]: event ausgleich.new.310 option ausgleich.new.310.a"
		name = ausgleich.new.310.a
		ai_chance = { base = 1 }
		hidden_effect = {
			country_event = { id = ausgleich.new.311 days = 2 }
		}
	}
	option = { # send him home
		log = "[GetLogInfo]: event ausgleich.new.310 option ausgleich.new.310.b"
		name = ausgleich.new.310.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				has_global_flag = AUS_AI_ausgleich_status_quo
			}
		}
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_kingdoms
			}
			add_political_power = 15
		}
		else_if = {
			limit = {
				has_global_flag = AUS_ausgleich_peoples
			}
			add_political_power = 30
		}
		hidden_effect = {
			country_event = { id = ausgleich.new.311 days = 2 }
		}
	}
	option = { # he's right though, isn't he?
		log = "[GetLogInfo]: event ausgleich.new.310 option ausgleich.new.310.c"
		name = ausgleich.new.310.c
		ai_chance = { base = 0 }
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_kingdoms
			}
			add_political_power = -15
		}
		else_if = {
			limit = {
				has_global_flag = AUS_ausgleich_peoples
			}
			add_political_power = -30
		}
		else_if = {
			limit = {
				has_global_flag = AUS_ausgleich_hungary_only
			}
			set_country_flag = AUS_ausgleich_dualism
		}
		hidden_effect = {
			country_event = { id = ausgleich.new.311 days = 2 }
		}
	}
}

country_event = { #Hungarian Demands - Reparation Payments
	id = ausgleich.new.311
	title = ausgleich.new.311.t
	desc = ausgleich.new.311.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # offer to pay from your own coffers
		log = "[GetLogInfo]: event ausgleich.new.311 option ausgleich.new.311.a"
		name = ausgleich.new.311.a
		ai_chance = { base = 5 }
		set_global_flag = AUS_ausgleich_austrian_payments
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_hungary_only
				}
				country_event = { id = ausgleich.new.320 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.312 days = 2 }
			}
		}
	}
	option = { # the Illyrians should pay (absent)
		log = "[GetLogInfo]: event ausgleich.new.311 option ausgleich.new.311.b"
		name = ausgleich.new.311.b
		trigger = {
			has_global_flag = AUS_ausgleich_hungary_only
		}
		ai_chance = { base = 15 }

		set_global_flag = AUS_ausgleich_illyrian_payments
		set_global_flag = AUS_ausgleich_absent_demands
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_hungary_only
				}
				country_event = { id = ausgleich.new.320 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.312 days = 2 }
			}
		}
	}
	option = { # the Illyrians should pay (present)
		log = "[GetLogInfo]: event ausgleich.new.311 option ausgleich.new.311.c"
		name = ausgleich.new.311.c
		trigger = {
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
		}
		ai_chance = { base = 15 }

		set_global_flag = AUS_ausgleich_illyrian_payments
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_hungary_only
				}
				country_event = { id = ausgleich.new.320 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.312 days = 2 }
			}
		}
	}
	option = { # point out that they pay less taxes
		log = "[GetLogInfo]: event ausgleich.new.311 option ausgleich.new.311.e"
		name = ausgleich.new.311.e
		ai_chance = { base = 80 }
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_hungary_only
				}
				country_event = { id = ausgleich.new.320 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.312 days = 2 }
			}
		}
	}
	option = { # secretly offer them to take back Croatia
		log = "[GetLogInfo]: event ausgleich.new.311 option ausgleich.new.311.f"
		name = ausgleich.new.311.f
		trigger = {
			has_country_flag = AUS_ausgleich_dualism
		}
		ai_chance = { base = 0 }
		set_global_flag = AUS_ausgleich_secret_deal
		every_state = {
			limit = {
				OR = {
					region = 22 #Bohemia
					region = 27 #Hungary
					region = 143 #Northern Balkans
					region = 144 #Transylvania
					is_galicia = yes
					is_core_of = SLO
					is_core_of = CZE
					is_core_of = GAL
					is_core_of = CRO
				}
				NOT = {
					is_core_of = HUN
					is_claimed_by = HUN
				}
			}
			add_claim_by = ROOT
		}
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_hungary_only
				}
				country_event = { id = ausgleich.new.320 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.312 days = 2 }
			}
		}
	}
}

#CZE Demands - Slovakia
country_event = {
	id = ausgleich.new.312
	title = ausgleich.new.312.t
	desc = ausgleich.new.312.d

	is_triggered_only = yes

	option = { #Ask Hungary
		log = "[GetLogInfo]: event ausgleich.new.312 option ausgleich.new.312.a"
		name = ausgleich.new.312.a
		trigger = {
			NOT = { has_global_flag = AUS_ausgleich_boycott }
		}
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				NOT = { has_global_flag = AUS_AI_ausgleich_status_quo }
			}
		}
		hidden_effect = {
			if = {
				limit = { has_global_flag = AUS_ausgleich_peoples }
				country_event = { id = ausgleich.new.315 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.313 days = 2 }
			}
		}
	}
	option = { # Let's do this - Slovak majority territory
		log = "[GetLogInfo]: event ausgleich.new.312 option ausgleich.new.312.b"
		name = ausgleich.new.312.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				has_global_flag = AUS_AI_ausgleich_status_quo
			}
			modifier = {
				factor = 0
				has_global_flag = AUS_ausgleich_boycott
				has_global_flag = AUS_ausgleich_peoples
			}
		}
		set_global_flag = AUS_ausgleich_slovakia
		if = {
			limit = {
				NOT = { has_global_flag = AUS_ausgleich_boycott }
			}
			country_event = ausgleich.new.317
			set_global_flag = AUS_ausgleich_boycott
		}
		71 = { set_state_flag = AUS_to_hungary }
		hidden_effect = {
			if = {
				limit = { has_global_flag = AUS_ausgleich_peoples }
				country_event = { id = ausgleich.new.315 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.313 days = 2 }
			}
		}
	}
	option = { # Let's do this - down to the Danube
		log = "[GetLogInfo]: event ausgleich.new.312 option ausgleich.new.312.c"
		name = ausgleich.new.312.c
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
		}
		ai_chance = { base = 1 }
		set_global_flag = AUS_ausgleich_slovakia
		hidden_effect = {
			if = {
				limit = { has_global_flag = AUS_ausgleich_peoples }
				country_event = { id = ausgleich.new.315 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.313 days = 2 }
			}
		}
	}
}

#GAL demands - Transcarpathia
country_event = {
	id = ausgleich.new.313
	title = ausgleich.new.313.t
	desc = ausgleich.new.313.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { #Ask Hungary
		log = "[GetLogInfo]: event ausgleich.new.313 option ausgleich.new.313.a"
		name = ausgleich.new.313.a
		trigger = {
			NOT = { has_global_flag = AUS_ausgleich_boycott }
		}
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				NOT = { has_global_flag = AUS_AI_ausgleich_status_quo }
			}
		}
		hidden_effect = {
			country_event = { id = ausgleich.new.314 days = 2 }
		}
	}
	option = { # Let's do this
		log = "[GetLogInfo]: event ausgleich.new.313 option ausgleich.new.313.b"
		name = ausgleich.new.313.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				has_global_flag = AUS_AI_ausgleich_status_quo
			}
		}
		set_global_flag = AUS_ausgleich_transcarpathia
		GAL = { add_state_core = 73 }
		if = {
			limit = {
				NOT = {
					has_global_flag = AUS_ausgleich_boycott
				}
			}
			country_event = ausgleich.new.317
			set_global_flag = AUS_ausgleich_boycott
		}
		hidden_effect = {
			country_event = { id = ausgleich.new.314 days = 2 }
		}
	}
}

#CRO demands - Backa
country_event = {
	id = ausgleich.new.314
	title = ausgleich.new.314.t
	desc = ausgleich.new.314.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { #Ask Hungary
		log = "[GetLogInfo]: event ausgleich.new.314 option ausgleich.new.314.a"
		name = ausgleich.new.314.a
		trigger = {
			NOT = { has_global_flag = AUS_ausgleich_boycott }
		}
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				NOT = { has_global_flag = AUS_AI_ausgleich_status_quo }
			}
		}
		hidden_effect = {
			if = {
				limit = { has_global_flag = AUS_ausgleich_peoples }
				country_event = { id = ausgleich.new.316 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.320 days = 2 }
			}
		}
	}
	option = { # Let's do this - Majority territory
		log = "[GetLogInfo]: event ausgleich.new.314 option ausgleich.new.314.b"
		name = ausgleich.new.314.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				has_global_flag = AUS_AI_ausgleich_status_quo
			}
			modifier = {
				factor = 0
				has_global_flag = AUS_ausgleich_boycott
				has_global_flag = AUS_ausgleich_peoples
			}
		}
		set_global_flag = AUS_ausgleich_backa
		if = {
			limit = {
				NOT = { has_global_flag = AUS_ausgleich_boycott }
			}
			country_event = ausgleich.new.317
			set_global_flag = AUS_ausgleich_boycott
		}
		hidden_effect = {
			if = {
				limit = { has_global_flag = AUS_ausgleich_peoples }
				country_event = { id = ausgleich.new.316 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.320 days = 2 }
			}
		}
	}
	option = { # Let's do this - All of the Backa
		log = "[GetLogInfo]: event ausgleich.new.314 option ausgleich.new.314.c"
		name = ausgleich.new.314.c
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
		}
		ai_chance = { base = 1 }
		set_global_flag = AUS_ausgleich_backa
		CRO = { add_state_core = 875 }
		hidden_effect = {
			if = {
				limit = { has_global_flag = AUS_ausgleich_peoples }
				country_event = { id = ausgleich.new.316 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.320 days = 2 }
			}
		}
	}
}

#POL demands
country_event = {
	id = ausgleich.new.315
	title = ausgleich.new.315.t
	desc = ausgleich.new.315.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Interesting
		log = "[GetLogInfo]: event ausgleich.new.315 option ausgleich.new.315.a"
		name = ausgleich.new.315.a
		hidden_effect = {
			country_event = { id = ausgleich.new.313 days = 2 }
		}
	}
}

#ROM demands
country_event = {
	id = ausgleich.new.316
	title = ausgleich.new.316.t
	desc = ausgleich.new.316.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Ask Hungary
		log = "[GetLogInfo]: event ausgleich.new.316 option ausgleich.new.316.a"
		name = ausgleich.new.316.a
		trigger = {
			NOT = { has_global_flag = AUS_ausgleich_boycott }
		}
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				NOT = { has_global_flag = AUS_AI_ausgleich_status_quo }
			}
		}
		hidden_effect = {
			country_event = { id = ausgleich.new.320 days = 2 }
		}
	}
	option = { # Let's do this - Majority territory
		log = "[GetLogInfo]: event ausgleich.new.316 option ausgleich.new.316.b"
		name = ausgleich.new.316.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				has_global_flag = AUS_AI_ausgleich_status_quo
			}
			modifier = {
				factor = 0
				has_global_flag = AUS_ausgleich_boycott
				has_global_flag = AUS_ausgleich_peoples
			}
		}
		set_global_flag = AUS_ausgleich_transylvania
		if = {
			limit = {
				NOT = { has_global_flag = AUS_ausgleich_boycott }
			}
			country_event = ausgleich.new.317
			set_global_flag = AUS_ausgleich_boycott
		}
		hidden_effect = {
			country_event = { id = ausgleich.new.320 days = 2 }
		}
	}
	option = { # Let's do this - All of it
		log = "[GetLogInfo]: event ausgleich.new.316 option ausgleich.new.316.c"
		name = ausgleich.new.316.c
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
		}
		ai_chance = { base = 1 }
		set_global_flag = AUS_ausgleich_transylvania
		set_global_flag = AUS_ausgleich_transylvania_full
		hidden_effect = {
			country_event = { id = ausgleich.new.320 days = 2 }
		}
	}
}

#Hungary boycotts the ausgleich (AUS)
country_event = {
	id = ausgleich.new.317
	title = ausgleich.new.317.t
	desc = ausgleich.new.317.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # That could've gone better
		log = "[GetLogInfo]: event ausgleich.new.317 option ausgleich.new.317.a"
		name = ausgleich.new.317.a
		add_political_power = -50
		set_global_flag = AUS_ausgleich_boycott
		hidden_effect = {
			HUN = { country_event = { id = ausgleich.new.318 days = 2 } }
		}
	}
}

#Hungary boycotts the ausgleich (HUN)
country_event = {
	id = ausgleich.new.318
	title = ausgleich.new.318.t
	desc = ausgleich.new.318.d

	is_triggered_only = yes

	option = { # Good to know.
		log = "[GetLogInfo]: event ausgleich.new.318 option ausgleich.new.318.a"
		name = ausgleich.new.318.a
	}
}

###End of the Ausgleich
country_event = {
	id = ausgleich.new.320
	immediate = { hidden_effect = { HUN = { activate_targeted_decision = { target = GER decision = CZE_join_germany } } } }
	title = ausgleich.new.320.t

	desc = {
		text = ausgleich.new.320.d_hungary_success
		trigger = {
			has_global_flag = AUS_ausgleich_hungary_only
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
		}
	}
	desc = {
		text = ausgleich.new.320.d_hungary_failure
		trigger = {
			has_global_flag = AUS_ausgleich_hungary_only
			has_global_flag = AUS_ausgleich_boycott
		}
	}
	desc = {
		text = ausgleich.new.320.d_other_success
		trigger = {
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
		}
	}
	desc = {
		text = ausgleich.new.320.d_other_failure
		trigger = {
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
			has_global_flag = AUS_ausgleich_boycott
		}
	}

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Great
		log = "[GetLogInfo]: event ausgleich.new.320 option ausgleich.new.320.a"
		name = ausgleich.new.320.a
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
		}
		remove_ideas = AUS_financial_ties_broken
		add_political_power = 50
		complete_national_focus = AUS_ausgleich
		hidden_effect = {
			HUN = {
				country_event = { id = ausgleich.new.321 days = 2 } #Success
			}
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_secret_deal
				}
				HUN = {
					country_event = { id = ausgleich.new.325 days = 2 } #Illyrian Conflict
				}
			}
			else_if = {
				limit = {
					OR = {
						has_global_flag = AUS_ausgleich_illyrian_payments
						has_global_flag = AUS_ausgleich_austrian_payments
					}
				}
				HUN = {
					country_event = { id = ausgleich.new.322 days = 2 } #Payments
				}
			}
			if = {
				limit = {
					OR = {
						has_global_flag = AUS_ausgleich_backa
						has_global_flag = AUS_ausgleich_transcarpathia
						has_global_flag = AUS_ausgleich_transylvania
						has_global_flag = AUS_ausgleich_slovakia
					}
				}
				CZE = {
					country_event = { id = ausgleich.new.332 days = 2 }
				}
				GAL = {
					country_event = { id = ausgleich.new.332 days = 2 }
				}
				CRO = {
					country_event = { id = ausgleich.new.332 days = 2 }
				}
				HUN = {
					country_event = { id = ausgleich.new.340 days = 2 } #Riots
				}
			}
		}
	}
	option = { # Could have been worse...
		log = "[GetLogInfo]: event ausgleich.new.320 option ausgleich.new.320.b"
		name = ausgleich.new.320.b
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
		}
		add_political_power = -50
		complete_national_focus = AUS_ausgleich
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_secret_deal
				}
				HUN = {
					country_event = { id = ausgleich.new.325 days = 2 } #Illyrian Conflict
				}
			}
			else_if = {
				limit = {
					OR = {
						has_global_flag = AUS_ausgleich_illyrian_payments
						has_global_flag = AUS_ausgleich_austrian_payments
					}
				}
				HUN = {
					country_event = { id = ausgleich.new.322 days = 2 } #Payments
				}
			}
			if = {
				limit = {
					OR = {
						has_global_flag = AUS_ausgleich_backa
						has_global_flag = AUS_ausgleich_transcarpathia
						has_global_flag = AUS_ausgleich_transylvania
						has_global_flag = AUS_ausgleich_slovakia
					}
				}
				CZE = {
					country_event = { id = ausgleich.new.332 days = 2 }
				}
				GAL = {
					country_event = { id = ausgleich.new.332 days = 2 }
				}
				CRO = {
					country_event = { id = ausgleich.new.332 days = 2 }
				}
				HUN = {
					country_event = { id = ausgleich.new.340 days = 2 } #Riots
				}
			}
		}
	}
}

#Success at the Ausgleich (HUN)
country_event = {
	id = ausgleich.new.321
	title = ausgleich.new.321.t
	desc = ausgleich.new.321.d

	is_triggered_only = yes

	option = { # Well, what can you do
		log = "[GetLogInfo]: event ausgleich.new.321 option ausgleich.new.321.a"
		name = ausgleich.new.321.a
		remove_ideas = HUN_financial_ties_broken
	}
}

#HUN demands payments
country_event = {
	id = ausgleich.new.322
	title = ausgleich.new.322.t
	desc = ausgleich.new.322.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Send the demands
		log = "[GetLogInfo]: event ausgleich.new.322 option ausgleich.new.322.a"
		name = ausgleich.new.322.a
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_illyrian_payments
					has_global_flag = AUS_ausgleich_absent_demands
				}
				CRO = {
					country_event = { id = ausgleich.new.325 days = 2 }
				}
			}
			else_if = {
				limit = {
					has_global_flag = AUS_ausgleich_illyrian_payments
					NOT = {
						has_global_flag = AUS_ausgleich_absent_demands
					}
				}
				CRO = {
					country_event = { id = ausgleich.new.323 days = 2 }
				}
			}
			else = {
				AUS = {
					country_event = { id = ausgleich.new.323 days = 2 }
				}
			}
		}
	}
}

#AUS/CRO receives demand for agreed payments
country_event = {
	id = ausgleich.new.323
	title = ausgleich.new.323.t
	desc = ausgleich.new.323.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Well, can't do a thing.
		log = "[GetLogInfo]: event ausgleich.new.323 option ausgleich.new.323.a"
		name = ausgleich.new.323.a
		add_timed_idea = {
			idea = AUS_paid_reparations
			days = 365
		}
		hidden_effect = {
			HUN = {
				country_event = { id = ausgleich.new.324 days = 2 }
			}
		}
	}
}

#HUN receives reparations
country_event = {
	id = ausgleich.new.324
	title = ausgleich.new.324.t
	desc = ausgleich.new.324.d

	is_triggered_only = yes

	option = { # Good to know.
		log = "[GetLogInfo]: event ausgleich.new.324 option ausgleich.new.324.a"
		name = ausgleich.new.324.a
	}
}

###Illyrian Conflict (CRO)
country_event = {
	id = ausgleich.new.325
	title = ausgleich.new.325.t
	desc = ausgleich.new.325.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Wait, what?
		log = "[GetLogInfo]: event ausgleich.new.325 option ausgleich.new.325.a"
		name = ausgleich.new.325.a
		ai_chance = {
			base = 80
			modifier = {
				factor = 0
				has_global_flag = AUS_AI_ausgleich_status_quo
			}
		}
		hidden_effect = {
			HUN = {
				country_event = { id = ausgleich.new.326 days = 2 }
			}
		}
	}
	option = { # If that has been decided...
		log = "[GetLogInfo]: event ausgleich.new.325 option ausgleich.new.325.b"
		name = ausgleich.new.325.b
		ai_chance = {
			base = 20
			modifier = {
				factor = 0
				has_global_flag = AUS_ausgleich_secret_deal
			}
		}
		add_timed_idea = {
			idea = AUS_paid_reparations
			days = 365
		}
		hidden_effect = {
			HUN = {
				country_event = { id = ausgleich.new.324 days = 2 }
			}
		}
	}
}

#CRO refuses annexation (HUN)
country_event = {
	id = ausgleich.new.326
	title = ausgleich.new.326.t
	desc = ausgleich.new.326.d

	is_triggered_only = yes

	option = { # Well, let's do this then
		log = "[GetLogInfo]: event ausgleich.new.326 option ausgleich.new.326.a"
		name = ausgleich.new.326.a
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				has_global_flag = AUS_AI_ausgleich_status_quo
			}
		}
		AUS = {
			set_autonomy = {
				target = HUN
				autonomy_state = autonomy_free
			}
			set_autonomy = {
				target = CRO
				autonomy_state = autonomy_free
			}
		}
		hidden_effect = {
			AUS = {
				country_event = { id = ausgleich.new.328 days = 2 }
			}
			CRO = {
				set_cosmetic_tag = CRO_illyria
				leave_faction = yes
				set_rule = { can_not_declare_war = no }
				separate_peace_all_wars = yes
				GER_remove_from_mitteleuropa = yes
				country_event = ausgleich.new.327
				every_owned_state = {
					teleport_armies = {
						limit = { NOT = { tag = CRO } }
						to_state_array = owned_controlled_states
					}
				}
			}
			remove_ideas = HUN_financial_ties_broken
			every_state = {
				limit = {
					owner = { is_ally_with = AUS }
				}
				teleport_armies = {
					limit = { tag = CRO }
					to_state = 109
				}
			}
		}
		declare_war_on = {
			target = CRO
			type = civil_war
		}
	}
	option = { # Well, can't do anything about it
		log = "[GetLogInfo]: event ausgleich.new.326 option ausgleich.new.326.b"
		name = ausgleich.new.326.b
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				has_global_flag = AUS_AI_ausgleich_status_quo
			}
		}
	}
}

#HUN declares war (CRO)
country_event = {
	id = ausgleich.new.327
	title = ausgleich.new.327.t
	desc = ausgleich.new.327.d

	is_triggered_only = yes

	option = { # Crap.
		log = "[GetLogInfo]: event ausgleich.new.327 option ausgleich.new.327.a"
		name = ausgleich.new.327.a
	}
}

#HUN declares war (AUS)
country_event = {
	id = ausgleich.new.328
	title = ausgleich.new.328.t
	desc = ausgleich.new.328.d

	is_triggered_only = yes

	option = { # This is outrageous.
		log = "[GetLogInfo]: event ausgleich.new.328 option ausgleich.new.328.a"
		name = ausgleich.new.328.a
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				has_global_flag = AUS_ausgleich_secret_deal
			}
		}
		hidden_effect = {
			random_other_country = {
				news_event = { id = worldnews.7 days = 1 }
			}
			set_autonomy = {
				target = HUN
				autonomy_state = autonomy_free
			}
			HUN = {
				drop_cosmetic_tag = yes
				leave_faction = yes
				every_owned_state = {
					teleport_armies = {
						limit = { is_ally_with = AUS }
						to_state_array = owned_controlled_states
					}
				}
				HUN_remove_joseph_august = yes
				set_politics = {
					ruling_party = social_conservative
					last_election = "1888.6.15"
					election_frequency = 48
					elections_allowed = no
				}
				add_popularity = {
					ideology = social_conservative
					popularity = 0.2
				}
			}
			CRO = {
				set_cosmetic_tag = CRO_illyria_habsburg
				get_current_government_type = yes
			}
			set_autonomy = {
				target = CRO
				autonomy_state = crownland
				end_wars = no
			}
			CRO = { restore_previous_government_type = yes }
			every_state = {
				limit = {
					owner = {
						is_ally_with = AUS
						NOT = { has_war_with = HUN }
					}
				}
				teleport_armies = {
					limit = { tag = HUN }
					to_state = 43
				}
			}
		}
		add_ideas = AUS_crownland_revolt
		declare_war_on = {
			target = HUN
			type = civil_war
		}
		hidden_effect = { add_civil_war_target = HUN }
	}
	option = { # Leave them to it
		log = "[GetLogInfo]: event ausgleich.new.328 option ausgleich.new.328.b"
		name = ausgleich.new.328.b
		ai_chance = { base = 0 }
		trigger = {
			NOT = { has_global_flag = AUS_ausgleich_secret_deal }
		}
		add_political_power = -200
	}
	option = { # It's happening
		log = "[GetLogInfo]: event ausgleich.new.328 option ausgleich.new.328.c"
		name = ausgleich.new.328.c
		trigger = {
			has_global_flag = AUS_ausgleich_secret_deal
		}
		hidden_effect = {
			HUN = {
				set_cosmetic_tag = HUN_habsburg
				get_current_government_type = yes
			}
			set_autonomy = {
				target = HUN
				autonomy_state = crownland
				end_wars = no
			}
			HUN = { restore_previous_government_type = yes }
			CRO = {
				every_owned_state = {
					teleport_armies = {
						limit = { is_ally_with = AUS }
						to_state_array = owned_controlled_states
					}
				}
			}
			CZE = {
				country_event = { id = ausgleich.new.900 days = 2 }
			}
			GAL = {
				country_event = { id = ausgleich.new.900 days = 3 }
			}
			random_other_country = {
				news_event = { id = worldnews.7 days = 1 }
			}
		}
		declare_war_on = {
			target = CRO
			type = civil_war
		}
		hidden_effect = {
			add_civil_war_target = CRO
			HUN = { add_civil_war_target = CRO }
		}
	}
}

#CRO annexation mission
country_event = {
	id = ausgleich.new.330
	title = ausgleich.new.330.t
	desc = ausgleich.new.330.d

	trigger = {
		OR = {
			owns_state = 109
			HUN = { owns_state = 109 }
		}
	}

	is_triggered_only = yes

	option = { # Restore the 1921 borders
		log = "[GetLogInfo]: event ausgleich.new.330 option ausgleich.new.330.a"
		name = ausgleich.new.330.a
		if = {
			limit = { has_subject = 163.owner }
			163 = {
				set_state_owner_to = ROOT
				set_state_province_controller = {
					controller = owner
					limit = { NOT = { has_war_with = PREV.owner } }
				}
			}
		}
		every_state = {
			limit = {
				is_owned_by_ROOT_or_subject = yes
				NOT = { is_owned_by = HUN }
				OR = {
					state = 103
					state = 109
					state = 794
				}
			}
			set_state_owner_to = HUN
			set_state_province_controller = {
				controller = owner
				limit = { NOT = { has_war_with = PREV.owner } }
			}
		}
		set_temp_variable = { tag_to_release = BOS }
		every_owned_state = {
			limit = {
				is_core_of = var:tag_to_release
				NOT = { is_core_of = ROOT }
			}
			transfer_state_without_overriding_occupation = yes
		}
		puppet_released_tag = yes
		set_autonomy = {
			target = var:tag_to_release
			autonomy_state = crownland
			end_wars = no
		}
		hidden_effect = {
			var:tag_to_release = { set_cosmetic_tag = BOS_habsburg }
		}
	}
	option = { # Croatia-Slavonia to Hungary, Illyrian Condominium
		log = "[GetLogInfo]: event ausgleich.new.330 option ausgleich.new.330.b"
		name = ausgleich.new.330.b
		every_state = {
			limit = {
				is_owned_by_ROOT_or_subject = yes
				NOT = { is_owned_by = HUN }
				OR = {
					state = 103
					state = 109
					state = 794
				}
			}
			set_state_owner_to = HUN
			set_state_province_controller = {
				controller = owner
				limit = { NOT = { has_war_with = PREV.owner } }
			}
		}
		set_temp_variable = { tag_to_release = CRO }
		every_owned_state = {
			limit = {
				is_core_of = var:tag_to_release
				NOT = { is_core_of = ROOT }
			}
			transfer_state_without_overriding_occupation = yes
		}
		puppet_released_tag = yes
		set_autonomy = {
			target = var:tag_to_release
			autonomy_state = crownland
			end_wars = no
		}
		hidden_effect = {
			var:tag_to_release = { set_cosmetic_tag = CRO_illyria_habsburg }
		}
	}
	option = { # Occupy the whole thing for now
		log = "[GetLogInfo]: event ausgleich.new.330 option ausgleich.new.330.c"
		name = ausgleich.new.330.c
		every_state = {
			limit = {
				owner = { is_subject_of = ROOT }
				OR = {
					state = 103
					state = 104
					state = 105
					state = 109
					state = 163
					state = 794
				}
			}
			set_state_owner_to = ROOT
			set_state_province_controller = {
				controller = owner
				limit = { NOT = { has_war_with = PREV.owner } }
			}
		}
		HUN = {
			country_event = { id = ausgleich.new.331 days = 2 }
		}
	}
}

#Austria breaks secret deal (HUN)
country_event = {
	id = ausgleich.new.331
	title = ausgleich.new.331.t
	desc = ausgleich.new.331.d

	is_triggered_only = yes

	option = { # They can't do that!
		log = "[GetLogInfo]: event ausgleich.new.331 option ausgleich.new.331.a"
		name = ausgleich.new.331.a
		AUS = {
			set_autonomy = {
				target = HUN
				autonomy_state = autonomy_free
			}
		}
		hidden_effect = {
			HUN_remove_joseph_august = yes
		}
		set_politics = {
			ruling_party = social_conservative
			last_election = "1888.6.15"
			election_frequency = 48
			elections_allowed = no
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.2
		}
		hidden_effect = {
			drop_cosmetic_tag = yes
			leave_faction = yes
			set_rule = { can_not_declare_war = no }
			separate_peace_all_wars = yes
			GER_remove_from_mitteleuropa = yes
			every_owned_state = {
				teleport_armies = {
					limit = { is_ally_with = AUS }
					to_state_array = owned_controlled_states
				}
			}
			every_state = {
				limit = { owner = { is_ally_with = AUS } }
				teleport_armies = {
					limit = { tag = HUN }
					to_state = 43
				}
			}
		}
		declare_war_on = {
			target = AUS
			type = civil_war
		}
		hidden_effect = { add_civil_war_target = AUS }
	}
}

#Notify Ausgleich results to CZE/GAL/CRO
country_event = {
	id = ausgleich.new.332
	title = ausgleich.new.332.t

	desc = {
		text = ausgleich.new.332.d_no_claims
		trigger = {
			OR = {
				AND = {
					tag = CZE
					NOT = {
						has_global_flag = AUS_ausgleich_slovakia
					}
				}
				AND = {
					tag = GAL
					NOT = {
						has_global_flag = AUS_ausgleich_transcarpathia
					}
				}
				AND = {
					tag = CRO
					NOT = {
						has_global_flag = AUS_ausgleich_backa
					}
				}
			}
		}
	}
	desc = {
		text = ausgleich.new.332.d_claims
		trigger = {
			OR = {
				AND = {
					tag = CZE
					has_global_flag = AUS_ausgleich_slovakia
				}
				AND = {
					tag = GAL
					has_global_flag = AUS_ausgleich_transcarpathia
				}
				AND = {
					tag = CRO
					has_global_flag = AUS_ausgleich_backa
				}
			}
		}
	}

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Certainly a valuable lesson for them.
		log = "[GetLogInfo]: event ausgleich.new.332 option ausgleich.new.332.a"
		name = ausgleich.new.332.a
		trigger = {
			OR = {
				AND = {
					tag = CZE
					NOT = {
						has_global_flag = AUS_ausgleich_slovakia
					}
				}
				AND = {
					tag = GAL
					NOT = {
						has_global_flag = AUS_ausgleich_transcarpathia
					}
				}
				AND = {
					tag = CRO
					NOT = {
						has_global_flag = AUS_ausgleich_backa
					}
				}
			}
		}
	}
	option = { # Great!
		log = "[GetLogInfo]: event ausgleich.new.332 option ausgleich.new.332.a"
		name = ausgleich.new.332.a
		trigger = {
			OR = {
				AND = {
					tag = CZE
					has_global_flag = AUS_ausgleich_slovakia
				}
				AND = {
					tag = GAL
					has_global_flag = AUS_ausgleich_transcarpathia
				}
				AND = {
					tag = CRO
					has_global_flag = AUS_ausgleich_backa
				}
			}
		}

		add_political_power = 100
		if = {
			limit = {
				tag = CZE
			}
			add_ideas = CZE_ausgleich_slovak_state
		}
		else_if = {
			limit = {
				tag = GAL
			}
			add_ideas = GAL_ausgleich_transcarpathian_claims
		}
		else = {
			add_ideas = CRO_ausgleich_backan_claims
		}
	}
}

#Austria notified of CZE/GAL betrayal
country_event = {
	id = ausgleich.new.333
	title = ausgleich.new.333.t
	desc = ausgleich.new.333.d

	is_triggered_only = yes

	option = { # How dare they!
		log = "[GetLogInfo]: event ausgleich.new.333 option ausgleich.new.333.a"
		name = ausgleich.new.333.a
		add_political_power = -15
	}
}

### Austrian Civil War
#Demonstrations in Hungary
country_event = {
	id = ausgleich.new.340
	title = ausgleich.new.340.t
	desc = ausgleich.new.340.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			AUS = {
				country_event = { id = ausgleich.new.341 days = 2 }
			}
		}
	}

	option = { # Good to know.
		log = "[GetLogInfo]: event ausgleich.new.340 option ausgleich.new.340.a"
		name = ausgleich.new.340.a
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_slovakia
			}
			add_timed_idea = {
				idea = HUN_slovak_demonstrations
				days = 365
			}
		}
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_transylvania
			}
			add_timed_idea = {
				idea = HUN_transylvanian_demonstrations
				days = 365
			}
		}
	}
}

#Protests put down violently (AUS)
country_event = {
	id = ausgleich.new.341
	title = ausgleich.new.341.t
	desc = ausgleich.new.341.d

	is_triggered_only = yes

	option = { # Demand the Hungarians cede the territories
		log = "[GetLogInfo]: event ausgleich.new.341 option ausgleich.new.341.a"
		name = ausgleich.new.341.a
		ai_chance = { base = 100 }
		HUN = {
			country_event = { id = ausgleich.new.342 days = 2 }
		}
	}
	option = { # do nothing
		log = "[GetLogInfo]: event ausgleich.new.341 option ausgleich.new.341.b"
		name = ausgleich.new.341.b
		ai_chance = { base = 0 }
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_slovakia
				has_global_flag = AUS_ausgleich_transylvania
			}
			add_political_power = -120
		}
		else = {
			add_political_power = -60
		}
	}
}

#Austrian ultimatum (HUN)
country_event = {
	id = ausgleich.new.342
	title = ausgleich.new.342.t
	desc = ausgleich.new.342.d

	is_triggered_only = yes

	option = { # Do as they say.
		log = "[GetLogInfo]: event ausgleich.new.342 option ausgleich.new.342.a"
		name = ausgleich.new.342.a
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_SUCCESS }
			}
		}

		add_political_power = -100
		AUS = {
			country_event = { id = ausgleich.new.343 days = 2 }
		}
	}
	option = { # No way.
		log = "[GetLogInfo]: event ausgleich.new.342 option ausgleich.new.342.b"
		name = ausgleich.new.342.b
		trigger = {
			has_capitulated = no
		}
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_SUCCESS }
			}
		}

		AUS = {
			country_event = { id = ausgleich.new.344 days = 2 }
		}
	}
}

#Hungary accepts ultimatum (AUS)
country_event = {
	id = ausgleich.new.343
	title = ausgleich.new.343.t
	desc = ausgleich.new.343.d

	is_triggered_only = yes

	option = { # Great.
		log = "[GetLogInfo]: event ausgleich.new.343 option ausgleich.new.343.a"
		name = ausgleich.new.343.a
		set_temp_variable = { target = ROOT }
		HUN = {
			every_owned_state = {
				limit = {
					OR = {
						is_claimed_by = ROOT
						is_core_of = SLO
						AND = {
							is_core_of = TRS
							OR = {
								has_global_flag = AUS_ausgleich_transylvania_full
								NOT = {
									state = 82 #Banat
									state = 83 #Partium
									state = 875 #West Banat
								}
							}
						}
					}
				}
				remove_core_of = PREV
				transfer_state_during_war = yes
			}
			if = {
				limit = { has_idea = HUN_slovak_demonstrations }
				remove_ideas = HUN_slovak_demonstrations
			}
			if = {
				limit = { has_idea = HUN_transylvanian_demonstrations }
				remove_ideas = HUN_transylvanian_demonstrations
			}
		}
		hidden_effect = {
			CRO = {
				every_owned_state = { remove_claim_by = HUN }
			}
			TRS = { set_cosmetic_tag = TRS_habsburg }
			SLO = { set_cosmetic_tag = SLO_habsburg }
		}
	}
}

#Hungary refuses ultimatum (AUS)
country_event = {
	id = ausgleich.new.344
	title = ausgleich.new.344.t
	desc = ausgleich.new.344.d

	is_triggered_only = yes

	option = { # you know what this means!
		log = "[GetLogInfo]: event ausgleich.new.344 option ausgleich.new.344.a"
		name = ausgleich.new.344.a
		ai_chance = { base = 100 }
		set_autonomy = {
			target = HUN
			autonomy_state = autonomy_free
		}
		hidden_effect = {
			news_event = { id = worldnews.7 days = 1 }
			HUN = {
				drop_cosmetic_tag = yes
				leave_faction = yes
				every_owned_state = {
					add_claim_by = ROOT
					teleport_armies = {
						limit = { is_ally_with = AUS }
						to_state_array = owned_controlled_states
					}
				}
				HUN_remove_joseph_august = yes
				set_politics = {
					ruling_party = social_conservative
					last_election = "1888.6.15"
					election_frequency = 48
					elections_allowed = no
				}
				add_popularity = {
					ideology = social_conservative
					popularity = 0.2
				}
				set_rule = { can_not_declare_war = no }
				separate_peace_all_wars = yes
				GER_remove_from_mitteleuropa = yes
				if = {
					limit = { NOT = { has_idea = HUN_financial_ties_broken } }
					add_ideas = HUN_financial_ties_broken
				}
				every_owned_state = {
					teleport_armies = {
						limit = { is_ally_with = AUS }
						to_state_array = owned_controlled_states
					}
				}
			}
			every_state = {
				limit = {
					owner = { is_ally_with = AUS }
				}
				teleport_armies = {
					limit = { tag = HUN }
					to_state = 43
				}
			}
		}
		declare_war_on = {
			target = HUN
			type = civil_war
		}
		hidden_effect = { add_civil_war_target = HUN }
		CZE = {
			add_to_war = {
				targeted_alliance = AUS
				enemy = HUN
			}
			hidden_effect = { add_civil_war_target = HUN }
		}
		GAL = {
			add_to_war = {
				targeted_alliance = AUS
				enemy = HUN
			}
			hidden_effect = { add_civil_war_target = HUN }
		}
		CRO = {
			add_to_war = {
				targeted_alliance = AUS
				enemy = HUN
			}
			hidden_effect = { add_civil_war_target = HUN }
		}
	}

	option = { # oh well.
		log = "[GetLogInfo]: event ausgleich.new.344 option ausgleich.new.344.b"
		name = ausgleich.new.344.b
		ai_chance = { base = 0 }
		add_political_power = -40
	}
}

###Integration of the Constituents
country_event = {
	id = ausgleich.new.700
	title = ausgleich.new.700.t
	desc = ausgleich.new.700.d

	is_triggered_only = yes

	option = { #okay
		log = "[GetLogInfo]: event ausgleich.new.700 option ausgleich.new.700.a"
		name = ausgleich.new.700.a
		ai_chance = { base = 100 }
		add_political_power = -100
		AUS = {
			country_event = { id = ausgleich.new.701 days = 2 }
		}
	}
	option = { #no
		log = "[GetLogInfo]: event ausgleich.new.700 option ausgleich.new.700.b"
		name = ausgleich.new.700.b
		ai_chance = { base = 0 }
		add_political_power = -100
	}
	option = { #independence
		log = "[GetLogInfo]: event ausgleich.new.700 option ausgleich.new.700.c"
		name = ausgleich.new.700.c
		ai_chance = { base = 0 }
		add_political_power = -300
		hidden_effect = {
			set_rule = { can_not_declare_war = no }
			GER_remove_from_mitteleuropa = yes
			separate_peace_all_wars = yes
		}
		declare_war_on = {
			target = AUS
			type = civil_war
		}
		if = {
			limit = { has_cosmetic_tag = CRO_illyria_habsburg }
			set_cosmetic_tag = CRO_illyria
		}
		else = {
			drop_cosmetic_tag = yes
		}
	}
}

country_event = { #integrating the subjects
	id = ausgleich.new.701
	title = ausgleich.new.701.t
	desc = ausgleich.new.701.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.701 option ausgleich.new.701.a"
		name = ausgleich.new.701.a
		add_political_power = 20
		FROM = {
			every_core_state = {
				limit = {
					OR = {
						is_owned_by = ROOT
						owner = { has_autonomy_state = crownland }
					}
				}
				add_core_of = ROOT
			}
			if = {
				limit = { tag = HUN }
				HUN_remove_joseph_august = yes
			}
			else_if = {
				limit = { tag = GAL }
				GAL_remove_karl_albrecht = yes
			}
			delete_unit = { disband = yes }
		}
		annex_country = {
			target = FROM
			transfer_troops = yes
		}
		if = {
			limit = { has_idea = AUS_military_integration }
			modify_timed_idea = {
				idea = AUS_military_integration
				days = 90
			}
		}
		else = {
			add_timed_idea = {
				idea = AUS_military_integration
				days = 120
			}
		}
	}
}

country_event = { #ROM attacks revolter HUN
	id = ausgleich.new.702
	title = ausgleich.new.702.t
	desc = ausgleich.new.702.d

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.702 option ausgleich.new.702.a"
		name = ausgleich.new.702.a
		ai_chance = {
			base = 100
			modifier = {
				add = -75
				surrender_progress > 0.4
			}
			modifier = {
				add = -50
				any_enemy_country = {
					is_actual_major = yes
				}
			}
		}
		declare_war_on = {
			target = FROM
			type = annex_everything
		}
	}

	option = {
		log = "[GetLogInfo]: event ausgleich.new.702 option ausgleich.new.702.b"
		name = ausgleich.new.702.b
		ai_chance = {
			base = 0
			modifier = {
				add = 75
				surrender_progress > 0.4
			}
			modifier = {
				add = 50
				any_enemy_country = {
					is_actual_major = yes
				}
			}
		}
		add_political_power = -100
	}
}

### Austrian Collapse events ###

country_event = { #MilOcc revolts
	id = ausgleich.new.900

	title = {
		text = ausgleich.new.900.t.CRO
		trigger = { tag = CRO }
	}
	title = {
		text = ausgleich.new.900.t.CZE_broken_promise
		trigger = {
			tag = CZE
			NOT = { country_exists = HUN }
		}
	}
	title = {
		text = ausgleich.new.900.t.CZE_secret_deal
		trigger = {
			tag = CZE
			country_exists = HUN
		}
	}
	title = {
		text = ausgleich.new.900.t.GAL_broken_promise
		trigger = {
			tag = GAL
			NOT = { country_exists = HUN }
		}
	}
	title = {
		text = ausgleich.new.900.t.GAL_secret_deal
		trigger = {
			tag = GAL
			country_exists = HUN
		}
	}

	desc = {
		text = ausgleich.new.900.d.CRO
		trigger = { tag = CRO }
	}
	desc = {
		text = ausgleich.new.900.d.CZE_broken_promise
		trigger = {
			tag = CZE
			NOT = { country_exists = HUN }
		}
	}
	desc = {
		text = ausgleich.new.900.d.CZE_secret_deal
		trigger = {
			tag = CZE
			country_exists = HUN
		}
	}
	desc = {
		text = ausgleich.new.900.d.GAL_broken_promise
		trigger = {
			tag = GAL
			NOT = { country_exists = HUN }
		}
	}
	desc = {
		text = ausgleich.new.900.d.GAL_secret_deal
		trigger = {
			tag = GAL
			country_exists = HUN
		}
	}

	picture = GFX_report_event_generic_towar

	trigger = {
		is_subject_of = AUS
	}

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			XXA = {
				every_character = {
					limit = { has_character_flag = CZE_character }
					set_nationality = CZE
				}
			}
		}
	}

	option = { # yes.
		log = "[GetLogInfo]: event ausgleich.new.900 option ausgleich.new.900.a"
		name = ausgleich.new.900.a
		if = {
			limit = { tag = CZE }
			CZE_change_portraits = yes
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = characters_will_be_recruited
			character_list_tooltip = {
				limit = { has_character_flag = CZE_character }
			}
			unlock_decision_tooltip = CZE_join_belgrade_pact
			custom_effect_tooltip = tooltip_white_line
		}
		else_if = {
			limit = { tag = GAL }
			GAL_remove_karl_albrecht = yes
			GAL_wladyslaw_sikorski = {
				promote_leader = yes
				set_portraits = {
					army = {
						large = "gfx/leaders/GAL/Portrait_GAL_Wladyslaw_Sikorski_POL.png"
					}
				}
			}
			set_portraits = {
				character = GAL_stanislaw_szeptycki
				army = {
					large = "gfx/leaders/GAL/Portrait_GAL_Stanislaw_Szeptycki_POL.png"
				}
			}
			set_portraits = {
				character = GAL_franciszek_kleeberg
				army = {
					large = "gfx/leaders/GAL/Portrait_GAL_Franciszek_Kleeberg_POL.png"
				}
			}
			set_portraits = {
				character = GAL_tadeusz_kutrzeba
				army = {
					large = "gfx/leaders/GAL/Portrait_GAL_Tadeusz_Kutrzeba_POL.png"
				}
			}
			set_portraits = {
				character = GAL_dmytro_vitovskyi
				army = {
					large = "gfx/leaders/GAL/Portrait_GAL_Dmytro_Vitovskyi_UKR.png"
				}
			}
		}
		hidden_effect = {
			if = {
				limit = { has_cosmetic_tag = CRO_illyria_habsburg }
				set_cosmetic_tag = CRO_illyria
			}
			else = {
				drop_cosmetic_tag = yes
			}
			leave_faction = yes
			every_owned_state = {
				teleport_armies = {
					limit = { is_ally_with = AUS }
					to_state_array = owned_controlled_states
				}
			}
			every_state = {
				limit = {
					owner = { is_ally_with = AUS }
				}
				teleport_armies = {
					limit = { tag = ROOT }
					to_state_array = owned_controlled_states
				}
			}
			set_rule = { can_not_declare_war = no }
			separate_peace_all_wars = yes
		}
		AUS = {
			set_autonomy = {
				target = ROOT
				autonomy_state = autonomy_free
			}
			country_event = ausgleich.new.9000
		}
	}
}

country_event = { #MilOcc revolts (for AUS)
	id = ausgleich.new.9000

	title = {
		text = ausgleich.new.9000.t.occupation
		trigger = { NOT = { country_exists = HUN } }
	}
	title = {
		text = ausgleich.new.9000.t.secret_deal
		trigger = { country_exists = HUN }
	}

	desc = {
		text = ausgleich.new.9000.d.CZE
		trigger = { FROM = { tag = CZE } }
	}
	desc = {
		text = ausgleich.new.9000.d.GAL
		trigger = { FROM = { tag = GAL } }
	}
	desc = {
		text = ausgleich.new.9000.d.CRO
		trigger = { FROM = { tag = CRO } }
	}

	picture = GFX_report_event_ger_civil_war

	trigger = {
		can_declare_war_on = FROM
	}

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			FROM = {
				declare_war_on = {
					target = ROOT #inverted to account for guarantees
					type = annex_everything
				}
			}
			add_civil_war_target = FROM
			if = {
				limit = { has_subject = HUN }
				HUN = {
					add_to_war = {
						targeted_alliance = ROOT
						enemy = FROM
					}
				}
			}
			if = {
				limit = { FROM = { tag = CZE } }
				CZE = {
					if = {
						limit = { country_exists = BPL }
						activate_targeted_decision = { target = BPL decision = CZE_join_belgrade_pact }
						activate_targeted_decision = { target = BPL decision = CZE_leave_belgrade_pact }
					}
					activate_targeted_decision = { target = GER decision = CZE_join_germany }
					activate_targeted_decision = { target = THIS decision = CZE_form_czechoslovakia }
				}
				AUS = { activate_targeted_decision = { target = GER decision = AUS_unite_with_germany } }
			}
			else_if = {
				limit = { FROM = { tag = GAL } }
				GAL = {
					if = {
						limit = { country_exists = BPL }
						activate_targeted_decision = { target = BPL decision = GAL_join_belgrade_pact }
						activate_targeted_decision = { target = BPL decision = CZE_leave_belgrade_pact }
					}
					activate_targeted_decision = { target = POL decision = GAL_unite_with_poland }
				}
			}
			else_if = {
				limit = { FROM = { tag = CRO } }
				CRO = { activate_targeted_decision = { target = GER decision = CZE_join_germany } }
				SER = { activate_targeted_decision = { target = CRO decision = SER_Ultimatum_To_Illyria } }
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event ausgleich.new.9000 option ausgleich.new.9000.a"
		name = ausgleich.new.9000.a
		trigger = { NOT = { country_exists = HUN } }
		if = {
			limit = { has_idea = AUS_crownland_revolt }
			swap_ideas = {
				remove_idea = AUS_crownland_revolt
				add_idea = AUS_crownland_revolt_2
			}
		}
		else_if = {
			limit = { NOT = { has_idea = AUS_crownland_revolt_2 } }
			add_ideas = AUS_crownland_revolt_2
		}
		effect_tooltip = {
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event ausgleich.new.9000 option ausgleich.new.9000.b"
		name = ausgleich.new.9000.b
		trigger = { country_exists = HUN }
		if = {
			limit = { has_idea = AUS_crownland_revolt }
			swap_ideas = {
				remove_idea = AUS_crownland_revolt
				add_idea = AUS_crownland_revolt_2
			}
		}
		else_if = {
			limit = { NOT = { has_idea = AUS_crownland_revolt_2 } }
			add_ideas = AUS_crownland_revolt_2
		}
		effect_tooltip = {
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
}

# CZE events
country_event = { #Czechia pleads for support
	id = ausgleich.new.901
	title = ausgleich.new.901.t
	desc = ausgleich.new.901.d
	picture = GFX_report_event_gre_diplomacy

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.901 option ausgleich.new.901.a"
		name = ausgleich.new.901.a #This is our chance! To war!
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				surrender_progress > 0
			}
		}
		SER_add_balkan_claims = yes
		add_to_faction = FROM
		FROM = { country_event = { id = ausgleich.new.902 days = 1 } }
		if = {
			limit = { can_declare_war_on = HUN }
			declare_war_on = {
				target = HUN
				type = annex_everything
			}
		}
		if = {
			limit = { can_declare_war_on = AUS }
			declare_war_on = {
				target = AUS
				type = annex_everything
			}
		}
	}

	option = {
		log = "[GetLogInfo]: event ausgleich.new.901 option ausgleich.new.901.b"
		name = ausgleich.new.901.b #Austria is too strong...
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				NOT = { has_war_with = AUS }
				surrender_progress > 0
			}
		}
		FROM = { country_event = { id = ausgleich.new.903 days = 2 } }
	}
}

country_event = { #Serbia accepts
	id = ausgleich.new.902
	title = ausgleich.new.902.t

	desc = {
		text = ausgleich.new.902.d.CZE
		trigger = { tag = CZE }
	}
	desc = {
		text = ausgleich.new.902.d.other
		trigger = { NOT = { tag = CZE } }
	}

	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.902 option ausgleich.new.902.a"
		name = ausgleich.new.902.a
		trigger = { tag = CZE }
		add_state_claim = 70
		add_state_claim = 71
		add_state_claim = 73
		add_state_claim = 1090
	}

	option = {
		log = "[GetLogInfo]: event ausgleich.new.902 option ausgleich.new.902.b"
		name = ausgleich.new.902.b
		trigger = { NOT = { tag = CZE } }
	}
}

country_event = { #Serbia refuses
	id = ausgleich.new.903
	title = ausgleich.new.903.t
	desc = ausgleich.new.903.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.903 option ausgleich.new.903.a"
		name = ausgleich.new.903.a
		add_opinion_modifier = { target = FROM modifier = KR_hates_govt }
	}
}

# GAL events
country_event = { #Galicia wishes to join the Pact
	id = ausgleich.new.906
	title = ausgleich.new.906.t

	desc = {
		text = ausgleich.new.906.d.bucovina
		trigger = {
			is_in_faction_with = ROM
			FROM = {
				OR = {
					owns_state = 80 #Cernauti
					owns_state = 713 #Suceava
				}
			}
		}
	}
	desc = {
		text = ausgleich.new.906.d.no_bucovina
		trigger = {
			OR = {
				NOT = { is_in_faction_with = ROM }
				FROM = {
					NOT = {
						owns_state = 80 #Cernauti
						owns_state = 713 #Suceava
					}
				}
			}
		}
	}

	picture = GFX_report_event_generic_big_city

	trigger = {
		is_faction_leader = yes
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.906 option ausgleich.new.906.a"
		name = ausgleich.new.906.a #We welcome them, but they must cede Bucovina
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				NOT = { has_war_with = AUS }
				surrender_progress > 0
			}
		}
		trigger = {
			is_in_faction_with = ROM
			FROM = {
				OR = {
					owns_state = 80 #Cernauti
					owns_state = 713 #Suceava
				}
			}
		}
		FROM = { country_event = { id = ausgleich.new.907 days = 1 } }
	}

	option = {
		log = "[GetLogInfo]: event ausgleich.new.906 option ausgleich.new.906.b"
		name = ausgleich.new.906.b #Allies are always welcome
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				NOT = { has_war_with = AUS }
				surrender_progress > 0
			}
		}
		trigger = {
			OR = {
				NOT = { is_in_faction_with = ROM }
				FROM = {
					NOT = {
						owns_state = 80 #Cernauti
						owns_state = 713 #Suceava
					}
				}
			}
		}
		add_to_faction = FROM
		FROM = { country_event = { id = ausgleich.new.902 days = 1 } }
	}

	option = {
		log = "[GetLogInfo]: event ausgleich.new.906 option ausgleich.new.906.c"
		name = ausgleich.new.906.c #We don't need them
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				NOT = { has_war_with = AUS }
				surrender_progress > 0
			}
		}
		FROM = { country_event = { id = ausgleich.new.903 days = 1 } }
	}
}

country_event = { #The Pact demands Bucovina
	id = ausgleich.new.907
	title = ausgleich.new.907.t
	desc = ausgleich.new.907.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.907 option ausgleich.new.907.a"
		name = ausgleich.new.907.a #Gladly
		ai_chance = { base = 100 }
		effect_tooltip = {
			every_owned_state = {
				limit = {
					OR = {
						state = 80 #Cernauti
						state = 713 #Suceava
					}
				}
				if = {
					limit = { is_core_of = ROOT }
					remove_core_of = ROOT
				}
				if = {
					limit = { is_claimed_by = ROOT }
					remove_claim_by = ROOT
				}
				transfer_state_to = ROM
			}
		}
		ROM = { country_event = { id = ausgleich.new.908 days = 1 } }
		FROM = { country_event = { id = ausgleich.new.909 days = 1 } }
	}

	option = {
		log = "[GetLogInfo]: event ausgleich.new.907 option ausgleich.new.907.b"
		name = ausgleich.new.907.b #Bukowina is a rightful Galician territory!
		ai_chance = { base = 0 }
		add_state_claim = 80 #Cernauti
		add_state_claim = 713 #Suceava
		FROM = { country_event = { id = ausgleich.new.910 days = 1 } }
	}
}

country_event = { #Romania gets Bucovina
	id = ausgleich.new.908
	title = ausgleich.new.908.t
	desc = ausgleich.new.908.d
	picture = GFX_report_event_finnish_letter

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.908 option ausgleich.new.908.a"
		name = ausgleich.new.908.a
		FROM = {
			every_owned_state = {
				limit = {
					OR = {
						state = 80 #Cernauti
						state = 713 #Suceava
					}
				}
				hidden_effect = {
					if = {
						limit = { is_core_of = FROM }
						remove_core_of = FROM
					}
					if = {
						limit = { is_claimed_by = FROM }
						remove_claim_by = FROM
					}
				}
				transfer_state_to = ROOT
			}
		}
	}
}

country_event = { #Galicia accepts
	id = ausgleich.new.909
	title = ausgleich.new.909.t
	desc = ausgleich.new.909.d
	picture = GFX_report_event_finnish_letter

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.909 option ausgleich.new.909.a"
		name = ausgleich.new.909.a
		add_to_faction = FROM
	}
}

country_event = { #Galicia refuses
	id = ausgleich.new.910
	title = ausgleich.new.910.t
	desc = ausgleich.new.910.d
	picture = GFX_report_event_generic_diplomacy4

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.910 option ausgleich.new.910.a"
		name = ausgleich.new.910.a
		add_opinion_modifier = { target = FROM modifier = KR_hates_govt }
	}
}

# CRO events
country_event = { #The Serbian Ultimatum
	id = ausgleich.new.911
	title = ausgleich.new.911.t
	desc = ausgleich.new.911.d
	picture = GFX_report_event_yugoslavian_split

	trigger = {
		NOT = { has_war_with = FROM }
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.911 option ausgleich.new.911.a"
		name = ausgleich.new.911.a #We have no choice...
		ai_chance = {
			base = 50
			modifier = {
				factor = 2
				surrender_progress > 0.2
			}
			modifier = {
				factor = 0
				has_war = no
			}
		}
		every_owned_state = {
			limit = { is_core_of = ROOT }
			add_claim_by = FROM
		}
		effect_tooltip = {
			FROM = {
				annex_country = {
					target = ROOT
					transfer_troops = yes
				}
			}
			if = {
				limit = { is_ai = no }
				FROM = { change_tag_from = ROOT }
			}
		}
		FROM = { country_event = { id = ausgleich.new.912 days = 1 } }
	}

	option = {
		log = "[GetLogInfo]: event ausgleich.new.911 option ausgleich.new.911.b"
		name = ausgleich.new.911.b #We will not replace one tyrant for another!
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				surrender_progress > 0.2
			}
		}
		FROM = { country_event = { id = ausgleich.new.913 days = 1 } }
	}
}

country_event = { #Illyria accepts
	id = ausgleich.new.912
	title = ausgleich.new.912.t
	desc = ausgleich.new.912.d
	picture = GFX_report_event_generic_diplomacy3

	trigger = {
		NOT = { has_war_with = FROM }
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.912 option ausgleich.new.912.a"
		name = ausgleich.new.912.a
		remove_decision = SER_Ultimatum_To_Illyria
		if = {
			limit = {
				AUS = {
					is_subject = no
					has_war_with = CRO
				}
			}
			AUS = { country_event = ausgleich.new.920 }
		}
		effect_tooltip = {
			every_state = {
				limit = { is_core_of = FROM }
				add_claim_by = ROOT
			}
		}
		annex_country = {
			target = FROM
			transfer_troops = yes
		}
		if = {
			limit = { FROM = { is_ai = no } }
			ROOT = { change_tag_from = FROM }
		}
	}
}

country_event = { #Illyria accepts
	id = ausgleich.new.913
	title = ausgleich.new.913.t
	desc = ausgleich.new.913.d
	picture = GFX_report_event_generic_towar

	trigger = {
		NOT = { has_war_with = FROM }
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.913 option ausgleich.new.913.a"
		name = ausgleich.new.913.a
	}
}

country_event = { #FROM Leaves the Pact
	id = ausgleich.new.914
	title = ausgleich.new.914.t
	desc = ausgleich.new.914.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.914 option ausgleich.new.914.a"
		name = ausgleich.new.914.a
		add_opinion_modifier = { target = FROM modifier = KR_outraged }
	}
}

# AUS events
country_event = { #Fall of the Habsburgs
	id = ausgleich.new.915
	title = ausgleich.new.915.t
	desc = ausgleich.new.915.d
	picture = GFX_report_event_AUS_Ausgleich_dip_agree

	is_triggered_only = yes

	trigger = {
		country_exists = CZE
		NOT = { has_subject = CZE }
	}

	option = {
		log = "[GetLogInfo]: event ausgleich.new.915 option ausgleich.new.915.a"
		name = ausgleich.new.915.a
		effect_tooltip = {
			every_character = {
				limit = { AUS_is_habsburg_family_member = yes }
				retire = yes
			}
		}
		hidden_effect = {
			every_character = {
				limit = { AUS_is_habsburg_family_member = yes }
				set_nationality = XXA
			}
			news_event = ausgleich.new.918
		}
		drop_cosmetic_tag = yes
		custom_effect_tooltip = tooltip_white_line
		effect_tooltip = {
			every_state = {
				limit = { is_claimed_by = ROOT }
				remove_claim_by = ROOT
			}
			every_core_state = {
				limit = {
					NOT = { is_owned_by = ROOT }
					is_core_austria = no
				}
				remove_core_of = ROOT
			}
		}
		custom_effect_tooltip = tooltip_white_line
		every_owned_state = {
			limit = {
				is_core_of = HUN
				NOT = { is_core_of = ROOT }
			}
			transfer_state_to = HUN
		}
		transfer_units_fraction = {
			target = HUN
			target_organization = 1
			source_organization = 1
			size = 0.9
			stockpile_ratio = 0.9
			army_ratio = 0.9
			navy_ratio = 0
			air_ratio = 0.9
			keep_unit_leaders_trigger = { always = yes }
		}
		hidden_effect = {
			HUN = {
				drop_cosmetic_tag = yes
				remove_ideas = HUN_financial_ties_broken
				HUN_remove_joseph_august = yes
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = ROOT
						is_claimed_by = ROOT
						has_variable = ambition_area_@ROOT
					}
					is_core_austria = no
				}
				remove_core_of = ROOT
				remove_claim_by = ROOT
				clear_variable = ambition_area_@ROOT
			}
		}
	}
}

country_event = { #Austria seeks union with Germany
	id = ausgleich.new.916
	title = ausgleich.new.916.t
	desc = ausgleich.new.916.d
	picture = GFX_report_event_AUS_Ausgleich_prag

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.916 option ausgleich.new.916.a"
		name = ausgleich.new.916.a #Greater Germany has been achieved.
		ai_chance = { base = 100 }
		FROM = { delete_unit = { disband = yes } }
		every_state = {
			limit = { is_core_austria = yes }
			add_claim_of_ROOT = yes
			enable_state_integration_50_compliance = yes
		}
		annex_country = {
			target = FROM
			transfer_troops = yes
		}
		hidden_effect = {
			1090 = { enable_state_integration_80_compliance = yes } #Pressburg
			country_event = gerflavour.76
		}
	}

	option = {
		log = "[GetLogInfo]: event ausgleich.new.916 option ausgleich.new.916.b"
		name = ausgleich.new.916.b #We don't need them
		ai_chance = { base = 0 }
		FROM = { country_event = { id = ausgleich.new.917 days = 2 } }
	}
}

country_event = { #Germany refuses
	id = ausgleich.new.917
	title = ausgleich.new.917.t
	desc = ausgleich.new.917.d
	picture = GFX_report_event_german_reichstag_gathering

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.917 option ausgleich.new.917.a"
		name = ausgleich.new.917.a
		add_opinion_modifier = { target = FROM modifier = KR_outraged }
	}
}

news_event = { #Austria Collapses Into Anarchy
	id = ausgleich.new.918
	immediate = { log = "[GetLogInfo]: event ausgleich.new.918" }
	title = ausgleich.new.918.t
	desc = ausgleich.new.918.d
	picture = GFX_news_event_ger_civil_war

	is_triggered_only = yes
	fire_for_sender = no

	major = yes
	show_major = {
		NOT = {
			tag = AUS
			tag = HUN
		}
	}

	option = {
		name = ausgleich.new.918.a
		trigger = { is_in_faction_with = BPL }
	}

	option = {
		name = ausgleich.new.918.b
		trigger = {
			NOT = { is_in_faction_with = BPL }
			has_socialist_government = no
		}
	}

	option = {
		name = ausgleich.new.918.c
		trigger = {
			NOT = { is_in_faction_with = BPL }
			has_socialist_government = yes
		}
	}
}

news_event = { #Chaos in the Balkans
	id = ausgleich.new.919
	immediate = { log = "[GetLogInfo]: event ausgleich.new.919" }
	title = ausgleich.new.919.t
	desc = ausgleich.new.919.d
	picture = GFX_news_event_ger_civil_war

	trigger = {
		OR = {
			CZE = { has_war_with = AUS }
			CRO = { has_war_with = AUS }
			GAL = { has_war_with = AUS }
			HUN = { has_war_with = AUS }
		}
	}

	is_triggered_only = yes

	major = yes

	option = {
		name = ausgleich.new.919.a
		trigger = { AUS = { is_ally_with = ROOT } }
	}

	option = {
		name = ausgleich.new.919.b
		trigger = { has_war_with = AUS }
	}

	option = {
		name = ausgleich.new.919.c
		trigger = {
			NOT = {
				AUS = { is_ally_with = ROOT }
				has_war_with = AUS
			}
		}
	}
}

country_event = { #Serbia Annexes Illyria
	id = ausgleich.new.920
	title = ausgleich.new.920.t
	desc = ausgleich.new.920.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event ausgleich.new.920 option ausgleich.new.920.a"
		name = ausgleich.new.920.a
		trigger = {
			can_declare_war_on = FROM
		}
		ai_chance = { base = 100 }
		declare_war_on = {
			target = FROM
			type = annex_everything
		}
	}

	option = {
		log = "[GetLogInfo]: event ausgleich.new.920 option ausgleich.new.920.b"
		name = ausgleich.new.920.b
		trigger = {
			can_declare_war_on = FROM
		}
		ai_chance = { base = 0 }
		add_political_power = -100
	}

	option = {
		log = "[GetLogInfo]: event ausgleich.new.920 option ausgleich.new.920.c"
		name = ausgleich.new.920.c
		trigger = {
			NOT = { can_declare_war_on = FROM }
		}
	}
}

