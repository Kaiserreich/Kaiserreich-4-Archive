###########################
# Ausgleich Events 3.0
###########################
# By ~mw~
###########################

add_namespace = ausgleich.new

### Ausgleich Preparations
country_event = {
	id = ausgleich.new.100
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.100 FROM = [From.GetName]" }
	title = ausgleich.new.100.t
	desc = ausgleich.new.100.d

	trigger = {
		tag = AUS
		is_subject = no
	}

	is_triggered_only = yes

	option = { # very well
		name = ausgleich.new.100.a
		hidden_effect = {
			HUN = {
				country_event = { id = ausgleich.new.101 days = 2 }
			}
			country_event = { id = ausgleich.new.200 days = 2 }
		}
	}
}

### Hungary receives an invitation
country_event = {
	id = ausgleich.new.101
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.101 FROM = [From.GetName]" }
	title = ausgleich.new.101.t
	desc = ausgleich.new.101.d

	is_triggered_only = yes

	option = { # we'll see what comes of this
		name = ausgleich.new.101.a
		hidden_effect = {
			AUS = {
				country_event = { id = ausgleich.new.102 days = 2 }
			}
		}
	}
}

### Hungary agrees to come
country_event = {
	id = ausgleich.new.102
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.102 FROM = [From.GetName]" }
	title = ausgleich.new.102.t
	desc = ausgleich.new.102.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # we'll see what comes of this
		name = ausgleich.new.102.a
	}
}

### Invite not only Hungary?
country_event = {
	id = ausgleich.new.200
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.200 FROM = [From.GetName]" }
	title = ausgleich.new.200.t
	desc = ausgleich.new.200.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # No way. This is between us and the Magyars.
		name = ausgleich.new.200.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_SUCCESS }
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR }
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_PATAUT }
				}
			}
		}
		add_political_power = 20
		set_global_flag = AUS_ausgleich_hungary_only
		hidden_effect = {
			country_event = { id = ausgleich.new.300 days = 2 }
		}
	}
	option = { # You are right. Invite the Bohemians, Galicians and Illyrians.
		name = ausgleich.new.200.b
		ai_chance = {
			base = 40
			modifier = {
				factor = 0
				has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_STATUS_QUO }
			}
		}

		add_political_power = -20
		set_global_flag = AUS_ausgleich_kingdoms
		hidden_effect = {
			HUN = {
				country_event = { id = ausgleich.new.201 days = 2 }
			}
			CZE = {
				country_event = { id = ausgleich.new.202 days = 2 }
			}
			GAL = {
				country_event = { id = ausgleich.new.202 days = 2 }
			}
			CRO = {
				country_event = { id = ausgleich.new.202 days = 2 }
			}
			country_event = { id = ausgleich.new.300 days = 2 }
		}
	}
	option = { # You are right. Invite all peoples of the Dual Monarchy.
		name = ausgleich.new.200.c
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_STATUS_QUO }
			}
		}

		add_political_power = -100
		set_global_flag = AUS_ausgleich_peoples
		hidden_effect = {
			HUN = {
				country_event = { id = ausgleich.new.201 days = 2 }
			}
			CZE = {
				country_event = { id = ausgleich.new.202 days = 2 }
			}
			GAL = {
				country_event = { id = ausgleich.new.202 days = 2 }
			}
			CRO = {
				country_event = { id = ausgleich.new.202 days = 2 }
			}
			country_event = { id = ausgleich.new.300 days = 2 }
		}
	}
}

### HUN: Austria invites other delegations to the Ausgleich
country_event = {
	id = ausgleich.new.201
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.201 FROM = [From.GetName]" }

	title = {
		text = ausgleich.new.201.t_kingdoms
		trigger = {
			has_global_flag = AUS_ausgleich_kingdoms
		}
	}
	title = {
		text = ausgleich.new.201.t_peoples
		trigger = {
			has_global_flag = AUS_ausgleich_peoples
		}
	}
	desc = {
		text = ausgleich.new.201.d_kingdoms
		trigger = {
			has_global_flag = AUS_ausgleich_kingdoms
		}
	}
	desc = {
		text = ausgleich.new.201.d_peoples
		trigger = {
			has_global_flag = AUS_ausgleich_peoples
		}
	}

	is_triggered_only = yes

	option = { # formally protest
		name = ausgleich.new.201.a
		ai_chance = {
			base = 100
			modifier = {
				factor = 0.6
				OR = {
					has_global_flag = AUS_ausgleich_kingdoms
					has_global_flag = AUS_ausgleich_peoples
				}
			}
		}

		#small opinion modifiers
		hidden_effect = {
			AUS = {
				country_event = { id = ausgleich.new.203 days = 2 }
			}
		}
	}
	option = { # boycott the ausgleich
		name = ausgleich.new.201.b
		ai_chance = {
			base = 100
			modifier = {
				factor = 0.1
				has_global_flag = AUS_ausgleich_kingdoms
			}
			modifier = {
				factor = 0.3
				has_global_flag = AUS_ausgleich_peoples
			}
		}

		#heavy opinion modifiers
		set_global_flag = AUS_ausgleich_boycott
		hidden_effect = {
			AUS = {
				country_event = { id = ausgleich.new.203 days = 2 }
			}
		}
	}
	option = { # do nothing
		name = ausgleich.new.201.c
		ai_chance = {
			base = 100
			modifier = {
				factor = 0.3
				has_global_flag = AUS_ausgleich_kingdoms
			}
			modifier = {
				factor = 0.15
				has_global_flag = AUS_ausgleich_peoples
			}
		}
	}
}

### BOH/CZE/GAL is invited to the Ausgleich
country_event = {
	id = ausgleich.new.202
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.202 FROM = [From.GetName]" }
	title = ausgleich.new.202.t
	desc = ausgleich.new.202.d
	picture = GFX_report_event_AUS_Ausgleich_prag

	is_triggered_only = yes

	option = { # very good
		trigger = {
			has_global_flag = AUS_ausgleich_kingdoms
		}
		name = ausgleich.new.202.a
		#opinion modifier
		hidden_effect = {
			AUS = {
				country_event = { id = ausgleich.new.203 days = 2 }
			}
		}
	}
	option = { # Agree and send a mixed delegation
		name = ausgleich.new.202.b
		trigger = {
			has_global_flag = AUS_ausgleich_peoples
		}
		#opinion modifier
		hidden_effect = {
			AUS = {
				country_event = { id = ausgleich.new.203 days = 2 }
			}
		}
	}
	option = { # Send a majority-dominated delegation
		name = ausgleich.new.202.c
		trigger = {
			has_global_flag = AUS_ausgleich_peoples
		}
		#opinion modifier
		hidden_effect = {
			AUS = {
				country_event = { id = ausgleich.new.203 days = 2 }
			}
		}
	}
}

### Reactions to the invitations
country_event = {
	id = ausgleich.new.203
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.203 FROM = [From.GetName]" }

	title = {
		text = ausgleich.new.203.t_HUN
		trigger = {
			FROM = { tag = HUN }
		}
	}
	title = {
		text = ausgleich.new.203.t_other
		trigger = {
			NOT = { FROM = { tag = HUN } }
		}
	}
	desc = {
		text = ausgleich.new.203.d_HUN
		trigger = {
			FROM = { tag = HUN }
		}
	}
	desc = {
		text = ausgleich.new.203.d_other
		trigger = {
			NOT = { FROM = { tag = HUN } }
		}
	}

	is_triggered_only = yes

	option = { # It's the way forward
		name = ausgleich.new.203.a
		trigger = {
			FROM = { tag = HUN }
		}
		add_political_power = -10
	}
	option = { # Excellent
		name = ausgleich.new.203.b
		trigger = {
			NOT = { FROM = { tag = HUN } }
		}
		add_political_power = 10
	}
}

#########################
### AUSGLEICH of 1937 ###
#########################

### Ausgleich begins
country_event = {
	id = ausgleich.new.300
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.300 FROM = [From.GetName]" }

	title = {
		text = ausgleich.new.300.t_hungary
		trigger = {
			has_global_flag = AUS_ausgleich_hungary_only
		}
	}
	title = {
		text = ausgleich.new.300.t_delegations_no_boycott
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
		}
	}
	title = {
		text = ausgleich.new.300.t_delegations_boycott
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
		}
	}

	desc = {
		text = ausgleich.new.300.d_hungary
		trigger = {
			has_global_flag = AUS_ausgleich_hungary_only
		}
	}
	desc = {
		text = ausgleich.new.300.d_delegations_no_boycott
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
		}
	}
	desc = {
		text = ausgleich.new.300.d_delegations_boycott
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
		}
	}

	is_triggered_only = yes

	option = { # Excellent
		name = ausgleich.new.300.a
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
		}
		add_political_power = 10
		hidden_effect = {
			country_event = { id = ausgleich.new.310 days = 2 }
		}
	}
	option = { # Excellent
		name = ausgleich.new.300.b
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
		}
		add_political_power = 10
		hidden_effect = {
			country_event = { id = ausgleich.new.312 days = 2 }
		}
	}
}

### Hungarian delegate makes speech
country_event = {
	id = ausgleich.new.310
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.310 FROM = [From.GetName]" }
	title = ausgleich.new.310.t
	desc = ausgleich.new.310.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # how insolent
		name = ausgleich.new.310.a
		ai_chance = {
			base = 5
		}
		hidden_effect = {
			country_event = { id = ausgleich.new.311 days = 2 }
		}
	}
	option = { # send him home
		name = ausgleich.new.310.b
		ai_chance = {
			base = 5
			modifier = {
				factor = 0
				has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_STATUS_QUO }
			}
		}
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_kingdoms
			}
			add_political_power = 15
		}
		else_if = {
			limit = {
				has_global_flag = AUS_ausgleich_peoples
			}
			add_political_power = 30
		}
		hidden_effect = {
			country_event = { id = ausgleich.new.311 days = 2 }
		}
	}
	option = { # he's right though, isn't he?
		name = ausgleich.new.310.c
		ai_chance = {
			base = 5
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_STATUS_QUO }
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_SUCCESS }
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR }
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_PATAUT }
				}
			}
		}
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_kingdoms
			}
			add_political_power = -15
		}
		else_if = {
			limit = {
				has_global_flag = AUS_ausgleich_peoples
			}
			add_political_power = -30
		}
		else_if = {
			limit = {
				has_global_flag = AUS_ausgleich_hungary_only
			}
			set_country_flag = AUS_ausgleich_dualism
		}
		hidden_effect = {
			country_event = { id = ausgleich.new.311 days = 2 }
		}
	}
}

country_event = { #Hungarian Demands - Reparation Payments
	id = ausgleich.new.311
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.311 FROM = [From.GetName]" }
	title = ausgleich.new.311.t
	desc = ausgleich.new.311.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # offer to pay from your own coffers
		name = ausgleich.new.311.a
		ai_chance = {
			base = 5
		}
		set_global_flag = AUS_ausgleich_austrian_payments
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_hungary_only
				}
				country_event = { id = ausgleich.new.320 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.312 days = 2 }
			}
		}
	}
	option = { # the Illyrians should pay (absent)
		name = ausgleich.new.311.b
		trigger = {
			has_global_flag = AUS_ausgleich_hungary_only
		}
		ai_chance = {
			base = 15
		}

		set_global_flag = AUS_ausgleich_illyrian_payments
		set_global_flag = AUS_ausgleich_absent_demands
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_hungary_only
				}
				country_event = { id = ausgleich.new.320 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.312 days = 2 }
			}
		}
	}
	option = { # the Illyrians should pay (present)
		name = ausgleich.new.311.c
		trigger = {
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
		}
		ai_chance = {
			base = 15
		}

		set_global_flag = AUS_ausgleich_illyrian_payments
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_hungary_only
				}
				country_event = { id = ausgleich.new.320 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.312 days = 2 }
			}
		}
	}
	option = { # point out that they pay less taxes
		name = ausgleich.new.311.e
		ai_chance = {
			base = 80
		}
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_hungary_only
				}
				country_event = { id = ausgleich.new.320 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.312 days = 2 }
			}
		}
	}
	option = { # secretly offer them to take back Croatia
		name = ausgleich.new.311.f
		trigger = {
			has_country_flag = AUS_ausgleich_dualism
		}
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_STATUS_QUO }
			}
		}
		set_global_flag = AUS_ausgleich_secret_deal
		every_state = {
			limit = {
				OR = {
					region = 22 #Bohemia
					region = 27 #Hungary
					region = 143 #Northern Balkans
					region = 144 #Transylvania
					region = 155 #Galicia
					is_core_of = SLO
					is_core_of = CZE
					is_core_of = GAL
					is_core_of = CRO
				}
				NOT = {
					is_core_of = HUN
					is_claimed_by = HUN
				}
			}
			add_claim_by = ROOT
		}
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_hungary_only
				}
				country_event = { id = ausgleich.new.320 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.312 days = 2 }
			}
		}
	}
}

#CZE Demands - Slovakia
country_event = {
	id = ausgleich.new.312
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.312 FROM = [From.GetName]" }
	title = ausgleich.new.312.t
	desc = ausgleich.new.312.d

	is_triggered_only = yes

	option = { #Ask Hungary
		name = ausgleich.new.312.a
		trigger = {
			NOT = { has_global_flag = AUS_ausgleich_boycott }
		}
		ai_chance = {
			base = 33
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_SUCCESS }
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR }
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_PATAUT }
				}
			}
		}
		hidden_effect = {
			if = {
				limit = { has_global_flag = AUS_ausgleich_peoples }
				country_event = { id = ausgleich.new.315 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.313 days = 2 }
			}
		}
	}
	option = { # Let's do this - Slovak majority territory
		name = ausgleich.new.312.b
		ai_chance = {
			base = 33
		}
		set_global_flag = AUS_ausgleich_slovakia
		if = {
			limit = {
				NOT = { has_global_flag = AUS_ausgleich_boycott }
			}
			country_event = ausgleich.new.317
			set_global_flag = AUS_ausgleich_boycott
		}
		SLO = {
			remove_state_core = 71
			add_state_claim = 71
		}
		hidden_effect = {
			if = {
				limit = { has_global_flag = AUS_ausgleich_peoples }
				country_event = { id = ausgleich.new.315 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.313 days = 2 }
			}
		}
	}
	option = { # Let's do this - down to the Danube
		name = ausgleich.new.312.c
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
		}
		ai_chance = {
			base = 33
		}
		set_global_flag = AUS_ausgleich_slovakia
		hidden_effect = {
			if = {
				limit = { has_global_flag = AUS_ausgleich_peoples }
				country_event = { id = ausgleich.new.315 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.313 days = 2 }
			}
		}
	}
}

#GAL demands - Transcarpathia
country_event = {
	id = ausgleich.new.313
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.313 FROM = [From.GetName]" }
	title = ausgleich.new.313.t
	desc = ausgleich.new.313.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { #Ask Hungary
		name = ausgleich.new.313.a
		trigger = {
			NOT = { has_global_flag = AUS_ausgleich_boycott }
		}
		ai_chance = {
			base = 33
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_SUCCESS }
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR }
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_PATAUT }
				}
			}
		}
		hidden_effect = {
			country_event = { id = ausgleich.new.314 days = 2 }
		}
	}
	option = { # Let's do this
		name = ausgleich.new.313.b
		ai_chance = {
			base = 33
		}
		set_global_flag = AUS_ausgleich_transcarpathia
		hidden_effect = { add_state_claim = 73 }
		GAL = { add_state_core = 73 }
		if = {
			limit = {
				NOT = {
					has_global_flag = AUS_ausgleich_boycott
				}
			}
			country_event = ausgleich.new.317
			set_global_flag = AUS_ausgleich_boycott
		}
		hidden_effect = {
			country_event = { id = ausgleich.new.314 days = 2 }
		}
	}
}

#CRO demands - Backa
country_event = {
	id = ausgleich.new.314
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.314 FROM = [From.GetName]" }
	title = ausgleich.new.314.t
	desc = ausgleich.new.314.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { #Ask Hungary
		name = ausgleich.new.314.a
		trigger = {
			NOT = { has_global_flag = AUS_ausgleich_boycott }
		}
		ai_chance = {
			base = 33
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_SUCCESS }
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR }
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_PATAUT }
				}
			}
		}
		hidden_effect = {
			if = {
				limit = { has_global_flag = AUS_ausgleich_peoples }
				country_event = { id = ausgleich.new.316 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.320 days = 2 }
			}
		}
	}
	option = { # Let's do this - Majority territory
		name = ausgleich.new.314.b
		ai_chance = {
			base = 33
		}
		set_global_flag = AUS_ausgleich_backa
		if = {
			limit = {
				NOT = { has_global_flag = AUS_ausgleich_boycott }
			}
			country_event = ausgleich.new.317
			set_global_flag = AUS_ausgleich_boycott
		}
		hidden_effect = {
			add_state_claim = 45
			if = {
				limit = { has_global_flag = AUS_ausgleich_peoples }
				country_event = { id = ausgleich.new.316 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.320 days = 2 }
			}
		}
	}
	option = { # Let's do this - All of the Backa
		name = ausgleich.new.314.c
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
		}
		ai_chance = {
			base = 33
		}
		set_global_flag = AUS_ausgleich_backa
		CRO = { add_state_core = 875 }
		hidden_effect = {
			add_state_claim = 45
			add_state_claim = 875
			if = {
				limit = { has_global_flag = AUS_ausgleich_peoples }
				country_event = { id = ausgleich.new.316 days = 2 }
			}
			else = {
				country_event = { id = ausgleich.new.320 days = 2 }
			}
		}
	}
}

#POL demands
country_event = {
	id = ausgleich.new.315
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.315 FROM = [From.GetName]" }
	title = ausgleich.new.315.t
	desc = ausgleich.new.315.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Interesting
		name = ausgleich.new.315.a
		hidden_effect = {
			country_event = { id = ausgleich.new.313 days = 2 }
		}
	}
}

#ROM demands
country_event = {
	id = ausgleich.new.316
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.316 FROM = [From.GetName]" }
	title = ausgleich.new.316.t
	desc = ausgleich.new.316.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Ask Hungary
		name = ausgleich.new.316.a
		trigger = {
			NOT = { has_global_flag = AUS_ausgleich_boycott }
		}
		ai_chance = {
			base = 33
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_SUCCESS }
					has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR }
				}
			}
		}
		hidden_effect = {
			country_event = { id = ausgleich.new.320 days = 2 }
		}
	}
	option = { # Let's do this - Majority territory
		name = ausgleich.new.316.b
		ai_chance = {
			base = 33
		}
		set_global_flag = AUS_ausgleich_transylvania
		if = {
			limit = {
				NOT = { has_global_flag = AUS_ausgleich_boycott }
			}
			country_event = ausgleich.new.317
			set_global_flag = AUS_ausgleich_boycott
		}
		hidden_effect = {
			country_event = { id = ausgleich.new.320 days = 2 }
		}
	}
	option = { # Let's do this - All of it
		name = ausgleich.new.316.c
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
		}
		ai_chance = {
			base = 33
		}
		set_global_flag = AUS_ausgleich_transylvania
		set_global_flag = AUS_ausgleich_transylvania_full
		hidden_effect = {
			country_event = { id = ausgleich.new.320 days = 2 }
		}
	}
}

#Hungary boycotts the ausgleich (AUS)
country_event = {
	id = ausgleich.new.317
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.317 FROM = [From.GetName]" }
	title = ausgleich.new.317.t
	desc = ausgleich.new.317.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # That could've gone better
		name = ausgleich.new.317.a
		add_political_power = -50
		set_global_flag = AUS_ausgleich_boycott
		hidden_effect = {
			HUN = { country_event = { id = ausgleich.new.318 days = 2 } }
		}
	}
}

#Hungary boycotts the ausgleich (HUN)
country_event = {
	id = ausgleich.new.318
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.318 FROM = [From.GetName]" }
	title = ausgleich.new.318.t
	desc = ausgleich.new.318.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Good to know.
		name = ausgleich.new.318.a
	}
}

###End of the Ausgleich
country_event = {
	id = ausgleich.new.320
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.320 FROM = [From.GetName]"
		hidden_effect = { HUN = { activate_targeted_decision = { target = GER decision = CZE_join_germany }} }
	}
	title = ausgleich.new.320.t

	desc = {
		text = ausgleich.new.320.d_hungary_success
		trigger = {
			has_global_flag = AUS_ausgleich_hungary_only
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
		}
	}
	desc = {
		text = ausgleich.new.320.d_hungary_failure
		trigger = {
			has_global_flag = AUS_ausgleich_hungary_only
			has_global_flag = AUS_ausgleich_boycott
		}
	}
	desc = {
		text = ausgleich.new.320.d_other_success
		trigger = {
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
		}
	}
	desc = {
		text = ausgleich.new.320.d_other_failure
		trigger = {
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
			has_global_flag = AUS_ausgleich_boycott
		}
	}

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Great
		name = ausgleich.new.320.a
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
		}
		remove_ideas = AUS_financial_ties_broken
		add_political_power = 50
		complete_national_focus = AUS_ausgleich
		hidden_effect = {
			HUN = {
				country_event = { id = ausgleich.new.321 days = 2 } #Success
			}
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_secret_deal
				}
				HUN = {
					country_event = { id = ausgleich.new.325 days = 2 } #Illyrian Conflict
				}
			}
			else_if = {
				limit = {
					OR = {
						has_global_flag = AUS_ausgleich_illyrian_payments
						has_global_flag = AUS_ausgleich_austrian_payments
					}
				}
				HUN = {
					country_event = { id = ausgleich.new.322 days = 2 } #Payments
				}
			}
			if = {
				limit = {
					OR = {
						has_global_flag = AUS_ausgleich_backa
						has_global_flag = AUS_ausgleich_transcarpathia
						has_global_flag = AUS_ausgleich_transylvania
						has_global_flag = AUS_ausgleich_slovakia
					}
				}
				CZE = {
					country_event = { id = ausgleich.new.332 days = 2 }
				}
				GAL = {
					country_event = { id = ausgleich.new.332 days = 2 }
				}
				CRO = {
					country_event = { id = ausgleich.new.332 days = 2 }
				}
				HUN = {
					country_event = { id = ausgleich.new.340 days = 2 } #Riots
				}
			}
		}
	}
	option = { # Could have been worse...
		name = ausgleich.new.320.b
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
		}
		add_political_power = -50
		complete_national_focus = AUS_ausgleich
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_secret_deal
				}
				HUN = {
					country_event = { id = ausgleich.new.325 days = 2 } #Illyrian Conflict
				}
			}
			else_if = {
				limit = {
					OR = {
						has_global_flag = AUS_ausgleich_illyrian_payments
						has_global_flag = AUS_ausgleich_austrian_payments
					}
				}
				HUN = {
					country_event = { id = ausgleich.new.322 days = 2 } #Payments
				}
			}
			if = {
				limit = {
					OR = {
						has_global_flag = AUS_ausgleich_backa
						has_global_flag = AUS_ausgleich_transcarpathia
						has_global_flag = AUS_ausgleich_transylvania
						has_global_flag = AUS_ausgleich_slovakia
					}
				}
				CZE = {
					country_event = { id = ausgleich.new.332 days = 2 }
				}
				GAL = {
					country_event = { id = ausgleich.new.332 days = 2 }
				}
				CRO = {
					country_event = { id = ausgleich.new.332 days = 2 }
				}
				HUN = {
					country_event = { id = ausgleich.new.340 days = 2 } #Riots
				}
			}
		}
	}
}

#Success at the Ausgleich (HUN)
country_event = {
	id = ausgleich.new.321
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.321 FROM = [From.GetName]" }
	title = ausgleich.new.321.t
	desc = ausgleich.new.321.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Well, what can you do
		name = ausgleich.new.321.a
		remove_ideas = HUN_financial_ties_broken
	}
}

#HUN demands payments
country_event = {
	id = ausgleich.new.322
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.322 FROM = [From.GetName]" }
	title = ausgleich.new.322.t
	desc = ausgleich.new.322.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Send the demands
		name = ausgleich.new.322.a
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_illyrian_payments
					has_global_flag = AUS_ausgleich_absent_demands
				}
				CRO = {
					country_event = { id = ausgleich.new.325 days = 2 }
				}
			}
			else_if = {
				limit = {
					has_global_flag = AUS_ausgleich_illyrian_payments
					NOT = {
						has_global_flag = AUS_ausgleich_absent_demands
					}
				}
				CRO = {
					country_event = { id = ausgleich.new.323 days = 2 }
				}
			}
			else = {
				AUS = {
					country_event = { id = ausgleich.new.323 days = 2 }
				}
			}
		}
	}
}

#AUS/CRO receives demand for agreed payments
country_event = {
	id = ausgleich.new.323
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.323 FROM = [From.GetName]" }
	title = ausgleich.new.323.t
	desc = ausgleich.new.323.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Well, can't do a thing.
		name = ausgleich.new.323.a
		add_timed_idea = {
			idea = AUS_paid_reparations
			days = 365
		}
		hidden_effect = {
			HUN = {
				country_event = { id = ausgleich.new.324 days = 2 }
			}
		}
	}
}

#HUN receives reparations
country_event = {
	id = ausgleich.new.324
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.324 FROM = [From.GetName]" }
	title = ausgleich.new.324.t
	desc = ausgleich.new.324.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Good to know.
		name = ausgleich.new.324.a
	}
}

###Illyrian Conflict (CRO)
country_event = {
	id = ausgleich.new.325
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.325 FROM = [From.GetName]" }
	title = ausgleich.new.325.t
	desc = ausgleich.new.325.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Wait, what?
		name = ausgleich.new.325.a
		ai_chance = {
			base = 80
		}
		hidden_effect = {
			HUN = {
				country_event = { id = ausgleich.new.326 days = 2 }
			}
		}
	}
	option = { # If that has been decided...
		name = ausgleich.new.325.b
		ai_chance = {
			base = 20
			modifier = {
				factor = 0
				has_global_flag = AUS_ausgleich_secret_deal
			}
		}
		add_timed_idea = {
			idea = AUS_paid_reparations
			days = 365
		}
		hidden_effect = {
			HUN = {
				country_event = { id = ausgleich.new.323 days = 2 }
			}
		}
	}
}

#CRO refuses annexation (HUN)
country_event = {
	id = ausgleich.new.326
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.326 FROM = [From.GetName]" }
	title = ausgleich.new.326.t
	desc = ausgleich.new.326.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Well, let's do this then
		name = ausgleich.new.326.a
		ai_chance = {
			base = 100
		}
		AUS = {
			set_autonomy = {
				target = CRO
				autonomy_state = autonomy_free
			}
		}
		hidden_effect = {
			AUS = {
				country_event = { id = ausgleich.new.328 days = 2 }
			}
			CRO = {
				set_cosmetic_tag = CRO_illyria
				leave_faction = yes
				set_rule = { can_not_declare_war = no }
				separate_peace_all_wars = yes
				country_event = ausgleich.new.327
				every_owned_state = {
					teleport_armies = {
						limit = { NOT = { tag = CRO } }
						to_state_array = owned_controlled_states
					}
				}
			}
			remove_ideas = HUN_financial_ties_broken
			every_state = {
				limit = {
					owner = { is_ally_with = AUS }
				}
				teleport_armies = {
					limit = { tag = CRO }
					to_state = 109
				}
			}
		}
		declare_war_on = {
			target = CRO
			type = civil_war
		}
	}
	option = { # Well, can't do anything about it
		name = ausgleich.new.326.b
		ai_chance = {
			base = 0
		}
	}
}

#HUN declares war (CRO)
country_event = {
	id = ausgleich.new.327
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.327 FROM = [From.GetName]" }
	title = ausgleich.new.327.t
	desc = ausgleich.new.327.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Crap.
		name = ausgleich.new.327.a
	}
}

#HUN declares war (AUS)
country_event = {
	id = ausgleich.new.328
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.328 FROM = [From.GetName]" }
	title = ausgleich.new.328.t
	desc = ausgleich.new.328.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # This is outrageous.
		name = ausgleich.new.328.a
		hidden_effect = {
			random_other_country = {
				news_event = { id = worldnews.7 days = 1 }
			}
			set_autonomy = {
				target = HUN
				autonomy_state = autonomy_free
			}
			HUN = {
				drop_cosmetic_tag = yes
				leave_faction = yes
				every_owned_state = {
					teleport_armies = {
						limit = { is_ally_with = AUS }
						to_state_array = owned_controlled_states
					}
				}
				HUN_remove_joseph_august = yes
				set_politics = {
					ruling_party = social_conservative
					last_election = "1888.6.15"
					election_frequency = 48
					elections_allowed = no
				}
				add_popularity = {
					ideology = social_conservative
					popularity = 0.2
				}
			}
			CRO = {
				set_cosmetic_tag = CRO_illyria_habsburg
				get_current_government_type = yes
			}
			set_autonomy = {
				target = CRO
				autonomy_state = kr_crownland
				end_wars = no
			}
			CRO = { restore_previous_government_type = yes }
			every_state = {
				limit = {
					owner = {
						is_ally_with = AUS
						NOT = { has_war_with = HUN }
					}
				}
				teleport_armies = {
					limit = { tag = HUN }
					to_state = 43
				}
			}
		}
		add_ideas = AUS_crownland_revolt
		declare_war_on = {
			target = HUN
			type = civil_war
		}
	}
	option = { # Leave them to it
		name = ausgleich.new.328.b
		ai_chance = { base = 0 }
		trigger = {
			NOT = { has_global_flag = AUS_ausgleich_secret_deal }
		}
		add_political_power = -200
	}
	option = { # It's happening
		name = ausgleich.new.328.c
		trigger = {
			has_global_flag = AUS_ausgleich_secret_deal
		}
		hidden_effect = {
			CRO = {
				every_owned_state = {
					teleport_armies = {
						limit = { is_ally_with = AUS }
						to_state_array = owned_controlled_states
					}
				}
			}
			CZE = {
				country_event = { id = ausgleich.new.900 days = 2 }
			}
			GAL = {
				country_event = { id = ausgleich.new.900 days = 3 }
			}
			random_other_country = {
				news_event = { id = worldnews.7 days = 1 }
			}
		}
		declare_war_on = {
			target = CRO
			type = civil_war
		}
	}
}

#CRO annexation mission
country_event = {
	id = ausgleich.new.330
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.330 FROM = [From.GetName]" }
	title = ausgleich.new.330.t
	desc = ausgleich.new.330.d

	trigger = {
		OR = {
			owns_state = 109
			HUN = { owns_state = 109 }
		}
	}

	is_triggered_only = yes

	option = { # Restore the 1921 borders
		name = ausgleich.new.330.a
		if = {
			limit = { has_subject = 163.owner }
			163 = {
				set_state_owner_to = ROOT
				set_state_province_controller = {
					controller = owner
					limit = { NOT = { has_war_with = PREV.owner } }
				}
			}
		}
		every_state = {
			limit = {
				is_owned_by_ROOT_or_subject = yes
				NOT = { is_owned_by = HUN }
				OR = {
					state = 103
					state = 109
					state = 794
				}
			}
			set_state_owner_to = HUN
			set_state_province_controller = {
				controller = owner
				limit = { NOT = { has_war_with = PREV.owner } }
			}
		}
		set_temp_variable = { tag_to_release = BOS }
		every_owned_state = {
			limit = { is_core_of = var:tag_to_release }
			transfer_state_without_overriding_occupation = yes
		}
		puppet_released_tag = yes
		set_autonomy = {
			target = var:tag_to_release
			autonomy_state = kr_crownland
			end_wars = no
		}
		hidden_effect = {
			var:tag_to_release = { set_cosmetic_tag = BOS_habsburg }
		}
	}
	option = { # Croatia-Slavonia to Hungary, Illyrian Condominium
		name = ausgleich.new.330.b
		every_state = {
			limit = {
				is_owned_by_ROOT_or_subject = yes
				NOT = { is_owned_by = HUN }
				OR = {
					state = 103
					state = 109
					state = 794
				}
			}
			set_state_owner_to = HUN
			set_state_province_controller = {
				controller = owner
				limit = { NOT = { has_war_with = PREV.owner } }
			}
		}
		set_temp_variable = { tag_to_release = CRO }
		every_owned_state = {
			limit = { is_core_of = CRO }
			transfer_state_without_overriding_occupation = yes
		}
		puppet_released_tag = yes
		set_autonomy = {
			target = var:tag_to_release
			autonomy_state = kr_crownland
			end_wars = no
		}
		hidden_effect = {
			var:tag_to_release = { set_cosmetic_tag = CRO_illyria_habsburg }
		}
	}
	option = { # Occupy the whole thing for now
		name = ausgleich.new.330.c
		every_state = {
			limit = {
				owner = { is_subject_of = ROOT }
				OR = {
					state = 103
					state = 104
					state = 105
					state = 109
					state = 163
					state = 794
				}
			}
			set_state_owner_to = ROOT
			set_state_province_controller = {
				controller = owner
				limit = { NOT = { has_war_with = PREV.owner } }
			}
		}
		HUN = {
			country_event = { id = ausgleich.new.331 days = 2 }
		}
	}
}

#Austria breaks secret deal (HUN)
country_event = {
	id = ausgleich.new.331
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.331 FROM = [From.GetName]" }
	title = ausgleich.new.331.t
	desc = ausgleich.new.331.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # They can't do that!
		name = ausgleich.new.331.a
		AUS = {
			set_autonomy = {
				target = HUN
				autonomy_state = autonomy_free
			}
		}
		hidden_effect = {
			HUN_remove_joseph_august = yes
		}
		set_politics = {
			ruling_party = social_conservative
			last_election = "1888.6.15"
			election_frequency = 48
			elections_allowed = no
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.2
		}
		hidden_effect = {
			drop_cosmetic_tag = yes
			leave_faction = yes
			set_rule = { can_not_declare_war = no }
			separate_peace_all_wars = yes
			every_owned_state = {
				teleport_armies = {
					limit = { is_ally_with = AUS }
					to_state_array = owned_controlled_states
				}
			}
			every_state = {
				limit = {
					owner = { is_ally_with = AUS }
				}
				teleport_armies = {
					limit = { tag = HUN }
					to_state = 43
				}
			}
		}
		declare_war_on = {
			target = AUS
			type = civil_war
		}
	}
}

#Notify Ausgleich results to CZE/GAL/CRO
country_event = {
	id = ausgleich.new.332
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.332 FROM = [From.GetName]" }
	title = ausgleich.new.332.t

	desc = {
		text = ausgleich.new.332.d_no_claims
		trigger = {
			OR = {
				AND = {
					tag = CZE
					NOT = {
						has_global_flag = AUS_ausgleich_slovakia
					}
				}
				AND = {
					tag = GAL
					NOT = {
						has_global_flag = AUS_ausgleich_transcarpathia
					}
				}
				AND = {
					tag = CRO
					NOT = {
						has_global_flag = AUS_ausgleich_backa
					}
				}
			}
		}
	}
	desc = {
		text = ausgleich.new.332.d_claims
		trigger = {
			OR = {
				AND = {
					tag = CZE
					has_global_flag = AUS_ausgleich_slovakia
				}
				AND = {
					tag = GAL
					has_global_flag = AUS_ausgleich_transcarpathia
				}
				AND = {
					tag = CRO
					has_global_flag = AUS_ausgleich_backa
				}
			}
		}
	}

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Certainly a valuable lesson for them.
		name = ausgleich.new.332.a
		trigger = {
			OR = {
				AND = {
					tag = CZE
					NOT = {
						has_global_flag = AUS_ausgleich_slovakia
					}
				}
				AND = {
					tag = GAL
					NOT = {
						has_global_flag = AUS_ausgleich_transcarpathia
					}
				}
				AND = {
					tag = CRO
					NOT = {
						has_global_flag = AUS_ausgleich_backa
					}
				}
			}
		}
	}
	option = { # Great!
		name = ausgleich.new.332.a
		trigger = {
			OR = {
				AND = {
					tag = CZE
					has_global_flag = AUS_ausgleich_slovakia
				}
				AND = {
					tag = GAL
					has_global_flag = AUS_ausgleich_transcarpathia
				}
				AND = {
					tag = CRO
					has_global_flag = AUS_ausgleich_backa
				}
			}
		}

		add_political_power = 100
		if = {
			limit = {
				tag = CZE
			}
			add_ideas = CZE_ausgleich_slovak_state
		}
		else_if = {
			limit = {
				tag = GAL
			}
			add_ideas = GAL_ausgleich_transcarpathian_claims
		}
		else = {
			add_ideas = CRO_ausgleich_backan_claims
		}
	}
}

#Austria notified of CZE/GAL betrayal
country_event = {
	id = ausgleich.new.333
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.333 FROM = [From.GetName]" }
	title = ausgleich.new.333.t
	desc = ausgleich.new.333.d

	is_triggered_only = yes

	option = { # How dare they!
		name = ausgleich.new.333.a
		add_political_power = -15
	}
}

### Austrian Civil War
#Demonstrations in Hungary
country_event = {
	id = ausgleich.new.340
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.340 FROM = [From.GetName]" }
	title = ausgleich.new.340.t
	desc = ausgleich.new.340.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			AUS = {
				country_event = { id = ausgleich.new.341 days = 2 }
			}
		}
	}

	option = { # Good to know.
		name = ausgleich.new.340.a
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_slovakia
			}
			add_timed_idea = {
				idea = HUN_slovak_demonstrations
				days = 365
			}
		}
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_transylvania
			}
			add_timed_idea = {
				idea = HUN_transylvanian_demonstrations
				days = 365
			}
		}
	}
}

#Protests put down violently (AUS)
country_event = {
	id = ausgleich.new.341
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.341 FROM = [From.GetName]" }
	title = ausgleich.new.341.t
	desc = ausgleich.new.341.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Demand the Hungarians cede the territories
		name = ausgleich.new.341.a
		ai_chance = {
			base = 100
		}
		HUN = {
			country_event = { id = ausgleich.new.342 days = 2 }
		}
	}
	option = { # do nothing
		name = ausgleich.new.341.b
		ai_chance = {
			base = 0
		}
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_slovakia
				has_global_flag = AUS_ausgleich_transylvania
			}
			add_political_power = -120
		}
		else = {
			add_political_power = -60
		}
	}
}

#Austrian ultimatum (HUN)
country_event = {
	id = ausgleich.new.342
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.342 FROM = [From.GetName]" }
	title = ausgleich.new.342.t
	desc = ausgleich.new.342.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Do as they say.
		name = ausgleich.new.342.a
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_SUCCESS }
			}
		}

		add_political_power = -100
		AUS = {
			country_event = { id = ausgleich.new.343 days = 2 }
		}
	}
	option = { # No way.
		name = ausgleich.new.342.b
		trigger = {
			has_capitulated = no
		}
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				has_game_rule = { rule = AUS_ausgleich option = AUS_AUSGLEICH_FEDERATE_SUCCESS }
			}
		}

		AUS = {
			country_event = { id = ausgleich.new.344 days = 2 }
		}
	}
}

#Hungary accepts ultimatum (AUS)
country_event = {
	id = ausgleich.new.343
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.343 FROM = [From.GetName]" }
	title = ausgleich.new.343.t
	desc = ausgleich.new.343.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Great.
		name = ausgleich.new.343.a
		set_temp_variable = { target = ROOT }
		HUN = {
			every_owned_state = {
				limit = {
					OR = {
						is_claimed_by = ROOT
						is_core_of = SLO
						AND = {
							is_core_of = TRS
							OR = {
								has_global_flag = AUS_ausgleich_transylvania_full
								NOT = {
									state = 82 #Banat
									state = 83 #Partium
									state = 875 #West Banat
								}
							}
						}
					}
				}
				remove_core_of = PREV
				transfer_state_during_war = yes
			}
			if = {
				limit = { has_idea = HUN_slovak_demonstrations }
				remove_ideas = HUN_slovak_demonstrations
			}
			if = {
				limit = { has_idea = HUN_transylvanian_demonstrations }
				remove_ideas = HUN_transylvanian_demonstrations
			}
		}
		hidden_effect = {
			CRO = {
				every_owned_state = { remove_claim_by = HUN }
			}
			TRS = { set_cosmetic_tag = TRS_habsburg }
			SLO = { set_cosmetic_tag = SLO_habsburg }
		}
	}
}

#Hungary refuses ultimatum (AUS)
country_event = {
	id = ausgleich.new.344
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.344 FROM = [From.GetName]" }
	title = ausgleich.new.344.t
	desc = ausgleich.new.344.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # you know what this means!
		name = ausgleich.new.344.a
		ai_chance = {
			base = 100
		}
		set_autonomy = {
			target = HUN
			autonomy_state = autonomy_free
		}
		hidden_effect = {
			random_other_country = {
				news_event = { id = worldnews.7 days = 1 }
			}
			HUN = {
				drop_cosmetic_tag = yes
				leave_faction = yes
				every_owned_state = {
					teleport_armies = {
						limit = { is_ally_with = AUS }
						to_state_array = owned_controlled_states
					}
				}
				HUN_remove_joseph_august = yes
				set_politics = {
					ruling_party = social_conservative
					last_election = "1888.6.15"
					election_frequency = 48
					elections_allowed = no
				}
				add_popularity = {
					ideology = social_conservative
					popularity = 0.2
				}
				set_rule = { can_not_declare_war = no }
				separate_peace_all_wars = yes
				if = {
					limit = { NOT = { has_idea = HUN_financial_ties_broken } }
					add_ideas = HUN_financial_ties_broken
				}
				every_owned_state = {
					teleport_armies = {
						limit = { is_ally_with = AUS }
						to_state_array = owned_controlled_states
					}
				}
			}
			every_state = {
				limit = {
					owner = { is_ally_with = AUS }
				}
				teleport_armies = {
					limit = { tag = HUN }
					to_state = 43
				}
			}
		}
		declare_war_on = {
			target = HUN
			type = civil_war
		}
		CZE = {
			add_to_war = {
				targeted_alliance = AUS
				enemy = HUN
			}
		}
		GAL = {
			add_to_war = {
				targeted_alliance = AUS
				enemy = HUN
			}
		}
		CRO = {
			add_to_war = {
				targeted_alliance = AUS
				enemy = HUN
			}
		}
	}

	option = { # oh well.
		name = ausgleich.new.344.b
		ai_chance = {
			base = 0
		}
		add_political_power = -40
	}
}

###Integration of the Constituents
country_event = {
	id = ausgleich.new.700
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.700 FROM = [From.GetName]" }
	title = ausgleich.new.700.t
	desc = ausgleich.new.700.d

	is_triggered_only = yes

	option = { #okay
		name = ausgleich.new.700.a
		ai_chance = {
			base = 100
		}
		add_political_power = -100
		AUS = {
			country_event = { id = ausgleich.new.701 days = 2 }
		}
	}
	option = { #no
		name = ausgleich.new.700.b
		ai_chance = {
			base = 0
		}
		add_political_power = -100
	}
	option = { #independence
		name = ausgleich.new.700.c
		ai_chance = {
			base = 0
		}
		add_political_power = -300
		hidden_effect = {
			set_rule = { can_not_declare_war = no }
		}
		declare_war_on = {
			target = AUS
			type = civil_war
		}
		drop_cosmetic_tag = yes
	}
}

country_event = { #integrating the subjects
	id = ausgleich.new.701
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.701 FROM = [From.GetName]" }
	title = ausgleich.new.701.t
	desc = ausgleich.new.701.d

	is_triggered_only = yes

	option = {
		name = ausgleich.new.701.a
		add_political_power = 20
		FROM = {
			every_core_state = { add_core_of = ROOT }
			if = {
				limit = { tag = HUN }
				HUN_remove_joseph_august = yes
			}
			else_if = {
				limit = { tag = GAL }
				GAL_remove_karl_albrecht = yes
			}
			delete_unit = { disband = yes }
		}
		annex_country = {
			target = FROM
			transfer_troops = yes
		}
		if = {
			limit = { has_idea = AUS_military_integration }
			modify_timed_idea = {
				idea = AUS_military_integration
				days = 90
			}
		}
		else = {
			add_timed_idea = {
				idea = AUS_military_integration
				days = 120
			}
		}
	}
}

country_event = { #ROM attacks revolter HUN
	id = ausgleich.new.702
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.702 FROM = [From.GetName]" }
	title = ausgleich.new.702.t
	desc = ausgleich.new.702.d

	is_triggered_only = yes

	option = {
		name = ausgleich.new.702.a
		ai_chance = {
			base = 100
			modifier = {
				add = -75
				surrender_progress > 0.4
			}
			modifier = {
				add = -50
				any_enemy_country = {
					is_actual_major = yes
				}
			}
		}
		declare_war_on = {
			target = FROM
			type = annex_everything
		}
	}

	option = {
		name = ausgleich.new.702.b
		ai_chance = {
			base = 0
			modifier = {
				add = 75
				surrender_progress > 0.4
			}
			modifier = {
				add = 50
				any_enemy_country = {
					is_actual_major = yes
				}
			}
		}
		add_political_power = -100
	}
}

### Belgrade Pact-Austrian Peace Deal

country_event = { #We're losing, sue for peace? (AUS)
	id = ausgleich.new.800
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.800 FROM = [From.GetName]" }
	title = ausgleich.new.800.t
	picture = GFX_report_event_generic_towar

	desc = {
		text = ausgleich.new.800.d
		trigger = {
			NOT = {
				GER = {
					is_faction_leader = yes
					NOT = {
						has_war_with = ROOT
						has_war_with = event_target:AUS_belgrade_pact_leader
					}
				}
			}
		}
	}
	desc = {
		text = ausgleich.new.800.d.germany
		trigger = {
			GER = {
				is_faction_leader = yes
				NOT = {
					has_war_with = ROOT
					has_war_with = event_target:AUS_belgrade_pact_leader
				}
			}
		}
	}

	fire_only_once = yes

	trigger = {
		tag = AUS
		has_war = yes
		OR = {
			AND = {
				has_war_with = SER
				SER = {
					is_valid_peace_target = yes
					surrender_progress < 0.4
				}
			}
			AND = {
				has_war_with = ROM
				ROM = {
					is_valid_peace_target = yes
					surrender_progress < 0.4
				}
			}
			AND = {
				has_war_with = CZE
				CZE = {
					is_valid_peace_target = yes
					surrender_progress < 0.4
				}
			}
			AND = {
				has_war_with = CRO
				CRO = {
					is_valid_peace_target = yes
					surrender_progress < 0.4
				}
			}
			AND = {
				has_war_with = GAL
				GAL = {
					is_valid_peace_target = yes
					surrender_progress < 0.4
				}
			}
			AND = {
				has_war_with = POL
				POL = {
					is_valid_peace_target = yes
					surrender_progress < 0.4
				}
			}
			AND = {
				has_war_with = BUL
				BUL = {
					has_completed_focus = BUL_hijack_yugoslavism
					is_valid_peace_target = yes
					surrender_progress < 0.4
				}
			}
		}
		GER = {
			is_faction_leader = yes
			NOT = { has_war_with = ROOT }
		}
		is_subject = no
		OR = {
			is_in_faction = no
			is_faction_leader = yes
			OTT = {
				is_faction_leader = yes
				is_in_faction_with = ROOT
			}
		}
		if = {
			limit = {
				has_subject = TRS
				has_war_with = ROM
				surrender_progress < 0.5
			}
			TRS = { has_capitulated = yes }
		}
		OR = {
			count_triggers = {
				amount = 3
				## Hungary is at >50% surrender and/or Budapest is lost
				43 = { #Budapest
					owned_by_austria_or_puppet = yes
					is_controlled_by_BP = yes
					if = {
						limit = { is_owned_by = HUN }
						owner = { surrender_progress > 0.50 }
					}
				}

				## Transylvania exists and is at >50% surrender
				76 = { #Cluj
					is_owned_by = TRS
					is_controlled_by_BP = yes
					owner = {
						is_subject_of = AUS
						surrender_progress > 0.50
					}
				}

				## Slovakia is at >50% surrender and/or Pressburg is lost
				OR = {
					SLO = {
						is_subject_of = AUS
						surrender_progress > 0.5
					}
					1090 = {
						owned_by_austria_or_puppet = yes
						is_controlled_by_BP = yes
					}
				}

				## Bohemia is at >50% surrender and/or Prague is lost
				9 = { #Bohemia
					owned_by_austria_or_puppet = yes
					is_controlled_by_BP = yes
					if = {
						limit = { is_owned_by = CZE }
						owner = { surrender_progress > 0.50 }
					}
				}

				## Illyria is at >50% surrender and/or Zagreb is lost
				109 = { #Central Croatia
					owned_by_austria_or_puppet = yes
					is_controlled_by_BP = yes
					if = {
						limit = { is_owned_by = CRO }
						owner = { surrender_progress > 0.50 }
					}
				}

				## Galicia is at >50% surrender and/or Lemberg is lost
				91 = { #Lemberg
					owned_by_austria_or_puppet = yes
					is_controlled_by_BP = yes
					if = {
						limit = { is_owned_by = GAL }
						owner = { surrender_progress > 0.50 }
					}
				}
			}
			# SER/ROM has penetrated into the Austria strategic region
			# and Austria is at >50% surrender overall
			AND = {
				surrender_progress > 0.5 #for USGA/DanFed
				any_owned_state = {
					region = 21 #Austria
					is_controlled_by_BP = yes
				}
			}
		}
	}

	immediate = {
		hidden_effect = {
			add_ideas = has_scripted_peace
			if = {
				limit = {
					has_war_with = SER
					SER = { is_faction_leader = yes }
				}
				SER = { save_event_target_as = AUS_belgrade_pact_leader }
			}
			else_if = {
				limit = {
					has_war_with = BUL
					BUL = {
						has_completed_focus = BUL_hijack_yugoslavism
						is_valid_peace_target = yes
					}
				}
				BUL = { save_event_target_as = AUS_belgrade_pact_leader }
			}
			else = {
				random_enemy_country = {
					limit = {
						is_valid_peace_target = yes
						OR = {
							tag = SER
							tag = ROM
						}
					}
					save_event_target_as = AUS_belgrade_pact_leader
				}
			}
			if = {
				limit = {
					NOT = { has_global_flag = AUS_enacted_military_occupation }
					GER = {
						is_faction_leader = yes
						NOT = {
							has_war_with = ROOT
							has_war_with = event_target:AUS_belgrade_pact_leader
						}
					}
				}
				GER = { save_event_target_as = AUS_germany_can_intervene }
			}
		}
	}

	option = {
		name = ausgleich.new.800.a
		trigger = {
			NOT = { has_event_target = AUS_germany_can_intervene }
		}
		every_enemy_country = {
			limit = { AUS_is_potential_fifth_balkan_war_participant = yes }
			country_event = ausgleich.new.801
		}
		hidden_effect = { country_event = { id = ausgleich.new.802 days = 6 } }
	}

	option = {
		name = ausgleich.new.800.b
		trigger = {
			NOT = { has_event_target = AUS_germany_can_intervene }
		}
		ai_chance = { base = 0 }
		add_stability = -0.1
		add_war_support = -0.1
		hidden_effect = {
			remove_ideas = has_scripted_peace
		}
	}

	option = {
		name = ausgleich.new.800.c #Turn to Germany for help
		trigger = {
			has_event_target = AUS_germany_can_intervene
		}
		GER = { country_event = ausgleich.new.820 }
	}

	option = {
		name = ausgleich.new.800.e #Just give them whatever they want
		trigger = {
			has_event_target = AUS_germany_can_intervene
		}
		ai_chance = { base = 0 }
		every_enemy_country = {
			limit = { AUS_is_potential_fifth_balkan_war_participant = yes }
			country_event = ausgleich.new.801
		}
		hidden_effect = { country_event = { id = ausgleich.new.802 days = 6 } }
	}

	option = {
		name = ausgleich.new.800.f #We will fight on without Germany!
		trigger = {
			has_event_target = AUS_germany_can_intervene
		}
		ai_chance = { base = 0 }
		add_stability = -0.1
		add_war_support = -0.1
		hidden_effect = {
			remove_ideas = has_scripted_peace
		}
	}
}

country_event = { #Austria seeks peace (SER/ROM/BUL/POL/ITA)
	id = ausgleich.new.801
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.801 FROM = [From.GetName]" }
	picture = GFX_report_event_generic_diplomacy2

	title = {
		text = ausgleich.new.801.t
		trigger = {
			AUS = {
				NOT = { has_country_flag = AUS_german_intervention }
			}
		}
	}
	title = {
		text = ausgleich.new.801.t.germany
		trigger = {
			AUS = { has_country_flag = AUS_german_intervention }
		}
	}

	desc = {
		text = ausgleich.new.801.d.main
		trigger = {
			OR = {
				is_faction_leader = yes
				is_in_faction = no
			}
			AUS = {
				NOT = { has_country_flag = AUS_german_intervention }
			}
		}
	}
	desc = {
		text = augleich.new.801.d.main.faction1
		trigger = {
			is_in_faction = yes
			is_faction_leader = no
			faction_leader = { has_country_flag = AUS_accepts_peace }
			AUS = {
				NOT = { has_country_flag = AUS_german_intervention }
			}
		}
	}
	desc = {
		text = augleich.new.801.d.main.faction2
		trigger = {
			is_in_faction = yes
			is_faction_leader = no
			faction_leader = { has_country_flag = AUS_will_continue_war }
			AUS = {
				NOT = { has_country_flag = AUS_german_intervention }
			}
		}
	}
	desc = {
		text = ausgleich.new.801.d.germany.main1
		trigger = {
			OR = {
				is_faction_leader = yes
				is_in_faction = no
			}
			AUS = { has_country_flag = AUS_german_intervention }
			if = {
				limit = { tag = ITA }
				OR = {
					783 = { owned_by_austria_or_puppet = yes }
					488 = { owned_by_austria_or_puppet = yes }
					103 = {
						is_claimed_by = ITA
						owned_by_austria_or_puppet = yes
					}
					163 = {
						is_claimed_by = ITA
						owned_by_austria_or_puppet = yes
					}
				}
			}
		}
	}
	desc = {
		text = ausgleich.new.801.d.germany.main2
		trigger = {
			tag = ITA
			OR = {
				is_faction_leader = yes
				is_in_faction = no
			}
			AUS = { has_country_flag = AUS_german_intervention }
			NOT = {
				783 = { owned_by_austria_or_puppet = yes }
				488 = { owned_by_austria_or_puppet = yes }
				103 = {
					is_claimed_by = ITA
					owned_by_austria_or_puppet = yes
				}
				163 = {
					is_claimed_by = ITA
					owned_by_austria_or_puppet = yes
				}
			}
		}
	}
	desc = {
		text = ausgleich.new.801.d.germany.main.faction1
		trigger = {
			is_in_faction = yes
			is_faction_leader = no
			faction_leader = { has_country_flag = AUS_accepts_peace }
			AUS = { has_country_flag = AUS_german_intervention }
		}
	}
	desc = {
		text = ausgleich.new.801.d.germany.main.faction2
		trigger = {
			is_in_faction = yes
			is_faction_leader = no
			faction_leader = { has_country_flag = AUS_will_continue_war }
			AUS = { has_country_flag = AUS_german_intervention }
		}
	}

	is_triggered_only = yes
	timeout_days = 4

	trigger = {
		has_war_with = AUS
	}

	option = {
		name = ausgleich.new.801.a
		ai_chance = {
			base = 50
		}
		set_country_flag = AUS_accepts_peace
		if = {
			limit = { num_subjects > 0 }
			every_subject_country = { set_country_flag = AUS_accepts_peace }
		}
		if = {
			limit = { is_faction_leader = yes }
			every_other_country = {
				limit = {
					NOT = { tag = ROOT }
					is_in_faction_with = ROOT
					is_subject = no
				}
				hidden_effect = {
					country_event = ausgleich.new.801
				}
			}
		}
		else_if = {
			limit = {
				is_in_faction = yes
				is_faction_leader = no
				faction_leader = { has_country_flag = AUS_will_continue_war }
			}
			faction_leader = {
				country_event = ausgleich.new.823
			}
			leave_faction = yes
		}
		effect_tooltip = {
			AUS = {
				country_event = ausgleich.new.802
			}
		}
	}

	option = {
		name = ausgleich.new.801.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				tag = GRE
			}
			modifier = {
				factor = 0
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
			}
			modifier = {
				factor = 0
				is_in_faction = yes
				is_faction_leader = no
				faction_leader = { has_country_flag = AUS_accepts_peace }
			}
		}
		set_country_flag = AUS_will_continue_war
		add_stability = -0.2
		add_war_support = -0.2
		AUS = {
			country_event = { id = ausgleich.new.804 hours = 4 random_hours = 12 }
		}
		if = {
			limit = { num_subjects > 0 }
			every_subject_country = { set_country_flag = AUS_will_continue_war }
		}
		if = {
			limit = { is_faction_leader = yes }
			every_other_country = {
				limit = {
					NOT = { tag = ROOT }
					is_in_faction_with = ROOT
					is_subject = no
				}
				hidden_effect = {
					country_event = ausgleich.new.801
				}
			}
		}
		else_if = {
			limit = {
				is_in_faction = yes
				is_faction_leader = no
				faction_leader = { has_country_flag = AUS_accepts_peace }
			}
			faction_leader = {
				country_event = ausgleich.new.805
			}
			leave_faction = yes
		}
	}
}

country_event = { #Treaty of Budapest
	id = ausgleich.new.802
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.802 FROM = [From.GetName]" }
	title = ausgleich.new.802.t
	desc = ausgleich.new.802.d
	picture = GFX_report_event_generic_conference2

	trigger = {
		any_enemy_country = {
			has_country_flag = AUS_accepts_peace
			is_valid_peace_target = yes
		}
	}

	is_triggered_only = yes

	option = {
		name = ausgleich.new.802.a
		set_global_flag = AUS_treaty_of_budapest
		if = {
			limit = { has_idea = AUS_crownland_revolt }
			remove_ideas = AUS_crownland_revolt
		}
		else_if = {
			limit = { has_idea = AUS_crownland_revolt_2 }
			remove_ideas = AUS_crownland_revolt_2
		}

		hidden_effect = {
			### Italian claims
			if = {
				limit = {
					ITA = {
						has_war_with = ROOT
						has_country_flag = AUS_accepts_peace
					}
				}
				ITA = { save_event_target_as = AUS_italian_enemy }
			}
			else_if = {
				limit = {
					VNC = {
						has_war_with = ROOT
						has_country_flag = AUS_accepts_peace
					}
				}
				VNC = { save_event_target_as = AUS_italian_enemy }
			}
			if = {
				limit = { has_event_target = AUS_italian_enemy }
				every_state = {
					limit = {
						OR = {
							state = 488 #Trieste
							state = 488 #Trieste
							state = 783 #Trentino
							AND = {
								OR = {
									state = 683 #Gorizia
									state = 736 #Istria
								}
								ROOT = { NOT = { has_country_flag = AUS_german_intervention } }
							}
							AND = {
								ROOT = { NOT = { has_country_flag = AUS_german_intervention } }
								state = 39 #Alto Adige
								is_claimed_by = event_target:AUS_italian_enemy
							}
							AND = {
								OR = {
									state = 103 #Rijeka
									state = 163 #Dalmatia
								}
								OR = {
									ROOT = { NOT = { has_country_flag = AUS_german_intervention } }
									736 = { owner = { is_ally_with = event_target:AUS_italian_enemy } }
								}
								is_claimed_by = event_target:AUS_italian_enemy
							}
						}
						is_owned_by_ROOT_or_subject = yes
						NOT = {
							controller = {
								has_war_with = ROOT
								NOT = { has_country_flag = AUS_accepts_peace }
							}
						}
					}
					transfer_state_to = event_target:AUS_italian_enemy
				}
				every_other_country = {
					limit = {
						is_in_faction_with = ROOT
						is_italian_tag = yes
					}
					leave_faction = yes
				}
				event_target:AUS_italian_enemy = {
					if = {
						limit = { is_valid_peace_target = yes }
						white_peace_with_ROOT = yes
					}
				}
			}

			### Polish claims
			if = {
				limit = {
					POL = {
						has_war_with = ROOT
						has_country_flag = AUS_accepts_peace
					}
				}
				if = {
					limit = { has_subject = GAL }
					set_autonomy = {
						target = GAL
						autonomy_state = autonomy_free
					}
					GAL = {
						leave_faction = yes
						drop_cosmetic_tag = yes
					}
				}
				every_state = {
					limit = {
						OR = {
							region = 155 #Galicia
							state = 924 #Teschen
							AND = {
								OR = {
									state = 80 #Cernauti
									state = 713 #Suceava
								}
								ROM = { NOT = { has_war_with = AUS } }
							}
						}
						is_owned_by_ROOT_or_subject = yes
						NOT = {
							controller = {
								has_war_with = ROOT
								NOT = { has_country_flag = AUS_accepts_peace }
							}
						}
					}
					transfer_state_to = POL
				}
				POL = {
					if = {
						limit = { is_valid_peace_target = yes }
						white_peace_with_ROOT = yes
					}
				}
			}

			### Galician claims
			if = {
				limit = {
					GAL = {
						has_war_with = ROOT
						has_country_flag = AUS_accepts_peace
					}
				}
				every_state = {
					limit = {
						OR = {
							region = 155 #Galicia
							state = 80 #Cernauti
							state = 713 #Suceava
							state = 924 #Teschen
						}
						is_owned_by_ROOT_or_subject = yes
						NOT = {
							controller = {
								has_war_with = ROOT
								NOT = { has_country_flag = AUS_accepts_peace }
							}
						}
					}
					transfer_state_to = GAL
				}
			}

			### Czech claims
			if = {
				limit = {
					CZE = {
						has_war_with = ROOT
						has_country_flag = AUS_accepts_peace
					}
				}
				if = {
					limit = { has_subject = SLO }
					set_autonomy = {
						target = SLO
						autonomy_state = autonomy_free
					}
					SLO = {
						leave_faction = yes
						drop_cosmetic_tag = yes
					}
				}
				every_state = {
					limit = {
						OR = {
							is_core_of = CZE
							is_core_of = SLO
							is_claimed_by = CZE
							is_claimed_by = SLO
						}
						is_owned_by_ROOT_or_subject = yes
						NOT = {
							controller = {
								has_war_with = ROOT
								NOT = { has_country_flag = AUS_accepts_peace }
							}
						}
					}
					transfer_state_to = CZE
				}
			}

			### Croatian claims
			if = {
				limit = {
					CRO = {
						has_war_with = ROOT
						has_country_flag = AUS_accepts_peace
					}
				}
				every_state = {
					limit = {
						OR = {
							region = 143 #Northern Balkans
							state = 45 #Vojvodina
							state = 875 #West Banat
							state = 102 #Carniola
							AND = {
								state = 488 #Trieste
								NOT = {
									has_event_target = AUS_italian_enemy
									ROOT = { has_country_flag = AUS_german_intervention }
								}
							}
							AND = {
								state = 736 #Istria
								NOT = { ROOT = { has_country_flag = AUS_german_intervention } }
							}
						}
						is_owned_by_ROOT_or_subject = yes
						NOT = {
							controller = {
								has_war_with = ROOT
								NOT = { has_country_flag = AUS_accepts_peace }
							}
						}
					}
					transfer_state_to = CRO
				}
			}

			### Yugoslav claims
			if = {
				limit = {
					SER = {
						has_war_with = ROOT
						has_country_flag = AUS_accepts_peace
					}
				}
				SER = { save_event_target_as = AUS_yugoslav_enemy }
			}
			else_if = {
				limit = {
					BUL = {
						is_subject = no
						has_war_with = ROOT
						has_country_flag = AUS_accepts_peace
					}
				}
				BUL = { save_event_target_as = AUS_yugoslav_enemy }
			}
			if = {
				limit = { has_event_target = AUS_yugoslav_enemy }
				if = {
					limit = { has_subject = ALB }
					set_autonomy = {
						target = ALB
						autonomy_state = autonomy_free
					}
					ALB = { leave_faction = yes }
				}
				else_if = {
					limit = { is_in_faction_with = ALB }
					ALB = { leave_faction = yes }
				}
				if = {
					limit = { has_subject = CRO }
					set_autonomy = {
						target = CRO
						autonomy_state = autonomy_free
					}
					CRO = {
						leave_faction = yes
						if = {
							limit = { has_cosmetic_tag = CRO_illyria_habsburg }
							set_cosmetic_tag = CRO_illyria
						}
						else = {
							drop_cosmetic_tag = yes
						}
					}
				}
				every_state = {
					limit = {
						OR = {
							region = 24 #Southern Balkans
							region = 143 #Northern Balkans
							state = 45 #Vojvodina
							state = 102 #Carniola
							state = 875 #West Banat
							AND = {
								OR = {
									state = 488 #Trieste
									state = 683 #Gorizia
									state = 736 #Istria
								}
								NOT = {
									has_event_target = AUS_italian_enemy
									ROOT = { has_country_flag = AUS_german_intervention }
								}
							}
						}
						is_owned_by_ROOT_or_subject = yes
						NOT = {
							controller = {
								has_war_with = ROOT
								NOT = { has_country_flag = AUS_accepts_peace }
							}
						}
					}
					transfer_state_to = event_target:AUS_yugoslav_enemy
				}
			}

			### Romanian claims
			if = {
				limit = {
					ROM = {
						has_war_with = ROOT
						has_country_flag = AUS_accepts_peace
					}
				}
				if = {
					limit = { has_subject = TRS }
					set_autonomy = {
						target = TRS
						autonomy_state = autonomy_free
					}
					TRS = {
						leave_faction = yes
						drop_cosmetic_tag = yes
					}
				}
				every_state = {
					limit = {
						region = 144 #Transylvania
						is_owned_by_ROOT_or_subject = yes
						NOT = {
							controller = {
								has_war_with = ROOT
								NOT = { has_country_flag = AUS_accepts_peace }
							}
						}
					}
					transfer_state_to = ROM
				}
			}

			### Greek claims
			if = {
				limit = {
					GRE = {
						has_war_with = ROOT
						has_country_flag = AUS_accepts_peace
					}
					776 = { #Northern Epirus
						is_owned_by_ROOT_or_ally = yes
						NOT = {
							controller = {
								has_war_with = ROOT
								NOT = { has_country_flag = AUS_accepts_peace }
							}
						}
					}
				}
				GRE = { transfer_state = 766 } #Northern Epirus
			}

			### If the treaty happened due to Military Occupation, release all annexed crownlands
			if = {
				limit = { has_global_flag = AUS_enacted_military_occupation }
				if = {
					limit = {
						owns_state = 9 #Prague
						NOT = { country_exists = CZE }
					}
					release = CZE
				}
				if = {
					limit = {
						owns_state = 70 #Slovakia
						NOT = { country_exists = SLO }
					}
					release = SLO
				}
				if = {
					limit = {
						owns_state = 109 #Central Croatia
						NOT = { country_exists = CRO }
					}
					release = CRO
				}
				if = {
					limit = {
						OR = {
							owns_state = 88 #Krakow
							owns_state = 91 #Lwow
						}
						NOT = { country_exists = GAL }
					}
					release = GAL
				}
				if = {
					limit = { owns_state = 84 } #Transylvania
					release = TRS
				}
			}

			### Peace everyone out
			every_other_country = {
				limit = { has_country_flag = AUS_accepts_peace }
				country_event = ausgleich.new.803
				country_event = { id = ausgleich.new.807 days = 1 }
				if = {
					limit = { is_valid_peace_target = yes }
					white_peace_with_ROOT = yes
				}
				else_if = {
					limit = { is_in_faction = yes }
					faction_leader = { white_peace_with_ROOT = yes }
				}
			}
			country_event = { id = ausgleich.new.808 days = 1 }

			### Fire the news event
			if = {
				limit = {
					OR = {
						SER = { has_country_flag = AUS_accepts_peace }
						BUL = { has_country_flag = AUS_accepts_peace }
						ROM = { has_country_flag = AUS_accepts_peace }
					}
				}
				news_event = { id = ausgleich.new.806 days = 1 }
			}

			### Clear Austrian claims/cores/ambition_areas
			every_state = {
				limit = {
					is_claim_or_core_of_ROOT = yes
					NOT = {
						region = 21 #Austria
						AND = {
							region = 27 #Hungary
							NOT = { state = 45 } #Vojvodina
							is_owned_by = HUN
						}
						owner = { is_ally_with = ROOT }
					}
				}
				remove_core_of = ROOT
				remove_claim_by = ROOT
			}
		}

		if = {
			limit = {
				has_country_flag = AUS_german_intervention
				GER = {
					is_faction_leader = yes
					NOT = {
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
			hidden_effect = {
				country_event = { id = ausgleich.new.825 hours = 8 }
			}
		}
		else_if = {
			limit = { is_faction_leader = yes }
			dismantle_faction = yes
		}
		hidden_effect = {
			remove_ideas = has_scripted_peace
			recheck_annexations = yes
			every_subject_country = { recheck_annexations = yes }
			country_event = { id = ausgleich.new.915 days = 7 }
		}
	}
}

country_event = { #Victory Against Austria (SER/ROM/POL/ITA)
	id = ausgleich.new.803
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.803 FROM = [From.GetName]" }
	title = ausgleich.new.803.t
	picture = GFX_report_event_generic_happy_crowd

	desc = {
		text = ausgleich.new.803.d.balkan
		trigger = {
			NOT = {
				tag = ITA
				tag = POL
			}
			AUS = {
				NOT = { has_country_flag = AUS_german_intervention }
			}
		}
	}
	desc = {
		text = ausgleich.new.803.d.germany.balkan
		trigger = {
			NOT = {
				tag = ITA
				tag = POL
			}
			AUS = { has_country_flag = AUS_german_intervention }
		}
	}
	desc = {
		text = ausgleich.new.803.d.italy
		trigger = {
			tag = ITA
			AUS = {
				NOT = { has_country_flag = AUS_german_intervention }
			}
		}
	}
	desc = {
		text = ausgleich.new.803.d.germany.italy
		trigger = {
			tag = ITA
			AUS = { has_country_flag = AUS_german_intervention }
		}
	}
	desc = {
		text = ausgleich.new.803.d.poland
		trigger = {
			tag = POL
			AUS = {
				NOT = { has_country_flag = AUS_german_intervention }
			}
		}
	}
	desc = {
		text = ausgleich.new.803.d.germany.poland
		trigger = {
			tag = POL
			AUS = { has_country_flag = AUS_german_intervention }
		}
	}

	is_triggered_only = yes

	option = {
		name = ausgleich.new.803.a
		add_political_power = 100
	}
}

country_event = { #FROM refuses peace (AUS)
	id = ausgleich.new.804
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.804 FROM = [From.GetName]" }
	title = ausgleich.new.804.t
	desc = ausgleich.new.804.d

	is_triggered_only = yes

	option = {
		name = ausgleich.new.804.a
		add_war_support = 0.1

		if = {
			limit = {
				has_country_flag = AUS_german_intervention
				GER = {
					is_faction_leader = yes
					NOT = {
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
			if = {
				limit = { is_faction_leader = yes }
				every_other_country = {
					limit = { is_in_faction_with = ROOT }
					country_event = ausgleich.new.824
				}
				dismantle_faction = yes
			}
			else = {
				every_other_country = {
					limit = {
						is_subject_of = ROOT
						is_in_faction = no
					}
					country_event = ausgleich.new.824
				}
			}
			GER = { add_to_faction = ROOT }
		}
	}
}

country_event = { #FROM has refused peace, while faction leader has agreed to it
	id = ausgleich.new.805
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.805 FROM = [From.GetName]" }
	title = ausgleich.new.805.t
	desc = ausgleich.new.805.d

	is_triggered_only = yes

	option = {
		name = ausgleich.new.805.a
		effect_tooltip = { remove_from_faction = FROM }
	}
}

news_event = { #The Treaty of Budapest
	id = ausgleich.new.806
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.806 FROM = [From.GetName]" }
	title = ausgleich.new.806.t
	picture = GFX_news_event_romania_poland_visit

	desc = {
		text = ausgleich.new.806.d
		trigger = {
			AUS = {
				NOT = { has_country_flag = AUS_german_intervention }
			}
		}
	}
	desc = {
		text = ausgleich.new.806.d.germany
		trigger = {
			AUS = { has_country_flag = AUS_german_intervention }
		}
	}

	major = yes
	fire_for_sender = no
	is_triggered_only = yes

	trigger = {
		wants_world_news = yes
	}

	show_major = {
		NOT = { has_country_flag = AUS_accepts_peace }
	}

	option = {
		name = ausgleich.new.806.a
	}
}

country_event = { #The Terms of the Treaty of Budapest
	id = ausgleich.new.807
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.807 FROM = [From.GetName]" }
	title = ausgleich.new.807.t
	desc = ausgleich.new.807.d

	trigger = {
		OR = {
			tag = SER
			tag = BUL
			tag = ROM
			tag = POL
			tag = ITA
		}
		has_global_flag = AUS_treaty_of_budapest
		has_country_flag = AUS_accepts_peace
		country_exists = AUS
		AUS = {
			is_subject = no
			NOT = { has_war_with = ROOT }
		}
		any_owned_state = {
			region = 27 #Hungary
			NOT = { state = 45 } #Vojvodina
		}
	}

	is_triggered_only = yes

	option = {
		name = ausgleich.new.805.a
		every_owned_state = {
			limit = {
				region = 27 #Hungary
				NOT = { state = 45 } #Vojvodina
			}
			transfer_state_to = AUS
		}
	}
}

country_event = { #Returning Pact Claims
	id = ausgleich.new.808
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.808 FROM = [From.GetName]" }
	title = ausgleich.new.808.t
	desc = ausgleich.new.808.d

	trigger = {
		tag = AUS
		has_global_flag = AUS_treaty_of_budapest
		OR = {
			owns_belgrade_pact_claimed_state = yes
			any_allied_country = {
				owns_belgrade_pact_claimed_state = yes
			}
			any_subject_country = {
				owns_belgrade_pact_claimed_state = yes
			}
		}
	}

	is_triggered_only = yes

	option = {
		name = ausgleich.new.805.a
		if = {
			limit = {
				country_exists = ROM
				ROM = {
					is_subject = no
					NOT = { has_war_with = ROOT }
					has_country_flag = AUS_accepts_peace
				}
			}
			every_state = {
				limit = {
					region = 144 #Transylvania
					is_owned_by_ROOT_or_subject = yes
				}
				transfer_state_to = ROM
			}
		}
		if = {
			limit = {
				country_exists = SER
				SER = {
					is_subject = no
					NOT = { has_war_with = ROOT }
					has_country_flag = AUS_accepts_peace
				}
			}
			every_state = {
				limit = {
					OR = {
						region = 24 #Southern Balkans
						region = 143 #Northern Balkans
						state = 45 #Vojvodina
					}
					is_owned_by_ROOT_or_subject = yes
				}
				transfer_state_to = SER
			}
		}
		if = {
			limit = {
				country_exists = POL
				POL = {
					is_subject = no
					NOT = { has_war_with = ROOT }
					has_country_flag = AUS_accepts_peace
				}
			}
			every_state = {
				limit = {
					region = 155 #Galicia
					is_owned_by_ROOT_or_subject = yes
				}
				transfer_state_to = POL
			}
		}
	}
}

country_event = { #Austria turns to Germany for help
	id = ausgleich.new.820
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.820 FROM = [From.GetName]" }
	title = ausgleich.new.820.t
	desc = ausgleich.new.820.d

	is_triggered_only = yes

	option = {
		name = ausgleich.new.820.a #We shall intervene
		ai_chance = {
			base = 80
			modifier = {
				factor = 0
				surrender_progress > 0.10
			}
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						has_war_with = FRA
						FRA = { surrender_progress < 0.10 }
					}
					AND = {
						has_war_with = RUS
						RUS = { surrender_progress < 0.10 }
					}
				}
			}
		}
		AUS = {
			add_opinion_modifier = { target = ROOT modifier = KR_approves_of_govt }
			country_event = ausgleich.new.821
		}
	}
	option = {
		name = ausgleich.new.820.b #They are on their own
		ai_chance = {
			base = 20
			modifier = {
				factor = 0
				has_war = no
				CZE = { has_war_with = AUS }
			}
			modifier = {
				factor = 0.5
				has_war = no
			}
			modifier = {
				factor = 0.5
				BUL = {
					OR = {
						is_subject = yes
						exists = no
						NOT = {
							owns_state = 772 #Dobrudja
							owns_state = 106 #Macedonia
							owns_state = 184 #Western Thrace
						}
					}
				}
			}
		}
		AUS = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = ausgleich.new.822
		}
	}
}

country_event = { #Germany has agreed to intervene
	id = ausgleich.new.821
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.821 FROM = [From.GetName]" }
	title = ausgleich.new.821.t
	desc = ausgleich.new.821.d

	is_triggered_only = yes

	option = {
		name = ausgleich.new.821.a
		set_country_flag = AUS_german_intervention
		every_enemy_country = {
			limit = { AUS_is_potential_fifth_balkan_war_participant = yes }
			country_event = ausgleich.new.801
		}
		hidden_effect = { country_event = { id = ausgleich.new.802 days = 6 } }
	}
}

country_event = { #Germany has refused to intervene
	id = ausgleich.new.822
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.822 FROM = [From.GetName]" }
	title = ausgleich.new.822.t
	desc = ausgleich.new.822.d

	is_triggered_only = yes

	option = {
		name = ausgleich.new.822.a
		every_enemy_country = {
			limit = { AUS_is_potential_fifth_balkan_war_participant = yes }
			country_event = ausgleich.new.801
		}
		hidden_effect = { country_event = { id = ausgleich.new.802 days = 6 } }
	}

	option = {
		name = ausgleich.new.822.b #We will fight on anyhow!
		ai_chance = { base = 0 }
		add_stability = -0.1
		add_war_support = -0.1
		hidden_effect = {
			remove_ideas = has_scripted_peace
		}
	}
}

country_event = { #FROM leaves faction when faction leader continues war
	id = ausgleich.new.823
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.823 FROM = [From.GetName]" }
	title = ausgleich.new.823.t
	desc = ausgleich.new.823.d

	is_triggered_only = yes

	option = {
		name = ausgleich.new.823.a
		effect_tooltip = { remove_from_faction = FROM }
	}
}

country_event = { #Austria has joined the Reichspakt - for Austrian subjects
	id = ausgleich.new.824
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.824 FROM = [From.GetName]" }
	title = ausgleich.new.824.t
	desc = ausgleich.new.824.d

	is_triggered_only = yes

	option = {
		name = ausgleich.new.824.a
		GER = { add_to_faction = ROOT }
	}
	option = {
		name = ausgleich.new.824.b
		trigger = {
			is_ai = no
			is_subject = no
		}
		effect_tooltip = { leave_faction = yes }
	}
}

country_event = { #Austria joins the Reichspakt after Treaty is done
	id = ausgleich.new.825
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.825 FROM = [From.GetName]" }
	title = ausgleich.new.825.t
	desc = ausgleich.new.825.d

	is_triggered_only = yes

	trigger = {
		has_country_flag = AUS_german_intervention
		GER = {
			is_faction_leader = yes
			NOT = {
				has_war_with = ROOT
				is_in_faction_with = ROOT
			}
		}
	}

	option = {
		name = ausgleich.new.825.a
		if = {
			limit = { is_faction_leader = yes }
			every_other_country = {
				limit = { is_in_faction_with = ROOT }
				country_event = ausgleich.new.824
			}
			dismantle_faction = yes
		}
		else = {
			every_other_country = {
				limit = {
					is_subject_of = ROOT
					is_in_faction = no
				}
				country_event = ausgleich.new.824
			}
		}
		GER = { add_to_faction = ROOT }
	}
}

### Austrian Collapse events ###

country_event = { #MilOcc revolts
	id = ausgleich.new.900
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.900 FROM = [From.GetName]" }

	title = {
		text = ausgleich.new.900.t.CRO
		trigger = { tag = CRO }
	}
	title = {
		text = ausgleich.new.900.t.CZE_broken_promise
		trigger = {
			tag = CZE
			NOT = { country_exists = HUN }
		}
	}
	title = {
		text = ausgleich.new.900.t.CZE_secret_deal
		trigger = {
			tag = CZE
			country_exists = HUN
		}
	}
	title = {
		text = ausgleich.new.900.t.GAL_broken_promise
		trigger = {
			tag = GAL
			NOT = { country_exists = HUN }
		}
	}
	title = {
		text = ausgleich.new.900.t.GAL_secret_deal
		trigger = {
			tag = GAL
			country_exists = HUN
		}
	}

	desc = {
		text = ausgleich.new.900.d.CRO
		trigger = { tag = CRO }
	}
	desc = {
		text = ausgleich.new.900.d.CZE_broken_promise
		trigger = {
			tag = CZE
			NOT = { country_exists = HUN }
		}
	}
	desc = {
		text = ausgleich.new.900.d.CZE_secret_deal
		trigger = {
			tag = CZE
			country_exists = HUN
		}
	}
	desc = {
		text = ausgleich.new.900.d.GAL_broken_promise
		trigger = {
			tag = GAL
			NOT = { country_exists = HUN }
		}
	}
	desc = {
		text = ausgleich.new.900.d.GAL_secret_deal
		trigger = {
			tag = GAL
			country_exists = HUN
		}
	}

	picture = GFX_report_event_generic_towar

	trigger = {
		is_subject_of = AUS
	}

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			XXA = {
				every_character = {
					limit = { has_character_flag = CZE_character }
					set_nationality = CZE
				}
			}
		}
	}

	option = { # yes.
		name = ausgleich.new.900.a
		if = {
			limit = { tag = CZE }
			CZE_change_portraits = yes
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = characters_will_be_recruited
			character_list_tooltip = {
				limit = { has_character_flag = CZE_character }
			}
			unlock_decision_tooltip = CZE_join_belgrade_pact
			custom_effect_tooltip = tooltip_white_line
		}
		else_if = {
			limit = { tag = GAL }
			GAL_remove_karl_albrecht = yes
			GAL_wladyslaw_sikorski = {
				promote_leader = yes
				set_portraits = {
					army = {
						large = "gfx/leaders/GAL/Portrait_GAL_Wladyslaw_Sikorski_POL.png"
					}
				}
			}
			set_portraits = {
				character = GAL_stanislaw_szeptycki
				army = {
					large = "gfx/leaders/GAL/Portrait_GAL_Stanislaw_Szeptycki_POL.png"
				}
			}
			set_portraits = {
				character = GAL_franciszek_kleeberg
				army = {
					large = "gfx/leaders/GAL/Portrait_GAL_Franciszek_Kleeberg_POL.png"
				}
			}
			set_portraits = {
				character = GAL_tadeusz_kutrzeba
				army = {
					large = "gfx/leaders/GAL/Portrait_GAL_Tadeusz_Kutrzeba_POL.png"
				}
			}
			set_portraits = {
				character = GAL_dmytro_vitovsky
				army = {
					large = "gfx/leaders/GAL/Portrait_GAL_Dmytro_Vitovsky_UKR.png"
				}
			}
		}
		hidden_effect = {
			drop_cosmetic_tag = yes
			leave_faction = yes
			every_owned_state = {
				teleport_armies = {
					limit = { is_ally_with = AUS }
					to_state_array = owned_controlled_states
				}
			}
			every_state = {
				limit = {
					owner = { is_ally_with = AUS }
				}
				teleport_armies = {
					limit = { tag = ROOT }
					to_state_array = owned_controlled_states
				}
			}
			set_rule = { can_not_declare_war = no }
			separate_peace_all_wars = yes
		}
		AUS = {
			set_autonomy = {
				target = ROOT
				autonomy_state = autonomy_free
			}
			country_event = ausgleich.new.9000
		}
	}
}

country_event = { #MilOcc revolts (for AUS)
	id = ausgleich.new.9000
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.9000 FROM = [From.GetName]" }

	title = {
		text = ausgleich.new.9000.t.occupation
		trigger = { NOT = { country_exists = HUN } }
	}
	title = {
		text = ausgleich.new.9000.t.secret_deal
		trigger = { country_exists = HUN }
	}

	desc = {
		text = ausgleich.new.9000.d.CZE
		trigger = { FROM = { tag = CZE } }
	}
	desc = {
		text = ausgleich.new.9000.d.GAL
		trigger = { FROM = { tag = GAL } }
	}
	desc = {
		text = ausgleich.new.9000.d.CRO
		trigger = { FROM = { tag = CRO } }
	}

	picture = GFX_report_event_ger_civil_war

	trigger = {
		can_declare_war_on = FROM
	}

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			FROM = {
				declare_war_on = {
					target = ROOT #inverted to account for POL's guarantee
					type = annex_everything
				}
			}
			if = {
				limit = { has_subject = HUN }
				HUN = {
					add_to_war = {
						targeted_alliance = ROOT
						enemy = FROM
					}
				}
			}
		}
	}

	option = {
		name = ausgleich.new.9000.a
		trigger = { NOT = { country_exists = HUN } }
		if = {
			limit = { has_idea = AUS_crownland_revolt }
			swap_ideas = {
				remove_idea = AUS_crownland_revolt
				add_idea = AUS_crownland_revolt_2
			}
		}
		else_if = {
			limit = { NOT = { has_idea = AUS_crownland_revolt_2 } }
			add_ideas = AUS_crownland_revolt_2
		}
		effect_tooltip = {
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}

	option = {
		name = ausgleich.new.9000.b
		trigger = { country_exists = HUN }
		if = {
			limit = { has_idea = AUS_crownland_revolt }
			swap_ideas = {
				remove_idea = AUS_crownland_revolt
				add_idea = AUS_crownland_revolt_2
			}
		}
		else_if = {
			limit = { NOT = { has_idea = AUS_crownland_revolt_2 } }
			add_ideas = AUS_crownland_revolt_2
		}
		effect_tooltip = {
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
}

# CZE events
country_event = { #Czechia pleads for support
	id = ausgleich.new.901
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.901 FROM = [From.GetName]" }
	title = ausgleich.new.901.t
	desc = ausgleich.new.901.d
	picture = GFX_report_event_gre_diplomacy

	is_triggered_only = yes

	option = {
		name = ausgleich.new.901.a #This is our chance! To war!
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				surrender_progress > 0
			}
		}
		add_state_claim = 45 #Vojvodina
		add_state_claim = 102 #Slovenia
		add_state_claim = 103 #Rijeka
		add_state_claim = 104 #Bosnia
		add_state_claim = 105 #Montenegro
		add_state_claim = 109 #Central Croatia
		add_state_claim = 163 #Dalmatia
		add_state_claim = 683 #Gorizia
		add_state_claim = 736 #Istria
		add_state_claim = 794 #Syrmia
		add_state_claim = 841 #Kotor
		add_state_claim = 875 #West Banat
		add_to_faction = FROM
		FROM = { country_event = { id = ausgleich.new.902 days = 1 } }
		if = {
			limit = { can_declare_war_on = HUN }
			declare_war_on = {
				target = HUN
				type = annex_everything
			}
		}
		if = {
			limit = { can_declare_war_on = AUS }
			declare_war_on = {
				target = AUS
				type = annex_everything
			}
		}
	}

	option = {
		name = ausgleich.new.901.b #Austria is too strong...
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				NOT = { has_war_with = AUS }
				surrender_progress > 0
			}
		}
		FROM = { country_event = { id = ausgleich.new.903 days = 2 } }
	}
}

country_event = { #Serbia accepts
	id = ausgleich.new.902
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.902 FROM = [From.GetName]" }
	title = ausgleich.new.902.t

	desc = {
		text = ausgleich.new.902.d.CZE
		trigger = { tag = CZE }
	}
	desc = {
		text = ausgleich.new.902.d.other
		trigger = { NOT = { tag = CZE } }
	}

	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes

	option = {
		name = ausgleich.new.902.a
		trigger = { tag = CZE }
		add_state_claim = 70
		add_state_claim = 71
		add_state_claim = 73
		add_state_claim = 1090
	}

	option = {
		name = ausgleich.new.902.b
		trigger = { NOT = { tag = CZE } }
	}
}

country_event = { #Serbia refuses
	id = ausgleich.new.903
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.903 FROM = [From.GetName]" }
	title = ausgleich.new.903.t
	desc = ausgleich.new.903.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		name = ausgleich.new.903.a
		add_opinion_modifier = { target = FROM modifier = KR_hates_govt }
	}
}

# GAL events
country_event = { #Galicia wishes to join the Pact
	id = ausgleich.new.906
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.906 FROM = [From.GetName]" }
	title = ausgleich.new.906.t

	desc = {
		text = ausgleich.new.906.d.bucovina
		trigger = {
			is_in_faction_with = ROM
			FROM = {
				OR = {
					owns_state = 80 #Cernauti
					owns_state = 713 #Suceava
				}
			}
		}
	}
	desc = {
		text = ausgleich.new.906.d.no_bucovina
		trigger = {
			OR = {
				NOT = { is_in_faction_with = ROM }
				FROM = {
					NOT = {
						owns_state = 80 #Cernauti
						owns_state = 713 #Suceava
					}
				}
			}
		}
	}

	picture = GFX_report_event_generic_big_city

	trigger = {
		is_faction_leader = yes
	}

	is_triggered_only = yes

	option = {
		name = ausgleich.new.906.a #We welcome them, but they must cede Bucovina
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				NOT = { has_war_with = AUS }
				surrender_progress > 0
			}
		}
		trigger = {
			is_in_faction_with = ROM
			FROM = {
				OR = {
					owns_state = 80 #Cernauti
					owns_state = 713 #Suceava
				}
			}
		}
		FROM = { country_event = { id = ausgleich.new.907 days = 1 } }
	}

	option = {
		name = ausgleich.new.906.b #Allies are always welcome
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				NOT = { has_war_with = AUS }
				surrender_progress > 0
			}
		}
		trigger = {
			OR = {
				NOT = { is_in_faction_with = ROM }
				FROM = {
					NOT = {
						owns_state = 80 #Cernauti
						owns_state = 713 #Suceava
					}
				}
			}
		}
		add_to_faction = FROM
		FROM = { country_event = { id = ausgleich.new.902 days = 1 } }
	}

	option = {
		name = ausgleich.new.906.c #We don't need them
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				NOT = { has_war_with = AUS }
				surrender_progress > 0
			}
		}
		FROM = { country_event = { id = ausgleich.new.903 days = 1 } }
	}
}

country_event = { #The Pact demands Bucovina
	id = ausgleich.new.907
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.907 FROM = [From.GetName]" }
	title = ausgleich.new.907.t
	desc = ausgleich.new.907.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		name = ausgleich.new.907.a #Gladly
		ai_chance = { base = 100 }
		effect_tooltip = {
			every_owned_state = {
				limit = {
					OR = {
						state = 80 #Cernauti
						state = 713 #Suceava
					}
				}
				if = {
					limit = { is_core_of = ROOT }
					remove_core_of = ROOT
				}
				if = {
					limit = { is_claimed_by = ROOT }
					remove_claim_by = ROOT
				}
				transfer_state_to = ROM
			}
		}
		ROM = { country_event = { id = ausgleich.new.908 days = 1 } }
		FROM = { country_event = { id = ausgleich.new.909 days = 1 } }
	}

	option = {
		name = ausgleich.new.907.b #Bukowina is a rightful Galician territory!
		ai_chance = { base = 0 }
		add_state_claim = 80 #Cernauti
		add_state_claim = 713 #Suceava
		FROM = { country_event = { id = ausgleich.new.910 days = 1 } }
	}
}

country_event = { #Romania gets Bucovina
	id = ausgleich.new.908
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.908 FROM = [From.GetName]" }
	title = ausgleich.new.908.t
	desc = ausgleich.new.908.d
	picture = GFX_report_event_finnish_letter

	is_triggered_only = yes

	option = {
		name = ausgleich.new.908.a
		FROM = {
			every_owned_state = {
				limit = {
					OR = {
						state = 80 #Cernauti
						state = 713 #Suceava
					}
				}
				hidden_effect = {
					if = {
						limit = { is_core_of = FROM }
						remove_core_of = FROM
					}
					if = {
						limit = { is_claimed_by = FROM }
						remove_claim_by = FROM
					}
				}
				transfer_state_to = ROOT
			}
		}
	}
}

country_event = { #Galicia accepts
	id = ausgleich.new.909
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.909 FROM = [From.GetName]" }
	title = ausgleich.new.909.t
	desc = ausgleich.new.909.d
	picture = GFX_report_event_finnish_letter

	is_triggered_only = yes

	option = {
		name = ausgleich.new.909.a
		add_to_faction = FROM
	}
}

country_event = { #Galicia refuses
	id = ausgleich.new.910
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.910 FROM = [From.GetName]" }
	title = ausgleich.new.910.t
	desc = ausgleich.new.910.d
	picture = GFX_report_event_generic_diplomacy4

	is_triggered_only = yes

	option = {
		name = ausgleich.new.910.a
		add_opinion_modifier = { target = FROM modifier = KR_hates_govt }
	}
}

# CRO events
country_event = { #The Serbian Ultimatum
	id = ausgleich.new.911
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.911 FROM = [From.GetName]" }
	title = ausgleich.new.911.t
	desc = ausgleich.new.911.d
	picture = GFX_report_event_yugoslavian_split

	trigger = {
		NOT = { has_war_with = FROM }
	}

	is_triggered_only = yes

	option = {
		name = ausgleich.new.911.a #We have no choice...
		ai_chance = {
			base = 50
			modifier = {
				factor = 2
				surrender_progress > 0.2
			}
			modifier = {
				factor = 0
				has_war = no
			}
		}
		every_owned_state = {
			limit = { is_core_of = ROOT }
			add_claim_by = FROM
		}
		effect_tooltip = {
			FROM = {
				annex_country = {
					target = ROOT
					transfer_troops = yes
				}
			}
			if = {
				limit = { is_ai = no }
				FROM = { change_tag_from = ROOT }
			}
		}
		FROM = { country_event = { id = ausgleich.new.912 days = 1 } }
	}

	option = {
		name = ausgleich.new.911.b #We will not replace one tyrant for another!
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				surrender_progress > 0.2
			}
		}
		FROM = { country_event = { id = ausgleich.new.913 days = 1 } }
	}
}

country_event = { #Illyria accepts
	id = ausgleich.new.912
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.912 FROM = [From.GetName]" }
	title = ausgleich.new.912.t
	desc = ausgleich.new.912.d
	picture = GFX_report_event_generic_diplomacy3

	trigger = {
		NOT = { has_war_with = FROM }
	}

	is_triggered_only = yes

	option = {
		name = ausgleich.new.912.a
		remove_decision = SER_Ultimatum_To_Illyria
		if = {
			limit = {
				AUS = {
					is_subject = no
					has_war_with = CRO
				}
			}
			AUS = { country_event = ausgleich.new.920 }
		}
		effect_tooltip = {
			every_state = {
				limit = { is_core_of = FROM }
				add_claim_by = ROOT
			}
		}
		annex_country = {
			target = FROM
			transfer_troops = yes
		}
		if = {
			limit = { FROM = { is_ai = no } }
			ROOT = { change_tag_from = FROM }
		}
	}
}

country_event = { #Illyria accepts
	id = ausgleich.new.913
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.913 FROM = [From.GetName]" }
	title = ausgleich.new.913.t
	desc = ausgleich.new.913.d
	picture = GFX_report_event_generic_towar

	trigger = {
		NOT = { has_war_with = FROM }
	}

	is_triggered_only = yes

	option = {
		name = ausgleich.new.913.a
	}
}

country_event = { #FROM Leaves the Pact
	id = ausgleich.new.914
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.914 FROM = [From.GetName]" }
	title = ausgleich.new.914.t
	desc = ausgleich.new.914.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		name = ausgleich.new.914.a
		add_opinion_modifier = { target = FROM modifier = KR_outraged }
	}
}

# AUS events
country_event = { #Fall of the Habsburgs
	id = ausgleich.new.915
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.915 FROM = [From.GetName]" }
	title = ausgleich.new.915.t
	desc = ausgleich.new.915.d
	picture = GFX_report_event_AUS_Ausgleich_dip_agree

	is_triggered_only = yes

	trigger = {
		country_exists = CZE
		NOT = { has_subject = CZE }
	}

	option = {
		name = ausgleich.new.915.a
		effect_tooltip = {
			every_character = {
				limit = { AUS_is_habsburg_family_member = yes }
				retire = yes
			}
		}
		hidden_effect = {
			every_character = {
				limit = { AUS_is_habsburg_family_member = yes }
				set_nationality = XXA
			}
			news_event = ausgleich.new.918
		}
		drop_cosmetic_tag = yes
		custom_effect_tooltip = tooltip_white_line
		effect_tooltip = {
			every_state = {
				limit = { is_claimed_by = ROOT }
				remove_claim_by = ROOT
			}
			every_state = {
				limit = {
					is_core_of = ROOT
					NOT = {
						is_owned_by = ROOT
						state = 4 #Lower Austria
						state = 39 #Southern Tyrol
						state = 152 #Upper Austria
						state = 153 #Tyrol
						state = 775 #Styria
						state = 784 #Burgenland
						state = 835 #Carinthia
						state = 836 #Salzburg
						state = 942 #Vorarlberg
					}
				}
				remove_core_of = ROOT
			}
		}
		custom_effect_tooltip = tooltip_white_line
		every_owned_state = {
			limit = {
				is_core_of = HUN
				is_claim_or_core_of_ROOT = no
			}
			transfer_state_to = HUN
		}
		transfer_units_fraction = {
			target = HUN
			size = 0.9
			stockpile_ratio = 0.9
			army_ratio = 0.9
			navy_ratio = 0
			air_ratio = 0.9
			keep_unit_leaders_trigger = { always = yes }
		}
		hidden_effect = {
			HUN = {
				drop_cosmetic_tag = yes
				remove_ideas = HUN_financial_ties_broken
				HUN_remove_joseph_august = yes
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = ROOT
						is_claimed_by = ROOT
						has_variable = ambition_area_@ROOT
					}
					NOT = {
						is_owned_by = ROOT
						region = 21 #Austria
						state = 784 #Burgenland
					}
				}
				remove_core_of = ROOT
				remove_claim_by = ROOT
				clear_variable = ambition_area_@ROOT
			}
		}
	}
}

country_event = { #Austria seeks union with Germany
	id = ausgleich.new.916
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.916 FROM = [From.GetName]" }
	title = ausgleich.new.916.t
	desc = ausgleich.new.916.d
	picture = GFX_report_event_AUS_Ausgleich_prag

	is_triggered_only = yes

	option = {
		name = ausgleich.new.916.a #Greater Germany has been achieved.
		ai_chance = {
			base = 100
		}
		FROM = { transfer_navy = { target = ROOT } }
		every_state = {
			limit = {
				is_core_austria = yes
				is_claim_or_core_of_ROOT = no
			}
			add_claim_by = ROOT
		}
		annex_country = {
			target = FROM
			transfer_troops = no
		}
		activate_targeted_decision = { decision = GER_integrate_austria target = AUS }
	}

	option = {
		name = ausgleich.new.916.b #We don't need them
		ai_chance = {
			base = 0
		}
		FROM = { country_event = { id = ausgleich.new.917 days = 2 } }
	}
}

country_event = { #Germany refuses
	id = ausgleich.new.917
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.917 FROM = [From.GetName]" }
	title = ausgleich.new.917.t
	desc = ausgleich.new.917.d
	picture = GFX_report_event_german_reichstag_gathering

	is_triggered_only = yes

	option = {
		name = ausgleich.new.917.a
		add_opinion_modifier = { target = FROM modifier = KR_outraged }
	}
}

news_event = { #Austria Collapses Into Anarchy
	id = ausgleich.new.918
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.918 FROM = [From.GetName]" }
	title = ausgleich.new.918.t
	desc = ausgleich.new.918.d
	picture = GFX_news_event_ger_civil_war

	is_triggered_only = yes
	fire_for_sender = no

	major = yes
	show_major = {
		NOT = {
			tag = AUS
			tag = HUN
		}
	}

	option = {
		name = ausgleich.new.918.a
		trigger = { is_in_faction_with = BPL }
	}

	option = {
		name = ausgleich.new.918.b
		trigger = {
			NOT = { is_in_faction_with = BPL }
			has_socialist_government = no
		}
	}

	option = {
		name = ausgleich.new.918.c
		trigger = {
			NOT = { is_in_faction_with = BPL }
			has_socialist_government = yes
		}
	}
}

news_event = { #Chaos in the Balkans
	id = ausgleich.new.919
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.919 FROM = [From.GetName]" }
	title = ausgleich.new.919.t
	desc = ausgleich.new.919.d
	picture = GFX_news_event_ger_civil_war

	trigger = {
		OR = {
			CZE = { has_war_with = AUS }
			CRO = { has_war_with = AUS }
			GAL = { has_war_with = AUS }
			HUN = { has_war_with = AUS }
		}
	}

	is_triggered_only = yes

	major = yes

	option = {
		name = ausgleich.new.919.a
		trigger = { AUS = { is_ally_with = ROOT } }
	}

	option = {
		name = ausgleich.new.919.b
		trigger = { has_war_with = AUS }
	}

	option = {
		name = ausgleich.new.919.c
		trigger = {
			NOT = {
				AUS = { is_ally_with = ROOT }
				has_war_with = AUS
			}
		}
	}
}

country_event = { #Serbia Annexes Illyria
	id = ausgleich.new.920
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.920 FROM = [From.GetName]" }
	title = ausgleich.new.920.t
	desc = ausgleich.new.920.d
	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		name = ausgleich.new.920.a
		trigger = {
			can_declare_war_on = FROM
		}
		ai_chance = { base = 100 }
		declare_war_on = {
			target = FROM
			type = annex_everything
		}
	}

	option = {
		name = ausgleich.new.920.b
		trigger = {
			can_declare_war_on = FROM
		}
		ai_chance = { base = 0 }
		add_political_power = -100
	}

	option = {
		name = ausgleich.new.920.c
		trigger = {
			NOT = { can_declare_war_on = FROM }
		}
	}
}

