on_actions = {
	on_startup = {
		effect = {
			GEA = {
				set_rule = { can_send_volunteers = no }
				add_relation_rule_override = {
					can_send_volunteers = yes
					trigger = GEA_can_send_volunteers_to_target
					usage_desc = GEA_can_send_volunteers_to_target_tt
				}
				if = {
					limit = { has_dlc_aat = yes }
					set_rule = { can_access_market = no }
				}
			}
			DEI = {
				set_rule = { can_send_volunteers = no }
				if = {
					limit = { has_dlc_aat = yes }
					set_rule = { can_access_market = no }
				}
			}

			### Variables for German East Asia Colonies, Protectorates and Mandates
			## Leased Territories
			728 = { set_variable = { GEA_territory_capital_state = 744 } }
			744 = { set_variable = { GEA_territory_capital_state = 744 } }
			996 = { set_variable = { GEA_territory_capital_state = 744 } }

			## Tonkin
			671 = { set_variable = { GEA_territory_capital_state = 671 } }
			857 = { set_variable = { GEA_territory_capital_state = 671 } }
			## Luang Prabang
			670 = { set_variable = { GEA_territory_capital_state = 670 } }
			## Annam
			827 = { set_variable = { GEA_territory_capital_state = 827 } }
			## Conchinchina
			286 = { set_variable = { GEA_territory_capital_state = 286 } }
			826 = { set_variable = { GEA_territory_capital_state = 286 } }
			856 = { set_variable = { GEA_territory_capital_state = 286 } }

			## Straits Settlements
			336 = { set_variable = { GEA_territory_capital_state = 336 } }
			## Federated Malay States
			963 = { set_variable = { GEA_territory_capital_state = 963 } }
			1002 = { set_variable = { GEA_territory_capital_state = 963 } }
			## Unfederated Malay States
			846 = { set_variable = { GEA_territory_capital_state = 846 } }

			## Sarawak and Brunei
			333 = { set_variable = { GEA_territory_capital_state = 333 } }
			## North Borneo
			828 = { set_variable = { GEA_territory_capital_state = 828 } }

			## New Guinea
			523 = { set_variable = { GEA_territory_capital_state = 757 } }
			633 = { set_variable = { GEA_territory_capital_state = 757 } }
			646 = { set_variable = { GEA_territory_capital_state = 757 } }
			647 = { set_variable = { GEA_territory_capital_state = 757 } }
			669 = { set_variable = { GEA_territory_capital_state = 757 } }
			684 = { set_variable = { GEA_territory_capital_state = 757 } }
			725 = { set_variable = { GEA_territory_capital_state = 757 } }
			737 = { set_variable = { GEA_territory_capital_state = 757 } }
			757 = { set_variable = { GEA_territory_capital_state = 757 } }
			843 = { set_variable = { GEA_territory_capital_state = 757 } }
			## Samoa
			941 = { set_variable = { GEA_territory_capital_state = 941 } }
			## Polynesia
			641 = { set_variable = { GEA_territory_capital_state = 641 } }
			## New Hebrides
			635 = { set_variable = { GEA_territory_capital_state = 635 } }
			## British Western Pacific
			634 = { set_variable = { GEA_territory_capital_state = 634 } }
			639 = { set_variable = { GEA_territory_capital_state = 634 } }
			643 = { set_variable = { GEA_territory_capital_state = 634 } }
			734 = { set_variable = { GEA_territory_capital_state = 634 } }
		}
	}

	#ROOT is winner #FROM is loser
	on_annex = {
		effect = {
			FROM = {
				### GEA generals flee
				if = {
					limit = { tag = GEA }
					GER = { country_event = { id = east_asia_peace_events.7 days = 10 random_days = 20 } }
					LEP = {
						remove_ideas = {
							LEP_Tsingtau_Collaboration0
							LEP_Tsingtau_Collaboration1
							LEP_Tsingtau_Collaboration2
							LEP_Tsingtau_Collaboration3
							LEP_Tsingtau_Collaboration4
							LEP_Tsingtau_Collaboration5
							LEP_Tsingtau_Collaboration6
							LEP_Tsingtau_Collaboration7
							LEP_Tsingtau_Collaboration8
							LEP_Tsingtau_Collaboration9
							LEP_Tsingtau_Collaboration10
							LEP_Tsingtau_Collaboration11
							LEP_Tsingtau_Collaboration12
							LEP_Tsingtau_Collaboration13
							LEP_Tsingtau_Collaboration14
							LEP_Tsingtau_Collaboration15
							LEP_Tsingtau_Collaboration16
						}
						clear_variable = LEP_Tsingtau_level
					}
				}
			}
		}
	}

	# ROOT is capitulated country, FROM is winner
	on_capitulation_immediate = {
		effect = {
			### German East Asia peace
			if = {
				limit = {
					country_exists = GER
					is_ally_with = GER
				}
				GER = { country_event = { id = east_asia_peace_events.1 days = 7 } }
			}
		}
	}

	on_new_term_election = {
		effect = {
			### Siam ###
			if = {
				limit = { tag = SIA }
				country_event = siam_events.23 #1936
			}
			### Indonesia ###
			else_if = {
				limit = { tag = INS }
				country_event = indonesia_events.69 #partial democracy
				country_event = indonesia_events.98 #full democracy
			}
		}
	}
	on_war = {
		effect = {
			#change philipine flag
			if = {
				limit = {
					tag = PHI
					has_socialist_government = no
				}
				set_cosmetic_tag = PHW
			}
		}
	}
	on_peace = {
		effect = {
			#change philipine flag
			if = {
				limit = {
					tag = PHI
					has_cosmetic_tag = PHW
				}
				drop_cosmetic_tag = yes
			}
		}
	}

	#ROOT is winner #FROM is loser
	on_peaceconference_ended = {
		effect = {
			### Fire GEA victory against INC event
			if = {
				limit = {
					original_tag = GEA
					FROM = { original_tag = INC }
					has_global_flag = GEA_Indochina_Uprising_Fired
				}
				country_event = german_east_asia_events.22 #Victory in Indochina
			}
		}
	}
}

