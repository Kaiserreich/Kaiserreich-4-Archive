shared_focus = {
	id = KMT_white_sun
	icon = GFX_goal_LKMT_A_New_China
	cost = 4

	x = 0
	y = 0

	allow_branch = {
		china_generic_unification_tree_allow_branch = yes
		OR = {
			china_alignment_right_kuomintang = yes
			china_alignment_left_kuomintang = yes
		}
	}
	offset = {
		x = 14
		y = 9
		trigger = { original_tag = HNN }
	}
	offset = {
		x = 4
		y = 11
		trigger = { tag = GXC }
	}
	offset = {
		x = 6
		y = 10
		trigger = { original_tag = YUN }
	}

	ai_will_do = { factor = 50 }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_white_sun"
		RKMT_economic_recovery = yes
		add_political_power = 100
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = KMT_land_reform
	icon = GFX_goal_generic_land_reform
	cost = 5

	relative_position_id = KMT_white_sun
	x = -5
	y = 1

	prerequisite = { focus = KMT_white_sun }
	ai_will_do = { factor = 50 }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_land_reform"
		RKMT_economic_recovery = yes
		add_one_random_civilian_factory = yes
		add_one_random_civilian_factory = yes
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = KMT_rent_control
	icon = GFX_goal_generic_controlled_board
	cost = 5

	relative_position_id = KMT_white_sun
	x = -3
	y = 1

	prerequisite = { focus = KMT_white_sun }
	ai_will_do = { factor = 50 }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_rent_control"
		RKMT_economic_recovery = yes
		set_temp_variable = { ideology_change_var = 10 }
		change_ruling_party_popularity = yes
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = KMT_civil_service
	icon = GFX_focus_chi_examination_yuan
	cost = 5

	relative_position_id = KMT_white_sun
	x = -1
	y = 1

	prerequisite = { focus = KMT_white_sun }

	ai_will_do = { factor = 50 }

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_civil_service"
		RKMT_economic_recovery = yes
		add_stability = 0.05
	}

	search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = KMT_organic_law
	icon = GFX_goal_constitutional_guarantees
	cost = 5

	relative_position_id = KMT_white_sun
	x = 2
	y = 1

	prerequisite = {
		focus = KMT_white_sun
	}
	ai_will_do = { factor = 50 }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_organic_law"
		add_political_power = 75
		increase_RKMT_popular_support = yes
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = KMT_tridemism
	icon = GFX_Goal_Kuomintang_Government_Initiative
	cost = 5

	relative_position_id = KMT_white_sun
	x = 4
	y = 1

	prerequisite = { focus = KMT_white_sun }
	ai_will_do = { factor = 50 }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_tridemism"
		increase_RKMT_popular_support = yes
		add_stability = 0.05
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = KMT_minzu_focus
	icon = GFX_goal_Centralised_Government
	cost = 5

	relative_position_id = KMT_tridemism
	x = -2
	y = 1

	prerequisite = { focus = KMT_tridemism }
	prerequisite = { focus = KMT_organic_law }
	ai_will_do = { factor = 50 }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_minzu_focus"
		if = {
			limit = { has_idea = KMT_revolution_minquan }
			swap_ideas = {
				remove_idea = KMT_revolution_minquan
				add_idea = KMT_revolution_minzu_minquan
			}
		}
		else_if = {
			limit = { has_idea = KMT_revolution_minsheng }
			swap_ideas = {
				remove_idea = KMT_revolution_minsheng
				add_idea = KMT_revolution_minsheng_minzu
			}
		}
		else_if = {
			limit = { has_idea = KMT_revolution_minsheng_minquan }
			swap_ideas = {
				remove_idea = KMT_revolution_minsheng_minquan
				add_idea = KMT_revolution_minsheng_minquan_minzu
			}
		}
		else = { add_ideas = KMT_revolution_minzu }
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT }
}

shared_focus = {
	id = KMT_minquan_focus
	icon = GFX_goal_support_democracy
	cost = 5

	relative_position_id = KMT_tridemism
	x = 0
	y = 1

	prerequisite = { focus = KMT_tridemism }
	prerequisite = { focus = KMT_organic_law }
	ai_will_do = { factor = 50 }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_minquan_focus"
		if = {
			limit = { has_idea = KMT_revolution_minsheng }
			swap_ideas = {
				remove_idea = KMT_revolution_minsheng
				add_idea = KMT_revolution_minsheng_minquan
			}
		}
		else_if = {
			limit = { has_idea = KMT_revolution_minzu }
			swap_ideas = {
				remove_idea = KMT_revolution_minzu
				add_idea = KMT_revolution_minzu_minquan
			}
		}
		else_if = {
			limit = { has_idea = KMT_revolution_minsheng_minzu }
			swap_ideas = {
				remove_idea = KMT_revolution_minsheng_minzu
				add_idea = KMT_revolution_minsheng_minquan_minzu
			}
		}
		else = { add_ideas = KMT_revolution_minquan }
	}
	search_filters = { FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = KMT_legislature
	icon = GFX_focus_chi_legislative_yuan
	cost = 5

	relative_position_id = KMT_minzu_focus
	x = 1
	y = 1

	prerequisite = { focus = KMT_minzu_focus }
	prerequisite = { focus = KMT_minquan_focus }

	ai_will_do = { factor = 50 }

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_legislature"
		increase_RKMT_popular_support = yes
		add_political_power = 100
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = KMT_minsheng
	icon = GFX_goal_healthcare
	cost = 5

	relative_position_id = KMT_rent_control
	x = -1
	y = 1

	prerequisite = { focus = KMT_rent_control }
	prerequisite = { focus = KMT_land_reform }
	ai_will_do = { factor = 50 }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_minsheng"
		if = {
			limit = { has_idea = KMT_revolution_minquan }
			swap_ideas = {
				remove_idea = KMT_revolution_minquan
				add_idea = KMT_revolution_minsheng_minquan
			}
		}
		else_if = {
			limit = { has_idea = KMT_revolution_minzu }
			swap_ideas = {
				remove_idea = KMT_revolution_minzu
				add_idea = KMT_revolution_minsheng_minzu
			}
		}
		else_if = {
			limit = { has_idea = KMT_revolution_minzu_minquan }
			swap_ideas = {
				remove_idea = KMT_revolution_minzu_minquan
				add_idea = KMT_revolution_minsheng_minquan_minzu
			}
		}
		else = { add_ideas = KMT_revolution_minsheng }
	}
	search_filters = { FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = KMT_revive_china
	icon = GFX_goal_CHI_revive_china
	cost = 5

	relative_position_id = KMT_minsheng
	x = 0
	y = 1

	prerequisite = { focus = KMT_minsheng }
	ai_will_do = { factor = 50 }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_revive_china"
		RKMT_economic_recovery = yes
		if = {
			limit = { has_completed_focus = KMT_national_reconstruction_commission }
			add_ideas = KMT_economy_1
		}
		add_tech_bonus = {
			name = KMT_revive_china
			bonus = 1
			uses = 1
			category = industry
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = KMT_national_mausoleum
	icon = GFX_goal_chi_sun_legacy
	cost = 5

	relative_position_id = KMT_minsheng
	x = 2
	y = 1

	prerequisite = { focus = KMT_minsheng }
	ai_will_do = { factor = 25 }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_national_mausoleum"
		increase_RKMT_popular_support = yes
		add_war_support = 0.1
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = KMT_academia_sinica
	icon = GFX_focus_research2
	cost = 7

	relative_position_id = KMT_civil_service
	x = -1
	y = 1

	prerequisite = {
		focus = KMT_civil_service
	}
	ai_will_do = { factor = 50 }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_academia_sinica"
		add_research_slot_until_five = yes
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = KMT_national_reconstruction_commission
	icon = GFX_goal_generic_construct_public_housing
	cost = 5

	relative_position_id = KMT_civil_service
	x = 1
	y = 1

	prerequisite = {
		focus = KMT_civil_service
	}
	ai_will_do = { factor = 50 }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_national_reconstruction_commission"
		RKMT_economic_recovery = yes
		if = {
			limit = { has_completed_focus = KMT_revive_china }
			add_ideas = KMT_economy_1
		}
		###Lookover this###
		###activate_targeted_decision = { target = 613 decision = CHI_dec_civ_industrialise }
		###activate_targeted_decision = { target = 606 decision = CHI_dec_civ_industrialise }
		###activate_targeted_decision = { target = 620 decision = CHI_dec_civ_industrialise }
		###activate_targeted_decision = { target = 650 decision = CHI_dec_civ_industrialise }
		###activate_targeted_decision = { target = 602 decision = CHI_dec_civ_industrialise }
		###activate_targeted_decision = { target = 593 decision = CHI_dec_civ_industrialise }
		###activate_targeted_decision = { target = 608 decision = CHI_dec_civ_industrialise }
		###activate_targeted_decision = { target = 743 decision = CHI_dec_civ_industrialise }
		###activate_targeted_decision = { target = 597 decision = CHI_dec_civ_industrialise }
		###activate_targeted_decision = { target = 1062 decision = CHI_dec_civ_industrialise }
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = KMT_bopomofo
	icon = GFX_goal_generic_design_equipment_standards
	cost = 5

	relative_position_id = KMT_national_reconstruction_commission
	x = 0
	y = 1

	prerequisite = { focus = KMT_national_reconstruction_commission }

	ai_will_do = { factor = 25 }

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_bopomofo"
		if = {
			limit = {
				has_tech = electronic_mechanical_engineering
				NOT = { has_tech = radio }
			}
			set_technology = { radio = 1 }
			add_tech_bonus = {
				name = KMT_bopomofo
				bonus = 1
				uses = 1
				category = electronics
			}
		}
		else = {
			add_tech_bonus = {
				name = KMT_bopomofo
				bonus = 1
				uses = 2
				category = electronics
			}
		}
	}

	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = KMT_triumphant_revolution
	icon = GFX_focus_generic_china1
	cost = 6

	relative_position_id = KMT_legislature
	x = -3
	y = 1

	prerequisite = { focus = KMT_legislature }
	prerequisite = { focus = KMT_revive_china }
	ai_will_do = { factor = 25 }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_triumphant_revolution"
		swap_ideas = {
			remove_idea = KMT_revolution_minsheng_minquan_minzu
			add_idea = KMT_revolution_final
		}
		swap_ideas = {
			remove_idea = KMT_economy_1
			add_idea = KMT_economy_2
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
}

###Military
shared_focus = {
	id = KMT_renovate_whampoa
	icon = GFX_focus_chi_whampoa_military_academy
	cost = 4

	relative_position_id = KMT_white_sun
	x = 10
	y = 0

	allow_branch = {
		china_generic_unification_tree_allow_branch = yes
		OR = {
			china_alignment_right_kuomintang = yes
			china_alignment_left_kuomintang = yes
		}
		NOT = { has_country_leader = { character = GXC_li_zongren } }
	}
	ai_will_do = { factor = 50 }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_renovate_whampoa"
		army_experience = 50
		RKMT_military_recovery = yes
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = KMT_central_military_academy
	icon = GFX_goal_chinese_national_army
	cost = 5

	relative_position_id = KMT_renovate_whampoa
	x = -1
	y = 1

	ai_will_do = { factor = 50 }
	prerequisite = { focus = KMT_renovate_whampoa }

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_central_military_academy"
		RKMT_military_recovery = yes
		add_doctrine_cost_reduction = {
			cost_reduction = 0.5
			uses = 2
			category = land_doctrine
			name = KMT_central_military_academy
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_INDUSTRY FOCUS_FILTER_ARMY_XP }
}

shared_focus = {
	id = KMT_standardised_arsenals
	icon = GFX_goal_generic_takeover_industries
	cost = 5

	relative_position_id = KMT_central_military_academy
	x = 2
	y = 0

	ai_will_do = { factor = 50 }
	prerequisite = { focus = KMT_renovate_whampoa }

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_standardised_arsenals"
		RKMT_military_recovery = yes
		if = {
			limit = { owns_state = 1048 } #Wuhan
			1048 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory #Hanyang Arsenal
					level = 1
					instant_build = yes
				}
			}
		}
		if = {
			limit = { owns_state = 1059 } #Kaifeng
			1059 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory #Gongxian Arsenal
					level = 1
					instant_build = yes
				}
			}
		}
		if = {
			limit = { owns_state = 613 } #Nanjing
			613 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory #Jinling Arsenal
					level = 1
					instant_build = yes
				}
			}
		}
		if = {
			limit = { owns_state = 716 } #Shenyang
			716 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory #Jinling Arsenal
					level = 1
					instant_build = yes
				}
			}
		}
		if = {
			limit = { owns_state = 592 } #Guangzhou
			592 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory #Jinling Arsenal
					level = 1
					instant_build = yes
				}
			}
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = KMT_new_model_army
	icon = GFX_goal_CHI_military_affairs_cmsn
	cost = 5

	relative_position_id = KMT_central_military_academy
	x = 2
	y = 1

	ai_will_do = { factor = 50 }
	prerequisite = {
		focus = KMT_central_military_academy
	}
	prerequisite = {
		focus = KMT_standardised_arsenals
	}

	mutually_exclusive = { focus = KMT_peoples_army }

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_new_model_army"
		RKMT_military_recovery = yes
		add_ideas = KMT_model_army_1
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = KMT_peoples_army
	icon = GFX_goal_CHI_peoples_army
	cost = 5

	relative_position_id = KMT_central_military_academy
	x = 0
	y = 1

	ai_will_do = { factor = 50 }
	prerequisite = {
		focus = KMT_central_military_academy
	}
	prerequisite = {
		focus = KMT_standardised_arsenals
	}

	mutually_exclusive = { focus = KMT_new_model_army }

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_peoples_army"
		RKMT_military_recovery = yes
		add_ideas = KMT_peoples_army_1
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = KMT_conscription
	icon = GFX_goal_conscription
	cost = 5

	relative_position_id = KMT_peoples_army
	x = -1
	y = 1

	ai_will_do = { factor = 50 }
	prerequisite = { focus = KMT_peoples_army }

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_conscription"
		swap_ideas = {
			remove_idea = KMT_peoples_army_1
			add_idea = KMT_peoples_army_2
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = KMT_tank_arsenal
	icon = GFX_goal_generic_mechanized_wave
	cost = 5

	relative_position_id = KMT_peoples_army
	x = 1
	y = 1

	ai_will_do = { factor = 50 }
	prerequisite = {
		focus = KMT_peoples_army
		focus = KMT_new_model_army
	}

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_tank_arsenal"
		add_tech_bonus = {
			name = KMT_tank_arsenal
			bonus = 1
			uses = 2
			category = armor
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = KMT_small_arms_development
	icon = GFX_goal_generic_small_arms
	cost = 5

	relative_position_id = KMT_peoples_army
	x = 0
	y = 2

	ai_will_do = { factor = 50 }
	prerequisite = {
		focus = KMT_peoples_army
		focus = KMT_new_model_army
	}

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_small_arms_development"
		add_tech_bonus = {
			name = KMT_small_arms_development
			bonus = 1
			uses = 2
			category = infantry_weapons
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = KMT_artillery_modernisation
	icon = GFX_goal_generic_army_superior_firepower
	cost = 5

	relative_position_id = KMT_peoples_army
	x = 2
	y = 2

	ai_will_do = { factor = 50 }
	prerequisite = {
		focus = KMT_peoples_army
		focus = KMT_new_model_army
	}

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_artillery_modernisation"
		add_tech_bonus = {
			name = KMT_artillery_modernisation
			bonus = 1
			uses = 2
			category = artillery
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = KMT_professionalisation
	icon = GFX_goal_generic_army_training
	cost = 5

	relative_position_id = KMT_peoples_army
	x = 3
	y = 1

	ai_will_do = { factor = 50 }
	prerequisite = { focus = KMT_new_model_army }

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_professionalisation"
		swap_ideas = {
			remove_idea = KMT_model_army_1
			add_idea = KMT_model_army_2
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = KMT_NRA
	icon = GFX_goal_CHI_form_2nd_NRA
	cost = 5

	relative_position_id = KMT_peoples_army
	x = 1
	y = 3

	ai_will_do = { factor = 50 }
	prerequisite = { focus = KMT_small_arms_development }
	prerequisite = { focus = KMT_artillery_modernisation }
	prerequisite = { focus = KMT_tank_arsenal }
	prerequisite = {
		focus = KMT_professionalisation
		focus = KMT_conscription
	}

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_NRA"
		if = {
			limit = { has_idea = KMT_model_army_2 }
			swap_ideas = {
				remove_idea = KMT_model_army_2
				add_idea = KMT_model_army_3
			}
		}
		else_if = {
			limit = { has_idea = KMT_peoples_army_2 }
			swap_ideas = {
				remove_idea = KMT_peoples_army_2
				add_idea = KMT_peoples_army_3
			}
		}
		else = {
			custom_effect_tooltip = tooltip_apply_one_of_effects_depending_on_ideas
			effect_tooltip = {
				swap_ideas = {
					remove_idea = KMT_model_army_2
					add_idea = KMT_model_army_3
				}
				swap_ideas = {
					remove_idea = KMT_peoples_army_2
					add_idea = KMT_peoples_army_3
				}
			}
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

###Air
shared_focus = {
	id = KMT_aviation_school
	icon = GFX_goal_chinese_national_air_force
	cost = 5

	relative_position_id = KMT_standardised_arsenals
	x = 3
	y = 1

	prerequisite = {
		focus = KMT_central_military_academy
	}

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_aviation_school"
		air_experience = 50
		add_doctrine_cost_reduction = {
			name = KMT_aviation_school
			cost_reduction = 0.5
			uses = 2
			category = air_doctrine
		}
	}
	search_filters = { FOCUS_FILTER_AIR_XP FOCUS_FILTER_RESEARCH FOCUS_FILTER_AIRFORCE_BONUS }
}

shared_focus = {
	id = KMT_new_aircraft_factories
	icon = GFX_goal_generic_air_production
	cost = 5

	relative_position_id = KMT_standardised_arsenals
	x = 5
	y = 1

	prerequisite = {
		focus = KMT_standardised_arsenals
	}

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_new_aircraft_factories"
		air_experience = 50
		random_owned_controlled_state = {
			limit = {
				is_core_of = ROOT
				is_valid_state_for_development = yes
				free_building_slots = { building = arms_factory size > 1 include_locked = yes }
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
		}
	}
	search_filters = { FOCUS_FILTER_AIR_XP FOCUS_FILTER_INDUSTRY FOCUS_FILTER_AIRFORCE_BONUS }
}

shared_focus = {
	id = KMT_native_fighter_design
	icon = GFX_goal_generic_air_fighter_new
	cost = 5

	relative_position_id = KMT_aviation_school
	x = 0
	y = 1

	prerequisite = {
		focus = KMT_aviation_school
	}
	prerequisite = {
		focus = KMT_new_aircraft_factories
	}

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_native_fighter_design"
		add_tech_bonus = {
			name = KMT_native_fighter_design
			bonus = 1
			uses = 1
			category = light_fighter
			category = cat_heavy_fighter
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = KMT_naval_bomber
	icon = GFX_goal_generic_air_naval_bomber_new
	cost = 5

	relative_position_id = KMT_native_fighter_design
	x = 2
	y = 0

	prerequisite = { focus = KMT_new_aircraft_factories }

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_naval_bomber"
		add_tech_bonus = {
			name = KMT_naval_bomber
			bonus = 1
			uses = 1
			category = naval_air
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = KMT_medium_bomber
	icon = GFX_goal_generic_air_tactical_bomber_new
	cost = 5

	relative_position_id = KMT_native_fighter_design
	x = 0
	y = 1

	prerequisite = {
		focus = KMT_native_fighter_design
		focus = KMT_naval_bomber
	}
	mutually_exclusive = {
		focus = KMT_light_bomber
	}

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_medium_bomber"
		add_tech_bonus = {
			name = KMT_medium_bomber
			bonus = 1
			uses = 1
			category = tactical_bomber
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = KMT_light_bomber
	icon = GFX_goal_generic_air_CAS_new
	cost = 5

	relative_position_id = KMT_native_fighter_design
	x = 2
	y = 1

	prerequisite = {
		focus = KMT_native_fighter_design
		focus = KMT_naval_bomber
	}
	mutually_exclusive = {
		focus = KMT_medium_bomber
	}

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_light_bomber"
		add_tech_bonus = {
			name = KMT_light_bomber
			bonus = 1
			uses = 1
			category = cas_bomber
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

###Navy
shared_focus = {
	id = KMT_expand_dockyard
	icon = GFX_goal_chinese_national_navy
	cost = 4

	relative_position_id = KMT_standardised_arsenals
	x = 9
	y = 0

	allow_branch = {
		china_generic_unification_tree_allow_branch = yes
		OR = {
			china_alignment_right_kuomintang = yes
			china_alignment_left_kuomintang = yes
		}
		NOT = { has_country_leader = { character = GXC_li_zongren } }
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_expand_dockyard"
		navy_experience = 75
		random_owned_controlled_state = {
			limit = {
				free_building_slots = { building = dockyard size > 2 include_locked = yes }
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = dockyard
				level = 2
				instant_build = yes
			}
		}
		random_owned_controlled_state = {
			limit = {
				free_building_slots = { building = dockyard size > 2 include_locked = yes }
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = dockyard
				level = 2
				instant_build = yes
			}
		}
	}
	search_filters = { FOCUS_FILTER_NAVY_XP FOCUS_FILTER_NAVY_BONUS }
}

shared_focus = {
	id = KMT_incorporate_beiyang_fleet
	icon = GFX_goal_FNG_beiyang_navy
	cost = 5

	relative_position_id = KMT_expand_dockyard
	x = 0
	y = 1

	prerequisite = {
		focus = KMT_expand_dockyard
	}

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_incorporate_beiyang_fleet"
		add_ideas = NPA_navallegacy1
		navy_experience = 25
		add_doctrine_cost_reduction = {
			name = KMT_incorporate_beiyang_fleet
			cost_reduction = 0.5
			uses = 2
			category = naval_doctrine
		}
		CHN_inherit_beiyang_fleet_effect = yes
	}
	search_filters = { FOCUS_FILTER_NAVY_XP FOCUS_FILTER_NAVY_BONUS FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = KMT_destroyers
	icon = GFX_focus_generic_destroyer
	cost = 5

	relative_position_id = KMT_incorporate_beiyang_fleet
	x = -1
	y = 1

	prerequisite = {
		focus = KMT_incorporate_beiyang_fleet
	}

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_destroyers"
		add_tech_bonus = {
			name = KMT_destroyers
			bonus = 1
			uses = 2
			category = dd_tech
		}
		if = {
			limit = {
				has_idea = NPA_navallegacy1
			}
			swap_ideas = {
				remove_idea = NPA_navallegacy1
				add_idea = NPA_navallegacy2
			}
		}
		else_if = {
			limit = {
				has_idea = NPA_navallegacy3
			}
			swap_ideas = {
				remove_idea = NPA_navallegacy3
				add_idea = NPA_navallegacy4
			}
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = KMT_submarines
	icon = GFX_goal_generic_navy_submarine
	cost = 5

	relative_position_id = KMT_incorporate_beiyang_fleet
	x = 1
	y = 1

	prerequisite = {
		focus = KMT_incorporate_beiyang_fleet
	}

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_submarines"
		add_tech_bonus = {
			name = KMT_submarines
			bonus = 1
			uses = 2
			category = ss_tech
		}
		if = {
			limit = {
				has_idea = NPA_navallegacy1
			}
			swap_ideas = {
				remove_idea = NPA_navallegacy1
				add_idea = NPA_navallegacy3
			}
		}
		else_if = {
			limit = {
				has_idea = NPA_navallegacy2
			}
			swap_ideas = {
				remove_idea = NPA_navallegacy2
				add_idea = NPA_navallegacy4
			}
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = KMT_cruisers
	icon = GFX_focus_generic_cruiser2
	cost = 5

	relative_position_id = KMT_destroyers
	x = 1
	y = 1

	prerequisite = {
		focus = KMT_destroyers
	}
	prerequisite = {
		focus = KMT_submarines
	}

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_cruisers"
		add_tech_bonus = {
			name = KMT_cruisers
			bonus = 1
			uses = 2
			category = ca_tech
		}
		swap_ideas = {
			remove_idea = NPA_navallegacy4
			add_idea = NPA_navallegacy5
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = KMT_coastal_defence
	icon = GFX_goal_generic_coastal_navy
	cost = 5

	relative_position_id = KMT_cruisers
	x = -1
	y = 1

	prerequisite = {
		focus = KMT_cruisers
	}
	mutually_exclusive = {
		focus = KMT_grand_fleet
	}

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_coastal_defence"
		add_tech_bonus = {
			name = KMT_coastal_defence
			bonus = 1
			uses = 2
			category = ca_tech
		}
		swap_ideas = {
			remove_idea = NPA_navallegacy5
			add_idea = NPA_navallegacy6
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = KMT_grand_fleet
	icon = GFX_goal_generic_sea_focused_navy
	cost = 5

	relative_position_id = KMT_cruisers
	x = 1
	y = 1

	prerequisite = {
		focus = KMT_cruisers
	}
	mutually_exclusive = {
		focus = KMT_coastal_defence
	}

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_grand_fleet"
		add_tech_bonus = {
			name = KMT_grand_fleet
			bonus = 1
			uses = 2
			category = bb_tech
		}
		swap_ideas = {
			remove_idea = NPA_navallegacy5
			add_idea = NPA_navallegacy7
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

### Foreign Policy - Shared between RKMT and LKMT
shared_focus = {
	id = KMT_lead_the_liberation_of_asia
	icon = GFX_goal_chi_international_revolution
	cost = 7

	x = 0
	y = 0

	offset = {
		x = 37
		y = 14
		trigger = {
			tag = CHI
		}
	}

	offset = {
		x = 5
		y = 20
		trigger = {
			tag = GXC
		}
	}

	offset = {
		x = 8
		y = 2
		trigger = {
			tag = GXC
			china_alignment_left_kuomintang = yes
		}
	}

	offset = {
		x = 24
		y = 25
		trigger = {
			tag = YUN
		}
	}

	offset = {
		x = 5
		y = -10
		trigger = {
			tag = YUN
			OR = {
				has_country_leader = { character = YUN_dai_jitao }
				has_country_leader = { character = YUN_chen_lifu }
			}
		}
	}

	offset = {
		x = 5
		y = -10
		trigger = {
			tag = YUN
			OR = {
				has_country_leader = { character = CHI_zhang_bojun }
				has_country_leader = { character = YUN_zhu_peide }
				has_country_leader = { character = YUN_zhang_qun }
			}
		}
	}

	allow_branch = {
		OR = {
			AND = {
				tag = CHI
				CHI_is_phase_four_trigger = yes
			}
			AND = {
				tag = GXC
				GXC_is_phase_5_trigger = yes
				OR = {
					china_alignment_left_kuomintang = yes
					china_alignment_right_kuomintang = yes
				}
			}
			AND = {
				tag = YUN
				YUN_is_phase_5_trigger = yes
				OR = {
					china_alignment_left_kuomintang = yes
					china_alignment_right_kuomintang = yes
				}
			}
		}
	}
	available = {
		is_subject = no
		OR = {
			has_war_support > 0.25
			if = {
				limit = { has_character = CHI_chen_youren }
				CHI_chen_youren = { is_hired_as_advisor = yes }
			}
		}
	}
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_lead_the_liberation_of_asia"
		if = {
			limit = { tag = CHI }
			CHI_improve_legitimacy_effect = yes
			custom_effect_tooltip = CHI_unlock_fifth_slot_tt
		}
		if = {
			limit = { NOT = { has_idea = KMT_lead_the_liberation_of_asia_idea } }
			add_ideas = KMT_lead_the_liberation_of_asia_idea
		}
		add_political_power = 50
		add_war_support = 0.10
		unlock_decision_tooltip = KMT_found_our_faction_decision
		hidden_effect = {
			activate_targeted_decision = { decision = KMT_found_our_faction_decision target = ROOT }
		}
		if = {
			limit = {
				OR = {
					tag = GXC
					tag = YUN
				}
				has_socialist_government = yes
			}
			unlock_decision_tooltip = china_join_the_internationale_decision
			unlock_decision_tooltip = china_create_the_fourth_internationale_decision
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}
shared_focus = {
	id = KMT_demand_concessions_return
	icon = GFX_goal_QIE_destroy_LEC
	cost = 3

	relative_position_id = KMT_lead_the_liberation_of_asia
	x = 1
	y = 1

	prerequisite = { focus = KMT_lead_the_liberation_of_asia }
	ai_will_do = {
		base = 250
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0
			has_war = yes
		}
		modifier = {
			factor = 2
			num_divisions > 99
		}
	}
	bypass = {
		NOT = { country_exists = LEC }
		326 = { is_owned_by_ROOT_or_subject = yes } #Hong Kong
		609 = { is_owned_by_ROOT_or_subject = yes } #Tianjin
		728 = { is_owned_by_ROOT_or_subject = yes } #Guangzhouwan
		729 = { is_owned_by_ROOT_or_subject = yes } #Macau
		743 = { is_owned_by_ROOT_or_subject = yes } #Shanghai
		744 = { is_owned_by_ROOT_or_subject = yes } #Qingdao
		745 = { is_owned_by_ROOT_or_subject = yes } #Dalian
		746 = { is_owned_by_ROOT_or_subject = yes } #Ningbo
		747 = { is_owned_by_ROOT_or_subject = yes } #Fuzhou
		801 = { is_owned_by_ROOT_or_subject = yes } #Shantou
		802 = { is_owned_by_ROOT_or_subject = yes } #Xiamen
		803 = { is_owned_by_ROOT_or_subject = yes } #Wenzhou
		1075 = { is_owned_by_ROOT_or_subject = yes } #Nantong
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_demand_concessions_return"
		china_enable_concession_decisions = yes
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}
shared_focus = {
	id = KMT_we_will_liberate_taiwan
	icon = GFX_focus_generic_invade_taiwan
	cost = 3
	relative_position_id = KMT_lead_the_liberation_of_asia
	x = 4
	y = 1

	prerequisite = { focus = KMT_lead_the_liberation_of_asia }
	bypass = { owns_state = 524 }
	will_lead_to_war_with = JAP

	ai_will_do = {
		base = 250
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0
			has_war = yes
		}
		modifier = {
			factor = 2
			num_divisions > 99
		}
		modifier = {
			factor = 0
			AND = {
				naval_strength_ratio = {
					tag = JAP
					ratio < 1
				}
				JAP = {
					has_war_with_major = no
				}
			}
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_we_will_liberate_taiwan"
		if = {
			limit = { tag = CHI }
			CHI_mac_effect = yes
		}
		if = {
			limit = { 524 = { NOT = { is_claimed_by = ROOT } } } #Taiwan
			add_state_claim = 524
		}
		create_wargoal = {
			target = var:524.owner #Taiwan
			type = take_state_focus
			generator = { 524 }
		}
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = KMT_consolidate_the_frontiers
	icon = GFX_goal_china_MON_banner
	cost = 3

	relative_position_id = KMT_lead_the_liberation_of_asia
	x = -1
	y = 1

	prerequisite = { focus = KMT_lead_the_liberation_of_asia }
	ai_will_do = {
		base = 250
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0
			has_war = yes
		}
		modifier = {
			factor = 2
			num_divisions > 99
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_consolidate_the_frontiers"
		if = {
			limit = { tag = CHI }
			CHI_improve_NRA_effect = yes
		}
		china_enable_outskirts_decisions = yes
		KUM = {
			every_core_state = { add_claim_by = ROOT }
		}
		ETS = {
			every_core_state = { add_claim_by = ROOT }
		}
		SIK = {
			every_core_state = { add_claim_by = ROOT }
		}
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = KMT_beyond_macmahon_line
	icon = GFX_goal_JAP_target_india
	cost = 3

	relative_position_id = KMT_lead_the_liberation_of_asia
	x = 0
	y = 3

	prerequisite = { focus = KMT_consolidate_the_frontiers }
	mutually_exclusive = { focus = KMT_five_principles_of_peaceful_coexistence }
	will_lead_to_war_with = HND
	will_lead_to_war_with = PRF
	will_lead_to_war_with = RAJ
	available = {
		has_war_support > 0.75
		322 = { is_owned_by_ROOT_or_ally = yes } #Tibet
	}
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0
			has_war = yes
		}
		modifier = {
			factor = 2
			num_divisions > 99
		}
		modifier = {
			factor = 0
			strength_ratio = {
				tag = HND
				ratio < 2
			}
			strength_ratio = {
				tag = PRF
				ratio < 2
			}
			strength_ratio = {
				tag = RAJ
				ratio < 2
			}
		}
		modifier = {
			factor = 0
			has_country_leader = { character = CHI_song_qingling }
			country_exists = HND
			has_game_rule = { rule = HND_forpol option = HND_FORPOL_CHI }
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_beyond_macmahon_line"
		if = {
			limit = { 858 = { NOT = { is_claimed_by = CHI } } } #Tawang
			add_state_claim = 858
		}
		if = {
			limit = { 897 = { NOT = { is_claimed_by = CHI } } } #Askai Chin
			add_state_claim = 897
		}
		activate_targeted_decision = { target = HND decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = RAJ decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = PRF decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = NEP decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = BHU decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = AFG decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = CEY decision = KMT_liberation_war_decision }
		if = {
			limit = { var:422.owner = { NOT = { tag = CEY } } }
			activate_targeted_decision = { target = var:422.owner decision = KMT_liberation_war_decision }
		}
		else_if = {
			limit = { var:1119.owner = { NOT = { tag = CEY } } } #Trincomalee
			activate_targeted_decision = { target = var:1119.owner decision = KMT_liberation_war_decision }
		}
		if = {
			limit = { var:321.owner = { is_indian_tag = no } }
			activate_targeted_decision = { target = var:321.owner decision = KMT_liberation_war_decision } #Goa
		}
		hidden_effect = {
			for_each_scope_loop = {
				array = global.indian_tags_array
				CHI_liberation_war_PREV_effect = yes
			}
		}
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = KMT_secure_the_northern_frontier
	icon = GFX_goal_MON_we_dont_need_russia
	cost = 3

	relative_position_id = KMT_consolidate_the_frontiers
	x = 0
	y = 1

	prerequisite = { focus = KMT_consolidate_the_frontiers }
	available = {
		has_war_support > 0.75
		#Manchuria
		717 = { is_owned_and_controlled_by = ROOT } #Hejiang
		714 = { is_owned_and_controlled_by = ROOT } #Nenjiang
		#Mongolia and Tibet
		330 = { is_owned_by_ROOT_or_ally = yes } #Urga
		322 = { is_owned_by_ROOT_or_ally = yes } #Tibet
		#Xinjiang
		617 = { is_owned_by_ROOT_or_ally = yes } #Dihua
		1083 = { is_owned_by_ROOT_or_ally = yes } #Kumul
	}
	ai_will_do = {
		base = 0
		modifier = {
			add = 100
			OR = {
				330 = { owner = { is_ally_with = var:653.owner } } #Urga
				619 = { owner = { is_ally_with = var:653.owner } } #Kashgar
				886 = { owner = { is_ally_with = var:653.owner } } #Jilin
			}
		}
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0
			has_war = yes
		}
		modifier = {
			factor = 2
			num_divisions > 99
		}
		modifier = {
			factor = 0
			var:653.owner = {
				strength_ratio = {
					tag = CHI
					ratio > 0.5
				}
				has_war_with_major = no
			}
		}
	}
	bypass = {
		NOT = {
			can_declare_war_on = var:653.owner
			can_declare_war_on = var:408.owner
		}
		var:267.owner = { has_socialist_government = yes } #Kabul
		var:405.owner = { has_socialist_government = yes } #Bukhara
		var:407.owner = { has_socialist_government = yes } #Tashkent
		var:861.owner = { has_socialist_government = yes } #Khorezm
		var:810.owner = { has_socialist_government = yes } #Semipalatinsk
	}

	will_lead_to_war_with = RUS
	will_lead_to_war_with = FER
	will_lead_to_war_with = AFG
	will_lead_to_war_with = BUK
	will_lead_to_war_with = KHI
	will_lead_to_war_with = TRK
	will_lead_to_war_with = KAZ

	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_secure_the_northern_frontier"
		activate_targeted_decision = { target = var:408.owner decision = KMT_liberation_war_decision } #Vladivostok
		if = {
			limit = {
				var:653.owner = { NOT = { tag = var:408.owner } }
			}
			activate_targeted_decision = { target = var:653.owner decision = KMT_liberation_war_decision } #Ekaterinberg
		}
		activate_targeted_decision = { target = AFG decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = BUK decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = KHI decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = TRK decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = KAZ decision = KMT_liberation_war_decision }
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = KMT_strike_german_east_asia
	icon = GFX_goal_JAP_target_gea
	cost = 3

	relative_position_id = KMT_demand_concessions_return
	x = 0
	y = 1

	prerequisite = { focus = KMT_demand_concessions_return }
	bypass = { NOT = { can_declare_war_on = GEA } }
	available = {
		has_war_support > 0.50
		owns_state = 743 #Shanghai
	}
	will_lead_to_war_with = GEA
	will_lead_to_war_with = GER
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0
			has_war = yes
		}
		modifier = {
			factor = 2
			num_divisions > 99
		}
		modifier = {
			factor = 0
			GEA = { has_war_with_major = no }
			naval_strength_ratio = {
				tag = GEA
				ratio < 1
			}
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_strike_german_east_asia"
		create_wargoal = {
			target = GEA
			type = topple_government
		}
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = KMT_two_suns_in_sky
	icon = GFX_goal_kmt_contest_the_japanese_fleet
	cost = 3

	relative_position_id = KMT_we_will_liberate_taiwan
	x = 1
	y = 1

	prerequisite = { focus = KMT_we_will_liberate_taiwan }
	available = {
		has_war_support > 0.50
		owns_state = 524 #Taiwan
	}
	bypass = { NOT = { can_declare_war_on = JAP } }
	will_lead_to_war_with = JAP
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0
			has_war = yes
		}
		modifier = {
			factor = 2
			num_divisions > 99
		}
		modifier = {
			factor = 0
			JAP = { has_war_with_major = no }
			naval_strength_ratio = {
				tag = JAP
				ratio < 1
			}
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_two_suns_in_sky"
		activate_targeted_decision = { target = JAP decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = KOR decision = KMT_liberation_war_decision }
		#Fallback in case somehow another power took states CHI needs for the finisher
		if = {
			limit = {
				var:282.owner = {
					NOT = { tag = JAP }
					NOT = { tag = CHI }
				}
			}
			activate_targeted_decision = { target = var:282.owner decision = KMT_liberation_war_decision } #Kanto (Tokyo)
		}
		if = {
			limit = {
				var:525.owner = {
					NOT = { tag = JAP }
					NOT = { tag = KOR }
					NOT = { tag = CHI }
				}
			}
			activate_targeted_decision = { target = var:525.owner decision = KMT_liberation_war_decision } #Gyeonggi
		}
		if = {
			limit = {
				var:527.owner = {
					NOT = { tag = JAP }
					NOT = { tag = KOR }
					NOT = { tag = CHI }
				}
			}
			activate_targeted_decision = { target = var:527.owner decision = KMT_liberation_war_decision } #Yangseo
		}
		if = {
			limit = {
				var:1099.owner = {
					NOT = { tag = JAP }
					NOT = { tag = KOR }
					NOT = { tag = CHI }
				}
			}
			activate_targeted_decision = { target = var:1099.owner decision = KMT_liberation_war_decision } #Samnam
		}
		if = {
			limit = {
				var:1100.owner = {
					NOT = { tag = JAP }
					NOT = { tag = KOR }
					NOT = { tag = CHI }
				}
			}
			activate_targeted_decision = { target = var:1100.owner decision = KMT_liberation_war_decision } #Gwanbuk
		}
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = KMT_liberate_southeast_asia
	icon = GFX_goal_JAP_target_indochina
	cost = 3

	relative_position_id = KMT_we_will_liberate_taiwan
	x = -1
	y = 1

	prerequisite = { focus = KMT_we_will_liberate_taiwan }
	prerequisite = { focus = KMT_demand_concessions_return }
	available = {
		has_war_support > 0.75
		owns_state = 524 #Taiwan
		owns_state = 743 #Shanghai
		GEA = {
			OR = {
				has_war_with = ROOT
				exists = no
				has_capitulated = yes
			}
		}
		JAP = {
			OR = {
				has_war_with = ROOT
				exists = no
				has_capitulated = yes
				is_subject = yes
			}
		}
	}
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0
			has_war = yes
		}
		modifier = {
			factor = 0
			num_divisions < 99
		}
		modifier = {
			factor = 0
			is_faction_leader = yes
			has_navy_size = {
				size < 100
			}
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_liberate_southeast_asia"
		activate_targeted_decision = { target = GEA decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = INC decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = VIN decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = LAO decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = CAM decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = SIA decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = BRM decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = MAL decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = SAR decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = PHI decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = DEI decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = INS decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = PNG decision = KMT_liberation_war_decision }
		if = {
			limit = {
				var:721.owner = {
					NOT = {
						tag = INS
						tag = ROOT #In case CHI took it, don't want the goofiness of being able to liberate from yourself
					}
				}
			}
			activate_targeted_decision = { target = var:721.owner decision = KMT_liberation_war_decision } #East Timor
		}
		#Fallback Decisions for the "Final Focus" in case someone else occupies it.
		if = {
			limit = {
				var:336.owner = {
					NOT = {
						tag = GEA
						tag = MAL
						tag = ROOT
					}
				}
			}
			activate_targeted_decision = { target = var:336.owner decision = KMT_liberation_war_decision } #Singapore
		}
		if = {
			limit = {
				var:827.owner = {
					NOT = {
						tag = INC
						tag = VIN
						tag = ROOT
						tag = GEA
					}
				}
			}
			activate_targeted_decision = { target = var:827.owner decision = KMT_liberation_war_decision } #Hue
		}
		if = {
			limit = {
				var:327.owner = {
					NOT = {
						tag = PHI
						tag = ROOT
					}
				}
			}
			activate_targeted_decision = { target = var:327.owner decision = KMT_liberation_war_decision } #Manila
		}
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = KMT_secure_the_southern_seas
	icon = GFX_goal_JAP_target_australasia
	cost = 3

	relative_position_id = KMT_liberate_southeast_asia
	x = -1
	y = 1

	prerequisite = { focus = KMT_strike_german_east_asia }
	prerequisite = { focus = KMT_liberate_southeast_asia }
	bypass = {
		OR = {
			AST = { has_socialist_government = yes }
			has_war_with = AST
		}
	}
	will_lead_to_war_with = AST
	will_lead_to_war_with = NZL
	will_lead_to_war_with = ENT
	available = {
		GEA = { exists = no }
		JAP = {
			OR = {
				exists = no
				is_subject = yes
			}
		}
		1020 = { #Batavia
			is_owned_by_ROOT_or_ally = yes
		}
	}
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0
			has_war = yes
		}
		modifier = {
			factor = 0
			num_divisions < 99
		}
		modifier = {
			factor = 0
			is_faction_leader = yes
			has_navy_size = {
				size < 100
			}
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_secure_the_southern_seas"
		activate_targeted_decision = { target = AST decision = KMT_liberation_war_decision }
		activate_targeted_decision = { target = NZL decision = KMT_liberation_war_decision }
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = KMT_ensure_pacific_security
	icon = GFX_goal_JAP_target_hawaii
	cost = 3

	relative_position_id = KMT_two_suns_in_sky
	x = -1
	y = 1

	prerequisite = { focus = KMT_liberate_southeast_asia }
	prerequisite = { focus = KMT_two_suns_in_sky }
	available = {
		GEA = { exists = no }
		JAP = {
			OR = {
				exists = no
				is_subject = yes
			}
		}
		327 = { #Manila
			is_owned_by_ROOT_or_ally = yes
		}
	}
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0
			has_war = yes
		}
		modifier = {
			factor = 0
			num_divisions < 99
		}
		modifier = {
			factor = 0
			is_faction_leader = yes
			has_navy_size = {
				size < 100
			}
		}
		modifier = {
			factor = 0
			var:629.owner = {
				naval_strength_ratio = {
					tag = CHI
					ratio > 1
				}
			}
		}
	}
	will_lead_to_war_with = HAW
	will_lead_to_war_with = USA
	will_lead_to_war_with = ACC
	will_lead_to_war_with = APG
	will_lead_to_war_with = NEE
	bypass = { var:629.owner = { has_socialist_government = yes } }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_ensure_pacific_security"
		activate_targeted_decision = { target = var:629.owner decision = KMT_liberation_war_decision } #Honolulu
		if = {
			limit = { var:629.owner = { NOT = { tag = HAW } } }
			activate_targeted_decision = { target = HAW decision = KMT_liberation_war_decision }
		}
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = KMT_imperialism_crushed_forevermore
	icon = GFX_goal_generic_globe
	cost = 7

	relative_position_id = KMT_secure_the_southern_seas
	x = 0
	y = 1

	available = {
		is_faction_leader = yes
		if = { #LKMT
			limit = { china_alignment_left_kuomintang = yes }
			custom_override_tooltip = {
				tooltip = KMT_freed_core_tt
				KOR = { is_ally_with = ROOT }
				JAP = { is_ally_with = ROOT }
				PHI = { is_ally_with = ROOT }
				OR = {
					AND = {
						VIN = { is_ally_with = ROOT }
						CAM = { is_ally_with = ROOT }
						LAO = { is_ally_with = ROOT }
					}
					INC = { is_ally_with = ROOT }
				}
				408 = { is_owned_by_ROOT_or_ally = yes } #Vladivostok
				336 = { is_owned_by_ROOT_or_ally = yes } #Singapore
			}
			#Outer Sphere - Just needs to be socialist
			custom_override_tooltip = {
				tooltip = LKT_freed_india_tt
				RAJ = { exists = no }
				PRF = { exists = no }
				var:320.owner = { CHN_is_socialist_or_allied_trigger = yes } #Madras
				var:321.owner = { CHN_is_socialist_or_allied_trigger = yes } #Goa
				var:323.owner = { CHN_is_socialist_or_allied_trigger = yes } #Nepal
				var:324.owner = { CHN_is_socialist_or_allied_trigger = yes } #Bhutan
				var:422.owner = { CHN_is_socialist_or_allied_trigger = yes } #Ceylon
				var:426.owner = { CHN_is_socialist_or_allied_trigger = yes } #Orissa
				var:427.owner = { CHN_is_socialist_or_allied_trigger = yes } #Hyderabad
				var:428.owner = { CHN_is_socialist_or_allied_trigger = yes } #Gujarat
				var:429.owner = { CHN_is_socialist_or_allied_trigger = yes } #Bombay
				var:430.owner = { CHN_is_socialist_or_allied_trigger = yes } #East Bengal
				var:432.owner = { CHN_is_socialist_or_allied_trigger = yes } #Assam
				var:433.owner = { CHN_is_socialist_or_allied_trigger = yes } #Rajputana
				var:439.owner = { CHN_is_socialist_or_allied_trigger = yes } #Delhi
				var:818.owner = { CHN_is_socialist_or_allied_trigger = yes } #Pondicherry
				var:891.owner = { CHN_is_socialist_or_allied_trigger = yes } #Lahore
			}
			custom_override_tooltip = {
				tooltip = LKT_freed_SEA_tt
				GEA = { exists = no }
				DEI = { exists = no }
				var:288.owner = { CHN_is_socialist_or_allied_trigger = yes } #Rangoon
				var:289.owner = { CHN_is_socialist_or_allied_trigger = yes } #Bangkok
				var:333.owner = { CHN_is_socialist_or_allied_trigger = yes } #North Borneo
				var:672.owner = { CHN_is_socialist_or_allied_trigger = yes } #Sumatra
				var:1016.owner = { CHN_is_socialist_or_allied_trigger = yes } #South Borneo
				var:1020.owner = { CHN_is_socialist_or_allied_trigger = yes } #Batavia
				var:721.owner = { CHN_is_socialist_or_allied_trigger = yes } #East Timor
			}
			custom_override_tooltip = {
				tooltip = LKT_freed_CEA_tt
				var:267.owner = { CHN_is_socialist_or_allied_trigger = yes } #Kabul
				var:405.owner = { CHN_is_socialist_or_allied_trigger = yes } #Bukhara
				var:407.owner = { CHN_is_socialist_or_allied_trigger = yes } #Tashkent
				var:861.owner = { CHN_is_socialist_or_allied_trigger = yes } #Khorezm
				var:810.owner = { CHN_is_socialist_or_allied_trigger = yes } #Semipalatinsk
			}
			custom_override_tooltip = {
				tooltip = LKT_freed_AST_tt
				var:985.owner = { CHN_is_socialist_or_allied_trigger = yes } #Canberra
				var:284.owner = { CHN_is_socialist_or_allied_trigger = yes } #North Island
				var:523.owner = { CHN_is_socialist_or_allied_trigger = yes } #SE. New Guinea
			}
			custom_override_tooltip = {
				tooltip = LKT_freed_HAW_tt
				var:629.owner = { CHN_is_socialist_or_allied_trigger = yes } #Hawaii
			}
		}
		if = { #RKMT
			limit = { china_alignment_right_kuomintang = yes }
			custom_override_tooltip = {
				tooltip = KMT_freed_core_tt
				KOR = { is_ally_with = ROOT }
				JAP = { is_ally_with = ROOT }
				PHI = { is_ally_with = ROOT }
				OR = {
					AND = {
						VIN = { is_ally_with = ROOT }
						CAM = { is_ally_with = ROOT }
						LAO = { is_ally_with = ROOT }
					}
					INC = { is_ally_with = ROOT }
				}
				408 = { is_owned_by_ROOT_or_ally = yes } #Vladivostok
				336 = { is_owned_by_ROOT_or_ally = yes } #Singapore
			}
			#Outer Sphere - Just needs to be not socialist
			custom_override_tooltip = {
				tooltip = RKT_freed_india_tt
				RAJ = { exists = no }
				PRF = { exists = no }
				var:320.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Madras
				var:321.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Goa
				var:323.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Nepal
				var:324.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Bhutan
				var:422.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Ceylon
				var:426.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Orissa
				var:427.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Hyderabad
				var:428.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Gujarat
				var:429.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Bombay
				var:430.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #East Bengal
				var:432.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Assam
				var:433.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Rajputana
				var:439.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Delhi
				var:818.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Pondicherry
				var:891.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Lahore
			}
			custom_override_tooltip = {
				tooltip = RKT_freed_SEA_tt
				GEA = { exists = no }
				DEI = { exists = no }
				var:288.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Rangoon
				var:289.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Bangkok
				var:333.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #North Borneo
				var:672.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Sumatra
				var:1016.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #South Borneo
				var:1020.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Batavia
				var:721.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #East Timor
			}
			custom_override_tooltip = {
				tooltip = RKT_freed_CEA_tt
				var:267.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Kabul
				var:405.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Bukhara
				var:407.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Tashkent
				var:861.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Khorezm
				var:810.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Semipalatinsk
			}
			custom_override_tooltip = {
				tooltip = RKT_freed_AST_tt
				var:985.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Canberra
				var:284.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #North Island
				var:523.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #SE. New Guinea
			}
			custom_override_tooltip = {
				tooltip = RKT_freed_HAW_tt
				var:629.owner = { CHN_is_rkmt_aligned_or_allied_trigger = yes } #Hawaii
			}
		}
		if = {
			limit = { has_country_leader = { character = CHI_wang_jingwei } }
			has_completed_focus = KMT_chinese_expeditionary_force
		}
	}
	prerequisite = { focus = KMT_secure_the_southern_seas }
	prerequisite = { focus = KMT_ensure_pacific_security }
	prerequisite = { focus = KMT_beyond_macmahon_line focus = KMT_five_principles_of_peaceful_coexistence }
	ai_will_do = { base = 500 }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_imperialism_crushed_forevermore"
		if = {
			limit = { has_idea = KMT_lead_the_liberation_of_asia_wang_idea }
			swap_ideas = {
				remove_idea = KMT_lead_the_liberation_of_asia_wang_idea
				add_idea = KMT_lead_the_liberation_of_asia_2_idea
			}
		}
		else = {
			swap_ideas = {
				remove_idea = KMT_lead_the_liberation_of_asia_idea
				add_idea = KMT_lead_the_liberation_of_asia_2_idea
			}
		}
		country_event = CHI.endgame.050
		mark_focus_tree_layout_dirty = yes
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = KMT_a_world_set_free
	icon = GFX_focus_spr_anarchism_knows_no_borders
	cost = 7

	relative_position_id = KMT_imperialism_crushed_forevermore
	x = 0
	y = 1
	prerequisite = { focus = KMT_imperialism_crushed_forevermore }
	allow_branch = {
		if = {
			limit = { has_character = CHI_four_elders }
			CHI_four_elders = { is_second_in_command = yes }
		}
		has_completed_focus = KMT_imperialism_crushed_forevermore
	}
	available = {
		#insanity
		custom_override_tooltip = {
			tooltip = CHI_freed_americas_tt
			var:361.owner = { CHN_is_socialist_or_allied_trigger = yes } #Washington D.C.
			var:739.owner = { CHN_is_socialist_or_allied_trigger = yes } #Ottawa
			var:277.owner = { CHN_is_socialist_or_allied_trigger = yes } #Mexico City
			var:315.owner = { CHN_is_socialist_or_allied_trigger = yes } #Havana
			var:500.owner = { CHN_is_socialist_or_allied_trigger = yes } #Rio de Janario
			var:278.owner = { CHN_is_socialist_or_allied_trigger = yes } #Buenos Aires
			var:279.owner = { CHN_is_socialist_or_allied_trigger = yes } #Santiago
			var:849.owner = { CHN_is_socialist_or_allied_trigger = yes } #Carcas
		}
		custom_override_tooltip = {
			tooltip = CHI_freed_europe_tt
			var:165.owner = { CHN_is_socialist_or_allied_trigger = yes } #Barcelona
			var:41.owner = { CHN_is_socialist_or_allied_trigger = yes } #Madrid
			var:16.owner = { CHN_is_socialist_or_allied_trigger = yes } #Paris
			var:126.owner = { CHN_is_socialist_or_allied_trigger = yes } #London
			var:64.owner = { CHN_is_socialist_or_allied_trigger = yes } #Berlin
			var:2.owner = { CHN_is_socialist_or_allied_trigger = yes } #Rome
			var:4.owner = { CHN_is_socialist_or_allied_trigger = yes } #Vienna
			var:773.owner = { CHN_is_socialist_or_allied_trigger = yes } #Constantinople
			var:219.owner = { CHN_is_socialist_or_allied_trigger = yes } #Moscow
		}
		custom_override_tooltip = {
			tooltip = CHI_freed_africa_middle_east_tt
			var:446.owner = { CHN_is_socialist_or_allied_trigger = yes } #Cairo
			var:965.owner = { CHN_is_socialist_or_allied_trigger = yes } #Dar al Salaam
			var:681.owner = { CHN_is_socialist_or_allied_trigger = yes } #Capetown
			var:459.owner = { CHN_is_socialist_or_allied_trigger = yes } #Algiers
			var:266.owner = { CHN_is_socialist_or_allied_trigger = yes } #Tehran
			var:973.owner = { CHN_is_socialist_or_allied_trigger = yes } #Lagos
		}
	}

	ai_will_do = { base = 500 }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_a_world_set_free"
		add_popularity = { ideology = social_conservative popularity = 0.2 }
		add_political_power = 100
		if = {
			limit = {
				is_faction_leader = yes
				num_faction_members > 1
			}
			set_faction_name = faction_KMT_global_revolutionary_federation
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

# Sino-Pacific Friendship Association Foreign Policy Branch
shared_focus = {
	id = KMT_coordinate_the_afro_asian_conference
	icon = GFX_focus_ETH_callout_to_the_world
	cost = 7

	relative_position_id = KMT_lead_the_liberation_of_asia
	x = -4
	y = 1

	allow_branch = {
		CHN_sino_pacific_friendship_association_leaders_trigger = yes
	}
	prerequisite = { focus = KMT_lead_the_liberation_of_asia }
	available = {
		has_socialist_government = yes
		num_of_controlled_factories > 50
	}
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_coordinate_the_afro_asian_conference"
		custom_effect_tooltip = KMT_coordinate_the_afro_asian_conference_tt
		hidden_effect = {
			if = {
				limit = { has_country_leader = { character = GXC_peng_pai } }
				country_event = { id = CHN.foreignpolicy.0050 days = 7 } #Guangzhou Summit
			}
			else = {
				country_event = { id = CHN.foreignpolicy.005 days = 7 } #Afro-Asian Conference
			}
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = KMT_aid_the_developing_world
	icon = GFX_goal_generic_rice_field
	cost = 7

	relative_position_id = KMT_coordinate_the_afro_asian_conference
	x = -1
	y = 1

	prerequisite = { focus = KMT_coordinate_the_afro_asian_conference }
	available = {
		check_variable = {
			tooltip = KMT_aid_the_developing_world_trigger_tt
			CHI_invested_countries_var > 9
		}
	}
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_aid_the_developing_world"
		subtract_from_variable = { CHI_invest_in_third_world_cost_var = 15 }
		custom_effect_tooltip = KMT_aid_the_developing_world_effect_tt
		add_ideas = CHI_champion_of_developing_world_idea
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = KMT_joint_pan_asian_military_cooperation
	icon = GFX_goal_generic_join_faction
	cost = 5

	relative_position_id = KMT_coordinate_the_afro_asian_conference
	x = 1
	y = 1

	prerequisite = { focus = KMT_coordinate_the_afro_asian_conference }
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_joint_pan_asian_military_cooperation"
		add_war_support = 0.10
		army_experience = 50
		custom_effect_tooltip = tooltip_white_line
		every_allied_country = {
			limit = {
				is_in_faction_with = CHI
				is_in_asia = yes
				has_socialist_government = yes
			}
			add_war_support = 0.10
			army_experience = 50
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = KMT_five_principles_of_peaceful_coexistence
	icon = GFX_goal_india_commune
	cost = 7

	relative_position_id = KMT_coordinate_the_afro_asian_conference
	x = 0
	y = 2

	available = {
		has_war = no
	}
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	prerequisite = { focus = KMT_coordinate_the_afro_asian_conference }
	mutually_exclusive = { focus = KMT_beyond_macmahon_line }
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_five_principles_of_peaceful_coexistence"
		hidden_effect = {
			for_each_scope_loop = {
				array = global.indian_tags_array
				ROOT = {
					activate_targeted_decision = { target = PREV decision = KMT_invite_countries_to_faction }
				}
			}
		}
		custom_effect_tooltip = KMT_five_principles_of_peaceful_coexistence_tt
		if = {
			limit = {
				858 = {
					is_claimed_by = ROOT
					NOT = { is_owned_by = ROOT }
				}
			}
			858 = { remove_claim_by = ROOT }
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

#Internationale of the East Standard Focus
shared_focus = {
	id = KMT_chinese_expeditionary_force
	icon = GFX_focus_SOV_mobilization_plan
	cost = 7

	relative_position_id = KMT_lead_the_liberation_of_asia
	x = -4
	y = 1

	allow_branch = {
		CHN_internationale_of_the_east_leaders_trigger = yes
		NOT = {
			has_country_leader = { character = CHI_chen_gongbo }
			has_country_leader = { character = CHI_zeng_zhongming }
		}
	}
	prerequisite = { focus = KMT_lead_the_liberation_of_asia }
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_chinese_expeditionary_force"
		swap_ideas = {
			remove_idea = KMT_lead_the_liberation_of_asia_idea
			add_idea = KMT_lead_the_liberation_of_asia_wang_idea
		}
		army_experience = 25
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = KMT_reach_out_to_the_overseas_community
	icon = GFX_goal_generic_debt_negotiations
	cost = 7

	relative_position_id = KMT_chinese_expeditionary_force
	x = -1
	y = 1

	prerequisite = { focus = KMT_chinese_expeditionary_force }
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_reach_out_to_the_overseas_community"
		add_offsite_building = {
			type = arms_factory
			level = 1
		}
		add_offsite_building = {
			type = industrial_complex
			level = 1
		}
		add_war_support = 0.15
		add_stability = 0.15
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT }
}

shared_focus = {
	id = KMT_encourage_foreign_investment
	icon = GFX_goal_generic_foreign_investments
	cost = 7

	relative_position_id = KMT_chinese_expeditionary_force
	x = 1
	y = 1

	prerequisite = { focus = KMT_chinese_expeditionary_force }
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_encourage_foreign_investment"
		if = {
			limit = {
				OR = {
					country_exists = FRA
					country_exists = ENG
					country_exists = WCA
				}
			}
			add_manpower = -50000
			FRA = {
				add_timed_idea = {
					idea = CHI_industrial_volunteers_idea
					days = 730
				}
			}
			ENG = {
				add_timed_idea = {
					idea = CHI_industrial_volunteers_idea
					days = 730
				}
			}
			WCA = {
				add_timed_idea = {
					idea = CHI_industrial_volunteers_idea
					days = 730
				}
			}
			CHI = {
				add_timed_idea = {
					idea = CHI_invite_foreign_investment_idea
					days = 730
				}
			}
		}
		else = {
			add_manpower = -50000
			add_one_random_civilian_factory = yes
			add_one_random_military_factory = yes
			add_stability = 0.1
		}
	}
	search_filters = { FOCUS_FILTER_PRODUCTION }
}

shared_focus = {
	id = KMT_extend_the_mmic
	icon = GFX_focus_SOV_support_spanish_poum
	cost = 7

	relative_position_id = KMT_chinese_expeditionary_force
	x = 0
	y = 2

	prerequisite = { focus = KMT_chinese_expeditionary_force }
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_extend_the_mmic"
		if = {
			limit = {
				OR = {
					country_exists = FRA
					country_exists = ENG
				}
			}
			CHI_mission_militaire = { CHN_recruit_character_effect = yes }
			add_timed_idea = {
				idea = CHI_mmic_nra_cooperation_idea
				days = 365
			}
			CHI_mission_militaire = {
				custom_override_tooltip = {
					tooltip = {
						localization_key = tooltip_replace_character_trait
						ROLE = theorist
						OLD_TRAIT = KR_council_of_theorists
						NEW_TRAIT = KR_mmic_2
					}
					remove_trait = {
						character = CHI_mission_militaire
						slot = theorist
						trait = KR_council_of_theorists
					}
					add_trait = {
						character = CHI_mission_militaire
						slot = theorist
						trait = KR_mmic_2
					}
				}
				effect_tooltip = {
					set_temp_variable = { modifier_change_tt = 0.02 tooltip = experience_gain_army_tooltip }
					set_temp_variable = { modifier_change_tt = 0.02 tooltip = experience_gain_air_tooltip }
					set_temp_variable = { modifier_change_tt = 0.02 tooltip = experience_gain_navy_tooltip }
				}
			}
		}
		else = {
			if = {
				limit = {
					CHI_mission_militaire = { is_hired_as_advisor = yes }
				}
				add_political_power = 100
			}
			hidden_effect = { CHI_mission_militaire = { retire = yes } }
			CHI_mission_militaire_exiles = { CHN_recruit_character_effect = yes }
			CHI_mission_militaire_exiles = {
				custom_override_tooltip = {
					tooltip = {
						localization_key = tooltip_replace_character_trait
						ROLE = theorist
						OLD_TRAIT = KR_council_of_theorists
						NEW_TRAIT = KR_mmic_exiles
					}
					CHN_recruit_character_effect = yes
				}
				effect_tooltip = {
					set_temp_variable = { modifier_change_tt = 0.02 tooltip = experience_gain_army_tooltip }
					set_temp_variable = { modifier_change_tt = 0.02 tooltip = experience_gain_air_tooltip }
					set_temp_variable = { modifier_change_tt = 0.02 tooltip = experience_gain_navy_tooltip }
				}
			}
			add_ideas = CHI_MMIC_exiles_cooperation_idea
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = KMT_the_dongfeng_project
	icon = GFX_focus_rocketry
	cost = 7

	relative_position_id = KMT_extend_the_mmic
	x = 0
	y = 1

	prerequisite = { focus = KMT_extend_the_mmic }
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_the_dongfeng_project"
		add_breakthrough_progress = {
			specialization = specialization_air
			value = 0.5
		}
		custom_effect_tooltip = tooltip_white_line
		add_tech_bonus = {
			name = KMT_the_dongfeng_project
			bonus = 0.5
			uses = 1
			category = rocketry
		}
		if = {
			limit = {
				NOT = { has_tech = atomic_research }
				NOT = { is_researching_technology = atomic_research }
			}
			add_tech_bonus = {
				name = KMT_the_dongfeng_project
				bonus = 0.5
				uses = 1
				technology = atomic_research
			}
		}
		else = {
			add_breakthrough_progress = {
				specialization = specialization_nuclear
				value = 0.5
			}
		}
	}
}

#People's Internationale // Chen Gongbo Foreign Policy Tree
shared_focus = {
	id = KMT_revolutionary_diplomacy
	icon = GFX_focus_focus_fra_revolution_utmost
	cost = 4

	relative_position_id = KMT_lead_the_liberation_of_asia
	x = -4
	y = 1

	prerequisite = { focus = KMT_lead_the_liberation_of_asia }
	allow_branch = {
		OR = {
			has_country_leader = { character = CHI_chen_gongbo }
			has_country_leader = { character = CHI_zeng_zhongming }
			CHN_asian_peoples_internationale_leaders_trigger = yes
		}
	}
	available = {
		is_faction_leader = yes
	}
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_revolutionary_diplomacy"
		add_war_support = 0.10
		custom_effect_tooltip = CHI_founder_of_minsheng_partnership
		KMT_add_to_minsheng_partnership = yes
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = KMT_establish_peoples_livelihood_countries
	icon = GFX_goal_CHI_economic_sphere
	cost = 5

	relative_position_id = KMT_revolutionary_diplomacy
	x = -1
	y = 1

	prerequisite = { focus = KMT_revolutionary_diplomacy }
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_establish_peoples_livelihood_countries"
		KMT_found_minsheng_partnership = yes
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = KMT_the_inevitable_demise_of_capitalism
	icon = GFX_focus_spr_class_war
	cost = 5

	relative_position_id = KMT_revolutionary_diplomacy
	x = 1
	y = 1

	prerequisite = { focus = KMT_revolutionary_diplomacy }
	prerequisite = { focus = KMT_consolidate_the_frontiers }

	will_lead_to_war_with = GER
	will_lead_to_war_with = ENT

	ai_will_do = {
		base = 50
		modifier = {
			factor = 0
			NOT = {
				GER = {
					any_home_area_neighbor_country = {
						has_war_with = PREV
						has_socialist_government = yes
					}
				}
				ENT = {
					any_home_area_neighbor_country = {
						has_war_with = PREV
						has_socialist_government = yes
					}
				}
			}
		}
		modifier = {
			factor = 0
			NOT = {
				RUS = { has_war_with = GER } #No Point in this war if Russia's out and can't provide a land corridor
				WCA = { has_war_with = ENT } #No point in this war if WCA can't provide land access to kill Canada
			}
		}
	}
	available = {
		#Manchuria
		717 = { is_owned_by_ROOT_or_ally = yes } #Hejiang
		714 = { is_owned_by_ROOT_or_ally = yes } #Nenjiang
		#Mongolia and Tibet
		330 = { is_owned_by_ROOT_or_ally = yes } #Urga
		322 = { is_owned_by_ROOT_or_ally = yes } #Tibet
		#Xinjiang
		617 = { is_owned_by_ROOT_or_ally = yes } #Dihua
		1083 = { is_owned_by_ROOT_or_ally = yes } #Kumul
		#Legations
		LEC = { exists = no }
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_the_inevitable_demise_of_capitalism"
		create_wargoal = {
			target = GER
			type = topple_government
		}
		create_wargoal = {
			target = ENT
			type = topple_government
		}
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = KMT_uniting_anticolonial_minds
	icon = GFX_focus_generic_socialist_science
	cost = 4

	relative_position_id = KMT_establish_peoples_livelihood_countries
	x = 0
	y = 1

	prerequisite = { focus = KMT_establish_peoples_livelihood_countries }
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_uniting_anticolonial_minds"
		add_political_power = 50
		custom_effect_tooltip = {
			localization_key = tooltip_modify_dynmod
			DYNMOD = KMT_minsheng_partnership_full_name
		}
		add_to_variable = { minsheng_partnership_research_var = 0.05 tooltip = research_speed_factor_tooltip }
		KMT_recalculate_founder_minsheng_partnership_effects = yes
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

#Asian Peoples' Anti-Imperialism League Foreign Policy Tree
shared_focus = {
	id = KMT_never_another_humiliation
	icon = GFX_goal_chi_one_china_policy_KMT
	cost = 5

	relative_position_id = KMT_lead_the_liberation_of_asia
	x = -4
	y = 1

	allow_branch = {
		CHN_asian_peoples_antiimperialism_league_leaders_trigger = yes
	}
	prerequisite = { focus = KMT_lead_the_liberation_of_asia }
	available = { is_faction_leader = yes }
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_never_another_humiliation"
		add_war_support = 0.10
		add_timed_idea = {
			idea = KMT_never_another_humiliation_idea
			days = 365
		}
	}
	search_filters = { FOCUS_FILTER_PRODUCTION }
}

shared_focus = {
	id = KMT_summer_border_service_corps
	icon = GFX_focus_AFG_education_reform
	cost = 5

	relative_position_id = KMT_never_another_humiliation
	x = 0
	y = 1

	prerequisite = { focus = KMT_never_another_humiliation }
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_summer_border_service_corps"
		every_controlled_state = {
			limit = { has_resistance = yes }
			add_compliance = 10
			add_resistance = -10
		}
		random_owned_controlled_state = {
			prioritize = { 330 1084 1115 329 1114 1116 348 616 621 612 } #Mongolia
			add_building_construction = {
				type = infrastructure
				level = 1
			}
		}
		random_owned_controlled_state = {
			prioritize = { 617 618 1083 287 619 897 } #Xinjiang
			add_building_construction = {
				type = infrastructure
				level = 1
			}
		}
		random_owned_controlled_state = {
			prioritize = { 322 1086 748 693 858 353 601 } #Tibet
			add_building_construction = {
				type = infrastructure
				level = 1
			}
		}
		custom_effect_tooltip = KMT_building_infrastructure_in_northwest_tt
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = KMT_fanatical_militarism
	icon = GFX_human_tsunami
	cost = 5

	relative_position_id = KMT_summer_border_service_corps
	x = 1
	y = 1

	prerequisite = { focus = KMT_summer_border_service_corps }
	mutually_exclusive = { focus = KMT_entrenching_isolation }
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_fanatical_militarism"
		swap_ideas = {
			remove_idea = KMT_lead_the_liberation_of_asia_idea
			add_idea = CHI_chinese_revanchism_idea
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = KMT_repudiate_the_catastrophe
	icon = GFX_goal_attack_germany
	cost = 5

	relative_position_id = KMT_fanatical_militarism
	x = 0
	y = 1

	prerequisite = { focus = KMT_fanatical_militarism }
	available = {
		has_war_support > 0.80
		#Manchuria
		717 = { is_owned_by_ROOT_or_ally = yes } #Hejiang
		714 = { is_owned_by_ROOT_or_ally = yes } #Nenjiang
		#Mongolia and Tibet
		330 = { is_owned_by_ROOT_or_ally = yes } #Urga
		322 = { is_owned_by_ROOT_or_ally = yes } #Tibet
		#Xinjiang
		617 = { is_owned_by_ROOT_or_ally = yes } #Dihua
		1083 = { is_owned_by_ROOT_or_ally = yes } #Kumul
		#Legations
		LEC = { exists = no }
	}

	will_lead_to_war_with = GER
	will_lead_to_war_with = MAF
	will_lead_to_war_with = GEA

	ai_will_do = {
		base = 50
		modifier = {
			factor = 0
			GER = { has_war_with_major = no }
		}
		modifier = {
			factor = 0
			NOT = {
				RUS = { has_war_with = GER } #No Point in this war if Russia's out and can't provide a land corridor
			}
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_repudiate_the_catastrophe"
		custom_effect_tooltip = KMT_repudiate_the_catastrophe_tt
		hidden_effect = { country_event = CHI.endgame.703 } #Rays of the White Sun
		custom_effect_tooltip = tooltip_white_line
		if = {
			limit = { GER = { exists = yes } }
			create_wargoal = {
				target = GER
				type = topple_government
			}
		}
		if = {
			limit = { MAF = { exists = yes } }
			create_wargoal = {
				target = MAF
				type = topple_government
			}
		}
		if = {
			limit = { GEA = { exists = yes } }
			create_wargoal = {
				target = GEA
				type = topple_government
			}
		}
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = KMT_entrenching_isolation
	icon = GFX_goal_generic_isolation
	cost = 5

	relative_position_id = KMT_summer_border_service_corps
	x = -1
	y = 1

	prerequisite = { focus = KMT_summer_border_service_corps }
	mutually_exclusive = { focus = KMT_fanatical_militarism }
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 5
			WCA = { exists = no }
			INT = { exists = no }
			HND = { exists = no }
			RUS = { has_socialist_government = no }
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_entrenching_isolation"
		add_stability = 0.15
		swap_ideas = {
			remove_idea = KMT_lead_the_liberation_of_asia_idea
			add_idea = CHI_xenophobic_isolation_idea
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

#New Asia Alliance Foreign Policy Tree
shared_focus = {
	id = KMT_promoting_pan_asian_solidarity
	icon = GFX_focus_NOR_empower_sivorg
	cost = 5

	relative_position_id = KMT_lead_the_liberation_of_asia
	x = -4
	y = 1

	allow_branch = {
		CHN_new_asia_alliance_leaders_trigger = yes
	}
	prerequisite = { focus = KMT_lead_the_liberation_of_asia }
	available = { is_faction_leader = yes }
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_promoting_pan_asian_solidarity"
		add_war_support = 0.20
		add_offsite_building = {
			type = industrial_complex
			level = 2
		}
	}
	search_filters = { FOCUS_FILTER_PRODUCTION }
}

shared_focus = {
	id = KMT_build_a_first_rate_army
	icon = GFX_goal_China_kuomintang_soldier
	cost = 5

	relative_position_id = KMT_promoting_pan_asian_solidarity
	x = -1
	y = 1

	prerequisite = { focus = KMT_promoting_pan_asian_solidarity }
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_build_a_first_rate_army"
		add_timed_idea = { idea = KMT_build_a_first_rate_army_idea days = 1800 }
		add_offsite_building = {
			type = arms_factory
			level = 2
		}
	}
	search_filters = { FOCUS_FILTER_PRODUCTION }
}

shared_focus = {
	id = KMT_post_colonial_cultural_exchange
	icon = GFX_goal_AST_freedom_of_the_press
	cost = 5

	relative_position_id = KMT_promoting_pan_asian_solidarity
	x = 1
	y = 1

	prerequisite = { focus = KMT_promoting_pan_asian_solidarity }
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_post_colonial_cultural_exchange"
		add_political_power = 100
		add_stability = 0.10
		every_subject_country = {
			add_political_power = 50
			add_stability = 0.05
		}
	}
	search_filters = { FOCUS_FILTER_PRODUCTION }
}

shared_focus = {
	id = KMT_balance_the_great_powers
	icon = GFX_goal_HOL_sustain_neutrality
	cost = 5

	relative_position_id = KMT_build_a_first_rate_army
	x = 1
	y = 1

	prerequisite = { focus = KMT_build_a_first_rate_army }
	prerequisite = { focus = KMT_post_colonial_cultural_exchange }
	ai_will_do = {
		base = 100
		modifier = {
			factor = 2
			has_war = no
		}
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetLogRoot]: Focus Completed KMT_balance_the_great_powers"
		add_stability = 0.15
		add_war_support = 0.15
		add_ideas = KMT_balance_the_great_powers_idea
	}
	search_filters = { FOCUS_FILTER_PRODUCTION }
}
