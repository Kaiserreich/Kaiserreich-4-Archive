###############################
# Left KMT Focus Tree         #
###############################
# By DSFDarker and Spiderfist #
###############################
# KMT - ESTABLISH BASE TREE   #
###############################

shared_focus = {
	id = CHI_jiangfu
	icon = GFX_goal_generic_fortify_city
	x = 4
	y = 0

	cost = 2

	ai_will_do = {
		factor = 100
	}

	available = {
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_jiangfu"
		add_political_power = 50
		1046 = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
		add_equipment_to_stockpile = {
			type = infantry_equipment_0
			amount = 250
			producer = LEP
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CHI_ruijin_arsenal
	icon = GFX_focus_generic_military_equipment
	prerequisite = { focus = CHI_jiangfu }
	x = 1
	y = 1
	relative_position_id = CHI_jiangfu

	cost = 4

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 3
			has_war = yes
		}
		modifier = {
			factor = 10
			ANQ = { exists = no }
			LEP = { exists = no }
			SQI = {
				OR = {
					exists = no
					has_government = authoritarian_democrat
				}
			}
		}
	}

	available = {
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_ruijin_arsenal"
		add_tech_bonus = {
			name = CHI_ruijin_arsenal
			bonus = 1
			uses = 1
			category = industry
		}
		add_offsite_building = { type = arms_factory level = 1 }
	}
	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_literacy_programs
	icon = GFX_focus_research
	prerequisite = { focus = CHI_jiangfu }
	x = -1
	y = 1
	relative_position_id = CHI_jiangfu

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 3
			has_war = no
		}
	}

	available = {
		LEP = { exists = no }
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_literacy_programs"
		add_research_slot_until_four = yes
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_strike_AOG
	icon = GFX_goal_LEC_strikeAOG
	prerequisite = { focus = CHI_ruijin_arsenal }
	x = -1
	y = 1
	relative_position_id = CHI_ruijin_arsenal

	cost = 4

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 1.5
			controls_state = 802 # Xiamen
		}
		modifier = {
			factor = 2
			controls_state = 803 # Wenzhou
		}
		modifier = {
			factor = 2
			controls_state = 1075 # Nantong
		}
	}

	available = {
		OR = {
			controls_state = 592 # Guangzhou
			controls_state = 744 # Qingdao
			controls_state = 802 # Xiamen
			controls_state = 803 # Wenzhou
			controls_state = 1075 # Nantong

			controls_state = 728 # Guangzhouwan
			controls_state = 996 # Weihaiwei
		}
		is_subject = no
	}

	continue_if_invalid = yes

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_strike_AOG"
		add_equipment_to_stockpile = {
			type = infantry_equipment_0
			amount = 1000
			producer = GEA
		}
		GER = {
			add_opinion_modifier = {
				target = CHI
				modifier = KR_CHI_violated_AOG
			}
		}
		GEA = {
			add_opinion_modifier = {
				target = CHI
				modifier = KR_CHI_violated_AOG
			}
		}
	}
}

shared_focus = {
	id = CHI_consolidate_control
	icon = GFX_Goal_Kuomintang_Government_Initiative
	prerequisite = { focus = CHI_ruijin_arsenal }
	x = 0
	y = 2
	relative_position_id = CHI_ruijin_arsenal

	cost = 4

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 1.5
			controls_state = 1044 # Nanchang
		}
		modifier = {
			factor = 2
			controls_state = 596 # Qiantang
		}
		modifier = {
			factor = 2
			controls_state = 606 # Anqing
		}
		modifier = {
			factor = 20
			ANQ = { exists = no }
			LEP = { exists = no }
			SQI = {
				OR = {
					exists = no
					has_government = authoritarian_democrat
				}
			}
		}
	}

	available = {
		is_subject = no
	}

	bypass = {
		controls_state = 613 # Nanjing
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_consolidate_control"
		add_political_power = 50
		add_war_support = 0.05
		add_equipment_to_stockpile = {
			type = infantry_equipment_0
			amount = 500
			producer = LEP
		}
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_est_navy
	icon = GFX_goal_generic_navy_cruiser
	prerequisite = {
		focus = CHI_consolidate_control
		focus = CHI_strike_AOG
	}
	x = -1
	y = 1
	relative_position_id = CHI_consolidate_control

	cost = 4

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 20
			ANQ = { exists = no }
			LEP = { exists = no }
			SQI = {
				OR = {
					exists = no
					has_government = authoritarian_democrat
				}
			}
		}
	}

	available = {
		OR = {
			has_full_control_of_state = 743
			has_full_control_of_state = 744
			has_full_control_of_state = 746
			has_full_control_of_state = 747
			has_full_control_of_state = 801
			has_full_control_of_state = 802
			has_full_control_of_state = 803
			has_full_control_of_state = 996
			has_full_control_of_state = 1075
		}
		is_subject = no
	}

	bypass = {
		has_equipment = {
			convoy_1 > 100
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_est_navy"
		add_equipment_to_stockpile = {
			type = convoy_1
			amount = 30
			producer = GEA
		}
	}
}

shared_focus = {
	id = CHI_jiangxi_rail
	icon = GFX_goal_generic_seize_railway
	prerequisite = { focus = CHI_consolidate_control }
	x = 1
	y = 1
	relative_position_id = CHI_consolidate_control

	cost = 4

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 20
			ANQ = { exists = no }
			LEP = { exists = no }
			SQI = {
				OR = {
					exists = no
					has_government = authoritarian_democrat
				}
			}
		}
	}

	available = {
		owns_state = 1067
		owns_state = 1044
		owns_state = 1045
		owns_state = 596
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_jiangxi_rail"
		add_political_power = 50
		1067 = { # Jinhua
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}

		build_railway = {
			path = { 7191 11991 12059 11920 9944 1066 7054 4038 3992 7653 1628 }
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
}

	###########################################
	## KMT - Provisional Civil Admin Subtree ##

shared_focus = {
	id = CHI_provisional_code
	icon = GFX_focus_generic_treaty
	prerequisite = { focus = CHI_jiangfu }
	x = -3
	y = 1
	relative_position_id = CHI_jiangfu

	cost = 5

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0.25
			has_war = yes
		}
	}

	available = {
		is_subject = no
		has_country_flag = CHI_first_congress_completed
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_provisional_code"
		custom_effect_tooltip = CHI_integration_time_down_tt
		hidden_effect = {
			add_to_variable = { CHI.kr_china_provinceintegration_speed = -20 }
			add_to_variable = { CHI.kr_china_concessionintegration_speed = -15 }
		}
	}
}

shared_focus = {
	id = CHI_expropriate_landlords
	icon = GFX_focus_generic_oppression
	prerequisite = { focus = CHI_provisional_code }
	mutually_exclusive = { focus = CHI_land_rent_caps }
	x = -1
	y = 1
	relative_position_id = CHI_provisional_code

	cost = 6

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_expropriate_landlords"
		add_ideas = KR_focus_CHI_land_rent1
	}
	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CHI_land_rent_caps
	icon = GFX_goal_generic_forceful_treaty
	prerequisite = { focus = CHI_provisional_code }
	mutually_exclusive = { focus = CHI_expropriate_landlords }
	x = 1
	y = 1
	relative_position_id = CHI_provisional_code

	cost = 6

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_land_rent_caps"
		add_ideas = KR_focus_CHI_land_rent2
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CHI_land_tax
	icon = GFX_goal_agriculture
	prerequisite = {
		focus = CHI_expropriate_landlords
		focus = CHI_land_rent_caps
	}
	x = 0
	y = 2
	relative_position_id = CHI_provisional_code

	cost = 6

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	available = {
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_land_tax"
		decrease_CHI_popular_support = yes

		add_political_power = 25

		add_ideas = KR_focus_CHI_land_tax

	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CHI_opium_prohibition
	icon = GFX_goal_generic_political_pressure
	prerequisite = { focus = CHI_land_tax }
	mutually_exclusive = { focus = CHI_opium_tax }
	x = -1
	y = 1
	relative_position_id = CHI_land_tax

	cost = 6

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	available = {
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_opium_prohibition"
		add_ideas = KR_focus_CHI_opium1
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CHI_opium_tax
	icon = GFX_goal_opium
	prerequisite = { focus = CHI_land_tax }
	mutually_exclusive = { focus = CHI_opium_prohibition }
	x = 1
	y = 1
	relative_position_id = CHI_land_tax

	cost = 6

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	available = {
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_opium_tax"
		decrease_CHI_popular_support = yes
		add_ideas = KR_focus_CHI_opium2
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CHI_gannan_deal
	icon = GFX_goal_generic_construct_civ_factory
	prerequisite = {
		focus = CHI_opium_tax
		focus = CHI_opium_prohibition
	}
	x = 0
	y = 2
	relative_position_id = CHI_land_tax

	cost = 6

	ai_will_do = {
		factor = 15
	}

	available = {
		has_full_control_of_state = 600
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_gannan_deal"
		increase_CHI_popular_support = yes
		600 = { # Yuzhang
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
		custom_effect_tooltip = CHI_integration_cost_down_tt
		hidden_effect = {
			add_to_variable = { CHI.kr_china_provinceintegration_cost_small = -10 }
			add_to_variable = { CHI.kr_china_provinceintegration_cost_medium = -10 }
			add_to_variable = { CHI.kr_china_provinceintegration_cost_large = -10 }
			add_to_variable = { CHI.kr_china_concessionintegration_cost = -5 }
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

	#####################################
	## KMT - Warlord Diplomacy Subtree ##

shared_focus = {
	id = CHI_yangste_offensive
	icon = GFX_goal_CHI_choose_capital
	prerequisite = { focus = CHI_jiangfu }
	relative_position_id = CHI_jiangfu
	x = 3
	y = 1

	cost = 2

	ai_will_do = {
		factor = 45
		modifier = {
			factor = 0
			ROOT_is_threatened = yes
		}
	}

	available = {
		is_subject = no
	}

	bypass = {
		NOT = {
			can_declare_war_on = LEP
			can_declare_war_on = ANQ
		}
	}

	will_lead_to_war_with = LEP
	will_lead_to_war_with = ANQ

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_yangste_offensive"
		if = {
			limit = { can_declare_war_on = LEP }
			create_wargoal = {
				type = annex_everything
				target = LEP
			}
		}
		if = {
			limit = { country_exists = ANQ }
			create_wargoal = {
				type = annex_everything
				target = ANQ
			}
		}
	}
}

shared_focus = {
	id = CHI_contact_cells
	icon = GFX_goal_conspiracy
	prerequisite = { focus = CHI_yangste_offensive }
	x = -1
	y = 1
	relative_position_id = CHI_yangste_offensive

	cost = 5

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 5
			OR = {
				has_government = social_democrat
				has_government = social_liberal
			}
		}
	}

	available = {
		NOT = {
			country_exists = LEP
			country_exists = ANQ
		}
		owns_state = 613 # Nanjing
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_contact_cells"
		add_political_power = 50
		add_war_support = 0.05
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 500
			producer = LEP
		}
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_handle_SQI
	icon = GFX_SQI_Two_Zhangs_Enter
	prerequisite = { focus = CHI_yangste_offensive }
	x = 1
	y = 1
	relative_position_id = CHI_yangste_offensive

	cost = 2

	ai_will_do = {
		factor = 35
		modifier = {
			factor = 0
			ROOT_is_threatened = yes
		}
	}

	available = {
		is_subject = no
		if = {
			limit = {
				SQI = {
					OR = {
						is_in_faction = yes
						has_government = authoritarian_democrat
					}
				}
			}
			has_completed_focus = CHI_northern_expedition
		}
	}

	bypass = {
		NOT = { can_declare_war_on = SQI }
	}

	will_lead_to_war_with = SQI

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_handle_SQI"
		create_wargoal = {
			type = annex_everything
			target = SQI
		}
	}
}

shared_focus = {
	id = CHI_VNQDD_liaisons
	icon = GFX_INC_female_soldiers
	prerequisite = { focus = CHI_handle_SQI focus = CHI_contact_cells }
	relative_position_id = CHI_yangste_offensive

	x = 0
	y = 2

	cost = 6

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 2
			INC = { has_same_government_as_ROOT = yes }
		}
		modifier = {
			factor = 0.5
			INC = { has_same_government_as_ROOT = no }
		}
	}

	available = {
		country_exists = INC
		NOT = { has_war_with = INC }
		is_subject = no
	}

	bypass = {
		has_war_with = INC
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_VNQDD_liaisons"
		country_event = { id = chi_for.54 days = 1 }
	}
}

	###############################
	## KMT - MILITARY FOCUS TREE ##
	###############################

	########################
	## KMT - Army Subtree ##

shared_focus = {
	id = CHI_form_army
	icon = GFX_goal_CHI_form_2nd_NRA
	x = 16
	y = 0

	cost = 2

	ai_will_do = {
		factor = 50
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_form_army"
		add_command_power = 25
		add_doctrine_cost_reduction = {
			name = CHI_form_army
			cost_reduction = 0.5
			uses = 1
			category = land_doctrine
		}
		custom_effect_tooltip = CHI_2nd_NRA_units_tt
		hidden_effect = {
			division_template = {
				name = "Guómín gémìng jūn dì shíjiǔ lù jūn" #The 19th Route Army
				division_names_group = CHI_MIL_01
				regiments = {
					irregular_infantry = { x = 0 y = 0 }
					irregular_infantry = { x = 0 y = 1 }
					irregular_infantry = { x = 1 y = 0 }
					irregular_infantry = { x = 1 y = 1 }
				}
			}
			random_owned_controlled_state = {
				prioritize = { 1046 }
				limit = {
					is_in_home_area = yes
					impassable = no
				}
				create_unit = {
					division = "name = \"Guómín gémìng jūn dì shíjiǔ lù jūn\" division_template = \"Guómín gémìng jūn dì shíjiǔ lù jūn\" start_experience_factor = 0.9"
					prioritize_location = 1046
					owner = ROOT
				}
			}
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_regional_militias
	icon = GFX_goal_agrarian_soldiers
	prerequisite = { focus = CHI_form_army }
	mutually_exclusive = { focus = CHI_one_army }
	x = -3
	y = 1
	relative_position_id = CHI_form_army

	cost = 5

	ai_will_do = {
		factor = 60
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_regional_militias"
		custom_effect_tooltip = CHI_regional_militias_units_tt
		hidden_effect = {
			division_template = {
				name = "Dì Sān Zhīduì"
				division_names_group = CHI_MIL_01
				regiments = {
					irregular_infantry = { x = 0 y = 0 }
					irregular_infantry = { x = 0 y = 1 }
					irregular_infantry = { x = 1 y = 0 }
					irregular_infantry = { x = 1 y = 1 }
				}
			}
			random_owned_controlled_state = {
				prioritize = { 1046 }
				limit = {
					is_in_home_area = yes
					impassable = no
				}
				create_unit = {
					division = "name = \"Dì Sān Zhīduì\" division_template = \"Dì Sān Zhīduì\" start_experience_factor = 0.75" #The 3rd Detachment
					prioritize_location = 1046
					owner = ROOT
				}
			}
			division_template = {
				name = "Dì Sì Zhīduì"
				division_names_group = CHI_MIL_01
				regiments = {
					irregular_infantry = { x = 0 y = 0 }
					irregular_infantry = { x = 0 y = 1 }
					irregular_infantry = { x = 1 y = 0 }
					irregular_infantry = { x = 1 y = 1 }
				}
			}
			random_owned_controlled_state = {
				prioritize = { 1046 }
				limit = {
					is_in_home_area = yes
					impassable = no
				}
				create_unit = {
					division = "name = \"Dì Sì Zhīduì\" division_template = \"Dì Sì Zhīduì\" start_experience_factor = 0.75" #The Fourth Detachment
					prioritize_location = 1046
					owner = ROOT
				}
			}
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = CHI_one_army
	icon = GFX_focus_SOV_penal_battalions
	prerequisite = { focus = CHI_form_army }
	mutually_exclusive = { focus = CHI_regional_militias }
	x = -1
	y = 1
	relative_position_id = CHI_form_army

	cost = 5

	ai_will_do = {
		factor = 60
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_one_army"
		army_experience = 30
		add_ideas = CHI_centralised_command
	}
	search_filters = { FOCUS_FILTER_ARMY_XP FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_revolutionary_spirit
	icon = GFX_goal_reform_socialist_army
	prerequisite = {
		focus = CHI_regional_militias
		focus = CHI_one_army
	}
	x = 0
	y = 2
	relative_position_id = CHI_form_army

	cost = 5

	ai_will_do = {
		factor = 4
		modifier = {
			factor = 1.5
			has_war = yes
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_revolutionary_spirit"
		add_ideas = CHI_revolutionary_spirit_idea
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }

}

shared_focus = {
	id = CHI_tigress_battalions
	icon = GFX_goal_CHI_tigress_battalions
	prerequisite = { focus = CHI_regional_militias focus = CHI_one_army }
	x = -1
	y = 1
	relative_position_id = CHI_regional_militias
	cost = 5

	ai_will_do = {
		factor = 4
		modifier = {
			factor = 1.5
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_tigress_battalions"
		division_template = {
			name = "Hóngsè Niángzi Jūn"
			division_names_group = CHI_MIL_01
			regiments = {
				irregular_infantry = { x = 0 y = 0 }
				irregular_infantry = { x = 0 y = 1 }
				irregular_infantry = { x = 1 y = 0 }
				irregular_infantry = { x = 1 y = 1 }
			}
		}
		random_owned_controlled_state = {
			prioritize = { 1046 }
			limit = {
				is_in_home_area = yes
				impassable = no
			}
			create_unit = {
				division = "name = \"Hóngsè Niángzi Jūn\" division_template = \"Hóngsè Niángzi Jūn\" start_experience_factor = 0.3"
				prioritize_location = 1046
				owner = ROOT
			}
		}
		add_war_support = 0.1
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = CHI_peoples_army
	icon = GFX_goal_integrate_the_militia
	prerequisite = { focus = CHI_regional_militias focus = CHI_one_army }
	mutually_exclusive = { focus = CHI_modern_divisions }
	x = 0
	y = 2
	relative_position_id = CHI_regional_militias

	cost = 8

	ai_will_do = {
		factor = 66
	}

	available = {
		has_country_flag = CHI_prioritize_manpower

	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_peoples_army"
		if = {
			limit = { has_idea = KR_CHI_start_army }
			remove_ideas = KR_CHI_start_army
		}
		add_doctrine_cost_reduction = {
			name = CHI_peoples_army
			cost_reduction = 0.5
			uses = 1
			category = land_doctrine
		}
		custom_effect_tooltip = CHI_NRA_peoples_army_tt
		add_to_variable = { CHI_NRA_irregular_infantry_attack_factor = 0.15 }
		add_to_variable = { CHI_NRA_irregular_infantry_defence_factor = 0.15 }
		add_to_variable = { CHI_NRA_land_night_attack = 0.1 }
		add_ideas = KR_focus_CHI_mass_production1

		if = {
			limit = { has_country_flag = CHI_prioritize_modernization }
			custom_effect_tooltip = CHI_choose_modernization_tt
			custom_effect_tooltip = CHI_ZhongTeJu_will_be_angry_tt
			add_popularity = { ideology = totalist popularity = 0.05 }
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_modern_divisions
	icon = GFX_goal_ENG_officer_corps
	prerequisite = { focus = CHI_regional_militias focus = CHI_one_army }
	mutually_exclusive = { focus = CHI_peoples_army }
	x = 0
	y = 2
	relative_position_id = CHI_one_army

	cost = 8

	ai_will_do = {
		factor = 66
	}

	available = {
		has_country_flag = CHI_prioritize_modernization

	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_modern_divisions"
		if = {
			limit = { has_idea = KR_CHI_start_army }
			remove_ideas = KR_CHI_start_army
		}
		add_doctrine_cost_reduction = {
			name = CHI_modern_divisions
			cost_reduction = 0.5
			uses = 1
			category = land_doctrine
		}
		custom_effect_tooltip = CHI_NRA_modern_divisions_tt
		add_to_variable = { CHI_NRA_planning_speed = 0.1 }
		add_to_variable = { CHI_NRA_max_planning = 0.1 }
		add_to_variable = { CHI_NRA_experience_gain_factor = 0.05 }
		add_to_variable = { CHI_NRA_infantry_attack_factor = 0.1 }
		add_to_variable = { CHI_NRA_infantry_defense_factor = 0.1 }
		add_ideas = KR_focus_CHI_modern_art_of_war1

		if = {
			limit = { has_country_flag = CHI_prioritize_manpower }
			custom_effect_tooltip = CHI_choose_manpower_tt
			custom_effect_tooltip = CHI_ZhongTeJu_will_be_angry_tt
			add_popularity = { ideology = totalist popularity = 0.05 }
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_mountain_warfare
	icon = GFX_goal_generic_mountain_warfare2
	prerequisite = { focus = CHI_peoples_army }
	x = -1
	y = 1
	relative_position_id = CHI_peoples_army

	cost = 8

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_mountain_warfare"
		custom_effect_tooltip = mountain_training_tech_effect
		hidden_effect = {
			set_technology = { mountain_training_tech = 1 popup = no }
		}
		add_tech_bonus = {
			name = CHI_mountain_infantry
			bonus = 1
			uses = 1
			category = mountaineers_tech
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CHI_dare_to_die
	icon = GFX_goal_CHI_peoples_army
	prerequisite = { focus = CHI_peoples_army focus = CHI_modern_divisions }
	x = -2
	y = 2
	relative_position_id = CHI_revolutionary_spirit

	cost = 8

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_dare_to_die"
		add_war_support = 0.10
		custom_effect_tooltip = CHI_NRA_dare_to_die_tt
		add_to_variable = { CHI_NRA_army_org_factor = 0.1 }
		add_to_variable = { CHI_NRA_irregular_infantry_max_org_factor = 0.1 }
		add_to_variable = { CHI_NRA_partisan_effect = 0.15 }
		add_to_variable = { CHI_NRA_experience_loss_factor = -0.15 }
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT }
}

shared_focus = {
	id = CHI_air_land_integration
	icon = GFX_goal_generic_air_CAS_russian
	prerequisite = {
		focus = CHI_flexible_aircraft
		focus = CHI_heavy_airframes
	}
	prerequisite = { focus = CHI_modern_divisions }
	x = 1
	y = 1
	relative_position_id = CHI_modern_divisions

	cost = 8

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_air_land_integration"
		add_equipment_to_stockpile = {
			type = small_plane_cas_airframe
			amount = 50
			producer = ENG
		}
		add_ideas = CHI_air_support
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = CHI_expand_the_supply_corps
	icon = GFX_focus_SOV_the_road_of_life
	prerequisite = { focus = CHI_peoples_army }
	prerequisite = { focus = CHI_mountain_warfare focus = CHI_dare_to_die }
	x = 0
	y = 2
	relative_position_id = CHI_peoples_army

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_expand_the_supply_corps"
		army_experience = 10
		custom_effect_tooltip = CHI_NRA_supply_corps_factor_tt
		add_to_variable = { CHI_NRA_supply_corps_factor = -0.05 }
		add_to_variable = { CHI_NRA_training_time_factor = -0.1 }
		add_tech_bonus = {
			name = CHI_mechanized_warfare
			bonus = 1
			uses = 1
			category = motorized_equipment
		}
		swap_ideas = {
			remove_idea = KR_focus_CHI_mass_production1
			add_idea = KR_focus_CHI_mass_production2
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_ARMY_XP }
}

shared_focus = {
	id = CHI_mechanized_warfare
	icon = GFX_goal_generic_army_motorized
	prerequisite = { focus = CHI_modern_divisions }
	prerequisite = { focus = CHI_dare_to_die focus = CHI_air_land_integration }
	x = 0
	y = 2
	relative_position_id = CHI_modern_divisions

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_mechanized_warfare"
		add_command_power = 30
		add_tech_bonus = {
			name = CHI_mechanized_warfare
			bonus = 1
			uses = 1
			category = motorized_equipment
		}
		custom_effect_tooltip = CHI_NRA_mechanized_tt
		add_to_variable = { CHI_NRA_planning_speed = 0.15 }
		add_to_variable = { CHI_NRA_max_planning = 0.15 }
		add_to_variable = { CHI_NRA_max_command_power = 10 }
		add_to_variable = { CHI_NRA_experience_gain_army_factor = 0.1 }
		swap_ideas = {
			remove_idea = KR_focus_CHI_modern_art_of_war1
			add_idea = KR_focus_CHI_modern_art_of_war2
		}
		hidden_effect = {
			country_event = chi_dom.22
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = CHI_encirclement_tactics
	icon = GFX_EGY_Palestine_Defence
	prerequisite = { focus = CHI_expand_the_supply_corps }
	x = -1
	y = 1
	relative_position_id = CHI_expand_the_supply_corps

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_encirclement_tactics"
		army_experience = 50
		custom_effect_tooltip = CHI_NRA_encirclement_tactics_tt
		add_to_variable = { CHI_NRA_special_forces_cap = 0.02 }
		add_to_variable = { CHI_NRA_special_forces_attack_factor = 0.15 }
		add_to_variable = { CHI_NRA_special_forces_defence_factor = 0.15 }
		add_to_variable = { CHI_NRA_irregular_infantry_speed_factor = 0.10 }
		add_to_variable = { CHI_NRA_cas_reduction_factor = 0.15 }

		swap_ideas = {
			remove_idea = KR_focus_CHI_mass_production2
			add_idea = KR_focus_CHI_mass_production3
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_ARMY_XP }
}

shared_focus = {
	id = CHI_soul_of_whampoa
	icon = GFX_goal_chinese_national_army
	prerequisite = { focus = CHI_expand_the_supply_corps focus = CHI_mechanized_warfare }
	x = 0
	y = 2
	relative_position_id = CHI_dare_to_die

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_soul_of_whampoa"
		every_unit_leader = {
			add_attack = 1
			add_defense = 1
		}
		hidden_effect = {
			country_event = { id = chi_flavor.13 days = 3 }
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = CHI_modern_combined_arms
	icon = GFX_goal_generic_army_superior_firepower
	prerequisite = { focus = CHI_mechanized_warfare }
	x = 1
	y = 1
	relative_position_id = CHI_mechanized_warfare

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_modern_combined_arms"
		add_command_power = 15
		custom_effect_tooltip = CHI_NRA_modern_combined_arms_tt
		add_to_variable = { CHI_NRA_training_time_factor = -0.05 }
		add_to_variable = { CHI_NRA_experience_gain_army_factor = 0.2 }
		add_to_variable = { CHI_NRA_speed_factor = 0.1 }
		swap_ideas = {
			remove_idea = KR_focus_CHI_modern_art_of_war2
			add_idea = KR_focus_CHI_modern_art_of_war3
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

	##################################
	## KMT - Army Structure Subtree ##

shared_focus = {
	id = CHI_restore_whampoa
	icon = GFX_focus_chi_whampoa_military_academy
	prerequisite = { focus = CHI_form_army }
	x = 5
	y = 1
	relative_position_id = CHI_form_army

	cost = 5

	ai_will_do = {
		factor = 16
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	available = {
		has_country_flag = CHI_first_congress_completed
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_restore_whampoa"
		if = {
			limit = { has_idea = KR_CHI_start_army }
			remove_ideas = KR_CHI_start_army
		}
		add_command_power = 25
		army_experience = 50
		add_popularity = { ideology = paternal_autocrat popularity = 0.05 }
		custom_effect_tooltip = CHI_NRA_restore_whampoa_tt
		add_to_variable = { CHI_NRA_experience_gain_army_factor = 0.15 }
		add_to_variable = { CHI_NRA_command_power_gain_mult = 0.25 }
		add_to_variable = { CHI_NRA_army_leader_cost_factor = -0.25 }
		if = {
			limit = { CHI_deng_yanda = { is_second_in_command = yes } }
			hidden_effect = { country_event = { id = chi_flavor.9 days = 5 random_days = 15 } }
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_ARMY_XP }
}

shared_focus = {
	id = CHI_nat_air_army
	icon = GFX_goal_chinese_national_air_force
	prerequisite = { focus = CHI_restore_whampoa }
	x = -3
	y = 1
	relative_position_id = CHI_restore_whampoa

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_nat_air_army"
		air_experience = 50
		custom_effect_tooltip = CHI_NRA_nat_air_army_tt
		add_to_variable = { CHI_NRA_experience_gain_air_factor = 0.1 }
		if = {
			limit = { controls_state = 613 } #Nanjing
			613 = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
		else_if = {
			limit = { controls_state = 596 } #Qiantang
			596 = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
		else_if = {
			limit = { controls_state = 1044 } #Yuzhang
			1044 = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
		else_if = {
			limit = { controls_state = 1046 } #Tingzhang
			1046 = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
		else = {
			random_owned_controlled_state = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
	}
	search_filters = { FOCUS_FILTER_AIR_XP FOCUS_FILTER_INDUSTRY FOCUS_FILTER_AIRFORCE_BONUS }
}

shared_focus = {
	id = CHI_flexible_aircraft
	icon = GFX_goal_generic_air_fighter_new
	prerequisite = { focus = CHI_nat_air_army }
	mutually_exclusive = { focus = CHI_heavy_airframes }
	x = -1
	y = 1
	relative_position_id = CHI_nat_air_army

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_flexible_aircraft"
		add_tech_bonus = {
			name = CHI_flexible_aircraft
			bonus = 1
			uses = 1
			category = light_air
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_heavy_airframes
	icon = GFX_goal_generic_air_bomber_new
	prerequisite = { focus = CHI_nat_air_army }
	mutually_exclusive = { focus = CHI_flexible_aircraft }
	x = 1
	y = 1
	relative_position_id = CHI_nat_air_army

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_heavy_airframes"
		add_tech_bonus = {
			name = CHI_heavy_airframes
			bonus = 1
			uses = 1
			category = medium_air
			category = heavy_air
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_build_airfields
	icon = GFX_focus_generic_aircraft_production
	prerequisite = {
		focus = CHI_flexible_aircraft
		focus = CHI_heavy_airframes
	}
	x = 0
	y = 2
	relative_position_id = CHI_nat_air_army

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_build_airfields"
		air_experience = 25
		add_doctrine_cost_reduction = {
			name = CHI_build_airfields
			cost_reduction = 0.5
			uses = 1
			category = air_doctrine
		}
	}
	search_filters = { FOCUS_FILTER_AIR_XP FOCUS_FILTER_RESEARCH FOCUS_FILTER_AIRFORCE_BONUS }
}

shared_focus = {
	id = CHI_naval_aviation
	icon = GFX_goal_generic_air_naval_bomber_new
	prerequisite = { focus = CHI_build_airfields }
	prerequisite = { focus = CHI_coastal_defenses }
	x = 1
	y = 1
	relative_position_id = CHI_build_airfields

	cost = 8

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_naval_aviation"
		add_tech_bonus = {
			name = CHI_naval_aviation
			bonus = 1
			uses = 2
			category = naval_air
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_separate_naval_command
	icon = GFX_goal_chinese_national_navy
	prerequisite = { focus = CHI_restore_whampoa }
	x = 0
	y = 1
	relative_position_id = CHI_restore_whampoa

	cost = 8

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	available = {
		any_owned_state = {
			is_coastal = yes
			is_controlled_by = ROOT
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_separate_naval_command"
		navy_experience = 15
		custom_effect_tooltip = CHI_NRA_separate_naval_command_tt
		add_to_variable = { CHI_NRA_experience_gain_navy_factor = 0.05 }
		if = {
			limit = {
				NOT = {
					any_owned_state = {
						dockyard > 0
						free_building_slots = {
							building = dockyard
							size > 0
							include_locked = yes
						}
					}
				}
				any_owned_state = {
					is_coastal = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_coastal = yes
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
		}
	}
	search_filters = { FOCUS_FILTER_NAVY_XP FOCUS_FILTER_NAVY_BONUS FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CHI_coastal_fleets
	icon = GFX_focus_generic_destroyer
	available = {
		num_of_naval_factories > 0
	}
	prerequisite = { focus = CHI_separate_naval_command }
	x = 0
	y = 1
	relative_position_id = CHI_separate_naval_command

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 2
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_coastal_fleets"
		add_tech_bonus = {
			name = CHI_coastal_fleets
			bonus = 1
			uses = 1
			category = dd_tech
		}
		add_doctrine_cost_reduction = {
			name = CHI_coastal_fleets
			cost_reduction = 0.5
			uses = 1
			category = naval_doctrine
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_coastal_defenses
	icon = GFX_goal_nested_fortifications
	available = {
		num_of_naval_factories > 0
	}
	prerequisite = { focus = CHI_coastal_fleets }
	x = -1
	y = 1
	relative_position_id = CHI_coastal_fleets

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 2
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_coastal_defenses"
		every_owned_state = {
			limit = {
				is_controlled_by = ROOT
				is_in_home_area = yes
				is_coastal = yes
			}
			add_building_construction = {
				type = coastal_bunker
				province = {
					all_provinces = yes
					limit_to_coastal = yes
				}
				level = 1
				instant_build = yes
			}
		}
		custom_effect_tooltip = CHI_NRA_coastal_defenses_tt
		add_to_variable = { CHI_NRA_production_speed_coastal_bunker_factor = 0.15 }
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CHI_integrate_beiyang_navy
	icon = GFX_goal_FNG_beiyang_navy
	prerequisite = { focus = CHI_sanmin_commissars }
	prerequisite = { focus = CHI_coastal_fleets }
	x = 1
	y = 1
	relative_position_id = CHI_coastal_fleets

	cost = 8

	available = {
		NOT = {
			country_exists = QIE
			country_exists = FNG
		}
	}
	ai_will_do = {
		factor = 8
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_integrate_beiyang_navy"
		navy_experience = 50
		add_doctrine_cost_reduction = {
			name = CHI_coastal_fleets
			cost_reduction = 0.5
			uses = 1
			category = naval_doctrine
		}
		country_event = { id = chi_flavor.14 }
	}
	search_filters = { FOCUS_FILTER_NAVY_XP FOCUS_FILTER_NAVY_BONUS FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_submarine_doctrine
	icon = GFX_goal_generic_navy_submarine
	available = {
		num_of_naval_factories > 0
	}
	prerequisite = { focus = CHI_coastal_fleets }
	x = 0
	y = 2
	relative_position_id = CHI_coastal_fleets

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 2
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_submarine_doctrine"
		add_doctrine_cost_reduction = {
			name = CHI_submarine_doctrine
			cost_reduction = 0.5
			uses = 2
			category = naval_doctrine
		}
		add_tech_bonus = {
			name = CHI_submarine_doctrine
			bonus = 1
			uses = 1
			category = ss_tech
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_naval_infantry
	icon = GFX_goal_generic_marines2
	available = {
		num_of_naval_factories > 0
	}
	prerequisite = { focus = CHI_coastal_defenses }
	x = 0
	y = 2
	relative_position_id = CHI_coastal_defenses

	cost = 8

	ai_will_do = {
		factor = 4
		modifier = {
			factor = 2
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_naval_infantry"
		add_tech_bonus = {
			name = CHI_naval_infantry
			bonus = 1
			uses = 1
			category = marine_tech
		}
		add_ideas = CHI_marine_corps_idea
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_military_affairs_cmsn
	icon = GFX_goal_CHI_military_affairs_cmsn
	prerequisite = { focus = CHI_restore_whampoa }
	x = 3
	y = 1
	relative_position_id = CHI_restore_whampoa

	cost = 8

	ai_will_do = {
		factor = 16
		modifier = {
			factor = 1.5
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_military_affairs_cmsn"
		army_experience = 10
		add_doctrine_cost_reduction = {
			name = CHI_military_affairs_cmsn
			cost_reduction = 0.5
			uses = 1
			category = land_doctrine
		}
		custom_effect_tooltip = CHI_NRA_military_affairs_cmsn_tt
		add_to_variable = { CHI_NRA_experience_gain_army_factor = 0.15 }
		add_to_variable = { CHI_NRA_command_power_gain_mult = 0.25 }
		add_to_variable = { CHI_NRA_army_leader_cost_factor = -0.25 }
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_RESEARCH FOCUS_FILTER_ARMY_XP }
}

shared_focus = {
	id = CHI_sanmin_commissars
	icon = GFX_goal_generic_join_faction
	prerequisite = { focus = CHI_military_affairs_cmsn }
	x = 0
	y = 1
	relative_position_id = CHI_military_affairs_cmsn

	cost = 8

	ai_will_do = {
		factor = 16
		modifier = {
			factor = 1.5
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_sanmin_commissars"
		add_political_power = 50
		custom_effect_tooltip = CHI_NRA_sanmin_commissars_tt
		add_to_variable = { CHI_NRA_experience_gain_army_factor = 0.1 }
		add_to_variable = { CHI_NRA_command_power_gain_mult = 0.25 }
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_special_methods_division
	icon = GFX_goal_secret_agents
	prerequisite = {
		focus = CHI_sanmin_commissars
	}
	x = 0
	y = 1
	relative_position_id = CHI_sanmin_commissars

	cost = 8

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 1.5
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_special_methods_division"
		add_popularity = { ideology = totalist popularity = 0.05 }
		if = {
			limit = { NOT = { has_tech = tech_military_police } }
			set_technology = { tech_military_police = 1 }
		}
		else = {
			add_tech_bonus = {
				name = CHI_special_methods_division
				bonus = 1
				uses = 1
				technology = tech_military_police2
				technology = tech_military_police3
				technology = tech_military_police4
			}
		}
		add_tech_bonus = {
			name = CHI_special_methods_division
			bonus = 1
			uses = 1
			category = radar_tech
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_retake_taiwan
	icon = GFX_goal_Taiwan_Colony
	prerequisite = { focus = CHI_integrate_beiyang_navy }
	prerequisite = { focus = CHI_special_methods_division }
	x = 0
	y = 2
	relative_position_id = CHI_sanmin_commissars

	cost = 8

	ai_will_do = {
		factor = 35
		modifier = {
			factor = 0
			ROOT_is_threatened = yes
		}
		modifier = {
			factor = 0
			strength_ratio = { tag = JAP ratio < 1 }
		}
	}

	available = {
		naval_strength_ratio = { tag = JAP ratio > 0.75 }
		JAP = { owns_state = 524 }
	}

	bypass = {
		OR = {
			NOT = { can_declare_war_on = JAP }
			JAP = { NOT = { owns_state = 524 } }
		}
	}

	will_lead_to_war_with = JAP

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_retake_taiwan"
		create_wargoal = {
			type = annex_everything
			target = JAP
		}
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

	#####################################################
	## KMT - TRANSITION TO REGIONAL POWER MISC FOCUSES ##
	#####################################################

shared_focus = {
	id = CHI_1st_congress
	icon = GFX_goal_CHI_YUN_reconcile
	prerequisite = { focus = CHI_est_navy }
	prerequisite = { focus = CHI_jiangxi_rail }
	x = 5
	y = 6

	cancelable = no

	cost = 6

	ai_will_do = {
		factor = 120
	}

	available = {
		owns_state = 613
		NOT = { country_exists = LEP }
		NOT = { country_exists = ANQ }
		if = {
			limit = {
				SQI = {
					is_subject = no
					is_in_faction = no
					NOT = { has_government = authoritarian_democrat }
				}
			}
			NOT = { country_exists = SQI }
		}
	}

	select_effect = {
		log = "[GetDateText]: [Root.GetName]: Select Focus CHI_1st_congress"
		country_event = { id = chi_cng.1 days = 3 }
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_1st_congress"
		add_political_power = 50
		set_cosmetic_tag = CHI_NRG
		set_capital = { state = 613 remember_old_capital = no } #Nanjing becomes capital
		hidden_effect = {
			set_potential_national_government = yes
			#activate_targeted_decision = { target = GXC decision = CHI_dec_non_aggression_with_Jiongming }
			activate_targeted_decision = { target = HNN decision = CHI_dec_negotiate_with_HNN }
			activate_targeted_decision = { target = SZC decision = CHI_dec_negotiate_with_SZC }
			activate_targeted_decision = { target = YUN decision = CHI_dec_negotiate_with_YUN }
		}
	}
}

	#############################
	## KMT - REVIVE CHINA TREE ##
	#############################

shared_focus = {
	id = CHI_revive_china
	icon = GFX_goal_CHI_revive_china
	prerequisite = {
		focus = CHI_1st_congress
	}
	x = 1
	y = 7

	cost = 8

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_revive_china"
		add_tech_bonus = {
			name = CHI_revive_china
			bonus = 1
			uses = 2
			category = industry
		}
		613 = { #Nanjing
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_national_RC
	icon = GFX_goal_generic_construct_public_housing
	prerequisite = { focus = CHI_revive_china }
	x = -1
	y = 1
	relative_position_id = CHI_revive_china

	cost = 8

	ai_will_do = {
		factor = 40
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_national_RC"
		add_tech_bonus = {
			name = CHI_national_RC
			bonus = 1
			uses = 1
			category = industry
		}
		capital_scope = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		activate_targeted_decision = { target = THIS decision = CHI_dec_pop_industrialise }
		activate_targeted_decision = { target = 613 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 606 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 620 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 650 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 602 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 593 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 608 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 743 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 597 decision = CHI_dec_civ_industrialise }
		activate_targeted_decision = { target = 1062 decision = CHI_dec_civ_industrialise }
	}
	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_natl_dockyard
	icon = GFX_goal_generic_construct_naval_dockyard
	prerequisite = { focus = CHI_national_RC }
	x = 0
	y = 1
	relative_position_id = CHI_national_RC
	available = {
		has_country_flag = CHI_republic_proclaimed
	}


	cost = 8

	ai_will_do = {
		factor = 25
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_natl_dockyard"
		activate_targeted_decision = { target = 608 decision = CHI_dec_dock_industrialise }
		activate_targeted_decision = { target = 592 decision = CHI_dec_dock_industrialise }
		activate_targeted_decision = { target = 746 decision = CHI_dec_dock_industrialise }
		activate_targeted_decision = { target = 743 decision = CHI_dec_dock_industrialise }
	}
}

shared_focus = {
	id = CHI_standard_rail_gauges
	icon = GFX_goal_generic_construct_infrastructure
	prerequisite = { focus = CHI_natl_dockyard }
	x = 0
	y = 1
	relative_position_id = CHI_natl_dockyard

	cost = 8

	ai_will_do = {
		factor = 40
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_standard_rail_gauges"

		if = {
			limit = {
				608 = { is_owned_and_controlled_by = CHI }
			}
			608 = {#Jingzhao
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}

		if = {
			limit = { #Nanjing
				613 = { is_owned_and_controlled_by = CHI }
			}
			613 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}

		if = {
			limit = { #Chongqing
				650 = { is_owned_and_controlled_by = CHI }
			}
			650 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}

		if = {
			limit = { #Xiangyang
				620 = { is_owned_and_controlled_by = CHI }
			}
			620 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}

		if = {
			limit = { #Xiangjiang
				602 = { is_owned_and_controlled_by = CHI }
			}
			602 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}

		if = {
			limit = { #Yuehai
				593 = { is_owned_and_controlled_by = CHI }
			}
			593 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CHI_academica_sinica
	icon = GFX_focus_research2
	prerequisite = { focus = CHI_revive_china }
	x = 1
	y = 1
	relative_position_id = CHI_revive_china

	cost = 8

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_academica_sinica"
		add_research_slot_until_four = yes
		hidden_effect = {
			country_event = { id = chi_flavor.11 days = 3 }
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_bopomofo
	icon = GFX_focus_generic_military_academy
	prerequisite = { focus = CHI_academica_sinica }
	x = 0
	y = 1
	relative_position_id = CHI_academica_sinica

	cost = 7

	ai_will_do = {
		factor = 40
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_bopomofo"
		add_tech_bonus = {
			name = CHI_bopomofo
			bonus = 1
			uses = 2
			category = electronics
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CHI_foreign_research
	icon = GFX_goal_generic_scientific_exchange
	prerequisite = { focus = CHI_bopomofo }
	x = 0
	y = 2
	relative_position_id = CHI_bopomofo

	cost = 8

	ai_will_do = {
		factor = 40
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_foreign_research"
		country_event = { id = chi_dom.24 days = 1 }
	}
}

	######################################
	## KMT - PROCLAIM NEW REPUBLIC TREE ##
	######################################

shared_focus = {
	id = CHI_proclaim_new_republic
	icon = GFX_goal_COS_Ferrer_Coup
	prerequisite = {
		focus = CHI_1st_congress
	}

	x = 5
	y = 7

	cost = 6

	ai_will_do = {
		factor = 40
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_proclaim_new_republic"
		add_political_power = 150
		add_stability = 0.05
		if = {
			limit = { CHI_chen_gongbo = { is_second_in_command = yes } }
			hidden_effect = { country_event = { id = chi_flavor.1 days = 5 random_days = 15 } }
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_choose_capital
	icon = GFX_focus_generic_china1
	prerequisite = { focus = CHI_proclaim_new_republic }
	x = -1
	y = 1
	relative_position_id = CHI_proclaim_new_republic
	cost = 6

	ai_will_do = {
		factor = 5
	}

	available = {
		has_country_flag = CHI_republic_proclaimed
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_choose_capital"
		custom_effect_tooltip = CHI_capital_relocation_category_tt
		hidden_effect = {
			activate_targeted_decision = { target = THIS decision = CHI_dec_locate_nanjing }
			activate_targeted_decision = { target = THIS decision = CHI_dec_locate_beijing }
			activate_targeted_decision = { target = THIS decision = CHI_dec_locate_wuchang }
		}
	}
}

shared_focus = {
	id = CHI_build_national_mausoleum
	icon = GFX_focus_prc_remove_chiang_kai_shek
	prerequisite = { focus = CHI_choose_capital }
	x = 0
	y = 1
	relative_position_id = CHI_choose_capital

	cost = 5

	ai_will_do = {
		factor = 5
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_build_national_mausoleum"
		add_war_support = 0.05
		add_stability = 0.05
		add_political_power = 50
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CHI_new_culture_movement
	icon = GFX_goal_KTG_Bookstack
	prerequisite = {
		focus = CHI_build_national_mausoleum
		focus = CHI_bopomofo
	}
	x = -1
	y = 1
	relative_position_id = CHI_build_national_mausoleum

	cost = 8

	ai_will_do = {
		factor = 5
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_new_culture_movement"
		if = {
			limit = { has_government = radical_socialist }
			add_ideas = KR_focus_new_culture1
		}
		else_if = {
			limit = { has_government = totalist }
			add_ideas = KR_focus_new_culture3
		}
	}
}

shared_focus = {
	id = CHI_est_civil_service
	icon = GFX_focus_chi_examination_yuan
	prerequisite = { focus = CHI_proclaim_new_republic }
	x = 1
	y = 1
	relative_position_id = CHI_proclaim_new_republic

	cost = 8

	ai_will_do = {
		factor = 5
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_est_civil_service"
		custom_effect_tooltip = CHI_integration_time_down_tt
		add_popularity = { ideology = radical_socialist popularity = 0.1 }
		hidden_effect = {
			add_to_variable = { CHI.kr_china_provinceintegration_speed = -20 }
			add_to_variable = { CHI.kr_china_concessionintegration_speed = -15 }
			if = {
				limit = { CHI_zhou_fohai = { is_political_advisor = yes } }
				hidden_effect = { country_event = { id = chi_dom.8 days = 5 random_days = 15 } }
			}
		}
	}
}

shared_focus = {
	id = CHI_provisional_legislature
	icon = GFX_focus_chi_legislative_yuan
	prerequisite = { focus = CHI_est_civil_service }
	x = 0
	y = 1
	relative_position_id = CHI_est_civil_service

	cost = 8

	ai_will_do = {
		factor = 5
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_provisional_legislature"
		increase_CHI_popular_support = yes
	}
}

shared_focus = {
	id = CHI_ethnic_autonomy
	icon = GFX_focus_generic_self_management
	prerequisite = { focus = CHI_provisional_legislature }
	mutually_exclusive = { focus = CHI_unitary_state }
	x = -1
	y = 1
	relative_position_id = CHI_provisional_legislature

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 2
			has_country_flag = choose_CHI_ethnic_autonomy
		}
		modifier = {
			factor = 0
			has_game_rule = { rule = CHI_path option = CHI_PATH_TOTALIST }
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_ethnic_autonomy"
		add_political_power = 100
		if = {
			limit = { has_country_flag = choose_CHI_unitary_state }
			custom_effect_tooltip = CHI_choose_CHI_unitary_state_tt
			custom_effect_tooltip = CHI_ZhongTeJu_will_be_angry_tt
			add_popularity = { ideology = totalist popularity = 0.08 }
			hidden_effect = {
				country_event = { id = chi_dom.28 days = 30 }
			}
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_unitary_state
	icon = GFX_goal_Centralised_Government
	prerequisite = { focus = CHI_provisional_legislature }
	mutually_exclusive = { focus = CHI_ethnic_autonomy }
	x = 1
	y = 1
	relative_position_id = CHI_provisional_legislature

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 2
			has_country_flag = choose_CHI_unitary_state
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_unitary_state"
		add_political_power = 100
		if = {
			limit = { has_country_flag = choose_CHI_ethnic_autonomy }
			custom_effect_tooltip = CHI_choose_CHI_ethnic_autonomy_tt
			custom_effect_tooltip = CHI_ZhongTeJu_will_be_angry_tt
			add_popularity = { ideology = totalist popularity = 0.08 }
			hidden_effect = {
				country_event = { id = chi_dom.28 days = 30 }
			}
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}
shared_focus = {
	id = CHI_national_labor
	icon = GFX_GBR_fate_of_unions
	prerequisite = {
		focus = CHI_ethnic_autonomy
		focus = CHI_unitary_state
	}
	mutually_exclusive = { focus = CHI_rec_syndies }
	x = 0
	y = 1
	relative_position_id = CHI_ethnic_autonomy

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 2
			has_country_flag = choose_CHI_rec_syndies
		}
		modifier = {
			factor = 0
			has_game_rule = { rule = CHI_path option = CHI_PATH_TOTALIST }
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_national_labor"
		add_popularity = { ideology = radical_socialist popularity = 0.05 }
		add_popularity = { ideology = social_liberal popularity = 0.05 }
		if = {
			limit = { has_country_flag = choose_CHI_rec_syndies }
			custom_effect_tooltip = CHI_choose_CHI_national_labor_tt
			custom_effect_tooltip = CHI_ZhongTeJu_will_be_angry_tt
			add_popularity = { ideology = totalist popularity = 0.08 }
			hidden_effect = {
				country_event = { id = chi_dom.28 days = 30 }
			}
		}
	}
}

shared_focus = {
	id = CHI_rec_syndies
	icon = GFX_goal_syndicalist_workers
	prerequisite = {
		focus = CHI_ethnic_autonomy
		focus = CHI_unitary_state
	}
	mutually_exclusive = { focus = CHI_national_labor }
	x = 0
	y = 1
	relative_position_id = CHI_unitary_state

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 2
			has_country_flag = choose_CHI_national_labor
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_national_labor"
		add_popularity = { ideology = radical_socialist popularity = 0.05 }
		add_popularity = { ideology = syndicalist popularity = 0.1 }
		country_event = chi_flavor.15
		if = {
			limit = { has_country_flag = choose_CHI_national_labor }
			custom_effect_tooltip = CHI_choose_CHI_rec_syndies_tt
			custom_effect_tooltip = CHI_ZhongTeJu_will_be_angry_tt
			add_popularity = { ideology = totalist popularity = 0.08 }
			hidden_effect = {
				country_event = { id = chi_dom.28 days = 30 }
			}
		}
	}
}

shared_focus = {
	id = CHI_local_democracy
	icon = GFX_goal_generic_national_unity
	prerequisite = { focus = CHI_national_labor }
	mutually_exclusive = { focus = CHI_continued_tutelage }
	mutually_exclusive = { focus = CHI_dais_coup }
	available = { NOT = { has_country_leader = { character = CHI_wang_jingwei } } }
	x = -1
	y = 1
	relative_position_id = CHI_national_labor

	cost = 8

	ai_will_do = {
		factor = 1
	}

	on_uncomplete = {
		remove_ideas = KR_focus_local_democracy1
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_local_democracy"
		add_popularity = { ideology = social_liberal popularity = 0.05 }
		add_popularity = { ideology = radical_socialist popularity = 0.15 }
		add_ideas = KR_focus_local_democracy1
		if = {
			limit = { CHI_deng_yingchao = { is_political_advisor = yes } }
			hidden_effect = { country_event = { id = chi_flavor.16 days = 5 random_days = 15 } }
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = CHI_continued_tutelage
	icon = GFX_focus_usa_voter_registration_act
	prerequisite = {
		focus = CHI_rec_syndies
		focus = CHI_national_labor
	}
	mutually_exclusive = { focus = CHI_local_democracy }
	mutually_exclusive = { focus = CHI_dais_coup }
	x = 0
	y = 3
	relative_position_id = CHI_provisional_legislature

	cost = 8

	ai_will_do = {
		factor = 1
	}

	on_uncomplete = {
		remove_ideas = KR_focus_tutelage1
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_continued_tutelage"
		add_popularity = { ideology = radical_socialist popularity = 0.1 }
		add_popularity = { ideology = social_liberal popularity = 0.05 }
		add_ideas = KR_focus_tutelage1
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_dais_coup
	icon = GFX_goal_generic_espionage
	prerequisite = { focus = CHI_unitary_state focus = CHI_ethnic_autonomy }
	prerequisite = { focus = CHI_national_labor focus = CHI_rec_syndies }
	mutually_exclusive = { focus = CHI_local_democracy }
	mutually_exclusive = { focus = CHI_continued_tutelage }
	x = 1
	y = 1
	relative_position_id = CHI_rec_syndies

	cost = 0

	ai_will_do = {
		factor = 1
	}

	available = {
		hidden_trigger = { always = no }
	}
	bypass = {
		has_government = totalist
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_dais_coup"
		custom_effect_tooltip = CHI_dais_coup_tt
		add_corps_commander_role = {
			character = CHI_he_zhonghan
			desc = CHI_he_zhonghan_commander_desc
			traits = { career_officer CHI_left_kmt_officer }
			skill = 2
			attack_skill = 1
			defense_skill = 2
			planning_skill = 2
			logistics_skill = 2
		}
		add_timed_idea = {
			idea = CHI_purged_rivals
			days = 100
		}
	}
}

shared_focus = {
	id = CHI_legalize_parties
	icon = GFX_goal_constitutional_guarantees
	prerequisite = { focus = CHI_local_democracy }
	x = 0
	y = 1
	relative_position_id = CHI_local_democracy

	cost = 8

	ai_will_do = {
		factor = 1
	}

	on_uncomplete = {
		remove_ideas = KR_focus_local_democracy2
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_legalize_parties"
		swap_ideas = {
			remove_idea = KR_focus_local_democracy1
			add_idea = KR_focus_local_democracy2
		}
		add_popularity = { ideology = social_liberal popularity = 0.05 }
		add_popularity = { ideology = market_liberal popularity = 0.05 }
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = CHI_social_revolution
	icon = GFX_goal_Workers_Paradise
	prerequisite = { focus = CHI_continued_tutelage }
	x = 0
	y = 1
	relative_position_id = CHI_continued_tutelage

	cost = 8

	ai_will_do = {
		factor = 1
	}

	on_uncomplete = {
		remove_ideas = KR_focus_tutelage2
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_social_revolution"
		swap_ideas = {
			remove_idea = KR_focus_tutelage1
			add_idea = KR_focus_tutelage2
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_purge
	icon = GFX_goal_backstab
	prerequisite = { focus = CHI_dais_coup }
	x = 0
	y = 1
	relative_position_id = CHI_dais_coup

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		has_government = totalist
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_purge"
		add_popularity = { ideology = totalist popularity = 0.10 }
		custom_effect_tooltip = CHI_purge_tt
		CHI_purge_characters = yes
		add_ideas = CHI_new_society
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_state_capitalism
	icon = GFX_goal_state_economy
	prerequisite = { focus = CHI_legalize_parties focus = CHI_social_revolution }
	x = 0
	y = 3
	relative_position_id = CHI_national_labor
	available = {
		has_country_flag = CHI_republic_proclaimed
	}

	cost = 8

	ai_will_do = {
		factor = 1
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_state_capitalism"
		if = {
			limit = { controls_state = 613 } #Nanjing
			613 = {
				add_dynamic_modifier = {
					modifier = CHI_state_capitalism_plan
				}
			}
		}
		if = {
			limit = { controls_state = 608 } #Beijing
			608 = {
				add_dynamic_modifier = {
					modifier = CHI_state_capitalism_plan
				}
			}
		}
		if = {
			limit = { controls_state = 743 } #Shanghai
			743 = {
				add_dynamic_modifier = {
					modifier = CHI_state_capitalism_plan
				}
			}
		}
		if = {
			limit = { controls_state = 592 } #Guangzhou
			592 = {
				add_dynamic_modifier = {
					modifier = CHI_state_capitalism_plan
				}
			}
		}
		custom_effect_tooltip = CHI_state_capitalism_tt

	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CHI_state_collectivism
	icon = GFX_goal_OTT_Land_Reform
	prerequisite = { focus = CHI_purge }
	x = 0
	y = 1
	relative_position_id = CHI_purge

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		has_government = totalist
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_state_collectivism"
		add_stability = -0.15
		if = {
			limit = { controls_state = 1045 } #Xunyang
			1045 = { increase_state_category_by_one_level = yes }
		}
		if = {
			limit = { controls_state = 600 }
			600 = { increase_state_category_by_one_level = yes }
		}
		if = {
			limit = { controls_state = 606 }  #Anqing
			606 = { increase_state_category_by_one_level = yes }
		}
		add_ideas = CHI_totalist_economy
		country_event = chi_flavor.8
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_1st_national_elections
	icon = GFX_goal_generic_elections
	prerequisite = { focus = CHI_state_capitalism }
	prerequisite = { focus = CHI_legalize_parties }
	x = 0
	y = 2
	relative_position_id = CHI_legalize_parties

	cost = 4

	ai_will_do = {
		factor = 1
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_1st_national_elections"
		country_event = chi_dom.35
		add_stability = -0.1
		add_popularity = { ideology = social_conservative popularity = 0.05 }
		add_popularity = { ideology = social_liberal popularity = 0.1 }
		hidden_effect = {
			set_party_name = {
				ideology = social_conservative
				long_name = CHI_western_hills_clique_long
				name = CHI_western_hills_clique
			}
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_deepen_party_state
	icon = GFX_goal_shadow_government
	prerequisite = {
		focus = CHI_social_revolution
		focus = CHI_state_collectivism
	}
	x = -1
	y = 1
	relative_position_id = CHI_state_collectivism

	cost = 8

	ai_will_do = {
		factor = 1
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_deepen_party_state"
		if = {
			limit = { has_idea = KR_focus_tutelage2 }
			swap_ideas = {
				remove_idea = KR_focus_tutelage2
				add_idea = KR_focus_tutelage3
			}
		}
		else_if = {
			limit = { has_idea = CHI_new_society }
			swap_ideas = {
				remove_idea = CHI_new_society
				add_idea = CHI_new_society2
			}
		}
		else = {
			custom_effect_tooltip = CHI_if_tutelage
			swap_ideas = {
				remove_idea = KR_focus_tutelage2
				add_idea = KR_focus_tutelage3
			}
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = CHI_if_dais_rule
			swap_ideas = {
				remove_idea = CHI_new_society
				add_idea = CHI_new_society2
			}
		}
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_reborn
	icon = GFX_focus_SOV_builder_of_the_red_army
	prerequisite = { focus = CHI_state_collectivism }
	x = 1
	y = 1
	relative_position_id = CHI_state_collectivism

	cost = 8

	ai_will_do = {
		factor = 1
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_reborn"
		swap_ideas = {
			remove_idea = CHI_new_society2
			add_idea = CHI_revanchism
		}
		add_war_support = 0.2
		hidden_effect = {
			country_event = { id = chi_flavor.12 days = 3 }
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

	##################################
	## KMT - MAJOR UNIFICATION TREE ##
	##################################

shared_focus = {
	id = CHI_plan_southern
	icon = GFX_goal_SZC_recover_the_first_province
	prerequisite = { focus = CHI_1st_congress }
	relative_position_id = CHI_1st_congress

	x = 3
	y = 1

	cost = 8

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 0
			OR = {
				has_war = yes
				GXC = { kmt_failure = no }
				HNN = { kmt_failure = no }
			}
		}
		modifier = {
			factor = 10
			GXC = { kmt_failure = yes }
		}
		modifier = {
			factor = 10
			HNN = { kmt_failure = yes }
		}
	}

	available = {
		is_subject = no
	}

	bypass = {
		NOT = { can_declare_war_on = GXC }
		NOT = { can_declare_war_on = HNN }
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_plan_southern"
		activate_targeted_decision = { target = HNN decision = CHI_dec_south_warlord_expedition }
		activate_targeted_decision = { target = GXC decision = CHI_dec_south_warlord_expedition }
		if = {
			limit = { has_country_flag = CHI_southern_war_plan } #From the chi_cng.9
			add_timed_idea = {
				idea = CHI_southern_war_plan_idea
				days = 200
			}
		}
	}
}

shared_focus = {
	id = CHI_plan_western
	icon = GFX_goal_CHI_plan_western
	prerequisite = { focus = CHI_plan_southern }

	relative_position_id = CHI_plan_southern
	x = 0
	y = 1

	cost = 8

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 0
			OR = {
				has_war = yes
				YUN = { kmt_failure = no }
				SZC = { kmt_failure = no }
			}
		}
		modifier = {
			factor = 10
			YUN = { kmt_failure = yes }
		}
		modifier = {
			factor = 10
			SZC = { kmt_failure = yes }
		}
	}

	available = {
		is_subject = no
	}

	bypass = {
		NOT = { can_declare_war_on = YUN }
		NOT = { can_declare_war_on = SZC }
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_plan_western"
		activate_targeted_decision = { target = SZC decision = CHI_dec_west_warlord_expedition }
		activate_targeted_decision = { target = YUN decision = CHI_dec_west_warlord_expedition }
	}
}

shared_focus = {
	id = CHI_northern_expedition
	icon = GFX_goal_CHI_northern_expedition
	prerequisite = {
		focus = CHI_1st_congress
	}

	x = 10
	y = 7

	cost = 8

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0
			QIE = { default_attack_AI_trigger = yes }
		}
		modifier = {
			factor = 5
			QIE = { has_war_with = FNG }
		}
	}

	available = {
		is_subject = no
	}

	bypass = {
		NOT = { can_declare_war_on = QIE }
	}

	will_lead_to_war_with = QIE

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_northern_expedition"
		country_event = chi_flavor.10
		if = {
			limit = { has_country_flag = CHI_northern_war_plan } #From the chi_cng.9
			add_timed_idea = {
				idea = CHI_northern_war_plan_idea
				days = 200
			}
		}
		create_wargoal = {
			type = annex_everything
			target = QIE
		}
	}
}

shared_focus = {
	id = CHI_deal_with_north_warlords
	icon = GFX_goal_LEP_patronize_xiangshen
	prerequisite = { focus = CHI_northern_expedition }
	x = 0
	y = 1
	relative_position_id = CHI_northern_expedition

	cost = 5

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 0
			ROOT_is_threatened = yes
		}
		modifier = {
			factor = 0
			strength_ratio = { tag = QIE ratio < 1 }
		}
	}

	available = {
		is_subject = no
	}

	bypass = {
		has_war_with = SHX
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_deal_with_north_warlords"
		activate_targeted_decision = { target = SHX decision = CHI_dec_SHX_expedition }
		activate_targeted_decision = { target = SHX decision = CHI_dec_negotiate_with_SHX }
	}
}

shared_focus = {
	id = CHI_negotiate_FNG
	icon = GFX_goal_FNG_grand_marshal
	prerequisite = {
		focus = CHI_northern_expedition
	}
	x = -1
	y = 1
	mutually_exclusive = { focus = CHI_invade_FNG }
	relative_position_id = CHI_deal_with_north_warlords

	cost = 5

	ai_will_do = {
		factor = 20
	}

	available = {
		is_subject = no
		is_neighbor_of = QIE
		country_exists = FNG
		NOT = {
			has_war_with = FNG
			FNG = { has_war_with = QIE }
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_negotiate_FNG"
		activate_targeted_decision = { target = SHX decision = CHI_dec_offer_eastern_shanxi }
		activate_targeted_decision = { target = FNG decision = CHI_dec_negotiate_with_FNG }
	}
}

shared_focus = {
	id = CHI_invade_FNG
	icon = GFX_focus_jap_cast_the_die
	prerequisite = { focus = CHI_northern_expedition }
	x = 1
	y = 1
	mutually_exclusive = { focus = CHI_negotiate_FNG }
	relative_position_id = CHI_deal_with_north_warlords

	cost = 5

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0
			has_wargoal_against = QIE
		}
		modifier = {
			factor = 0
			FNG = { default_attack_AI_trigger = yes }
		}
	}

	available = {
		is_subject = no
	}

	bypass = {
		NOT = { can_declare_war_on = FNG }
	}

	will_lead_to_war_with = FNG

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_invade_FNG"
		create_wargoal = {
			type = annex_everything
			target = FNG
		}
	}
}

shared_focus = {
	id = CHI_anti_JAP
	icon = GFX_goal_kmt_contest_the_japanese
	prerequisite = {
		focus = CHI_invade_FNG
		focus = CHI_negotiate_FNG
	}
	x = 0
	y = 2
	relative_position_id = CHI_deal_with_north_warlords

	cost = 7

	ai_will_do = {
		factor = 35
		modifier = {
			factor = 0.5
			JAP = { is_stronger_than_ROOT = yes }
		}
		modifier = {
			factor = 1.5
			NOT = { country_exists = QIE }
		}
		modifier = {
			factor = 1.5
			NOT = { country_exists = FNG }
		}
	}

	available = {
		is_subject = no
		has_war_with = JAP
	}

	bypass = {
		JAP = { is_faction_leader = no }
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_anti_JAP"
		add_war_support = 0.1
		add_timed_idea = {
			idea = CHI_march_of_the_volunteers
			days = 100
		}

	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT }
}

	####################################
	## KMT - OTHER SHENANIGANS TREE ##
	####################################

shared_focus = {
	id = CHI_reorder_north_china
	icon = GFX_goal_LKMT_A_New_China
	prerequisite = { focus = CHI_northern_expedition }
	x = 3
	y = 4
	relative_position_id = CHI_northern_expedition

	cost = 6

	ai_will_do = {
		factor = 1
	}

	available = {
		has_country_flag = CHI_republic_proclaimed
		is_subject = no
		has_full_control_of_state = 608
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_reorder_north_china"
		increase_CHI_popular_support = yes

		custom_effect_tooltip = CHI_Integration_tt
	}
}

shared_focus = {
	id = CHI_fate_LEC
	icon = GFX_goal_LEC_establish
	prerequisite = { focus = CHI_reorder_north_china focus = CHI_anti_JAP }
	x = -3
	y = 1
	relative_position_id = CHI_reorder_north_china

	cost = 2

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 0
			ROOT_is_threatened = yes
		}
		modifier = {
			factor = 0
			LEC = { dont_start_major_faction_wars = yes }
		}
		modifier = {
			factor = 0
			LEC = { default_attack_AI_trigger_FROM = yes }
		}
	}

	available = {
		is_subject = no
		is_neighbor_of = LEC
	}

	bypass = {
		NOT = { can_declare_war_on = LEC }
	}

	will_lead_to_war_with = LEC

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_fate_LEC"
		LEC = { country_event = chi_for.21 }
	}
}
shared_focus = {
	id = CHI_avenge_northern_expedition
	icon = GFX_goal_JAP_target_gea
	prerequisite = { focus = CHI_fate_LEC }
	x = 0
	y = 1
	relative_position_id = CHI_fate_LEC

	cost = 2
	ai_will_do = {
		factor = 10
		modifier = {
			factor = 0
			ROOT_is_threatened = yes
		}
	}
	available = {
		is_subject = no
		is_neighbor_of = GEA
		is_neighbor_of = POR
	}
	bypass = {
		NOT = { can_declare_war_on = GEA }
	}
	will_lead_to_war_with = GEA
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_avenge_northern_expedition"
		set_country_flag = CHI_avenge_century
		add_war_support = 0.05
		custom_effect_tooltip = CHI_avenge_northern_expedition_tt
		hidden_effect = {
			activate_targeted_decision = { target = POR decision = CHI_seize_macau }
			activate_targeted_decision = { target = GEA decision = CHI_threaten_ger_treaty_ports }

		}
	}
}

shared_focus = {
	id = CHI_secure_northwest
	icon = GFX_goal_OTT_Abolish_Mecelle
	prerequisite = { focus = CHI_reorder_north_china }
	x = -1
	y = 1
	relative_position_id = CHI_reorder_north_china

	cost = 7

	ai_will_do = {
		factor = 15
	}

	available = {
		is_subject = no
		OR = {
			has_completed_focus = CHI_ethnic_autonomy
			has_completed_focus = CHI_unitary_state
		}
	}

	bypass = {
		NOT = {
			can_declare_war_on = XSM
			can_declare_war_on = SIK
			can_declare_war_on = KUM
			can_declare_war_on = ETS
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_secure_northwest"
		if = {
			limit = { can_declare_war_on = XSM }
			if = {
				limit = {
					has_completed_focus = CHI_ethnic_autonomy
					XSM = {
						is_subject = no
						NOT = { has_country_leader = { character = XSM_ma_hongkui } }
					}
				}
				activate_targeted_decision = { target = XSM decision = CHI_dec_negotiate_with_XSM }
			}
			activate_targeted_decision = { target = XSM decision = CHI_dec_XSM_expedition }
		}
		if = {
			limit = { can_declare_war_on = SIK }
			if = {
				limit = {
					has_completed_focus = CHI_ethnic_autonomy
					SIK = {
						is_subject = no
						NOT = { has_country_leader = { character = SIK_ma_shaowu } }
					}
				}
				activate_targeted_decision = { target = SIK decision = CHI_dec_negotiate_with_SIK }
			}
			activate_targeted_decision = { target = SIK decision = CHI_dec_xinjiang_expedition }
		}
		if = {
			limit = { can_declare_war_on = KUM }
			activate_targeted_decision = { target = KUM decision = CHI_dec_xinjiang_expedition }
		}
		if = {
			limit = { can_declare_war_on = ETS }
			activate_targeted_decision = { target = ETS decision = CHI_dec_xinjiang_expedition }
		}
	}
}

shared_focus = {
	id = CHI_authority_TIB
	icon = YUN_GFX_Goal_Secure_Tibet
	prerequisite = { focus = CHI_reorder_north_china }
	x = 1
	y = 1
	relative_position_id = CHI_reorder_north_china

	cost = 7

	ai_will_do = {
		factor = 15
	}

	available = {
		is_subject = no
		OR = {
			has_completed_focus = CHI_ethnic_autonomy
			has_completed_focus = CHI_unitary_state
		}
	}

	bypass = {
		NOT = { can_declare_war_on = TIB }
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_authority_TIB"
		if = {
			limit = { has_completed_focus = CHI_ethnic_autonomy }
			activate_targeted_decision = { target = TIB decision = CHI_offer_autonomy_TIB }
		}
		activate_targeted_decision = { target = TIB decision = CHI_dec_TIB_expedition }
	}
}

shared_focus = {
	id = CHI_retake_MON
	icon = GFX_goal_MON_mongolia_flag
	prerequisite = { focus = CHI_reorder_north_china }
	x = 0
	y = 2
	relative_position_id = CHI_reorder_north_china

	cost = 7

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 0
			MON_protected_by_russia = yes
		}
		modifier = {
			factor = 2
			NOT = {
				country_exists = RUS
				country_exists = SOV
			}
		}
	}

	available = {
		is_subject = no
		OR = {
			has_completed_focus = CHI_ethnic_autonomy
			has_completed_focus = CHI_unitary_state
		}
	}

	bypass = {
		NOT = { can_declare_war_on = MON }
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_retake_MON"
		if = {
			limit = { has_completed_focus = CHI_ethnic_autonomy }
			activate_targeted_decision = { target = MON decision = CHI_offer_autonomy_MON }
		}
		activate_targeted_decision = { target = MON decision = CHI_dec_MON_expedition }
	}
}

shared_focus = {
	id = CHI_neutralize_RUS
	icon = GFX_focus_eng_expose_the_belly_of_the_bear
	prerequisite = { focus = CHI_secure_northwest }
	prerequisite = { focus = CHI_retake_MON }
	x = -1
	y = 1
	relative_position_id = CHI_retake_MON

	cost = 7

	ai_will_do = {
		factor = 1
	}

	available = {
		is_subject = no
		can_declare_war_on = RUS
		OR = {
			owns_state = 617
			has_subject = 617.owner
		}
		OR = {
			owns_state = 330
			has_subject = 330.owner
		}
	}

	bypass = {
		has_war_with = RUS
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_neutralize_RUS"
		activate_targeted_decision = { target = RUS decision = CHI_dec_RUS_expedition }
	}
}

shared_focus = {
	id = CHI_renounce_mcmahon
	icon = GFX_focus_generic_provoke_border_clashes
	prerequisite = { focus = CHI_authority_TIB }
	mutually_exclusive = { focus = CHI_mission_red_india }
	x = 1
	y = 1
	relative_position_id = CHI_retake_MON

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		is_subject = no
		OR = {
			owns_state = 322
			has_subject = 322.owner
		}
		OR = {
			owns_state = 693
			has_subject = 693.owner
		}
		OR = {
			owns_state = 748
			has_subject = 748.owner
		}
	}

	bypass = {
		owns_state = 858
		858 = { is_claimed_by = ROOT }
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_renounce_mcmahon"
		add_state_claim = 858
		if = {
			limit = {
				858 = { NOT = { is_owned_by = ROOT } }
				can_declare_war_on = 858.owner
			}
			unlock_decision_tooltip = CHI_dec_HND_expedition
			hidden_effect = {
				activate_targeted_decision = { target = HND decision = CHI_dec_HND_expedition }
				activate_targeted_decision = { target = RAJ decision = CHI_dec_HND_expedition }
				activate_targeted_decision = { target = PRF decision = CHI_dec_HND_expedition }
				activate_targeted_decision = { target = BHU decision = CHI_dec_HND_expedition }
				activate_targeted_decision = { target = NEP decision = CHI_dec_HND_expedition }
			}
		}
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = CHI_repay_syndicalists
	icon = GFX_focus_ger_great_red_menace
	prerequisite = { focus = CHI_reorder_north_china }
	x = 3
	y = 1
	mutually_exclusive = { focus = CHI_independent_FP }
	relative_position_id = CHI_reorder_north_china

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_repay_syndicalists"
		add_political_power = -50
		add_command_power = -10
		reverse_add_opinion_modifier = {
			target = FRA
			modifier = CHI_SYND
		}
		add_opinion_modifier = {
			target = FRA
			modifier = CHI_SYND
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_independent_FP
	icon = GFX_goal_liberty
	prerequisite = { focus = CHI_reorder_north_china }
	x = 5
	y = 1
	mutually_exclusive = { focus = CHI_repay_syndicalists }
	relative_position_id = CHI_reorder_north_china

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_independent_FP"
		add_political_power = 50
		reverse_add_opinion_modifier = {
			target = FRA
			modifier = CHI_SYND_MAD
		}
		add_opinion_modifier = {
			target = FRA
			modifier = CHI_SYND_MAD
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_volunteer_army
	icon = GFX_goal_volunteer_alliance
	prerequisite = { focus = CHI_repay_syndicalists }
	x = -1
	y = 1
	relative_position_id = CHI_repay_syndicalists

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		is_subject = no
		has_global_flag = second_weltkrieg_has_started
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_volunteer_army"
		add_ideas = CHI_chinese_expeditionary_force
		FRA = { save_event_target_as = volunteer_target }
		send_volunteers_to_TARGET = yes
		ENG = { save_event_target_as = volunteer_target }
		send_volunteers_to_TARGET = yes
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = CHI_intervene_VIN
	icon = GFX_HND_indochina_revolution
	prerequisite = {
		focus = CHI_independent_FP
		focus = CHI_repay_syndicalists
	}
	x = 4
	y = 2
	relative_position_id = CHI_reorder_north_china

	cost = 8

	available = {
		has_completed_focus = CHI_VNQDD_liaisons
		OR = {
			has_country_flag = CHI_INC_refuse
			has_country_flag = CHI_refuse_INC
		}
		is_subject = no
		can_declare_war_on = INC
	}
	bypass = {
		has_country_flag = CHI_support_INC
	}

	will_lead_to_war_with = INC

	ai_will_do = {
		base = 1
		modifier = {
			factor = 0
			OR = {
				ROOT_is_threatened = yes
				INC = { dont_start_major_faction_wars = yes }
				INC = { default_attack_AI_trigger_FROM = yes }
			}
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_intervene_VIN"
		custom_effect_tooltip = CHI_intervene_VIN_tt
		declare_war_on = {
			target = INC
			type = annex_everything
		}
	}
}

shared_focus = {
	id = CHI_USA_diplo
	icon = GFX_focus_usa_build_the_pentagon
	prerequisite = {
		focus = CHI_independent_FP
	}
	x = 1
	y = 1
	relative_position_id = CHI_independent_FP

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		has_global_flag = USA_civil_war_over_flag
		OR = {
			AND = {
				country_exists = USA
				USA = {
					has_completed_focus = USA_back_in_business
					NOT = { has_war_with = CHI }
				}
			}
			AND = {
				country_exists = PSA
				PSA = {
					has_completed_focus = PSA_back_in_business
					NOT = { has_war_with = CHI }
				}
			}
			AND = {
				country_exists = CSA
				CSA = {
					has_completed_focus = CSA_back_in_business
					NOT = { has_war_with = CHI }
				}
			}
		}
		is_subject = no
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_USA_diplo"
		if = {
			limit = {
				USA = {
					exists = yes
				}
			}
			reverse_add_opinion_modifier = {
				target = USA
				modifier = CHI_WSH
			}
			add_opinion_modifier = {
				target = USA
				modifier = CHI_WSH
			}
		}
		if = {
			limit = {
				PSA = {
					exists = yes
				}
			}
			reverse_add_opinion_modifier = {
				target = PSA
				modifier = CHI_WSH
			}
			add_opinion_modifier = {
				target = PSA
				modifier = CHI_WSH
			}
		}
		if = {
			limit = {
				CSA = {
					exists = yes
				}
			}
			reverse_add_opinion_modifier = {
				target = CSA
				modifier = CHI_WSH
			}
			add_opinion_modifier = {
				target = CSA
				modifier = CHI_WSH
			}
		}
		add_political_power = 50
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_mission_red_india
	icon = GFX_goal_india_commune
	prerequisite = { focus = CHI_repay_syndicalists }
	x = 0
	y = 2
	mutually_exclusive = { focus = CHI_renounce_mcmahon }
	relative_position_id = CHI_repay_syndicalists

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		can_declare_war_on = HND
		is_subject = no
	}

	bypass = {
		NOT = { can_declare_war_on = HND }
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_mission_red_india"
		HND = {
			country_event = { id = chi_for.42 days = 5 }
		}
	}
}

shared_focus = {
	id = CHI_form_eastasia_faction
	icon = GFX_goal_chi_international_revolution
	prerequisite = { focus = CHI_independent_FP }
	x = 0
	y = 2
	relative_position_id = CHI_independent_FP

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		is_valid_peace_target = yes
		OR = {
			has_global_flag = JAP_defeated_by_china
			JAP = { is_puppet = yes }
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_form_eastasia_faction"
		custom_effect_tooltip = CHI_form_faction_tt
		country_event = chi_faction.1
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CHI_support_INS_independence
	icon = GFX_focus_jap_strike_south
	prerequisite = {
		focus = CHI_form_eastasia_faction
		focus = CHI_mission_red_india
	}
	x = 0
	y = 2
	relative_position_id = CHI_intervene_VIN

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		is_subject = no
	}

	bypass = {
		NOT = {
			country_exists = GEA
			country_exists = DEI
		}
		PHI = { is_subject = no }
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_support_INS_independence"
		unlock_decision_category_tooltip = CHI_liberate_asia_category
		hidden_effect = {
			activate_targeted_decision = { target = DEI decision = CHI_liberate_asia }
			activate_targeted_decision = { target = GEA decision = CHI_liberate_asia }
			activate_targeted_decision = { target = PHI decision = CHI_liberate_asia_PHI }
		}
	}
}

