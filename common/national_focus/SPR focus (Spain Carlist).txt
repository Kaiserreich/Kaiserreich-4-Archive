### Carlist Spain Focus Tree
# Revamped by SuperGreenBeans, Cazadorian and Klyntar King

focus_tree = {
	id = SPR_focus
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = SPR
		}
	}
	default = no
	continuous_focus_position = { x = 810 y = 850 }

	### Politics ###
	focus = {# Restauración
		id = SPR_restauracion
		icon = GFX_goal_carlist
		cost = 5

		x = 3
		y = 0

		available = {
			has_country_flag = SPA_aftermath_of_the_civil_war
		}

		bypass = {
			is_subject = yes
		}

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_restauracion"
			if = {
				limit = { NOT = { has_cosmetic_tag = SPA_carlists_kingdom } }
				set_cosmetic_tag = SPA_carlists_kingdom
			}
			SPA_societal_recovery = yes
		}
		search_filters = { FOCUS_FILTER_ANNEXATION FOCUS_FILTER_INDUSTRY }
	}

	focus = {# Dios
		id = SPR_dios
		icon = GFX_BEL_Improve_Catholic_Relations
		cost = 5

		relative_position_id = SPR_restauracion
		x = -2
		y = 1

		prerequisite = {
			focus = SPR_restauracion
		}

		ai_will_do = { factor = 60 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_dios"
			if = {
				limit = { has_idea = spr_carlism1 }
				swap_ideas = {
					remove_idea = spr_carlism1
					add_idea = spr_carlism3
				}
			}
			else = { add_ideas = SPR_carlism }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {# Patria
		id = SPR_patria
		icon = GFX_goal_monarchism_black
		cost = 5

		relative_position_id = SPR_restauracion
		x = -2
		y = 3

		prerequisite = {
			focus = SPR_dios
		}

		ai_will_do = { factor = 60 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_patria"
			if = {
				limit = { has_idea = spr_carlism }
				swap_ideas = {
					remove_idea = spr_carlism
					add_idea = spr_carlism2
				}
			}
			else = {
				swap_ideas = {
					remove_idea = spr_carlism3
					add_idea = spr_carlism4
				}
			}
		}
		search_filters = { FOCUS_FILTER_WAR_SUPPORT }
	}

	focus = {# Mending the rift
		id = SPR_mending_the_rift
		icon = GFX_goal_generic_national_unity
		cost = 5

		relative_position_id = SPR_restauracion
		x = 0
		y = 1

		prerequisite = {
			focus = SPR_restauracion
		}

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_mending_the_rift"
			add_stability = 0.05
			SPA_societal_recovery = yes
		}
		search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
	}

	focus = {# Crush opposition
		id = SPR_crush_opposition
		icon = GFX_goal_generic_political_pressure
		cost = 5

		relative_position_id = SPR_restauracion
		x = -1
		y = 2

		prerequisite = {
			focus = SPR_mending_the_rift
		}

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_crush_opposition"
			remove_ideas = SPR_syndicalist_resistance
			add_popularity = { ideology = totalist popularity = -0.1 }
			add_popularity = { ideology = syndicalist popularity = -0.1 }
			add_popularity = { ideology = radical_socialist popularity = -0.1 }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {# Reconciliation
		id = SPR_reconcilliation
		icon = GFX_goal_tfv_strengthen_commonwealth_ties
		cost = 5

		relative_position_id = SPR_restauracion
		x = 1
		y = 2

		prerequisite = {
			focus = SPR_mending_the_rift
		}

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_reconcilliation"
			SPK = {
				SPA_francisco_de_paula_de_borbon_y_de_la_torre = { set_nationality = ROOT }
				SPA_francisco_franco_bahamonde = { set_nationality = ROOT }
				SPA_emilio_mola_vidal = { set_nationality = ROOT }
				SPA_miguel_maura_gamazo = { set_nationality = ROOT }
				SPA_joaquin_garcia_morato_y_castano = { set_nationality = ROOT }
			}
			add_popularity = { ideology = social_conservative popularity = 0.03 }
			add_popularity = { ideology = authoritarian_democrat popularity = 0.08 }
			add_popularity = { ideology = paternal_autocrat popularity = 0.05 }
		}
		on_uncomplete = {
			SPR = {
				SPA_francisco_de_paula_de_borbon_y_de_la_torre = { set_nationality = SPK }
				SPA_francisco_franco_bahamonde = { set_nationality = SPK }
				SPA_emilio_mola_vidal = { set_nationality = SPK }
				SPA_miguel_maura_gamazo = { set_nationality = SPK }
				SPA_joaquin_garcia_morato_y_castano = { set_nationality = SPK }
			}
		}
		search_filters = { FOCUS_FILTER_STABILITY }
	}

	focus = {# Royal Unity
		id = SPR_call_for_unity
		icon = GFX_goal_tfv_strengthen_commonwealth_ties
		cost = 5

		relative_position_id = SPR_restauracion
		x = 0
		y = 3

		prerequisite = { focus = SPR_reconcilliation }
		prerequisite = { focus = SPR_crush_opposition }

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_call_for_unity"
			add_popularity = { ideology = national_populist popularity = 0.1 }
			SPA_societal_recovery = yes
		}
		search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
	}

	focus = {# Rey
		id = SPR_rey
		icon = GFX_focus_rom_royal_dictatorship
		cost = 5

		relative_position_id = SPR_restauracion
		x = 2
		y = 1

		prerequisite = {
			focus = SPR_restauracion
		}

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_rey"
			add_country_leader_trait = SPR_rey_leader_trait
			SPA_societal_recovery = yes
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {# Fueros
		id = SPR_furos
		icon = GFX_goal_constitutional_guarantees
		cost = 5

		relative_position_id = SPR_restauracion
		x = 2
		y = 3

		prerequisite = {
			focus = SPR_rey
		}

		ai_will_do = { factor = 50 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_furos"
			if = {
				limit = { has_idea = spr_carlism }
				swap_ideas = {
					remove_idea = spr_carlism
					add_idea = spr_carlism3
				}
			}
			else_if = {
				limit = { has_idea = spr_carlism2 }
				swap_ideas = {
					remove_idea = spr_carlism2
					add_idea = spr_carlism4
				}
			}
			else = { add_ideas = spr_carlism1 }
		}
		search_filters = { FOCUS_FILTER_WAR_SUPPORT }
	}

	focus = {# National Catholicism
		id = SPR_national_catholicism
		icon = GFX_goal_faith_and_state
		cost = 5

		relative_position_id = SPR_restauracion
		x = -1
		y = 4

		prerequisite = {
			focus = SPR_furos
		}
		prerequisite = {
			focus = SPR_call_for_unity
		}
		prerequisite = {
			focus = SPR_patria
		}

		ai_will_do = { factor = 50 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_national_catholicism"
			if = {
				limit = { has_idea = spr_carlism4 }
				swap_ideas = {
					remove_idea = spr_carlism4
					add_idea = spr_carlism5
				}
			}
			else = {
				swap_ideas = {
					remove_idea = spr_carlism6
					add_idea = spr_carlism7
				}
			}
		}
		search_filters = { FOCUS_FILTER_STABILITY }
	}

	focus = {# Cortes Españolas
		id = SPR_cortes_espanolas
		icon = GFX_goal_POR_royal_edicts
		cost = 5

		relative_position_id = SPR_restauracion
		x = 1
		y = 4

		prerequisite = { focus = SPR_patria }
		prerequisite = { focus = SPR_call_for_unity }
		prerequisite = { focus = SPR_furos }

		ai_will_do = { factor = 50 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_cortes_espanolas"
			if = {
				limit = { has_idea = spr_carlism4 }
				swap_ideas = {
					remove_idea = spr_carlism4
					add_idea = spr_carlism6
				}
			}
			else = {
				swap_ideas = {
					remove_idea = spr_carlism5
					add_idea = spr_carlism7
				}
			}
		}
		search_filters = { FOCUS_FILTER_STABILITY }
	}

	focus = {# Viva El Rey!
		id = SPR_viva_el_rey
		icon = GFX_focus_generic_home_defense
		cost = 5

		relative_position_id = SPR_restauracion
		x = 0
		y = 5

		prerequisite = {
			focus = SPR_national_catholicism
		}
		prerequisite = {
			focus = SPR_cortes_espanolas
		}

		ai_will_do = { factor = 80 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_viva_el_rey"
			swap_ideas = {
				remove_idea = spr_carlism7
				add_idea = spr_carlism8
			}
		}
		search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY }
	}

### Economics ###
	focus = {# Rebuilding the Economy
		id = SPR_rebuilding_the_economy
		icon = GFX_goal_generic_production2
		cost = 7

		x = 11
		y = 1

		prerequisite = {
			focus = SPR_restauracion
		}

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_rebuilding_the_economy"
			add_ideas = SPA_rebuilding_spain_idea
			SPA_economic_recovery = yes
			add_tech_bonus = {
				name = SPR_rebuilding_the_economy
				bonus = 1
				uses = 1
				category = industry
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
	}

	focus = {# Expand the Railroads
		id = SPR_expand_railroads
		icon = GFX_goal_generic_construct_infrastructure
		cost = 7

		relative_position_id = SPR_rebuilding_the_economy
		x = -4
		y = 1

		prerequisite = {
			focus = SPR_rebuilding_the_economy
		}
		available = {
			41 = { is_fully_controlled_by = ROOT }
			1081 = { is_fully_controlled_by = ROOT }
			174 = { is_fully_controlled_by = ROOT }
			176 = { is_fully_controlled_by = ROOT }
			1070 = { is_fully_controlled_by = ROOT }
		}

		ai_will_do = { factor = 50 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_expand_railroads"
			1070 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			176 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			if = {
				limit = {
					171 = { is_fully_controlled_by = ROOT }
				}
				171 = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				build_railway = {
					path = { 3938 3794 9800 9846 11825 918 3918 3727 3725 11840 11677 11692 6955 758 }
				}
			}
			build_railway = {
				path = { 11825 6936 903 885 11852 13563 740 }
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = { #Extract Natural Resources
		id = SPR_resource_extraction
		icon = GFX_goal_generic_coal_mining
		cost = 7

		relative_position_id = SPR_rebuilding_the_economy
		x = -4
		y = 3

		prerequisite = {
			focus = SPR_expand_railroads
		}

		ai_will_do = { factor = 50 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_resource_extraction"
			custom_effect_tooltip = SPA_resource_extraction_tt
			effect_tooltip = {
				add_resource = {
					type = tungsten
					amount = 12
					state = 171
				}
			}
			if = {
				limit = { 171 = { is_controlled_by = ROOT } }
				hidden_effect = {
					add_resource = {
						type = tungsten
						amount = 12
						state = 171
					}
				}
			}
			custom_effect_tooltip = tooltip_white_line
			activate_targeted_decision = { target = ROOT decision = SPA_tungsten_mines }
			activate_targeted_decision = { target = ROOT decision = SPA_tungsten_mines_2 }
			activate_targeted_decision = { target = ROOT decision = SPA_aluminium_mines }
			activate_targeted_decision = { target = ROOT decision = SPA_steel_mines }
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {# Provincial Rebuilding
		id = SPR_provincial_rebuilding
		icon = GFX_goal_production
		cost = 7

		relative_position_id = SPR_rebuilding_the_economy
		x = -2
		y = 1

		prerequisite = {
			focus = SPR_rebuilding_the_economy
		}

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_provincial_rebuilding"
			add_tech_bonus = {
				name = SPR_provincial_rebuilding
				bonus = 1
				uses = 2
				category = industry
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Military Investments
		id = SPR_military_investments
		icon = GFX_goal_national_arsenal
		cost = 7

		relative_position_id = SPR_rebuilding_the_economy
		x = -3
		y = 2

		prerequisite = {
			focus = SPR_provincial_rebuilding
		}
		mutually_exclusive = {
			focus = SPR_comercial_investment
		}

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_military_investments"
			random_owned_controlled_state = {
				limit = { is_core_of = ROOT is_in_home_area = yes }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = { is_core_of = ROOT is_in_home_area = yes }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {# Commercial Investment
		id = SPR_comercial_investment
		icon = GFX_goal_construction_engineering
		cost = 7

		relative_position_id = SPR_rebuilding_the_economy
		x = -1
		y = 2

		prerequisite = {
			focus = SPR_provincial_rebuilding
		}
		mutually_exclusive = {
			focus = SPR_military_investments
		}

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_comercial_investment"
			random_owned_controlled_state = {
				limit = { is_core_of = ROOT is_in_home_area = yes }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = { is_core_of = ROOT is_in_home_area = yes }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {# Electrification Program
		id = SPR_electrification_program
		icon = GFX_goal_Schelle
		cost = 7

		relative_position_id = SPR_rebuilding_the_economy
		x = -2
		y = 3

		prerequisite = {
			focus = SPR_military_investments
			focus = SPR_comercial_investment
		}

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_electrification_program"
			SPA_economic_recovery = yes
			add_tech_bonus = {
				name = SPR_electrification_program
				bonus = 1
				uses = 2
				category = electronics
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Ley General de Educación
		id = SPR_ley_general_educacion
		icon = GFX_goal_BRA_catholic_education
		cost = 7

		relative_position_id = SPR_rebuilding_the_economy
		x = 0
		y = 1

		prerequisite = {
			focus = SPR_rebuilding_the_economy
		}

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_ley_general_educacion"
			add_research_slot_until_five = yes
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Expand Real Academia
		id = SPR_expand_real_academia
		icon = GFX_goal_KTG_Bookstack
		cost = 7

		relative_position_id = SPR_rebuilding_the_economy
		x = 0
		y = 3

		prerequisite = {
			focus = SPR_ley_general_educacion
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_expand_real_academia"
			add_ideas = SPA_real_academia_idea
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Instituto Nacional de Industria
		id = SPR_create_ini
		icon = GFX_generic_heavy_industry
		cost = 7

		relative_position_id = SPR_rebuilding_the_economy
		x = 2
		y = 1

		prerequisite = {
			focus = SPR_rebuilding_the_economy
		}

		ai_will_do = { factor = 50 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_create_ini"
			add_ideas = SPA_ini_idea
		}
	}

	focus = {# Royal Industrial Charters
		id = SPR_royal_charters
		icon = GFX_goal_economic_control
		cost = 7

		relative_position_id = SPR_rebuilding_the_economy
		x = 1
		y = 2

		prerequisite = {
			focus = SPR_create_ini
		}
		mutually_exclusive = {
			focus = SPR_military_factories
		}

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_royal_charters"
			random_owned_controlled_state = {
				limit = { is_core_of = ROOT is_in_home_area = yes }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = { is_core_of = ROOT is_in_home_area = yes }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {# Military Factories
		id = SPR_military_factories
		icon = GFX_goal_generic_construct_mil_factory
		cost = 7

		relative_position_id = SPR_rebuilding_the_economy
		x = 3
		y = 2

		prerequisite = {
			focus = SPR_create_ini
		}
		mutually_exclusive = {
			focus = SPR_royal_charters
		}

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_military_factories"
			random_owned_controlled_state = {
				limit = { is_core_of = ROOT is_in_home_area = yes }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = { is_core_of = ROOT is_in_home_area = yes }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {# Modern Agriculture
		id = SPR_modern_agriculture
		icon = GFX_focus_AUS_agriculture
		cost = 7

		relative_position_id = SPR_rebuilding_the_economy
		x = 2
		y = 3

		prerequisite = {
			focus = SPR_royal_charters
			focus = SPR_military_factories
		}

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_modern_agriculture"
			add_ideas = SPA_modern_agriculture_idea
			SPA_economic_recovery = yes
		}
		search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_MANPOWER }
	}

	focus = {# Labour Charter
		id = SPR_labour_charter
		icon = GFX_goal_state_economy
		cost = 7

		relative_position_id = SPR_rebuilding_the_economy
		x = 4
		y = 1

		prerequisite = {
			focus = SPR_rebuilding_the_economy
		}

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_labour_charter"
			add_stability = 0.05
			add_tech_bonus = {
				name = SPR_labour_charter
				bonus = 1
				uses = 1
				category = industry
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Catholic Trade Unions
		id = SPR_catholic_trade_unions
		icon = GFX_goal_generic_union_agreement
		cost = 7

		relative_position_id = SPR_rebuilding_the_economy
		x = 4
		y = 3

		prerequisite = {
			focus = SPR_labour_charter
		}

		ai_will_do = { factor = 100 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_catholic_trade_unions"
			add_ideas = SPA_catholic_trade_unions_idea
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {# Spanish Miracle
		id = SPR_spanish_miracle
		icon = GFX_focus_spa_the_spanish_miracle
		cost = 7

		relative_position_id = SPR_rebuilding_the_economy
		x = 0
		y = 4

		prerequisite = {
			focus = SPR_resource_extraction
		}
		prerequisite = {
			focus = SPR_electrification_program
		}
		prerequisite = {
			focus = SPR_expand_real_academia
		}
		prerequisite = {
			focus = SPR_modern_agriculture
		}
		prerequisite = {
			focus = SPR_catholic_trade_unions
		}

		ai_will_do = { factor = 200 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_spanish_miracle"
			if = {
				limit = { has_idea = SPA_rebuilding_spain_idea }
				remove_ideas = SPA_rebuilding_spain_idea
			}

			hidden_effect = {
				remove_ideas = {
					SPA_real_academia_idea
					SPA_ini_idea
					SPA_modern_agriculture_idea
					SPA_catholic_trade_unions_idea
					SPA_recovering_economy_3
				}
			}
			custom_effect_tooltip = SPA_economic_miracle_tt
			add_ideas = SPA_spanish_economic_miracle
			add_research_slot_until_five = yes
		}
	}

### Foreign Policy ###
	focus = {# Join the Entente
		id = SPR_join_entente
		icon = GFX_GBR_lead_entente
		cost = 3

		x = 19
		y = 1

		available = {
			is_subject = no
			is_in_faction = no
			ENT = { is_faction_leader = yes }
			at_peace_or_same_enemies_as_ENT = yes
		}
		bypass = {
			is_in_faction_with = ENT
		}
		prerequisite = {
			focus = SPR_restauracion
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				has_idea = SPA_economic_ruin
				has_idea = SPA_social_breakdown_2
			}
		}
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_join_entente"
			ENT = { country_event = spain_domestic_events.31 }
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = { ENT = { add_to_faction = ROOT } }
		}
	}

	focus = {# Iberian Trade
		id = SPR_iberian_trade
		icon = GFX_goal_portugal
		cost = 7

		relative_position_id = SPR_join_entente
		x = -2
		y = 1

		prerequisite = {
			focus = SPR_join_entente
		}
		available = { is_in_faction_with = POR }

		ai_will_do = { factor = 20 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_iberian_trade"
			add_ideas = SPA_mediterranean_allies1
			POR = { country_event = { id = spain_foreign_policy_events.7 days = 2 } }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {# French Advisors
		id = SPR_french_advisors
		icon = GFX_goal_NFA_troops
		cost = 7

		relative_position_id = SPR_join_entente
		x = 0
		y = 1

		prerequisite = {
			focus = SPR_join_entente
		}
		available = { is_in_faction_with = NFA }

		ai_will_do = { factor = 30 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_french_advisors"
			if = {
				limit = { has_idea = SPR_canadian_advisors_idea }
				swap_ideas = {
					remove_idea = SPR_canadian_advisors_idea
					add_idea = SPA_entente_advisors2
				}
			}
			else = { add_ideas = SPR_french_advisors_idea }
		}
	}

	focus = {# Canadian Advisors
		id = SPR_canadian_advisors
		icon = GFX_goal_canada
		cost = 7

		relative_position_id = SPR_join_entente
		x = 2
		y = 1

		prerequisite = {
			focus = SPR_join_entente
		}
		available = { is_in_faction_with = IMP }

		ai_will_do = { factor = 30 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_canadian_advisors"
			if = {
				limit = { has_idea = SPR_french_advisors_idea }
				swap_ideas = {
					remove_idea = SPR_french_advisors_idea
					add_idea = SPA_entente_advisors2
				}
			}
			else = { add_ideas = SPR_canadian_advisors_idea }
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {# Latin economic Union
		id = SPR_latin_economic_union
		icon = GFX_goal_generic_positive_trade_relations
		cost = 7

		relative_position_id = SPR_join_entente
		x = -1
		y = 2

		prerequisite = {
			focus = SPR_french_advisors
		}
		prerequisite = {
			focus = SPR_iberian_trade
		}
		ai_will_do = { factor = 50 }

		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_latin_economic_union"
			add_political_power = 30
			swap_ideas = {
				remove_idea = SPA_mediterranean_allies1
				add_idea = SPR_economic_cooperation_expanded_idea
			}
			custom_effect_tooltip = tooltip_white_line
			every_other_country = {
				limit = {
					OR = {
						original_tag = POR
						original_tag = NFA
						original_tag = SIC
						original_tag = SRD
					}
					has_socialist_government = no
					OR = {
						is_in_faction = no
						is_in_faction_with = ROOT
					}
					at_war_with_or_justifying_wargoal_against_ROOT = no
				}
				country_event = spain_foreign_policy_events.6
				custom_effect_tooltip = tooltip_white_line
				effect_tooltip = {
					add_ideas = SPR_economic_cooperation_idea
					add_opinion_modifier = { target = ROOT modifier = KR_trade_agreement }
					reverse_add_opinion_modifier = { target = ROOT modifier = KR_trade_agreement }
				}
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {# Entente Doctrinal Development
		id = SPR_joint_military_training
		icon = GFX_focus_SOV_mobilization_plan
		cost = 7

		relative_position_id = SPR_join_entente
		x = 1
		y = 2

		prerequisite = {
			focus = SPR_french_advisors
		}
		prerequisite = {
			focus = SPR_canadian_advisors
		}

		ai_will_do = { factor = 30 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_joint_military_training"
			add_doctrine_cost_reduction = {
				name = SPR_joint_military_training
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
			add_doctrine_cost_reduction = {
				name = SPR_joint_military_training
				cost_reduction = 0.5
				uses = 1
				category = air_doctrine
			}
			add_doctrine_cost_reduction = {
				name = SPR_joint_military_training
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_ARMY_XP FOCUS_FILTER_NAVY_XP FOCUS_FILTER_AIR_XP }
	}

### Army Policy ###
	focus = {# Legión Española
		id = SPR_legion_espanola
		icon = GFX_goal_SPR_army
		cost = 5

		x = 27
		y = 0

		ai_will_do = { factor = 30 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_legion_espanola"
			army_experience = 25
			air_experience = 25
			navy_experience = 25
		}
		search_filters = { FOCUS_FILTER_ARMY_XP FOCUS_FILTER_NAVY_XP FOCUS_FILTER_AIR_XP }
	}

	focus = {# Modern Tercio
		id = SPR_modern_terrico
		icon = GFX_goal_military_academy
		cost = 7

		relative_position_id = SPR_legion_espanola
		x = -3
		y = 1

		prerequisite = {
			focus = SPR_legion_espanola
		}
		mutually_exclusive = {
			focus = SPR_army_of_maneuver
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_modern_terrico"
			add_doctrine_cost_reduction = {
				name = SPR_modern_terrico
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Requeté
		id = SPR_requetes
		icon = GFX_focus_spa_supremacy_of_the_communion
		cost = 7

		relative_position_id = SPR_legion_espanola
		x = -4
		y = 2

		prerequisite = {
			focus = SPR_modern_terrico
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_requetes"
			add_ideas = SPR_requetes_idea
		}
		search_filters = { FOCUS_FILTER_ARMY_BONUS }
	}

	focus = {# Artillery Effort
		id = SPR_artillery_effort
		icon = GFX_goal_national_artillery
		cost = 7

		relative_position_id = SPR_legion_espanola
		x = -2
		y = 2

		prerequisite = {
			focus = SPR_modern_terrico
		}

		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_artillery_effort"
			add_tech_bonus = {
				name = SPR_artillery_effort
				bonus = 0.5
				uses = 2
				category = infantry_weapons
				category = artillery
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Guardia Real
		id = SPR_guardia_civil
		icon = GFX_goal_generic_join_faction
		cost = 7

		relative_position_id = SPR_legion_espanola
		x = -3
		y = 3

		prerequisite = {
			focus = SPR_requetes
		}
		prerequisite = {
			focus = SPR_artillery_effort
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_guardia_civil"
			add_ideas = SPR_guardia_civil_idea
		}
		search_filters = { FOCUS_FILTER_ARMY_BONUS }
	}

	focus = {# Emergency Armament Production
		id = SPR_emergency_factories
		icon = GFX_BEL_Catholic_Construction
		cost = 7

		relative_position_id = SPR_legion_espanola
		x = -2
		y = 4

		prerequisite = {
			focus = SPR_guardia_civil
			focus = SPR_word_of_god
		}
		available = {
			has_war = yes
		}

		ai_will_do = { factor = 30 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_emergency_factories"
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = { type = arms_factory level = 1 instant_build = yes }
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = { type = arms_factory level = 1 instant_build = yes }
			}
			add_stability = -0.05
			add_manpower = -500
		}
		search_filters = { FOCUS_FILTER_ARMY_BONUS }
	}

	focus = {# devoted officers
		id = SPR_devoted_officers
		icon = GFX_focus_spa_no_compromise_on_carlist_ideals
		cost = 7

		relative_position_id = SPR_legion_espanola
		x = 0
		y = 2

		prerequisite = {
			focus = SPR_modern_terrico
			focus = SPR_army_of_maneuver
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_devoted_officers"
			add_ideas = SPR_devoted_officers_idea
		}
		search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_MANPOWER }
	}

	focus = {# word of God
		id = SPR_word_of_god
		icon = GFX_goal_radio
		cost = 7

		relative_position_id = SPR_legion_espanola
		x = -1
		y = 3

		prerequisite = {
			focus = SPR_devoted_officers
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_word_of_god"
			add_ideas = SPR_word_of_god_idea
			if = {
				limit = { NOT = { has_tech = radio } }
				set_technology = { radio = 1 }
				add_tech_bonus = {
					name = SPR_word_of_god
					bonus = 1
					uses = 1
					category = electronics
				}
			}
			else = {
				add_tech_bonus = {
					name = SPR_word_of_god
					bonus = 1
					uses = 2
					category = electronics
				}
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Break the Walls of Jericho
		id = SPR_walls_of_jericho
		icon = GFX_focus_generic_railway_gun
		cost = 7

		relative_position_id = SPR_legion_espanola
		x = 1
		y = 3

		prerequisite = {
			focus = SPR_devoted_officers
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_walls_of_jericho"
			add_tech_bonus = {
				name = SPR_walls_of_jericho
				bonus = 1
				uses = 1
				category = support_tech
			}
			if = {
				limit = { has_dlc_nsb = yes }
				if = {
					limit = { NOT = { has_tech = railway_gun } }
					set_technology = { railway_gun = 1 }
				}
				create_railway_gun = { equipment = railway_gun_equipment_1 }
			}
			if = {
				limit = { has_dlc_nsb = no }
				add_equipment_to_stockpile = {
					type = artillery_equipment_1
					amount = 100
					producer = SPR
				}
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Entente Tank Shipments
		id = SPR_tank_shipments
		icon = GFX_goal_generic_army_tanks3
		cost = 7

		relative_position_id = SPR_legion_espanola
		x = 2
		y = 4

		prerequisite = {
			focus = SPR_walls_of_jericho
			focus = SPR_navarran_lancers
		}
		available = {
			has_war = yes
		}
		bypass = {
			OR = {
				NOT = { country_exists = NFA }
				has_war_with = NFA
				NOT = { country_exists = IMP }
				has_war_with = IMP
			}
		}
		ai_will_do = { factor = 30 }

		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_tank_shipments"
			add_equipment_to_stockpile = {
				type = light_tank_chassis
				amount = 50
				producer = IMP
			}
			add_equipment_to_stockpile = {
				type = light_tank_chassis
				amount = 50
				producer = NFA
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Army of Maneuver
		id = SPR_army_of_maneuver
		icon = GFX_goal_generic_army_mobile_warfare
		cost = 7

		relative_position_id = SPR_legion_espanola
		x = 3
		y = 1

		prerequisite = {
			focus = SPR_legion_espanola
		}
		mutually_exclusive = {
			focus = SPR_modern_terrico
		}

		ai_will_do = { factor = 0 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_army_of_maneuver"
			add_doctrine_cost_reduction = {
				name = SPR_army_of_maneuver
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Spanish Auto Industry
		id = SPR_mechanized_effort
		icon = GFX_goal_generic_army_motorized
		cost = 7

		relative_position_id = SPR_legion_espanola
		x = 2
		y = 2

		prerequisite = {
			focus = SPR_army_of_maneuver
		}

		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_mechanized_effort"
			add_ideas = SPA_spanish_auto_industry
			if = {
				limit = { NOT = { has_tech = motorised_infantry } }
				set_technology = { motorised_infantry = 1 }
			}
			else = {
				add_tech_bonus = {
					name = SPA_mechanized_effort
					bonus = 1
					uses = 1
					category = cat_mechanized_equipment
				}
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Armoured Warfare Tactics
		id = SPR_weltrieg_lessons
		icon = GFX_EGY_Operation_Abu
		cost = 7

		relative_position_id = SPR_legion_espanola
		x = 4
		y = 2

		prerequisite = {
			focus = SPR_army_of_maneuver
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_weltrieg_lessons"
			add_ideas = SPA_the_new_doctrine_idea
		}
		search_filters = { FOCUS_FILTER_ARMY_BONUS }
	}

	focus = {# Navarran Lancers
		id = SPR_navarran_lancers
		icon = GFX_goal_generic_army_tanks
		cost = 7

		relative_position_id = SPR_legion_espanola
		x = 3
		y = 3

		prerequisite = {
			focus = SPR_mechanized_effort
		}
		prerequisite = {
			focus = SPR_weltrieg_lessons
		}

		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_navarran_lancers"
			add_tech_bonus = {
				name = SPR_navarran_lancers
				bonus = 1
				uses = 2
				category = armor
			}
			hidden_effect = {
				remove_ideas = {
					SPA_the_new_doctrine_idea
					SPA_spanish_auto_industry
				}
			}
			custom_effect_tooltip = SPA_army_idea_tt
			add_ideas = SPA_mechanised_army_idea
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# A Catholic Army
		id = SPR_a_catholic_army
		icon = GFX_focus_mex_restore_the_army_of_christ
		cost = 7

		relative_position_id = SPR_legion_espanola
		x = 0
		y = 4

		prerequisite = {
			focus = SPR_guardia_civil
			focus = SPR_navarran_lancers
		}
		prerequisite = {
			focus = SPR_word_of_god
		}
		prerequisite = {
			focus = SPR_walls_of_jericho
		}

		ai_will_do = { factor = 50 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_a_catholic_army"
			army_experience = 25
			add_doctrine_cost_reduction = {
				name = SPR_a_catholic_army
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
			if = {
				limit = { has_global_flag = spanish_civil_war }
				add_timed_idea = {
					idea = SPR_the_final_push
					days = 365
				}
			}
		}
		search_filters = { FOCUS_FILTER_ARMY_XP FOCUS_FILTER_RESEARCH }
	}

### Navy ###
	focus = {# Armada Española
		id = SPR_armada_espanola
		icon = GFX_goal_SPA_Navy
		cost = 7

		x = 22
		y = 4

		prerequisite = {
			focus = SPR_legion_espanola
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				has_civil_war = yes
				NOT = { has_completed_focus = SPR_a_catholic_army }
			}
		}
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_armada_espanola"
			random_owned_controlled_state = {
				limit = {
					is_coastal = yes
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
			navy_experience = 10
			add_doctrine_cost_reduction = {
				name = SPR_armada_espanola
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_NAVY_XP FOCUS_FILTER_NAVY_BONUS FOCUS_FILTER_RESEARCH }
	}

	focus = {# Merchant Marine
		id = SPR_upgrade_dockyards
		icon = GFX_goal_generic_buy_ships
		cost = 7

		relative_position_id = SPR_armada_espanola
		x = -1
		y = 1

		prerequisite = {
			focus = SPR_armada_espanola
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_upgrade_dockyards"
			add_ideas = ITA_merchant_marine_idea
		}
	}

	focus = {# Devoted Captains
		id = SPR_devoted_captains
		icon = GFX_goal_faith_and_state
		cost = 7

		relative_position_id = SPR_armada_espanola
		x = 1
		y = 1

		prerequisite = {
			focus = SPR_armada_espanola
		}

		ai_will_do = { factor = 30 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_devoted_captains"
			every_navy_leader = {
				add_skill_level = 1
				add_maneuver = 1
			}
		}
		search_filters = { FOCUS_FILTER_NAVY_XP }
	}

	focus = {# Infantería de marina
		id = SPR_infanteria_de_marina
		icon = GFX_goal_generic_marines2
		cost = 7

		relative_position_id = SPR_armada_espanola
		x = -5
		y = 3

		prerequisite = {
			focus = SPR_grand_navy
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_infanteria_de_marina"
			add_tech_bonus = {
				name = SPR_infanteria_de_marina
				bonus = 1
				uses = 1
				category = marine_tech
			}
			custom_effect_tooltip = tooltip_white_line
			enable_tech_marine_bonus = yes
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Grand Navy
		id = SPR_grand_navy
		icon = GFX_goal_generic_sea_focused_navy
		cost = 7

		relative_position_id = SPR_armada_espanola
		x = -3
		y = 2

		prerequisite = {
			focus = SPR_upgrade_dockyards
		}
		prerequisite = {
			focus = SPR_devoted_captains
		}
		mutually_exclusive = {
			focus = SPR_defend_the_coast
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_grand_navy"
			add_ideas = SPA_grand_navy_idea
			add_doctrine_cost_reduction = {
				name = SPA_grand_navy
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Modern Galleons
		id = SPR_modern_galleons
		icon = GFX_goal_generic_sea_focused_navy2
		cost = 7

		relative_position_id = SPR_armada_espanola
		x = -1
		y = 3

		prerequisite = {
			focus = SPR_grand_navy
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_modern_galleons"
			add_tech_bonus = {
				name = SPR_modern_galleons
				bonus = 1
				uses = 1
				category = ca_tech
				category = bb_tech
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Battle Cruiser Support
		id = SPR_battle_cruisers_support
		icon = GFX_goal_generic_navy_cruiser
		cost = 7

		relative_position_id = SPR_armada_espanola
		x = -3
		y = 3

		prerequisite = {
			focus = SPR_grand_navy
		}

		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_battle_cruisers_support"
			add_tech_bonus = {
				name = SPR_battle_cruisers_support
				bonus = 1
				uses = 2
				category = ca_tech
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Defend the Coast
		id = SPR_defend_the_coast
		icon = GFX_goal_generic_coastal_navy
		cost = 7

		relative_position_id = SPR_armada_espanola
		x = 3
		y = 2

		prerequisite = {
			focus = SPR_devoted_captains
		}
		prerequisite = {
			focus = SPR_upgrade_dockyards
		}
		mutually_exclusive = {
			focus = SPR_grand_navy
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_defend_the_coast"
			add_ideas = SPA_coastal_defence
			add_doctrine_cost_reduction = {
				name = SPA_defend_the_coast
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_NAVY_XP FOCUS_FILTER_NAVY_BONUS FOCUS_FILTER_RESEARCH }
	}

	focus = {# Coast Guard
		id = SPR_coast_guard
		icon = GFX_goal_generic_coastal_navy2
		cost = 7

		relative_position_id = SPR_armada_espanola
		x = 1
		y = 3

		prerequisite = {
			focus = SPR_defend_the_coast
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_coast_guard"
			add_tech_bonus = {
				name = SPR_coast_guard
				bonus = 1
				uses = 2
				category = dd_tech
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Cruiser Support
		id = SPR_cruiser_support
		icon = GFX_goal_EGY_sultan_fleet
		cost = 7

		relative_position_id = SPR_armada_espanola
		x = 3
		y = 3

		prerequisite = {
			focus = SPR_defend_the_coast
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_cruiser_support"
			add_tech_bonus = {
				name = SPR_cruiser_support
				bonus = 1
				uses = 2
				category = cl_tech
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Protect our Colonies
		id = SPR_protect_our_colonies
		icon = GFX_focus_generic_africa_naval
		cost = 7

		relative_position_id = SPR_armada_espanola
		x = 5
		y = 3

		prerequisite = {
			focus = SPR_defend_the_coast
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_protect_our_colonies"
			290 = {
				custom_override_tooltip = {
					add_building_construction = {
						type = coastal_bunker
						level = 3
						province = 9945
						instant_build = yes
					}
					tooltip = {
						localization_key = tooltip_add_building_on_victory_point
						BUILDING = coastal_bunker
						NUMBER = 3
						VP = 9945
					}
				}
				custom_override_tooltip = {
					add_building_construction = {
						type = coastal_bunker
						level = 3
						province = 13873
						instant_build = yes
					}
					tooltip = {
						localization_key = tooltip_add_building_on_victory_point
						BUILDING = coastal_bunker
						NUMBER = 3
						VP = 13873
					}
				}
			}
			297 = {
				custom_override_tooltip = {
					add_building_construction = {
						type = coastal_bunker
						level = 3
						province = 1903
						instant_build = yes
					}
					tooltip = {
						localization_key = tooltip_add_building_on_victory_point
						BUILDING = coastal_bunker
						NUMBER = 3
						VP = 1903
					}
				}
				add_building_construction = {
					type = bunker
					level = 2
					province = 8244
					instant_build = yes
				}
			}
			968 = {
				custom_override_tooltip = {
					add_building_construction = {
						type = bunker
						level = 2
						province = 12857
						instant_build = yes
					}
					tooltip = {
						localization_key = tooltip_add_building_on_victory_point
						BUILDING = bunker
						NUMBER = 2
						VP = 12857
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {# Masters of the Sea
		id = SPR_masters_of_the_sea
		icon = GFX_goal_generic_naval_academy
		cost = 7

		relative_position_id = SPR_armada_espanola
		x = 0
		y = 4

		prerequisite = {
			focus = SPR_battle_cruisers_support
			focus = SPR_cruiser_support
		}
		prerequisite = {
			focus = SPR_modern_galleons
			focus = SPR_coast_guard
		}

		ai_will_do = { factor = 30 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_masters_of_the_sea"
			add_doctrine_cost_reduction = {
				name = SPA_masters_of_the_sea
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
			}
			if = {
				limit = { has_idea = SPA_coastal_defence }
				swap_ideas = {
					remove_idea = SPA_coastal_defence
					add_idea = SPA_navy_focus_idea_coast
				}
			}
			else_if = {
				limit = { has_idea = SPA_grand_navy_idea }
				swap_ideas = {
					remove_idea = SPA_grand_navy_idea
					add_idea = SPA_navy_focus_idea_grand
				}
			}
			else = {
				custom_effect_tooltip = SPA_naval_idea_effect
			}
		}
		search_filters = { FOCUS_FILTER_NAVY_XP FOCUS_FILTER_NAVY_BONUS FOCUS_FILTER_RESEARCH }
	}

### Air Force

	focus = {# Aviación Legionaria
		id = SPR_aviacion_legionaria
		icon = GFX_goal_SPA_Airforce
		cost = 7

		x = 32
		y = 4

		prerequisite = {
			focus = SPR_legion_espanola
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				has_civil_war = yes
				NOT = { has_completed_focus = SPR_a_catholic_army }
			}
		}
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_aviacion_legionaria"
			air_experience = 10
			add_doctrine_cost_reduction = {
				name = SPR_aviacion_legionaria
				cost_reduction = 0.5
				uses = 2
				category = air_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_AIR_XP FOCUS_FILTER_RESEARCH FOCUS_FILTER_AIRFORCE_BONUS }
	}

	focus = {# Upgrade Airports
		id = SPR_upgrade_air_ports
		icon = GFX_goal_generic_build_airforce
		cost = 7

		relative_position_id = SPR_aviacion_legionaria
		x = -3
		y = 1

		prerequisite = {
			focus = SPR_aviacion_legionaria
		}
		available = {
			175 = { is_owned_and_controlled_by = ROOT }
			169 = { is_owned_and_controlled_by = ROOT }
			165 = { is_owned_and_controlled_by = ROOT }
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_upgrade_air_ports"
			175 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
			169 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
			165 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {# New Pilots
		id = SPR_new_pilots
		icon = GFX_goal_new_airforce
		cost = 7

		relative_position_id = SPR_aviacion_legionaria
		x = 4
		y = 2

		prerequisite = {
			focus = SPR_aviacion_legionaria
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_new_pilots"
			air_experience = 50
		}
		search_filters = { FOCUS_FILTER_AIR_XP }
	}

	focus = {# Aviation Industry
		id = SPR_aviation_industry
		icon = GFX_focus_generic_aircraft_production
		cost = 7

		relative_position_id = SPR_aviacion_legionaria
		x = 1
		y = 3

		prerequisite = {
			focus = SPR_fighters
			focus = SPR_bombers
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_aviation_industry"
			add_ideas = SPA_aviation_industry_idea
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {# Air Supremacy
		id = SPR_air_supremacy
		icon = GFX_goal_generic_air_fighter_new
		cost = 7

		relative_position_id = SPR_aviacion_legionaria
		x = -1
		y = 1

		prerequisite = {
			focus = SPR_aviacion_legionaria
		}
		mutually_exclusive = {
			focus = SPR_army_air_support
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_air_supremacy"
			add_ideas = SPA_air_supremacy_idea
			add_doctrine_cost_reduction = {
				name = SPR_air_supremacy
				cost_reduction = 0.5
				uses = 1
				category = air_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Fighter efforts
		id = SPR_fighters
		icon = GFX_goal_generic_air_jet_2
		cost = 7

		relative_position_id = SPR_aviacion_legionaria
		x = -2
		y = 2

		prerequisite = {
			focus = SPR_air_supremacy
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_fighters"
			add_tech_bonus = {
				name = SPR_fighters
				bonus = 0.5
				uses = 2
				category = light_fighter
				category = cat_heavy_fighter
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Army Air Support
		id = SPR_army_air_support
		icon = GFX_goal_generic_air_CAS_new
		cost = 7

		relative_position_id = SPR_aviacion_legionaria
		x = 1
		y = 1

		prerequisite = {
			focus = SPR_aviacion_legionaria
		}
		mutually_exclusive = {
			focus = SPR_air_supremacy
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_army_air_support"
			add_ideas = SPA_army_air_support_idea
			add_doctrine_cost_reduction = {
				name = SPR_army_air_support
				cost_reduction = 0.5
				uses = 1
				category = air_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Bomber Effort
		id = SPR_bombers
		icon = GFX_goal_generic_air_tactical_bomber_new
		cost = 7

		relative_position_id = SPR_aviacion_legionaria
		x = 2
		y = 2

		prerequisite = {
			focus = SPR_army_air_support
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_bombers"
			add_tech_bonus = {
				name = SPR_bombers
				bonus = 0.5
				uses = 2
				category = tactical_bomber
				category = cat_strategic_bomber
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = { #Request Foreign Planes
		id = SPR_foreign_airplanes
		icon = GFX_goal_ELS_Plane_Lease
		cost = 7

		relative_position_id = SPR_aviacion_legionaria
		x = 0
		y = 2

		prerequisite = {
			focus = SPR_air_supremacy
			focus = SPR_army_air_support
		}

		ai_will_do = { factor = 50 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_foreign_airplanes"
			if = {
				limit = { has_completed_focus = SPR_air_supremacy }
				if = {
					limit = { has_dlc_bba = yes }
					add_equipment_to_stockpile = {
						type = small_plane_airframe_0
						amount = 100
						producer = IMP
						variant_name = "Gloster Gladiator"
					}
				}
				else = {
					add_equipment_to_stockpile = {
						type = fighter_equipment_0
						amount = 100
						producer = IMP
					}
				}
			}
			else_if = {
				limit = { has_completed_focus = SPR_army_air_support }
				if = {
					limit = { has_dlc_bba = yes }
					add_equipment_to_stockpile = {
						type = small_plane_cas_airframe_0
						amount = 100
						producer = IMP
						variant_name = "Fairey Battle"
					}
				}
				else = {
					add_equipment_to_stockpile = {
						type = CAS_equipment_1
						amount = 100
						producer = IMP
					}
				}
			}
			else = {
				custom_effect_tooltip = SPA_foreign_airplanes_tt
			}
		}
	}

	focus = {# Voice of Heaven
		id = SPR_voice_of_heaven
		icon = GFX_goal_generic_radar_instillation
		cost = 7

		relative_position_id = SPR_aviacion_legionaria
		x = -1
		y = 3

		prerequisite = {
			focus = SPR_fighters
			focus = SPR_bombers
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_voice_of_heaven"
			add_breakthrough_progress = {
				specialization = specialization_air
				value = 0.5
			}
			custom_effect_tooltip = tooltip_white_line
			add_tech_bonus = {
				name = SPR_voice_of_heaven
				bonus = 1
				uses = 1
				category = radar_tech
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Paratroopers
		id = SPR_paratrooper_focus
		icon = GFX_focus_generic_paratrooper
		cost = 7

		relative_position_id = SPR_aviacion_legionaria
		x = 3
		y = 1

		prerequisite = {
			focus = SPR_aviacion_legionaria
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_paratrooper_focus"
			enable_tech_better_paratroopers = yes
			custom_effect_tooltip = tooltip_white_line
			add_tech_bonus = {
				name = SPR_paratrooper_focus
				bonus = 1
				uses = 1
				category = para_tech
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {# Colonial Airports
		id = SPR_colonial_air_ports
		icon = GFX_goal_generic_airports
		cost = 7

		relative_position_id = SPR_aviacion_legionaria
		x = -4
		y = 2

		prerequisite = {
			focus = SPR_upgrade_air_ports
		}
		available = {
			290 = { is_owned_and_controlled_by = ROOT }
			968 = { is_owned_and_controlled_by = ROOT }
			297 = { is_owned_and_controlled_by = ROOT }
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_colonial_air_ports"
			290 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
			968 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
			297 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {# Rule the Skies
		id = SPR_rule_the_skies
		icon = GFX_goal_air_armada
		cost = 7

		relative_position_id = SPR_aviacion_legionaria
		x = 0
		y = 4

		prerequisite = {
			focus = SPR_voice_of_heaven
		}
		prerequisite = {
			focus = SPR_aviation_industry
		}

		ai_will_do = { factor = 10 }
		completion_reward = {
			log = "[GetLogRoot]: Focus Completed SPR_rule_the_skies"
			air_experience = 10
			add_doctrine_cost_reduction = {
				name = SPA_rule_the_skies
				cost_reduction = 0.5
				uses = 1
				category = air_doctrine
			}
			if = {
				limit = { has_idea = SPA_air_supremacy_idea }
				swap_ideas = {
					remove_idea = SPA_air_supremacy_idea
					add_idea = SPA_rule_the_skies_fighters
				}
			}
			else_if = {
				limit = { has_idea = SPA_army_air_support_idea }
				swap_ideas = {
					remove_idea = SPA_army_air_support_idea
					add_idea = SPA_rule_the_skies_cas
				}
			}
			else_if = {
				limit = {
					NOT = {
						has_idea = SPA_rule_the_skies_fighters
						has_idea = SPA_rule_the_skies_cas
					}
				}
				custom_effect_tooltip = SPA_air_idea_effect
			}
		}
		search_filters = { FOCUS_FILTER_AIR_XP FOCUS_FILTER_RESEARCH FOCUS_FILTER_AIRFORCE_BONUS }
	}
}

