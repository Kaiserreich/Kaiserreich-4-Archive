###########################
# South Africa Shared Focus Tree
# By Thomahawk2k and Chazem231
###########################

shared_focus = {
	id = SAF_black_monday_crisis
	icon = GFX_focus_empty_coffers
	cost = 5

	x = 1
	y = 0

	available = {
		SAF_has_black_monday = yes
		has_civil_war = no
	}
	bypass = {
		date > 1937.1.1
		SAF_has_black_monday = no
	}
	allow_branch = {
		if = {
			limit = { has_focus_tree = natal_focus }
			always = no
		}
		else = {
			has_socialist_government = no
		}
	}
	select_effect = {
		log = "[GetDateText]: [Root.GetName]: Select Focus SAF_black_monday_crisis"
		country_event = { id = saf.4 days = 10 }
	}

	ai_will_do = { factor = 1000 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_black_monday_crisis"
		custom_effect_tooltip = SWE_tt_fix_black_monday_decisions
		hidden_effect = {
			set_variable = { saf_var_budget = 4 }
			set_variable = { saf_var_inflation = 0 }
			set_variable = { saf_var_unemployment = 0.3 }
			clamp_variable = {
				var = saf_var_unemployment
				min = 0
				max = 1
			}
			set_variable = { saf_var_debt = 0 }
			activate_targeted_decision = { target = THIS decision = SAF_print_extra_money }
			activate_targeted_decision = { target = THIS decision = SAF_cut_abandonment_of_the_gold_standard }
			activate_targeted_decision = { target = THIS decision = SAF_counter_inflation }
			activate_targeted_decision = { target = THIS decision = SAF_take_a_loan }
			activate_targeted_decision = { target = THIS decision = SAF_repay_a_loan }
			activate_targeted_decision = { target = THIS decision = SAF_cut_funding_on_military }
			activate_targeted_decision = { target = THIS decision = SAF_raise_taxes }
			activate_targeted_decision = { target = THIS decision = SAF_subsidize_resource_exports }
			activate_targeted_decision = { target = THIS decision = SAF_nationalize_company }
			activate_targeted_decision = { target = THIS decision = SAF_implement_tariffs }
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_repeal_industrial_conciliation_act
	icon = GFX_goal_state_economy
	cost = 10

	relative_position_id = SAF_black_monday_crisis
	x = -1
	y = 1

	ai_will_do = {
		factor = 1000
		modifier = {
			factor = 0
			OR = {
				has_game_rule = { rule = SAF_path option = SAF_PATH_UNITED_AUTDEM }
				has_game_rule = { rule = SAF_path option = SAF_PATH_UNITED_SOCCON }
				has_game_rule = { rule = SAF_path option = SAF_PATH_UNITED_SOCLIB }
				has_game_rule = { rule = SAF_path option = SAF_PATH_AUTDEM }
			}
		}
	}
	available = {
		NOT = {
			has_country_flag = saf_flag_lack_majority_volksraad
			has_country_flag = saf_flag_gave_in_to_strikers
		}
		has_elected_government = yes
	}
	bypass = {
		SAF_has_black_monday = no
	}
	select_effect = {
		log = "[GetDateText]: [Root.GetName]: Select Focus SAF_repeal_industrial_conciliation_act"
		country_event = { id = saf.14 days = 2 }
	}

	mutually_exclusive = {
		focus = SAF_establish_work_programs
	}
	prerequisite = {
		focus = SAF_black_monday_crisis
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_repeal_industrial_conciliation_act"
		add_political_power = -50
		activate_targeted_decision = { target = THIS decision = SAF_soften_the_colour_bar }
	}
	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = SAF_attract_canadian_investment
	icon = GFX_goal_canada
	cost = 8

	relative_position_id = SAF_black_monday_crisis
	x = -1
	y = 2

	bypass = {
		OR = {
			SAF_has_black_monday = no
			NOT = { is_in_faction_with = CAN }
		}
	}

	ai_will_do = { factor = 100 }

	prerequisite = {
		focus = SAF_repeal_industrial_conciliation_act
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_attract_canadian_investment"
		CAN = { country_event = { id = saf.23 days = 2 } }
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_weaken_the_colour_bar
	icon = GFX_goal_conspiracy
	cost = 8

	relative_position_id = SAF_black_monday_crisis
	x = 0
	y = 3

	available = {
		custom_trigger_tooltip = {
			tooltip = saf_tt_unemployment_below_16
			check_variable = {
				var = saf_var_unemployment
				value = 0.16
				compare = less_than_or_equals
			}
		}
	}
	bypass = {
		SAF_has_black_monday = no
	}

	prerequisite = {
		focus = SAF_attract_canadian_investment
		focus = SAF_bail_out_farmers
	}

	ai_will_do = { factor = 100 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_weaken_the_colour_bar"
		swap_ideas = {
			remove_idea = SAF_black_monday_0
			add_idea = SAF_black_monday_1
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_invest_in_witwatersrand_industry
	icon = GFX_goal_factory_complex
	cost = 8

	relative_position_id = SAF_black_monday_crisis
	x = 0
	y = 4

	available = {
		custom_trigger_tooltip = {
			tooltip = saf_tt_unemployment_below_12
			check_variable = {
				var = saf_var_unemployment
				value = 0.12
				compare = less_than_or_equals
			}
		}
	}
	bypass = {
		SAF_has_black_monday = no
	}

	prerequisite = {
		focus = SAF_weaken_the_colour_bar
	}

	ai_will_do = { factor = 100 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_invest_in_witwatersrand_industry"
		swap_ideas = {
			remove_idea = SAF_black_monday_1
			add_idea = SAF_black_monday_2
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_establish_work_programs
	icon = GFX_goal_production
	cost = 10

	relative_position_id = SAF_black_monday_crisis
	x = 1
	y = 1

	available = {
		NOT = { has_country_flag = saf_flag_lack_majority_volksraad }
	}
	bypass = {
		SAF_has_black_monday = no
	}

	mutually_exclusive = {
		focus = SAF_repeal_industrial_conciliation_act
	}
	prerequisite = {
		focus = SAF_black_monday_crisis
	}

	ai_will_do = {
		factor = 1000
		modifier = {
			factor = 0
			OR = {
				has_game_rule = { rule = SAF_path option = SAF_PATH_RADSOC }
				has_game_rule = { rule = SAF_path option = SAF_PATH_SYNDIE }
				has_game_rule = { rule = SAF_path option = SAF_PATH_TOTALIST }
			}
		}
	}

	select_effect = {
		log = "[GetDateText]: [Root.GetName]: Select Focus SAF_establish_work_programs"
		country_event = { id = saf.5 days = 7 }
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_establish_work_programs"
		random_owned_controlled_state = {
			prioritize = { 545 }
			limit = {
				is_claim_or_core_of_ROOT = yes
				is_valid_state_for_development = yes
				free_building_slots = { building = infrastructure size > 0 include_locked = yes }
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
		random_owned_controlled_state = {
			prioritize = { 945 }
			limit = {
				is_claim_or_core_of_ROOT = yes
				is_valid_state_for_development = yes
				free_building_slots = { building = infrastructure size > 0 include_locked = yes }
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
		custom_effect_tooltip = tooltip_white_line
		activate_targeted_decision = { target = THIS decision = SAF_public_work_program }
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_bail_out_farmers
	icon = GFX_focus_generic_treaty
	cost = 8

	relative_position_id = SAF_black_monday_crisis
	x = 1
	y = 2

	bypass = {
		SAF_has_black_monday = no
	}

	ai_will_do = { factor = 100 }

	prerequisite = {
		focus = SAF_establish_work_programs
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_bail_out_farmers"
		add_timed_idea = {
			idea = SAF_farmer_bailout
			days = 180
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_complete_recovery
	icon = GFX_goal_generic_consumer_goods
	cost = 8

	relative_position_id = SAF_black_monday_crisis
	x = 0
	y = 5

	available = {
		custom_trigger_tooltip = {
			tooltip = SWE_tt_no_extreme_inflation
			check_variable = {
				var = saf_var_inflation
				value = 0.08
				compare = less_than
			}
		}
		custom_trigger_tooltip = {
			tooltip = SAF_tt_no_extreme_debt
			check_variable = {
				var = saf_var_debt
				value = 10
				compare = less_than
			}
		}
		custom_trigger_tooltip = {
			tooltip = saf_tt_unemployment_below_8
			check_variable = {
				var = saf_var_unemployment
				value = 0.08
				compare = less_than_or_equals
			}
		}
	}
	bypass = {
		SAF_has_black_monday = no
	}

	ai_will_do = { factor = 100 }

	prerequisite = {
		focus = SAF_invest_in_witwatersrand_industry
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_complete_recovery"
		custom_effect_tooltip = SWE_tt_decisions_will_be_removed
		remove_ideas = SAF_black_monday_2
		hidden_effect = {
			SAF_teardown_black_monday_decisions = yes
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_deal_with_the_protectorates
	icon = GFX_goal_new_treaty
	cost = 8

	relative_position_id = SAF_black_monday_crisis
	x = 6
	y = 0

	allow_branch = {
		if = {
			limit = { has_focus_tree = natal_focus }
			always = no
		}
	}

	offset = {
		x = -2
		y = 0
		trigger = { has_focus_tree = SAF_federation_focus }
	}

	available = {
		if = {
			limit = { has_focus_tree = SAF_federation_focus }
			has_civil_war = no
		}
		else = {
			OR = {
				has_country_flag = saf_flag_elections_held
				is_subject = yes
			}
		}
	}

	ai_will_do = { factor = 200 }

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_deal_with_the_protectorates"
		add_stability = 0.1
		add_political_power = 100
	}
	search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = SAF_establish_nuweveld
	icon = GFX_goal_skull_treaty
	cost = 2

	relative_position_id = SAF_black_monday_crisis
	x = 4
	y = 1

	allow_branch = {
		has_focus_tree = SAF_focus
	}
	available = {
		has_authoritarian_government = yes
		has_civil_war = no
	}
	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_deal_with_the_protectorates
	}
	mutually_exclusive = {
		focus = SAF_empower_paramount_chiefs
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_establish_nuweveld"
		add_stability = -0.1
		country_event = saf.56
		unlock_decision_category_tooltip = SAF_nuweveld_decisions
		custom_effect_tooltip = tooltip_white_line
		custom_effect_tooltip = remove_political_advisor
		show_ideas_tooltip = SAF_william_henry_clark
		hidden_effect = {
			activate_mission = SAF_yearly_nuweveld_report
			activate_targeted_decision = { target = THIS decision = SAF_campaign_against_tswana_insurgents }
			activate_targeted_decision = { target = THIS decision = SAF_increase_settler_attraction }
			activate_targeted_decision = { target = HOL decision = SAF_ask_for_permission_to_recruit_settlers }
			if = {
				limit = { FLA = { exists = yes } }
				activate_targeted_decision = { target = FLA decision = SAF_ask_for_permission_to_recruit_settlers }
			}
			if = {
				limit = { BEL = { exists = yes } }
				activate_targeted_decision = { target = BEL decision = SAF_ask_for_permission_to_recruit_settlers }
			}
			if = {
				limit = { MAF = { exists = yes } }
				activate_targeted_decision = { target = MAF decision = SAF_ask_for_permission_to_recruit_settlers }
			}
			set_variable = { SAF_whites_in_botswana = 7028 }
			set_variable = { SAF_settling_attractiveness = 0.02 }
			country_event = { id = saf.61 days = 100 }
			country_event = { id = saf.178 days = 50 random_days = 25 }
			if = {
				limit = {
					is_in_faction_with = IMP
					IMP = {
						is_monarchy = yes
						is_subject = no
					}
				}
				IMP = { country_event = { id = saf.66 days = 20 } }
			}
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = SAF_encourage_farmer_resettlement
	icon = GFX_goal_generic_position_armies
	cost = 8

	relative_position_id = SAF_black_monday_crisis
	x = 3
	y = 2

	available = {
		controls_state = 542
		has_civil_war = no
	}

	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_establish_nuweveld
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_encourage_farmer_resettlement"
		add_to_variable = {
			SAF_settling_attractiveness = 0.02
			tooltip = SAF_tt_settler_attractiveness
		}
		custom_effect_tooltip = tooltip_white_line
		542 = { add_manpower = 700 }
		add_to_variable = { SAF_whites_in_botswana = 700 }
	}
}

shared_focus = {
	id = SAF_long_term_investment_loans
	icon = GFX_goal_planning_bonus
	cost = 8

	relative_position_id = SAF_black_monday_crisis
	x = 3
	y = 3

	available = {
		controls_state = 542
		has_civil_war = no
	}

	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_encourage_farmer_resettlement
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_long_term_investment_loans"
		add_to_variable = {
			SAF_settling_attractiveness = 0.05
			tooltip = SAF_tt_settler_attractiveness
		}
		custom_effect_tooltip = tooltip_white_line
		add_political_power = 25
	}
}

shared_focus = {
	id = SAF_build_the_kariba_dam
	icon = GFX_goal_dam
	cost = 8

	relative_position_id = SAF_black_monday_crisis
	x = 3
	y = 4

	available = {
		controls_state = 545
		has_civil_war = no
	}
	bypass = {
		NOT = { owns_state = 545 }
		NOT = { has_war_with = ZIM }
	}

	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_long_term_investment_loans
	}
	prerequisite = {
		focus = SAF_new_towns_and_villages
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_build_the_kariba_dam"
		random_owned_controlled_state = {
			prioritize = { 542 }
			limit = {
				is_claim_or_core_of_ROOT = yes
				is_valid_state_for_development = yes
				free_building_slots = { building = infrastructure size > 0 include_locked = yes }
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
		custom_effect_tooltip = tooltip_white_line
		activate_targeted_decision = { target = THIS decision = SAF_dec_build_the_kariba_dam }
	}
}

shared_focus = {
	id = SAF_annex_the_protectorates
	icon = GFX_focus_renounce_the_treaty_of_trianon
	cost = 8

	relative_position_id = SAF_black_monday_crisis
	x = 4
	y = 5

	available = {
		controls_state = 85
		controls_state = 738
		has_civil_war = no
	}
	bypass = {
		NOT = { owns_state = 85 }
		NOT = { owns_state = 738 }
	}

	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_build_the_kariba_dam
	}
	prerequisite = {
		focus = SAF_diversified_territorial_economy
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_annex_the_protectorates"
		85 = {
			clr_state_flag = SAF_the_empire_strikes_back
			clr_state_flag = SAF_protectorate_modifier
			if = {
				limit = { has_dynamic_modifier = { modifier = SAF_protectorate } }
				remove_dynamic_modifier = { modifier = SAF_protectorate }
				custom_effect_tooltip = tooltip_white_line
			}
		}
		738 = {
			clr_state_flag = SAF_the_empire_strikes_back
			clr_state_flag = SAF_protectorate_modifier
			if = {
				limit = { has_dynamic_modifier = { modifier = SAF_protectorate } }
				remove_dynamic_modifier = { modifier = SAF_protectorate }
			}
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = SAF_stellaland_affairs_act
	icon = GFX_goal_generic_demand_territory
	cost = 8

	relative_position_id = SAF_black_monday_crisis
	x = 4
	y = 6

	available = {
		custom_trigger_tooltip = {
			tooltip = saf_flag_nuweveld_completed
			check_variable = { SAF_whites_in_botswana > 29999 }
		}
		controls_state = 542
		has_civil_war = no
	}

	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_annex_the_protectorates
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_stellaland_affairs_act"
		add_political_power = 25
		542 = {
			add_core_of = ROOT
			set_state_name = STATE_542_BOER
		}
		if = {
			limit = {
				has_country_flag = saf_national_turned_pataut
			}
			add_popularity = { ideology = paternal_autocrat popularity = 0.02 }
		}
		else_if = {
			limit = {
				has_completed_focus = SAF_reorganise_the_national_party
			}
			add_popularity = { ideology = national_populist popularity = 0.02 }
		}
		else = {
			add_popularity = { ideology = authoritarian_democrat popularity = 0.02 }
		}
		hidden_effect = {
			country_event = { id = saf.316 days = 90 random_days = 30 }
			SAF_teardown_nuweveld_decisions = yes
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = SAF_expand_nuweveld_infra
	icon = GFX_goal_KTG_Jungle_Railroad
	cost = 8

	relative_position_id = SAF_black_monday_crisis
	x = 5
	y = 2

	available = {
		controls_state = 542
		has_civil_war = no
	}

	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_establish_nuweveld
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_expand_nuweveld_infra"
		add_to_variable = {
			SAF_settling_attractiveness = 0.02
			tooltip = SAF_tt_settler_attractiveness
		}
		custom_effect_tooltip = tooltip_white_line
		random_owned_controlled_state = {
			prioritize = { 542 }
			limit = {
				is_claim_or_core_of_ROOT = yes
				is_valid_state_for_development = yes
				free_building_slots = { building = infrastructure size > 0 include_locked = yes }
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
	}
}

shared_focus = {
	id = SAF_new_towns_and_villages
	icon = GFX_goal_construction
	cost = 8

	relative_position_id = SAF_black_monday_crisis
	x = 5
	y = 3

	available = {
		controls_state = 542
		has_civil_war = no
	}

	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_expand_nuweveld_infra
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_new_towns_and_villages"
		add_to_variable = {
			SAF_settling_attractiveness = 0.05
			tooltip = SAF_tt_settler_attractiveness
		}
		custom_effect_tooltip = tooltip_white_line
		542 = { increase_state_category_by_one_level = yes }
	}
}

shared_focus = {
	id = SAF_diversified_territorial_economy
	icon = GFX_goal_agricultural_aid
	cost = 8

	relative_position_id = SAF_black_monday_crisis
	x = 5
	y = 4

	available = {
		542 = { is_owned_and_controlled_by = ROOT }
		has_civil_war = no
	}

	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_long_term_investment_loans
	}
	prerequisite = {
		focus = SAF_new_towns_and_villages
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_diversified_territorial_economy"
		random_owned_controlled_state = {
			prioritize = { 545 }
			limit = {
				is_claim_or_core_of_ROOT = yes
				is_valid_state_for_development = yes
				free_building_slots = { building = industrial_complex size > 0 include_locked = yes }
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		custom_effect_tooltip = tooltip_white_line
		activate_targeted_decision = { target = THIS decision = SAF_develop_orange_free_state_steel_mines }
		activate_targeted_decision = { target = THIS decision = SAF_develop_rhodesia_steel_mines }
	}
}

shared_focus = {
	id = SAF_empower_paramount_chiefs
	icon = GFX_focus_RAJ_indian_gentlemen_offcers
	cost = 2

	relative_position_id = SAF_deal_with_the_protectorates
	x = 2
	y = 1

	offset = {
		x = -2
		y = 0
		trigger = { has_focus_tree = SAF_federation_focus }
	}

	available = {
		if = {
			limit = { has_focus_tree = SAF_focus }
			has_elected_government = yes
		}
		has_civil_war = no
	}

	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_deal_with_the_protectorates
	}
	mutually_exclusive = {
		focus = SAF_establish_nuweveld
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_empower_paramount_chiefs"
		add_political_power = 50
		add_stability = 0.1
		SAF_reform_segregation_1 = yes
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = SAF_develop_basutoland_swaziland
	icon = GFX_goal_generic_foreign_investments
	cost = 8

	relative_position_id = SAF_empower_paramount_chiefs
	x = -1
	y = 1

	available = {
		controls_state = 85
		controls_state = 738
		has_civil_war = no
	}

	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_empower_paramount_chiefs
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_develop_basutoland_swaziland"
		random_owned_controlled_state = {
			prioritize = { 85 }
			limit = {
				is_claim_or_core_of_ROOT = yes
				is_valid_state_for_development = yes
				free_building_slots = { building = industrial_complex size > 0 include_locked = yes }
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		random_owned_controlled_state = {
			prioritize = { 738 }
			limit = {
				is_claim_or_core_of_ROOT = yes
				is_valid_state_for_development = yes
				free_building_slots = { building = industrial_complex size > 0 include_locked = yes }
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_develop_bechuanaland
	icon = GFX_goal_generic_loans
	cost = 8

	relative_position_id = SAF_empower_paramount_chiefs
	x = 1
	y = 1

	available = {
		controls_state = 542
		has_civil_war = no
	}

	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_empower_paramount_chiefs
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_develop_bechuanaland"
		random_owned_controlled_state = {
			prioritize = { 542 }
			limit = {
				is_claim_or_core_of_ROOT = yes
				is_valid_state_for_development = yes
				free_building_slots = { building = industrial_complex size > 0 include_locked = yes }
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		build_railway = {
			start_province = 4859
			target_province = 8214
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_root_out_slavery
	icon = GFX_focus_generic_concessions
	cost = 8

	relative_position_id = SAF_develop_basutoland_swaziland
	x = 1
	y = 1

	available = {
		has_civil_war = no
	}
	bypass = {
		NOT = { has_idea = SAF_idea_slavery }
	}
	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_develop_bechuanaland
	}
	prerequisite = {
		focus = SAF_develop_basutoland_swaziland
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_root_out_slavery"
		add_political_power = 60
		remove_ideas = SAF_idea_slavery
	}
	search_filters = { FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = SAF_question_of_native_autonomy
	icon = GFX_focus_generic_self_management
	cost = 8

	relative_position_id = SAF_root_out_slavery
	x = 0
	y = 1

	available = {
		has_civil_war = no
	}

	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_root_out_slavery
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_question_of_native_autonomy"
		country_event = saf.11
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = SAF_strengthen_advisory_councils
	icon = GFX_goal_constitutional_guarantees
	cost = 8

	relative_position_id = SAF_question_of_native_autonomy
	x = -1
	y = 1

	available = {
		has_civil_war = no
	}

	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_question_of_native_autonomy
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_strengthen_advisory_councils"
		add_political_power = 100
		add_ideas = SAF_idea_native_advisory_councils
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_RESISTANCE }
}

shared_focus = {
	id = SAF_chief_justice_of_the_high_commissioner_territories
	icon = GFX_goal_DOM_The_Trial
	cost = 8

	relative_position_id = SAF_question_of_native_autonomy
	x = 1
	y = 1

	available = {
		has_civil_war = no
	}

	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_question_of_native_autonomy
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_chief_justice_of_the_high_commissioner_territories"
		add_ideas = SAF_idea_cj_of_the_hct
		hidden_effect = { country_event = saf.26 }
	}
}

shared_focus = {
	id = SAF_reform_the_commissioner_system
	icon = GFX_focus_chi_british_cooperation
	cost = 8

	relative_position_id = SAF_strengthen_advisory_councils
	x = 1
	y = 1

	available = {
		has_civil_war = no
	}
	ai_will_do = { factor = 100 }
	prerequisite = {
		focus = SAF_chief_justice_of_the_high_commissioner_territories
	}
	prerequisite = {
		focus = SAF_strengthen_advisory_councils
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_reform_the_commissioner_system"
		if = {
			limit = {
				is_in_faction_with = event_target:KR_king_base
				NOT = { tag = event_target:KR_king_base }
			}
			event_target:KR_king_base = { country_event = saf.27 }
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				85 = { remove_dynamic_modifier = { modifier = SAF_protectorate } }
				custom_effect_tooltip = tooltip_white_line
				738 = { remove_dynamic_modifier = { modifier = SAF_protectorate } }
			}
		}
		else = {
			85 = {
				clr_state_flag = SAF_the_empire_strikes_back
				clr_state_flag = SAF_protectorate_modifier
				if = {
					limit = { has_dynamic_modifier = { modifier = SAF_protectorate } }
					remove_dynamic_modifier = { modifier = SAF_protectorate }
					custom_effect_tooltip = tooltip_white_line
				}
			}
			542 = { clr_state_flag = SAF_the_empire_strikes_back }
			738 = {
				clr_state_flag = SAF_the_empire_strikes_back
				clr_state_flag = SAF_protectorate_modifier
				if = {
					limit = { has_dynamic_modifier = { modifier = SAF_protectorate } }
					remove_dynamic_modifier = { modifier = SAF_protectorate }
				}
			}
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = SAF_found_sabc
	icon = GFX_EGY_Radio_Free_Cairo
	cost = 8

	x = 24
	y = 0

	ai_will_do = { factor = 75 }

	allow_branch = {
		if = {
			limit = { has_focus_tree = natal_focus }
			always = no
		}
	}

	offset = {
		x = -4
		y = 0
		trigger = { has_focus_tree = SAF_federation_focus }
	}
	offset = {
		x = -5
		y = 0
		trigger = {
			has_focus_tree = SAF_socialist_focus
			NOT = { has_government = totalist }
		}
	}
	offset = {
		x = -3
		y = 0
		trigger = {
			has_focus_tree = SAF_socialist_focus
			has_government = totalist
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_found_sabc"
		add_political_power = 50
		add_ideas = SAF_sabc_idea
		if = {
			limit = { NOT = { has_tech = radio } }
			set_technology = { radio = 1 }
		}
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = SAF_south_african_gold
	icon = GFX_focus_usa_reestablish_the_gold_standard
	cost = 8

	relative_position_id = SAF_found_sabc
	x = -3
	y = 1

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_found_sabc
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_south_african_gold"
		add_ideas = SAF_african_gold_idea
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_form_mathematical_society
	icon = GFX_goal_brain
	cost = 8

	relative_position_id = SAF_found_sabc
	x = 0
	y = 2

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_focus_on_agricultural_expansion
		focus = SAF_focus_on_manufacturing
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_form_mathematical_society"
		add_ideas = SAF_idea_sa_mathematical_society
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = SAF_expand_university_funding
	icon = GFX_focus_research2
	cost = 8

	relative_position_id = SAF_found_sabc
	x = 3
	y = 1

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_found_sabc
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_expand_university_funding"
		add_research_slot_until_five = yes
		if = {
			limit = {
				has_socialist_government = no
				NOT = {
					has_country_flag = saf_flag_elections_held
					has_focus_tree = SAF_federation_focus
				}
			}
			country_event = saf.321
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = SAF_focus_on_agricultural_expansion
	icon = GFX_goal_agriculture2
	cost = 8
	dynamic = yes

	relative_position_id = SAF_found_sabc
	x = -1
	y = 1

	available = {
		SAF_has_black_monday = no
	}

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_found_sabc
	}
	mutually_exclusive = {
		focus = SAF_focus_on_manufacturing
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_focus_on_agricultural_expansion"
		add_ideas = SAF_idea_agrarian_focus
	}
	search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_ARMY_BONUS }
}

shared_focus = {
	id = SAF_subsidized_farming
	icon = GFX_goal_agricultural_policies
	cost = 8
	dynamic = yes

	relative_position_id = SAF_focus_on_agricultural_expansion
	x = -1
	y = 1

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_focus_on_agricultural_expansion
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_subsidized_farming"
		swap_ideas = { add_idea = SAF_idea_agrarian_focus_2 remove_idea = SAF_idea_agrarian_focus }
	}
}

shared_focus = {
	id = SAF_support_cape_wineries
	icon = GFX_goal_SAF_wine
	cost = 8

	relative_position_id = SAF_subsidized_farming
	x = -1
	y = 2

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_subsidized_farming
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_support_cape_wineries"
		swap_ideas = { add_idea = SAF_idea_agrarian_focus_3 remove_idea = SAF_idea_agrarian_focus_2 }
	}
	search_filters = { FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = SAF_encourage_sharecropping
	icon = GFX_goal_agrarian_reform
	cost = 8
	dynamic = yes

	relative_position_id = SAF_support_cape_wineries
	x = 0
	y = 1

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_support_cape_wineries
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_encourage_sharecropping"
		swap_ideas = { add_idea = SAF_idea_agrarian_focus_4 remove_idea = SAF_idea_agrarian_focus_3 }
		activate_targeted_decision = { target = 681 decision = SAF_invest_cape_town }
		activate_targeted_decision = { target = 719 decision = SAF_invest_durban }
		activate_targeted_decision = { target = 275 decision = SAF_invest_witwatersrand }
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_help_small_farming_communities
	icon = GFX_goal_generic_loans
	cost = 8

	relative_position_id = SAF_subsidized_farming
	x = 1
	y = 1

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_subsidized_farming
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_help_small_farming_communities"
		add_political_power = 100
		add_stability = 0.1
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = SAF_industrial_farming_equipment
	icon = GFX_goal_generic_agriculture2
	cost = 8

	relative_position_id = SAF_help_small_farming_communities
	x = 0
	y = 1

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_help_small_farming_communities
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_industrial_farming_equipment"
		add_ideas = SAF_industrial_farming
		custom_effect_tooltip = tooltip_white_line
		activate_targeted_decision = { target = 681 decision = SAF_establish_idc_factory_cape_town }
		activate_targeted_decision = { target = 719 decision = SAF_establish_idc_factory_durban }
		activate_targeted_decision = { target = 275 decision = SAF_establish_idc_factory_johannesburg }
		activate_targeted_decision = { target = 545 decision = SAF_establish_idc_factory_salisbury }
	}
	search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_granary_of_africa
	icon = GFX_focus_AUS_agriculture
	cost = 8

	relative_position_id = SAF_encourage_sharecropping
	x = 1
	y = 1

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_industrial_farming_equipment
	}
	prerequisite = {
		focus = SAF_encourage_sharecropping
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_granary_of_africa"
		swap_ideas = { add_idea = SAF_idea_granary_of_africa remove_idea = SAF_idea_agrarian_focus_4 }
		activate_targeted_decision = { target = THIS decision = SAF_develop_northern_cape_steel_mines }
		activate_targeted_decision = { target = THIS decision = SAF_develop_transvaal_steel_mines }
	}
	search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = SAF_focus_on_manufacturing
	icon = GFX_goal_generic_production2
	cost = 8

	relative_position_id = SAF_found_sabc
	x = 1
	y = 1

	available = {
		SAF_has_black_monday = no
	}

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_found_sabc
	}
	mutually_exclusive = {
		focus = SAF_focus_on_agricultural_expansion
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_focus_on_manufacturing"
		add_ideas = SAF_idea_industrial_focus
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_manufacturing_expansion_plan
	icon = GFX_goal_generic_improve_industry
	cost = 8

	relative_position_id = SAF_focus_on_manufacturing
	x = 1
	y = 1

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_focus_on_manufacturing
	}
	bypass = {
		NOT = { has_character = SAF_hendrik_johannes_van_der_bijl }
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_manufacturing_expansion_plan"
		add_tech_bonus = {
			name = SAF_manufacturing_expansion_plan
			bonus = 1.0
			ahead_reduction = 2
			uses = 1
			category = industry
		}
		custom_effect_tooltip = tooltip_white_line
		custom_effect_tooltip = available_political_advisor
		show_ideas_tooltip = SAF_hendrik_johannes_van_der_bijl
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_form_idc_of_south_africa
	icon = GFX_goal_generic_construction
	cost = 8
	dynamic = yes

	relative_position_id = SAF_manufacturing_expansion_plan
	x = -1
	y = 1

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_manufacturing_expansion_plan
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_form_idc_of_south_africa"
		add_tech_bonus = {
			name = SAF_form_idc_of_south_africa
			bonus = 1
			uses = 1
			category = construction_tech
		}
		custom_effect_tooltip = tooltip_white_line
		activate_targeted_decision = { target = 681 decision = SAF_establish_idc_factory_cape_town }
		activate_targeted_decision = { target = 719 decision = SAF_establish_idc_factory_durban }
		activate_targeted_decision = { target = 275 decision = SAF_establish_idc_factory_johannesburg }
		activate_targeted_decision = { target = 545 decision = SAF_establish_idc_factory_salisbury }
	}
	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = SAF_recruit_native_labour
	icon = GFX_goal_workers_for_business
	cost = 8
	dynamic = yes

	relative_position_id = SAF_form_idc_of_south_africa
	x = 0
	y = 1

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_form_idc_of_south_africa
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_recruit_native_labour"
		swap_ideas = { add_idea = SAF_idea_industrial_focus_1 remove_idea = SAF_idea_industrial_focus }
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_support_iscor_expansion
	icon = GFX_goal_economic_control
	cost = 8
	dynamic = yes

	relative_position_id = SAF_manufacturing_expansion_plan
	x = 1
	y = 2

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_manufacturing_expansion_plan
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_support_iscor_expansion"
		add_tech_bonus = {
			name = SAF_support_iscor_expansion
			bonus = 1
			uses = 1
			category = cat_production
		}
		custom_effect_tooltip = tooltip_white_line
		activate_targeted_decision = { target = THIS decision = SAF_develop_northern_cape_steel_mines }
		activate_targeted_decision = { target = THIS decision = SAF_develop_transvaal_steel_mines }
		activate_targeted_decision = { target = 681 decision = SAF_invest_cape_town }
		activate_targeted_decision = { target = 719 decision = SAF_invest_durban }
		activate_targeted_decision = { target = 275 decision = SAF_invest_witwatersrand }
	}
	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = SAF_vanderbijlparks_steelworks
	icon = GFX_focus_generic_steel
	cost = 8
	dynamic = yes

	relative_position_id = SAF_support_iscor_expansion
	x = 0
	y = 1

	ai_will_do = { factor = 75 }
	available = {
		controls_state = 275
	}
	prerequisite = {
		focus = SAF_support_iscor_expansion
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_vanderbijlparks_steelworks"
		add_resource = {
			type = steel
			amount = 15
			state = 275
		}
		custom_effect_tooltip = tooltip_white_line
		activate_targeted_decision = { target = 275 decision = SAF_expand_vanderbijlspark }
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_great_repairshop
	icon = GFX_goal_generic_construct_civ_factory
	cost = 8

	relative_position_id = SAF_vanderbijlparks_steelworks
	x = -1
	y = 1

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_recruit_native_labour
	}
	prerequisite = {
		focus = SAF_vanderbijlparks_steelworks
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_great_repairshop"
		swap_ideas = { add_idea = SAF_idea_great_repairshop remove_idea = SAF_idea_industrial_focus_1 }
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_industrial_innovation
	icon = GFX_goal_great_science
	cost = 8

	relative_position_id = SAF_form_mathematical_society
	x = 0
	y = 3

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_form_mathematical_society
	}
	prerequisite = {
		focus = SAF_industrial_farming_equipment
		focus = SAF_recruit_native_labour
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_industrial_innovation"
		add_research_slot_until_five = yes
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = SAF_post_war_boom
	icon = GFX_focus_mex_privatisation
	cost = 8
	dynamic = yes

	relative_position_id = SAF_industrial_innovation
	x = 0
	y = 2

	ai_will_do = { factor = 75 }
	prerequisite = {
		focus = SAF_industrial_innovation
	}
	prerequisite = {
		focus = SAF_granary_of_africa
		focus = SAF_great_repairshop
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_post_war_boom"
		add_ideas = SAF_idea_economic_boom
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = SAF_military_expansion
	icon = GFX_goal_SAF_army
	cost = 6

	x = 15
	y = 8

	allow_branch = {
		if = {
			limit = { has_focus_tree = natal_focus }
			always = no
		}
	}

	offset = {
		x = -5
		y = 1
		trigger = {
			OR = {
				has_focus_tree = SAF_federation_focus
				has_focus_tree = SAF_socialist_focus
			}
		}
	}

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_military_expansion"
		army_experience = 25
		navy_experience = 25
		air_experience = 25
	}
	search_filters = { FOCUS_FILTER_ARMY_XP FOCUS_FILTER_NAVY_XP FOCUS_FILTER_AIR_XP }
}

shared_focus = {
	id = SAF_modernise_rifles
	icon = GFX_focus_generic_military_equipment
	cost = 6

	relative_position_id = SAF_military_expansion
	x = 0
	y = 2

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_continue_britains_legacy
		focus = SAF_doctrine_of_our_own
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_modernise_rifles"
		add_tech_bonus = {
			name = SAF_modernise_rifles
			bonus = 1
			uses = 2
			category = infantry_weapons
		}
	}
}

shared_focus = {
	id = SAF_expand_dockyards
	icon = GFX_focus_POL_develop_polish_shipbuilding
	cost = 6

	relative_position_id = SAF_military_expansion
	x = -3
	y = 3

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_modernise_rifles
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_expand_dockyards"
		681 = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = dockyard
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = naval_base
				level = 2
				province = 12589
				instant_build = yes
			}
		}
		946 = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = dockyard
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = naval_base
				level = 2
				province = 4696
				instant_build = yes
			}
		}
	}
}

shared_focus = {
	id = SAF_new_destroyer_designs
	icon = GFX_goal_generic_navy_anti_submarine
	cost = 6

	relative_position_id = SAF_expand_dockyards
	x = 1
	y = 1

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_expand_dockyards
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_new_destroyer_designs"
		add_tech_bonus = {
			name = SAF_new_destroyer_designs
			bonus = 1
			uses = 2
			category = dd_tech
			category = ss_tech
		}
	}
}

shared_focus = {
	id = SAF_new_cruiser_designs
	icon = GFX_goal_generic_navy_cruiser
	cost = 6

	relative_position_id = SAF_expand_dockyards
	x = 1
	y = 2

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_new_destroyer_designs
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_new_cruiser_designs"
		add_tech_bonus = {
			name = SAF_new_cruiser_designs
			bonus = 1
			uses = 2
			category = cl_tech
			category = ca_tech
		}
	}
}

shared_focus = {
	id = SAF_radar_installations
	icon = GFX_goal_generic_radar
	cost = 6

	relative_position_id = SAF_military_expansion
	x = 3
	y = 3

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	available = {
		has_tech = radio
	}
	prerequisite = {
		focus = SAF_modernise_rifles
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_radar_installations"
		if = {
			limit = { has_tech = radio_detection }
			add_tech_bonus = {
				name = SAF_radar_installations
				bonus = 1
				uses = 1
				category = radar_tech
			}
		}
		else = {
			set_technology = { radio_detection = 1 }
		}
		719 = {
			add_building_construction = {
				type = radar_station
				level = 1
				instant_build = yes
			}
		}
	}
}

shared_focus = {
	id = SAF_new_fighter_designs
	icon = GFX_goal_generic_air_fighter2
	cost = 6

	relative_position_id = SAF_radar_installations
	x = 0
	y = 1

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_radar_installations
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_new_fighter_designs"
		add_tech_bonus = {
			name = SAF_new_fighter_designs
			bonus = 1
			uses = 1
			category = light_fighter
		}
	}
}

shared_focus = {
	id = SAF_modern_cas
	icon = GFX_goal_generic_air_CAS_german
	cost = 6

	relative_position_id = SAF_radar_installations
	x = 1
	y = 2

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_new_fighter_designs
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_modern_cas"
		add_tech_bonus = {
			name = SAF_modern_cas
			bonus = 1
			uses = 1
			category = cas_bomber
		}
	}
}

shared_focus = {
	id = SAF_new_bomber_designs
	icon = GFX_goal_generic_air_tactical_bomber_german
	cost = 6

	relative_position_id = SAF_radar_installations
	x = -1
	y = 2

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_new_fighter_designs
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_new_bomber_designs"
		add_tech_bonus = {
			name = SAF_new_bomber_designs
			bonus = 1
			uses = 1
			category = medium_air
		}
	}
}

shared_focus = {
	id = SAF_expand_cape_corps
	icon = GFX_goal_SAF_native_2
	cost = 6

	relative_position_id = SAF_military_expansion
	x = 0
	y = 3

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_modernise_rifles
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_expand_cape_corps"
		add_ideas = SAF_expanded_cape_corps
	}
}

shared_focus = {
	id = SAF_south_african_military_college
	icon = GFX_focus_generic_military_academy
	cost = 6

	relative_position_id = SAF_military_expansion
	x = 0
	y = 5

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_expand_cape_corps
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_south_african_military_college"
		add_doctrine_cost_reduction = {
			name = SAF_south_african_military_college
			cost_reduction = 0.5
			uses = 1
			category = land_doctrine
		}
	}
}

shared_focus = {
	id = SAF_recruitment_drive
	icon = GFX_focus_generic_manpower
	cost = 6

	relative_position_id = SAF_military_expansion
	x = 0
	y = 6

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_south_african_military_college
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_recruitment_drive"
		add_manpower = 45000
	}
}

shared_focus = {
	id = SAF_continue_britains_legacy
	icon = GFX_focus_eng_the_sun_never_sets
	cost = 6

	relative_position_id = SAF_military_expansion
	x = -5
	y = 1

	mutually_exclusive = {
		focus = SAF_doctrine_of_our_own
	}

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_military_expansion
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_continue_britains_legacy"
		add_doctrine_cost_reduction = {
			name = SAF_continue_britains_legacy
			cost_reduction = 0.5
			uses = 1
			category = land_doctrine
		}
	}
}

shared_focus = {
	id = SAF_troop_specialistion
	icon = GFX_SIA_Urban_Warfare_NF
	cost = 6

	relative_position_id = SAF_continue_britains_legacy
	x = -2
	y = 1

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_continue_britains_legacy
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_troop_specialistion"
		add_ideas = SAF_troop_specialisation_idea
	}
}

shared_focus = {
	id = SAF_artillery_integration
	icon = GFX_goal_generic_army_artillery
	cost = 6

	relative_position_id = SAF_continue_britains_legacy
	x = -2
	y = 3

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_troop_specialistion
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_artillery_integration"
		add_tech_bonus = {
			name = SAF_artillery_integration
			bonus = 1
			uses = 2
			category = artillery
		}
	}
}

shared_focus = {
	id = SAF_casualty_minimisation
	icon = GFX_goal_FIN_promote_the_red_cross
	cost = 6

	relative_position_id = SAF_continue_britains_legacy
	x = -2
	y = 5

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_artillery_integration
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_casualty_minimisation"
		custom_effect_tooltip = improved_field_hospitals_effect
		hidden_effect = {
			set_technology = { improved_field_hospitals = 1 popup = no }
		}
	}
}

shared_focus = {
	id = SAF_strengthen_the_navy
	icon = GFX_goal_SAF_navy
	cost = 6

	relative_position_id = SAF_continue_britains_legacy
	x = 0
	y = 2

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_continue_britains_legacy
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_strengthen_the_navy"
		add_doctrine_cost_reduction = {
			name = SAF_strengthen_the_navy
			cost_reduction = 0.5
			uses = 2
			category = naval_doctrine
		}
	}
}

shared_focus = {
	id = SAF_trade_route_protection
	icon = GFX_goal_generic_sea_focused_navy2
	cost = 6

	relative_position_id = SAF_continue_britains_legacy
	x = -1
	y = 4

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_artillery_integration
	}
	prerequisite = {
		focus = SAF_strengthen_the_navy
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_trade_route_protection"
		add_ideas = SAF_trade_protection_idea
	}
}

shared_focus = {
	id = SAF_retrofitting_scheme
	icon = GFX_goal_generic_naval_industry
	cost = 6

	relative_position_id = SAF_continue_britains_legacy
	x = 1
	y = 4

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_expand_dockyards
	}
	prerequisite = {
		focus = SAF_strengthen_the_navy
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_retrofitting_scheme"
		add_ideas = SAF_improved_retrofitting
	}
}

shared_focus = {
	id = SAF_greater_reach
	icon = GFX_focus_generic_africa_naval
	cost = 6

	relative_position_id = SAF_continue_britains_legacy
	x = 0
	y = 5

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_trade_route_protection
	}
	prerequisite = {
		focus = SAF_retrofitting_scheme
	}
	prerequisite = {
		focus = SAF_south_african_military_college
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_greater_reach"
		swap_ideas = {
			remove_idea = SAF_trade_protection_idea
			add_idea = SAF_trade_protection_idea_2
		}
	}
}

shared_focus = {
	id = SAF_special_boat_service
	icon = GFX_goal_generic_amphibious_assault
	cost = 6

	relative_position_id = SAF_continue_britains_legacy
	x = -1
	y = 6

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_greater_reach
	}
	prerequisite = {
		focus = SAF_casualty_minimisation
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_special_boat_service"
		swap_ideas = {
			remove_idea = SAF_troop_specialisation_idea
			add_idea = SAF_special_boat_service_idea
		}
	}
}

shared_focus = {
	id = SAF_doctrine_of_our_own
	icon = GFX_goal_generic_army_cooperation
	cost = 6

	relative_position_id = SAF_military_expansion
	x = 5
	y = 1

	mutually_exclusive = {
		focus = SAF_continue_britains_legacy
	}

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_military_expansion
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_doctrine_of_our_own"
		add_doctrine_cost_reduction = {
			name = SAF_doctrine_of_our_own
			cost_reduction = 0.5
			uses = 1
			category = land_doctrine
		}
	}
}

shared_focus = {
	id = SAF_develop_air_force
	icon = GFX_goal_SAF_airforce
	cost = 6

	relative_position_id = SAF_doctrine_of_our_own
	x = 1
	y = 1

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_doctrine_of_our_own
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_develop_air_force"
		add_doctrine_cost_reduction = {
			name = SAF_develop_air_force
			cost_reduction = 0.5
			uses = 2
			category = air_doctrine
		}
	}
}

shared_focus = {
	id = SAF_local_aviation_industry
	icon = GFX_focus_generic_aircraft_production
	cost = 6

	relative_position_id = SAF_doctrine_of_our_own
	x = 1
	y = 3

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_develop_air_force
	}
	prerequisite = {
		focus = SAF_radar_installations
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_local_aviation_industry"
		add_ideas = SAF_domestic_aircraft_production
	}
}

shared_focus = {
	id = SAF_integrated_air_recon
	icon = GFX_goal_DOM_Recon
	cost = 6

	relative_position_id = SAF_doctrine_of_our_own
	x = 1
	y = 4

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_local_aviation_industry
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_integrated_air_recon"
		add_ideas = SAF_integrated_air_recon_idea
	}
}

shared_focus = {
	id = SAF_heavy_armour_focus
	icon = GFX_goal_generic_heavy_armour_british
	cost = 6

	relative_position_id = SAF_doctrine_of_our_own
	x = 3
	y = 1

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_doctrine_of_our_own
	}
	mutually_exclusive = {
		focus = SAF_mechanised_warfare
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_heavy_armour_focus"
		add_ideas = SAF_heavy_armour_focus_1
	}
}

shared_focus = {
	id = SAF_mechanised_warfare
	icon = GFX_goal_generic_armored_cars
	cost = 6

	relative_position_id = SAF_doctrine_of_our_own
	x = 5
	y = 1

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_doctrine_of_our_own
	}
	mutually_exclusive = {
		focus = SAF_heavy_armour_focus
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_mechanised_warfare"
		add_ideas = SAF_mechanised_focus_1
	}
}

shared_focus = {
	id = SAF_increase_tank_production
	icon = GFX_focus_generic_tank_production
	cost = 6

	relative_position_id = SAF_doctrine_of_our_own
	x = 4
	y = 2

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_heavy_armour_focus
		focus = SAF_mechanised_warfare
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_increase_tank_production"
		if = {
			limit = { has_completed_focus = SAF_heavy_armour_focus }
			swap_ideas = {
				remove_idea = SAF_heavy_armour_focus_1
				add_idea = SAF_heavy_armour_focus_2
			}
		}
		else_if = {
			limit = { has_completed_focus = SAF_mechanised_warfare }
			swap_ideas = {
				remove_idea = SAF_mechanised_focus_1
				add_idea = SAF_mechanised_focus_2
			}
		}
		else = {
			custom_effect_tooltip = SAF_if_heavy_armour
			effect_tooltip = {
				swap_ideas = {
					remove_idea = SAF_heavy_armour_focus_1
					add_idea = SAF_heavy_armour_focus_2
				}
			}
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = SAF_if_mechanised
			effect_tooltip = {
				swap_ideas = {
					remove_idea = SAF_mechanised_focus_1
					add_idea = SAF_mechanised_focus_2
				}
			}
		}
	}
}

shared_focus = {
	id = SAF_armoured_corps
	icon = GFX_goal_generic_army_tanks3
	cost = 6

	relative_position_id = SAF_doctrine_of_our_own
	x = 3
	y = 5

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_increase_tank_production
	}
	prerequisite = {
		focus = SAF_sturdy_designs
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_armoured_corps"
		add_tech_bonus = {
			name = SAF_armoured_corps
			bonus = 1
			uses = 1
			category = armor
		}
		add_tech_bonus = {
			name = SAF_armoured_corps
			bonus = 1
			uses = 1
			category = cat_mechanized_equipment
		}
	}
}

shared_focus = {
	id = SAF_sturdy_designs
	icon = GFX_goal_Automobile_Production
	cost = 6

	relative_position_id = SAF_doctrine_of_our_own
	x = 4
	y = 4

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_increase_tank_production
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_sturdy_designs"
		if = {
			limit = { has_completed_focus = SAF_heavy_armour_focus }
			swap_ideas = {
				remove_idea = SAF_heavy_armour_focus_2
				add_idea = SAF_heavy_armour_focus_3
			}
		}
		else_if = {
			limit = { has_completed_focus = SAF_mechanised_warfare }
			swap_ideas = {
				remove_idea = SAF_mechanised_focus_2
				add_idea = SAF_mechanised_focus_3
			}
		}
		else = {
			custom_effect_tooltip = SAF_if_heavy_armour
			effect_tooltip = {
				swap_ideas = {
					remove_idea = SAF_heavy_armour_focus_2
					add_idea = SAF_heavy_armour_focus_3
				}
			}
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = SAF_if_mechanised
			effect_tooltip = {
				swap_ideas = {
					remove_idea = SAF_mechanised_focus_2
					add_idea = SAF_mechanised_focus_3
				}
			}
		}
	}
}

shared_focus = {
	id = SAF_local_arms
	icon = GFX_focus_chi_army_reform
	cost = 6

	relative_position_id = SAF_doctrine_of_our_own
	x = 5
	y = 3

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_increase_tank_production
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_local_arms"
		add_tech_bonus = {
			name = SAF_local_arms
			bonus = 1
			uses = 1
			category = infantry_weapons
			category = artillery
		}
	}
}

shared_focus = {
	id = SAF_rapid_warfare
	icon = GFX_goal_planning_bonus
	cost = 6

	relative_position_id = SAF_doctrine_of_our_own
	x = 1
	y = 6

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 3
			has_war = yes
		}
	}
	prerequisite = {
		focus = SAF_armoured_corps
	}
	prerequisite = {
		focus = SAF_integrated_air_recon
	}
	prerequisite = {
		focus = SAF_south_african_military_college
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus SAF_rapid_warfare"
		add_ideas = SAF_rapid_warfare_idea
	}
}
