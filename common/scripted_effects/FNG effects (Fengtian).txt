#Recovery League
FNG_RLPOP = {
	if = {
		limit = { has_country_flag = FNG_recovery_league_active }
		divide_temp_variable = { RLPOP = 100 }
		hidden_effect = {
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = RLPOP
			}
		}
		FNG_party_popularity_events = yes
		custom_effect_tooltip = RL_POP
	}
}

#Zhang Clique
FNG_ZCPOP = {
	if = {
		limit = { has_country_flag = FNG_zhang_clique_active }
		divide_temp_variable = { ZCPOP = 100 }
		hidden_effect = {
			add_popularity = {
				ideology = paternal_autocrat
				popularity = ZCPOP
			}
		}
		FNG_party_popularity_events = yes
		custom_effect_tooltip = ZC_POP
	}
}

#Communications Clique
FNG_CCPOP = {
	if = {
		limit = { has_country_flag = FNG_communications_clique_active }
		divide_temp_variable = { CCPOP = 100 }
		hidden_effect = {
			add_popularity = {
				ideology = social_conservative
				popularity = CCPOP
			}
		}
		FNG_party_popularity_events = yes
		custom_effect_tooltip = CC_POP
	}
}

FNG_CA_remove = {
	clr_country_flag = FNG_concordia_association_active
	remove_targeted_decision = { target = THIS decision = FNG_favor_shikan_clique }
	set_variable = { FNG.FNG_JAP_influence_variable = 0 }
	hidden_effect = {
		force_update_dynamic_modifier = yes
		country_event = { id = fengtian_political_events.16 days = 1 random_hours = 24 } #Expel the Japanese Bandits!
	}
	FNG_party_popularity_events = yes
	custom_effect_tooltip = CA_remove
}

FNG_party_popularity_events = {
	hidden_effect = {
		# Recovery League
		#country_event = { id = fengtian_political_events.21 days = 2 random_hours = 72 } #Disastrous Governance
		#country_event = fengtian_political_events.22 #Disastrous Governance Removal

		# Zhang Clique
		#country_event = { id = fengtian_political_events.23 days = 2 random_hours = 72 } #Army Dominance
		country_event = { id = fengtian_political_events.30 days = 30 random_hours = 2880 } #Zhang Clique Low Influence
		#country_event = fengtian_political_events.24 #Army Dominance Removal

		# Communications Clique
		#country_event = { id = fengtian_political_events.25 days = 2 random_hours = 72 } #Plutocratic Exploitation
		country_event = { id = fengtian_political_events.31 days = 30 random_hours = 2880 } #Communications Clique Low Influence
		#country_event = fengtian_political_events.26 #Plutocratic Exploitation Removal

		# Concordia
		country_event = { id = fengtian_political_events.18 days = 1 random_hours = 24 } #Mantetsu Influence
		country_event = { id = fengtian_political_events.19 days = 1 random_hours = 24 } #Pervasive Mantetsu Influence
		country_event = { id = fengtian_political_events.20 days = 1 random_hours = 24 } #Mantetsu Dominance
		country_event = fengtian_political_events.27

		#Mantetsu
		FNG_recalculate_mantetsu_effects = yes
	}
}

#Fengtian vs Japan
FNG_japan_cuts_aid = {
	add_ideas = FNG_Japanese_Aid_Cut
	hidden_effect = {
		country_event = { id = fengtian_events.23 random_hours = 3960 days = 55 }
	}
}

#Legitimacy
FNG_setup_legitimacy = {
	if = {
		limit = { NOT = { has_variable = FNG_legitimacy_level } }
		set_temp_variable = { FNG_legitimacy_level = 1 }
		set_variable = { FNG_legitimacy_level = 1 }
	}
	meta_effect = {
		text = {
			add_ideas = [IDEA_TAG]
		}
		IDEA_TAG = "FNG_Legitimacy_[?FNG_legitimacy_level]"
	}
}

FNG_increase_legitimacy = {
	add_to_variable = { FNG_legitimacy_level = 1 }
	clamp_variable = { var = FNG_legitimacy_level max = 10 }
	if = {
		limit = { has_idea = FNG_Legitimacy_1 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_1
			add_idea = FNG_Legitimacy_2
		}
	}
	else_if = {
		limit = { has_idea = FNG_Legitimacy_2 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_2
			add_idea = FNG_Legitimacy_3
		}
	}
	else_if = {
		limit = { has_idea = FNG_Legitimacy_3 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_3
			add_idea = FNG_Legitimacy_4
		}
	}
	else_if = {
		limit = { has_idea = FNG_Legitimacy_4 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_4
			add_idea = FNG_Legitimacy_5
		}
	}
	else_if = {
		limit = { has_idea = FNG_Legitimacy_5 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_5
			add_idea = FNG_Legitimacy_6
		}
	}
	else_if = {
		limit = { has_idea = FNG_Legitimacy_6 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_6
			add_idea = FNG_Legitimacy_7
		}
	}
	else_if = {
		limit = { has_idea = FNG_Legitimacy_7 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_7
			add_idea = FNG_Legitimacy_8
		}
	}
	else_if = {
		limit = { has_idea = FNG_Legitimacy_8 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_8
			add_idea = FNG_Legitimacy_9
		}
	}
	else_if = {
		limit = { has_idea = FNG_Legitimacy_9 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_9
			add_idea = FNG_Legitimacy_10
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = FNG_Legitimacy_1
				has_idea = FNG_Legitimacy_2
				has_idea = FNG_Legitimacy_3
				has_idea = FNG_Legitimacy_4
				has_idea = FNG_Legitimacy_5
				has_idea = FNG_Legitimacy_6
				has_idea = FNG_Legitimacy_7
				has_idea = FNG_Legitimacy_8
				has_idea = FNG_Legitimacy_9
				has_idea = FNG_Legitimacy_10
			}
		}
		custom_effect_tooltip = FNG_increase_legitimacy_tooltip
	}
	else = {
		add_stability = 0.05
	}
}

FNG_decrease_legitimacy = {
	subtract_from_variable = { FNG_legitimacy_level = 1 }
	clamp_variable = { var = FNG_legitimacy_level min = 1 }
	if = {
		limit = { has_idea = FNG_Legitimacy_10 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_10
			add_idea = FNG_Legitimacy_9
		}
	}
	else_if = {
		limit = { has_idea = FNG_Legitimacy_9 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_9
			add_idea = FNG_Legitimacy_8
		}
	}
	else_if = {
		limit = { has_idea = FNG_Legitimacy_8 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_8
			add_idea = FNG_Legitimacy_7
		}
	}
	else_if = {
		limit = { has_idea = FNG_Legitimacy_7 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_7
			add_idea = FNG_Legitimacy_6
		}
	}
	else_if = {
		limit = { has_idea = FNG_Legitimacy_6 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_6
			add_idea = FNG_Legitimacy_5
		}
	}
	else_if = {
		limit = { has_idea = FNG_Legitimacy_5 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_5
			add_idea = FNG_Legitimacy_4
		}
	}
	else_if = {
		limit = { has_idea = FNG_Legitimacy_4 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_4
			add_idea = FNG_Legitimacy_3
		}
	}
	else_if = {
		limit = { has_idea = FNG_Legitimacy_3 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_3
			add_idea = FNG_Legitimacy_2
		}
	}
	else_if = {
		limit = { has_idea = FNG_Legitimacy_2 }
		swap_ideas = {
			remove_idea = FNG_Legitimacy_2
			add_idea = FNG_Legitimacy_1
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = FNG_Legitimacy_1
				has_idea = FNG_Legitimacy_2
				has_idea = FNG_Legitimacy_3
				has_idea = FNG_Legitimacy_4
				has_idea = FNG_Legitimacy_5
				has_idea = FNG_Legitimacy_6
				has_idea = FNG_Legitimacy_7
				has_idea = FNG_Legitimacy_8
				has_idea = FNG_Legitimacy_9
				has_idea = FNG_Legitimacy_10
			}
		}
		custom_effect_tooltip = FNG_decrease_legitimacy_tooltip
	}
	else = {
		add_stability = -0.05
	}
}

# Mantetsu
FNG_recalculate_mantetsu_effects = {
	if = {
		limit = {
			FNG_JAP_hostile = no
		}
		#Max influence effects at 50% popularity
		set_variable = { FNG_mantetsu_influence_var = FNG.FNG_JAP_influence_variable }
		clamp_variable = {
			var = FNG_mantetsu_influence_var
			max = 0.5
		}

		set_temp_variable = { FNG_mantetsu_positive_factor = FNG_mantetsu_influence_var }
		multiply_temp_variable = { FNG_mantetsu_positive_factor = 2 }

		###Fengtian
		set_variable = { FNG.FNG_mantetsu_max_efficiency = 0.25 }
		set_variable = { FNG.FNG_mantetsu_construction_speed = 0.25 }
		multiply_variable = { FNG.FNG_mantetsu_max_efficiency = FNG_mantetsu_positive_factor }
		multiply_variable = { FNG.FNG_mantetsu_construction_speed = FNG_mantetsu_positive_factor }

		# Efficient Rail System bonus (from focus)
		clear_variable = FNG.FNG_mantetsu_factory_output
		if = {
			limit = {
				has_country_flag = FNG_efficient_rail_system
			}
			add_to_variable = { FNG.FNG_mantetsu_construction_speed = 0.1 }
			add_to_variable = { FNG.FNG_mantetsu_factory_output = 0.1 }
		}

		# Maluses if above 20%
		if = {
			limit = {
				OR = {
					FNG_mantetsu_level_high = yes
					FNG_mantetsu_level_very_high = yes
				}
			}
			set_variable = { FNG.FNG_mantetsu_political_power = -0.3 }
			set_variable = { FNG.FNG_mantetsu_stability = -0.3 }
			set_variable = { FNG.FNG_mantetsu_war_support = -0.3 }

			set_temp_variable = { FNG_mantetsu_negative_factor = 0.2 }
			subtract_from_temp_variable = { FNG_mantetsu_negative_factor = FNG_mantetsu_influence_var }
			divide_temp_variable = { FNG_mantetsu_negative_factor = -0.3 }

			multiply_variable = { FNG.FNG_mantetsu_political_power = FNG_mantetsu_negative_factor }
			multiply_variable = { FNG.FNG_mantetsu_stability = FNG_mantetsu_negative_factor }
			multiply_variable = { FNG.FNG_mantetsu_war_support = FNG_mantetsu_negative_factor }

			if = {
				limit = {
					OR = {
						has_country_leader = { character = FNG_yang_yuting }
						is_subject_of = JAP
					}
				}
				divide_variable = { FNG.FNG_mantetsu_political_power = 3 }
				divide_variable = { FNG.FNG_mantetsu_stability = 3 }
				divide_variable = { FNG.FNG_mantetsu_war_support = 3 }
			}
		}
		else = {
			clear_variable = FNG_mantetsu_political_power
			clear_variable = FNG_mantetsu_stability
			clear_variable = FNG_mantetsu_war_support
		}

		###Japan
		if = {
			limit = {
				JAP = { NOT = { has_completed_focus = JAP_victory_with_vision } }
			}
			set_variable = { FNG.JAP_mantetsu_factory_output = 0.1 }
			set_variable = { FNG.JAP_mantetsu_resource_gain = 0.08 }
		}
		else = {
			set_variable = { FNG.JAP_mantetsu_factory_output = 0.2 }
			set_variable = { FNG.JAP_mantetsu_resource_gain = 0.16 }
		}
		multiply_variable = { FNG.JAP_mantetsu_factory_output = FNG_mantetsu_positive_factor }
		multiply_variable = { FNG.JAP_mantetsu_resource_gain = FNG_mantetsu_positive_factor }

		clear_variable = FNG_mantetsu_influence_var
		force_update_dynamic_modifier = yes
	}
}

FNG_break_with_japan = {
	FNG = {
		set_global_flag = FNG_relations_JAP_broke
		set_potential_national_government = yes
		if = {
			limit = { is_in_faction_with = JAP }
			leave_faction = yes
		}
		diplomatic_relation = {
			country = JAP
			relation = non_aggression_pact
			active = no
		}
		diplomatic_relation = {
			country = JAP
			relation = military_access
			active = no
		}
		JAP = {
			diplomatic_relation = {
				country = FNG
				relation = guarantee
				active = no
			}
			diplomatic_relation = {
				country = FNG
				relation = military_access
				active = no
			}
		}
		FNG_CA_remove = yes
		FNG_mantetsu_collapse = yes
	}
}

FNG_mantetsu_collapse = {
	if = {
		limit = {
			has_idea = FNG_mantetsu_influence_idea
		}
		remove_ideas = FNG_mantetsu_influence_idea
		hidden_effect = {
			if = {
				limit = { has_dynamic_modifier = { modifier = FNG_mantetsu_influence_modifier } }
				remove_dynamic_modifier = { modifier = FNG_mantetsu_influence_modifier }
			}
			JAP = {
				if = {
					limit = { has_idea = FNG_mantetsu_profits }
					remove_ideas = FNG_mantetsu_profits
					if = {
						limit = { has_dynamic_modifier = { modifier = FNG_mantetsu_profits_modifier scope = FNG } }
						remove_dynamic_modifier = { modifier = FNG_mantetsu_profits_modifier scope = FNG }
					}
					add_timed_idea = {
						idea = JAP_MANTETSU_COLLAPSE
						days = 235
					}
				}
			}
			clear_variable = FNG_mantetsu_political_power
			clear_variable = FNG_mantetsu_stability
			clear_variable = FNG_mantetsu_war_support
			clear_variable = FNG_mantetsu_max_efficiency
			clear_variable = FNG_mantetsu_construction_speed
			clear_variable = FNG_mantetsu_factory_output
			clear_variable = JAP_mantetsu_factory_output
			clear_variable = JAP_mantetsu_resource_gain
		}
		if = {
			limit = { FNG_mantetsu_level_very_high = yes }
			add_timed_idea = {
				idea = FNG_Post-Colonial_Chaos_3
				days = 360
			}
		}
		else_if = {
			limit = { FNG_mantetsu_level_high = yes }
			add_timed_idea = {
				idea = FNG_Post-Colonial_Chaos_2
				days = 360
			}
		}
		else_if = {
			limit = { FNG_mantetsu_level_medium = yes }
			add_timed_idea = {
				idea = FNG_Post-Colonial_Chaos_1
				days = 360
			}
		}
		else = {
			add_timed_idea = {
				idea = FNG_Post-Colonial_Chaos_1
				days = 180
			}
		}
		if = {
			limit = { has_idea = FNG_The_Kwantung_Army }
			remove_ideas = FNG_The_Kwantung_Army
		}
		if = {
			limit = { has_idea = FNG_Japanese_Aid_Cut }
			remove_ideas = FNG_Japanese_Aid_Cut
		}
		if = {
			limit = { has_idea = JAP_japanese_investments }
			remove_ideas = JAP_japanese_investments
		}
		if = {
			limit = { has_idea = mantetsu_industrial_subsidiaries }
			remove_ideas = mantetsu_industrial_subsidiaries
		}
		if = {
			limit = { has_idea = mitsubishi_heavy_industries }
			remove_ideas = mitsubishi_heavy_industries
		}
	}
}

FNG_close_FNG_Preparing_For_The_Princes_Visit = {
	remove_targeted_decision = { target = THIS decision = FNG_increase_security_in_shenyang }
	remove_targeted_decision = { target = THIS decision = FNG_investigate_the_junior_officer_corps }
	remove_targeted_decision = { target = THIS decision = FNG_reinforce_soldierly_discipline }
	remove_targeted_decision = { target = THIS decision = FNG_present_chinese_modernity }
	remove_targeted_decision = { target = THIS decision = FNG_Fortress_Manchuria }
}

FNG_factionalism_increase_zhang_clique_effect = {
	if = {
		limit = { has_dynamic_modifier = { modifier = FNG_factionalism_modifier } }
		custom_effect_tooltip = {
			localization_key = tooltip_modify_dynmod
			DYNMOD = FNG_factionalism_modifier
		}
		add_to_variable = {
			ROOT.FNG_factionalism_stability = 0.05
			tooltip = stability_factor_tooltip
		}
		add_to_variable = {
			ROOT.FNG_factionalism_pataut_drift = 0.05
			tooltip = paternal_autocrat_drift_tooltip
		}
		ROOT = { force_update_dynamic_modifier = yes }
	}
}

FNG_factionalism_decrease_zhang_clique_effect = {
	if = {
		limit = { has_dynamic_modifier = { modifier = FNG_factionalism_modifier } }
		custom_effect_tooltip = {
			localization_key = tooltip_modify_dynmod
			DYNMOD = FNG_factionalism_modifier
		}
		add_to_variable = {
			ROOT.FNG_factionalism_stability = -0.05
			tooltip = stability_factor_tooltip
		}
		add_to_variable = {
			ROOT.FNG_factionalism_pataut_drift = -0.05
			tooltip = paternal_autocrat_drift_tooltip
		}
		ROOT = { force_update_dynamic_modifier = yes }
	}
}

FNG_factionalism_increase_recovery_league_effect = {
	if = {
		limit = { has_dynamic_modifier = { modifier = FNG_factionalism_modifier } }
		custom_effect_tooltip = {
			localization_key = tooltip_modify_dynmod
			DYNMOD = FNG_factionalism_modifier
		}
		add_to_variable = {
			ROOT.FNG_factionalism_war_support = 0.05
			tooltip = war_support_factor_tooltip
		}
		add_to_variable = {
			ROOT.FNG_factionalism_authdem_drift = 0.05
			tooltip = authoritarian_democrat_drift_tooltip
		}
		ROOT = { force_update_dynamic_modifier = yes }
	}
}

FNG_factionalism_decrease_recovery_league_effect = {
	if = {
		limit = { has_dynamic_modifier = { modifier = FNG_factionalism_modifier } }
		custom_effect_tooltip = {
			localization_key = tooltip_modify_dynmod
			DYNMOD = FNG_factionalism_modifier
		}
		add_to_variable = {
			ROOT.FNG_factionalism_war_support = -0.05
			tooltip = war_support_factor_tooltip
		}
		add_to_variable = {
			ROOT.FNG_factionalism_authdem_drift = -0.05
			tooltip = authoritarian_democrat_drift_tooltip
		}
		ROOT = { force_update_dynamic_modifier = yes }
	}
}

FNG_factionalism_increase_concordia_association_effect = {
	if = {
		limit = { has_dynamic_modifier = { modifier = FNG_factionalism_modifier } }
		custom_effect_tooltip = {
			localization_key = tooltip_modify_dynmod
			DYNMOD = FNG_factionalism_modifier
		}
		add_to_variable = {
			ROOT.FNG_factionalism_max_efficiency = 0.05
			tooltip = production_factory_max_efficiency_factor_tooltip
		}
		ROOT = { force_update_dynamic_modifier = yes }
	}
}

FNG_factionalism_decrease_concordia_association_effect = {
	if = {
		limit = { has_dynamic_modifier = { modifier = FNG_factionalism_modifier } }
		custom_effect_tooltip = {
			localization_key = tooltip_modify_dynmod
			DYNMOD = FNG_factionalism_modifier
		}
		add_to_variable = {
			ROOT.FNG_factionalism_max_efficiency = -0.05
			tooltip = production_factory_max_efficiency_factor_tooltip
		}
		ROOT = { force_update_dynamic_modifier = yes }
	}
}

FNG_factionalism_increase_communications_clique_effect = {
	if = {
		limit = { has_dynamic_modifier = { modifier = FNG_factionalism_modifier } }
		custom_effect_tooltip = {
			localization_key = tooltip_modify_dynmod
			DYNMOD = FNG_factionalism_modifier
		}
		add_to_variable = {
			ROOT.FNG_factionalism_construction_speed = 0.05
			tooltip = production_speed_buildings_factor_tooltip
		}
		add_to_variable = {
			ROOT.FNG_factionalism_soccon_drift = 0.05
			tooltip = social_conservative_drift_tooltip
		}
		ROOT = { force_update_dynamic_modifier = yes }
	}
}

FNG_factionalism_decrease_communications_clique_effect = {
	if = {
		limit = { has_dynamic_modifier = { modifier = FNG_factionalism_modifier } }
		custom_effect_tooltip = {
			localization_key = tooltip_modify_dynmod
			DYNMOD = FNG_factionalism_modifier
		}
		add_to_variable = {
			ROOT.FNG_factionalism_construction_speed = -0.05
			tooltip = production_speed_buildings_factor_tooltip
		}
		add_to_variable = {
			ROOT.FNG_factionalism_soccon_drift = -0.05
			tooltip = social_conservative_drift_tooltip
		}
		ROOT = { force_update_dynamic_modifier = yes }
	}
}

FNG_trigger_tang_yulin_leak_event = {
	hidden_effect = {
		random_list = {
			15 = {
				modifier = {
					add = 10
					pataut_pop_high = yes
				}
				country_event = { id = fengtian_events.180 days = 36 random_days = 144 }
			}
			10 = {
				modifier = {
					factor = 0
					has_country_flag = FNG_encryption_codes_leaked
				}
				modifier = {
					add = 10
					pataut_pop_high = yes
				}
				country_event = { id = fengtian_political_events.15 days = 36 random_days = 144 }
			}
			75 = {
				modifier = {
					add = -30
					pataut_pop_high = yes
				}
			}
		}
	}
}

FNG_zhifeng_war_threat = {
	if = {
		limit = {
			has_global_flag = QIE_manchu_restoration
			QIE = { owns_state = 608 }
		}
		add_named_threat = {
			threat = 5
			name = FNG_manchu_fengtian_war
		}
	}
	else_if = {
		limit = {
			OR = {
				QIE = { owns_state = 608 }
				SZC = {
					owns_state = 608
					SZC_zhili_in_exile = yes
				}
			}
		}
		add_named_threat = {
			threat = 5
			name = FNG_fifth_zhili_fengtian_war
		}
	}
	else = {
		add_named_threat = {
			threat = 5
			name = FNG_war_of_national_reclamation
		}
	}
}

FNG_add_shanhaiguan_infiltration_effects = {
	if = {
		limit = { has_country_flag = shanhaiguan_successful }
		clr_country_flag = shanhaiguan_successful
		add_timed_idea = {
			idea = FNG_successful_infiltration_of_shanhaiguan
			days = 50
		}
	}
	else_if = {
		limit = { has_country_flag = shanhaiguan_delayed_success }
		hidden_effect = {
			clr_country_flag = shanhaiguan_delayed_success
			country_event = { id = fengtian_events.107 days = 14 }
		}
	}
	else_if = {
		limit = { has_country_flag = shanhaiguan_delayed_failure }
		hidden_effect = {
			clr_country_flag = shanhaiguan_delayed_failure
			country_event = { id = fengtian_events.108 days = 14 }
		}
	}
}

#Army Tree

FNG_improve_army_problem_effect = {
	if = {
		limit = { has_idea = FNG_Fengtian_Army_3 }
		remove_ideas = FNG_Fengtian_Army_3
	}
	else_if = {
		limit = { has_idea = FNG_Fengtian_Army_2 }
		swap_ideas = {
			remove_idea = FNG_Fengtian_Army_2
			add_idea = FNG_Fengtian_Army_3
		}
	}
	else = {
		swap_ideas = {
			remove_idea = FNG_Fengtian_Army_1
			add_idea = FNG_Fengtian_Army_2
		}
	}
}

FNG_yalu_and_songhua_hydroelectricity_effect = { #used by FNG and MAN equivalent foci
	328 = {
		add_building_construction = { #Andong
			type = infrastructure
			level = 1
			instant_build = yes
		}
		custom_effect_tooltip = tooltip_white_line
		add_building_construction = {
			type = dam
			level = 1
			province = 9803
			instant_build = yes
		}
		increase_state_category_by_one_level = yes
	}
	886 = {
		add_building_construction = { #Jilin
			type = infrastructure
			level = 1
			instant_build = yes
		}
		custom_effect_tooltip = tooltip_white_line
		add_building_construction = {
			type = dam
			level = 1
			province = 11864
			instant_build = yes
		}
		increase_state_category_by_one_level = yes
	}
	885 = {
		add_building_construction = { #Songjiang
			type = infrastructure
			level = 1
			instant_build = yes
		}
		custom_effect_tooltip = tooltip_white_line
		add_building_construction = {
			type = dam
			level = 1
			province = 10433
			instant_build = yes
		}
		increase_state_category_by_one_level = yes
	}
	custom_effect_tooltip = {
		localization_key = building_state_modifier|dam
		INDENT = "    "
	}
}

FNG_JAP_influence_change_inf_effect = {
	add_to_variable = {
		var = FNG.FNG_JAP_influence_variable
		value = FNG_JAP_inf_change_var
	}
	clamp_variable = {
		var = FNG.FNG_JAP_influence_variable
		min = 0
		max = 1
	}
}

FNG_JAP_investment_small = {
	if = {
		limit = { FNG_JAP_influence_active = yes } #make sure that influence is still relevent
		set_temp_variable = { FNG_JAP_inf_change_var = 0.01 }
		hidden_effect = {
			FNG = {
				FNG_JAP_influence_change_inf_effect = yes
				FNG_party_popularity_events = yes
			}
		}
		custom_effect_tooltip = FNG_JAP_investment_small_tooltip
		log = "FNG_influence_logging; investment increase by +1 [ROOT.GetTag]; amount after increase: [?FNG.FNG_JAP_influence_variable];" #temp logging effects so influence could be seen in game log
	}
}

FNG_JAP_investment_medium = {
	if = {
		limit = { FNG_JAP_influence_active = yes } #make sure that influence is still relevent
		set_temp_variable = { FNG_JAP_inf_change_var = 0.03 }
		hidden_effect = {
			FNG = {
				FNG_JAP_influence_change_inf_effect = yes
				FNG_party_popularity_events = yes
			}
		}
		custom_effect_tooltip = FNG_JAP_investment_medium_tooltip
		log = "FNG_influence_logging; investment increase by +3 [ROOT.GetTag]; amount after increase: [?FNG.FNG_JAP_influence_variable];" #temp logging effects so influence could be seen in game log
	}
}

FNG_JAP_investment_large = {
	if = {
		limit = { FNG_JAP_influence_active = yes } #make sure that influence is still relevent
		set_temp_variable = { FNG_JAP_inf_change_var = 0.05 }
		hidden_effect = {
			FNG = {
				FNG_JAP_influence_change_inf_effect = yes
				FNG_party_popularity_events = yes
			}
		}
		custom_effect_tooltip = FNG_JAP_investment_large_tooltip
		log = "FNG_influence_logging; investment increase by +5 [ROOT.GetTag]; amount after increase: [?FNG.FNG_JAP_influence_variable];" #temp logging effects so influence could be seen in game log
	}
}

FNG_JAP_investment_mega = {
	if = {
		limit = { FNG_JAP_influence_active = yes } #make sure that influence is still relevent
		set_temp_variable = { FNG_JAP_inf_change_var = 0.10 }
		hidden_effect = {
			FNG = {
				FNG_JAP_influence_change_inf_effect = yes
				FNG_party_popularity_events = yes
			}
		}
		custom_effect_tooltip = FNG_JAP_investment_mega_tooltip
		log = "FNG_influence_logging; investment increase by +10 [ROOT.GetTag]; amount after increase: [?FNG.FNG_JAP_influence_variable];" #temp logging effects so influence could be seen in game log
	}
}

FNG_JAP_spend_small = {
	if = {
		limit = { FNG_JAP_influence_active = yes } #make sure that influence is still relevent
		set_temp_variable = { FNG_JAP_inf_change_var = -0.01 }
		hidden_effect = {
			FNG = {
				FNG_JAP_influence_change_inf_effect = yes
				FNG_party_popularity_events = yes
			}
		}
		custom_effect_tooltip = FNG_JAP_spend_small_tooltip
		log = "FNG_influence_logging; investment decrease by -1% [ROOT.GetTag]; amount after decrease: [?FNG.FNG_JAP_influence_variable];" #temp logging effects so influence could be seen in game log
	}
}

FNG_JAP_spend_medium = {
	if = {
		limit = { FNG_JAP_influence_active = yes } #make sure that influence is still relevent
		set_temp_variable = { FNG_JAP_inf_change_var = -0.03 }
		hidden_effect = {
			FNG = {
				FNG_JAP_influence_change_inf_effect = yes
				FNG_party_popularity_events = yes
			}
		}
		custom_effect_tooltip = FNG_JAP_spend_medium_tooltip
		log = "FNG_influence_logging; investment decrease by -3% [ROOT.GetTag]; amount after decrease: [?FNG.FNG_JAP_influence_variable];" #temp logging effects so influence could be seen in game log
	}
}

FNG_JAP_spend_large = {
	if = {
		limit = { FNG_JAP_influence_active = yes } #make sure that influence is still relevent
		set_temp_variable = { FNG_JAP_inf_change_var = -0.05 }
		hidden_effect = {
			FNG = {
				FNG_JAP_influence_change_inf_effect = yes
				FNG_party_popularity_events = yes
			}
		}
		custom_effect_tooltip = FNG_JAP_spend_large_tooltip
		log = "FNG_influence_logging; investment decrease by -5% [ROOT.GetTag]; amount after decrease: [?FNG.FNG_JAP_influence_variable];" #temp logging effects so influence could be seen in game log
	}
}

FNG_JAP_spend_mega = {
	if = {
		limit = { FNG_JAP_influence_active = yes } #make sure that influence is still relevent
		set_temp_variable = { FNG_JAP_inf_change_var = -0.10 }
		hidden_effect = {
			FNG = {
				FNG_JAP_influence_change_inf_effect = yes
				FNG_party_popularity_events = yes
			}
		}
		custom_effect_tooltip = FNG_JAP_spend_mega_tooltip
		log = "FNG_influence_logging; investment decrease by -10% [ROOT.GetTag]; amount after decrease: [?FNG.FNG_JAP_influence_variable];" #temp logging effects so influence could be seen in game log
	}
}

JAP_add_FNG_to_faction_effect = {
	add_to_faction = FNG
	FNG = {
		set_country_flag = FNG_collaborated_with_japan
		#FNG will now declare war on the rest of China.
		every_other_country = {
			limit = {
				is_chinese_tag = yes
				NOT = {
					is_ally_with = FNG
					is_ally_with = JAP
				}
			}
			FNG = {
				declare_war_on = {
					target = PREV
					type = annex_everything
				}
			}
			JAP = {
				declare_war_on = {
					target = PREV
					type = annex_everything
				}
			}
		}
		#every_enemy_country = {
		#	limit = {
		#		is_chinese_tag = yes
		#		is_valid_peace_target_against_PREV = yes
		#		ROOT = { can_declare_war_on = PREV }
		#	}
		#	ROOT = {
		#		declare_war_on = {
		#			target = PREV
		#			type = annex_everything
		#		}
		#	}
		#}
	}
	every_other_country = {
		limit = {
			is_subject_of = FNG
			is_chinese_tag = yes
		}
		set_country_flag = FNG_collaborated_with_japan
	}
}

#FNG-JAP Patience Runs Thin Mission Effects

FNG_JAP_mech_add_time_effect = {
	FNG = {
		add_days_mission_timeout = {
			mission = FNG_japanese_patience_runs_thin_mission
			days = FNG_JAP_days_temp_var
		}
	}
	JAP = {
		add_days_mission_timeout = {
			mission = JAP_faith_in_zhang_runs_out_mission
			days = FNG_JAP_days_temp_var
		}
	}
}

FNG_JAP_mech_add_time_small_effect = {
	set_temp_variable = { FNG_JAP_days_temp_var = 30 }
	FNG_JAP_mech_add_time_effect = yes
}

FNG_JAP_mech_add_time_medium_effect = {
	set_temp_variable = { FNG_JAP_days_temp_var = 60 }
	FNG_JAP_mech_add_time_effect = yes
}

FNG_JAP_mech_add_time_large_effect = {
	#For taking large cities
	set_temp_variable = { FNG_JAP_days_temp_var = 90 }
	FNG_JAP_mech_add_time_effect = yes
}

FNG_JAP_mech_add_time_mega_effect = {
	#For taking major cities (Beijing, Wuhan, Nanjing, Guangzhou, Chongqing)
	set_temp_variable = { FNG_JAP_days_temp_var = 180 }
	FNG_JAP_mech_add_time_effect = yes
}

FNG_JAP_mech_sub_time_small_effect = {
	set_temp_variable = { FNG_JAP_days_temp_var = -30 }
	FNG_JAP_mech_add_time_effect = yes
}

FNG_JAP_mech_sub_time_medium_effect = {
	set_temp_variable = { FNG_JAP_days_temp_var = -60 }
	FNG_JAP_mech_add_time_effect = yes
}

FNG_JAP_mech_sub_time_large_effect = {
	#For losing large cities
	set_temp_variable = { FNG_JAP_days_temp_var = -90 }
	FNG_JAP_mech_add_time_effect = yes
}

FNG_JAP_mech_sub_time_mega_effect = {
	#For losing major cities (Beijing, Wuhan, Nanjing, Guangzhou, Chongqing)
	set_temp_variable = { FNG_JAP_days_temp_var = -180 }
	FNG_JAP_mech_add_time_effect = yes
}

FNG_JAP_mech_sub_time_giga_effect = {
	#For losing major cities in Fengtian
	set_temp_variable = { FNG_JAP_days_temp_var = -360 }
	FNG_JAP_mech_add_time_effect = yes
}

FNG_occupied_arsenals_effect = {
	if = {
		limit = {
			OR = {
				controls_state = 1062
				controls_state = 1048
				controls_state = 613
				AND = {
					ANQ = {
						controls_state = 613
						is_subject_of = FNG
					}
				}
				controls_state = 592
				AND = {
					GXC = {
						controls_state = 592
						is_subject_of = FNG
					}
				}
				controls_state = 592
				AND = {
					SHX = {
						controls_state = 592
						is_subject_of = FNG
					}
				}
			}
		}
		custom_effect_tooltip = FNG_unlocking_factories
	}
	if = {
		limit = { #Baoding Arsenal
			controls_state = 1062
		}
		custom_effect_tooltip = { localization_key = FNG_unlocking_factory STATE = "[1062.GetName]" }
		hidden_effect = {
			1062 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	if = { #Hanyang Arsenal
		limit = {
			controls_state = 1048
		}
		custom_effect_tooltip = { localization_key = FNG_unlocking_factory STATE = "[1048.GetName]" }
		hidden_effect = {
			1048 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	if = {  #Jinling Arsenal
		limit = {
			OR = {
				controls_state = 613
				ANQ = {
					controls_state = 613
					is_subject_of = FNG
				}
			}
		}
		custom_effect_tooltip = { localization_key = FNG_unlocking_factory STATE = "[613.GetName]" }
		hidden_effect = {
			613 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	if = { #Guangzhou Arsenal
		limit = {
			OR = {
				controls_state = 592
				GXC = {
					controls_state = 592
					is_subject_of = FNG
				}
			}
		}
		custom_effect_tooltip = { localization_key = FNG_unlocking_factory STATE = "[592.GetName]" }
		hidden_effect = {
			592 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	if = { #Taiyuan Arsenal
		limit = {
			OR = {
				controls_state = 1072
				SHX = {
					controls_state = 1072
					is_subject_of = FNG
				}
			}
		}
		custom_effect_tooltip = { localization_key = FNG_unlocking_factory STATE = "[1072.GetName]" }
		hidden_effect = {
			1072 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	if = { # Any arsenal is locked
		limit = {
			NOT = {
				controls_state = 1062
				controls_state = 1048
				controls_state = 613
				ANQ = {
					controls_state = 613
					is_subject_of = FNG
				}
				controls_state = 592
				GXC = {
					controls_state = 592
					is_subject_of = FNG
				}
				controls_state = 1072
				GXC = {
					controls_state = 1072
					is_subject_of = FNG
				}
			}
		}
		custom_effect_tooltip = FNG_any_arsenal_locked
	}
	if = { #Baoding Locked
		limit = {
			NOT = {
				controls_state = 1062
			}
		}
		custom_effect_tooltip = { localization_key = FNG_factory_locked STATE = "[1062.GetName]" }
	}
	if = { #Hanyang Locked
		limit = {
			NOT = {
				controls_state = 1048
			}
		}
		custom_effect_tooltip = { localization_key = FNG_factory_locked STATE = "[1048.GetName]" }
	}
	if = { #Jinling Locked
		limit = {
			NOT = {
				controls_state = 613
				ANQ = {
					controls_state = 613
					is_subject_of = FNG
				}
			}
		}
		custom_effect_tooltip = { localization_key = FNG_factory_locked STATE = "[613.GetName]" }
	}
	if = { #Guangzhou Locked
		limit = {
			NOT = {
				controls_state = 592
				GXC = {
					controls_state = 592
					is_subject_of = FNG
				}
			}
		}
		custom_effect_tooltip = { localization_key = FNG_factory_locked STATE = "[592.GetName]" }
	}
	if = { #Taiyuan Locked
		limit = {
			NOT = {
				controls_state = 1072
				SHX = {
					controls_state = 1072
					is_subject_of = FNG
				}
			}
		}
		custom_effect_tooltip = { localization_key = FNG_factory_locked STATE = "[1072.GetName]" }
	}
	if = {
		limit = { has_dlc_aat = yes }
		mio:CHN_small_arms_industry_organisation = {
			add_mio_size = 1
			add_mio_funds_gain_factor = 0.15
		}
		mio:CHN_support_equipment_industry_organisation = {
			add_mio_size = 1
			add_mio_funds_gain_factor = 0.15
		}
		mio:CHN_artillery_industry_organisation = {
			add_mio_size = 1
			add_mio_funds_gain_factor = 0.15
		}
	}
}

FNG_clear_legitimacy_ideas = {
	remove_ideas = {
		FNG_Legitimacy_1
		FNG_Legitimacy_2
		FNG_Legitimacy_3
		FNG_Legitimacy_4
		FNG_Legitimacy_5
		FNG_Legitimacy_6
		FNG_Legitimacy_7
		FNG_Legitimacy_8
		FNG_Legitimacy_9
		FNG_Legitimacy_10
	}
}

JAP_FNG_increase_reinforcements_to_FNG_effect = {
	JAP = {
		if = {
			limit = {
				has_relation_modifier = {
					target = FNG
					modifier = volunteer_limit_plus_nine
				}
			}
			FNG = { army_experience = 50 } #Should never happen but just in case
		}
		if = {
			limit = {
				has_relation_modifier = {
					target = FNG
					modifier = volunteer_limit_plus_six
				}
			}
			hidden_effect = {
				remove_relation_modifier = {
					target = FNG
					modifier = volunteer_limit_plus_six
				}
			}
			add_relation_modifier = {
				target = FNG
				modifier = volunteer_limit_plus_nine
			}
		}
		else_if = {
			limit = {
				has_relation_modifier = {
					target = FNG
					modifier = volunteer_limit_plus_four
				}
			}
			hidden_effect = {
				remove_relation_modifier = {
					target = FNG
					modifier = volunteer_limit_plus_four
				}
			}
			add_relation_modifier = {
				target = FNG
				modifier = volunteer_limit_plus_six
			}
		}
		else_if = {
			limit = {
				has_relation_modifier = {
					target = FNG
					modifier = volunteer_limit_plus_two
				}
			}
			hidden_effect = {
				remove_relation_modifier = {
					target = FNG
					modifier = volunteer_limit_plus_two
				}
			}
			add_relation_modifier = {
				target = FNG
				modifier = volunteer_limit_plus_four
			}
		}
		else = {
			add_relation_modifier = {
				target = FNG
				modifier = volunteer_limit_plus_two
			}
		}
	}
}

JAP_FNG_clear_reinforcements_modifier_effect = {
	if = {
		limit = {
			has_relation_modifier = {
				target = FNG
				modifier = volunteer_limit_plus_two
			}
		}
		remove_relation_modifier = {
			target = FNG
			modifier = volunteer_limit_plus_two
		}
	}
	else_if = {
		limit = {
			has_relation_modifier = {
				target = FNG
				modifier = volunteer_limit_plus_four
			}
		}
		remove_relation_modifier = {
			target = FNG
			modifier = volunteer_limit_plus_four
		}
	}
	else_if = {
		limit = {
			has_relation_modifier = {
				target = FNG
				modifier = volunteer_limit_plus_six
			}
		}
		remove_relation_modifier = {
			target = FNG
			modifier = volunteer_limit_plus_six
		}
	}
	else_if = {
		limit = {
			has_relation_modifier = {
				target = FNG
				modifier = volunteer_limit_plus_nine
			}
		}
		remove_relation_modifier = {
			target = FNG
			modifier = volunteer_limit_plus_nine
		}
	}
}

FNG_enrich_the_country_effect = {
	set_country_flag = enrich_country
	custom_effect_tooltip = FNG_enrichment_path
	reduce_focus_completion_cost = {
		focus = { FNG_Develop_the_Three_Northeast_Provinces FNG_Yamato_Hotel_Licenses FNG_Mantetsu_Collaboration FNG_Wang_Yongjiangs_Legacy FNG_Found_the_Northeast_IDC FNG_Reorganise_the_NTC FNG_Mantetsu_Research_Wing FNG_Japanese_Electrical_Expertise FNG_Expand_the_Anshan_Mines FNG_Develop_the_Northern_Frontier FNG_Fengtian_Society_for_Light_Metals FNG_Support_Sino-Japanese_Joint_Companies FNG_Establish_the_Jinzhou_Industrial_Zone }
		cost = 7
	}
	reduce_focus_completion_cost = {
		focus = { FNG_Mantetsu_Civil_Engineering_Projects FNG_Expand_the_Fushun_Mines FNG_Yalu_and_Songhua_Hydroelectricity FNG_Japanese_Coal_Gasification_Methods FNG_Yingkou_Commercial_Development }
		cost = 14
	}
	reduce_focus_completion_cost = {
		focus = { FNG_Manchurian_Model_Cities }
		cost = 21
	}
	#So 13x7 + 5x14 + 1x21 = 26 weeks shaved off = 182 days less time needed to complete FNG econ tree
}

FNG_strengthen_the_army_effect = {
	set_country_flag = strengthen_army
	custom_effect_tooltip = FNG_army_path
	reduce_focus_completion_cost = {
		focus = { FNG_Zhang_Clique FNG_Shikan_Clique_Chosen FNG_Promote_Young_Officers }
		cost = 7
	}
	reduce_focus_completion_cost = {
		focus = { FNG_Rearming_the_Northeast FNG_Expand_the_Shenyang_Arsenal FNG_Diversify_Armament_Production FNG_Develop_the_Dadong_Artillery_Complex FNG_Militarize_the_Minsheng_Truck }
		cost = 14
	}
	reduce_focus_completion_cost = {
		focus = { FNG_Found_the_Shenyang_National_Academy FNG_Modernized_Curriculum }
		cost = 21
	}
	#So 2x7 5x14 + 2x21 = 126 days shaved off.
}

FNG_freedom_of_the_five_races_effect = {
	custom_effect_tooltip = FNG_freedom_of_the_five_races_effect_tt
	set_temp_variable = { FNG_freedom_of_the_five_races_base_temp_var = party_popularity@authoritarian_democrat }
	set_temp_variable = { FNG_social_conservative_pop_temp_var = party_popularity@social_conservative }
	set_temp_variable = { FNG_paternal_autocrat_pop_temp_var = party_popularity@paternal_autocrat }
	multiply_temp_variable = { FNG_social_conservative_pop_temp_var = 0.5 }
	multiply_temp_variable = { FNG_paternal_autocrat_pop_temp_var = 0.5 }
	multiply_temp_variable = { FNG_freedom_of_the_five_races_base_temp_var = 0.5 }
	add_to_temp_variable = { FNG_freedom_of_the_five_races_base_temp_var = FNG_social_conservative_pop_temp_var }
	add_to_temp_variable = { FNG_freedom_of_the_five_races_base_temp_var = FNG_paternal_autocrat_pop_temp_var }
	multiply_temp_variable = { FNG_freedom_of_the_five_races_base_temp_var = 10 } #Party Pop ranges from 0-1. Multiply it by ten so range is 0-10
	clamp_temp_variable = {
		var = FNG_freedom_of_the_five_races_base_temp_var
		min = 0
		max = 10
	}
	round_temp_variable = FNG_freedom_of_the_five_races_base_temp_var
	if = {
		limit = { check_variable = { FNG_freedom_of_the_five_races_base_temp_var < 2 } }
		FNG_freedom_of_the_five_races_harbin_effect = yes
	}
	else_if = {
		limit = { check_variable = { FNG_freedom_of_the_five_races_base_temp_var < 4 } }
		FNG_freedom_of_the_five_races_nanjing_effect = yes
		FNG_freedom_of_the_five_races_harbin_effect = yes
	}
	else_if = {
		limit = { check_variable = { FNG_freedom_of_the_five_races_base_temp_var < 6 } }
		FNG_freedom_of_the_five_races_nanjing_effect = yes
		FNG_freedom_of_the_five_races_harbin_effect = yes
		FNG_freedom_of_the_five_races_wuhan_effect = yes
	}
	else_if = {
		limit = { check_variable = { FNG_freedom_of_the_five_races_base_temp_var < 8 } }
		FNG_freedom_of_the_five_races_nanjing_effect = yes
		FNG_freedom_of_the_five_races_harbin_effect = yes
		FNG_freedom_of_the_five_races_wuhan_effect = yes
		FNG_freedom_of_the_five_races_beijing_effect = yes
	}
	else_if = {
		limit = { check_variable = { FNG_freedom_of_the_five_races_base_temp_var < 11 } }
		FNG_freedom_of_the_five_races_nanjing_effect = yes
		FNG_freedom_of_the_five_races_harbin_effect = yes
		FNG_freedom_of_the_five_races_wuhan_effect = yes
		FNG_freedom_of_the_five_races_beijing_effect = yes
		597 = { #Jinan
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
}

FNG_freedom_of_the_five_races_nanjing_effect = {
	613 = { #Nanjing
		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = industrial_complex
			level = 1
			instant_build = yes
		}
	}
}
FNG_freedom_of_the_five_races_harbin_effect = {
	885 = { #Harbin
		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = industrial_complex
			level = 1
			instant_build = yes
		}
	}
}
FNG_freedom_of_the_five_races_wuhan_effect = {
	1048 = { #Wuhan
		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = industrial_complex
			level = 1
			instant_build = yes
		}
	}
}
FNG_freedom_of_the_five_races_beijing_effect = {
	608 = { #Beijing
		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = industrial_complex
			level = 1
			instant_build = yes
		}
	}
}

FNG_clear_cut_political_economics_recruitment_effect = {
	if = {
		limit = { SHX = { exists = no } }
		if = {
			limit = { NOT = { has_character = SHX_komoto_daisaku } }
			SHX = {
				SHX_komoto_daisaku = { CHN_recruit_character_effect = yes }
			}
		}
	}
	if = {
		limit = { QIE = { exists = no } }
		if = {
			limit = { NOT = { has_character = QIE_wang_kemin } }
			QIE = {
				QIE_wang_kemin = { CHN_recruit_character_effect = yes }
			}
		}
	}
	if = {
		limit = { ANQ = { exists = no } }
		if = {
			limit = { NOT = { has_character = ANQ_chen_lu } }
			ANQ = {
				ANQ_chen_lu = { CHN_recruit_character_effect = yes }
			}
		}
	}
}

FNG_alliance_of_state_and_business_effect = {
	custom_effect_tooltip = FNG_alliance_of_state_and_business_effect_tt
	set_temp_variable = { FNG_alliance_of_state_and_business_var = party_popularity@authoritarian_democrat }
	add_to_temp_variable = { FNG_alliance_of_state_and_business_var = party_popularity@social_conservative }
	multiply_temp_variable = { FNG_alliance_of_state_and_business_var = 10 } #Party Pop ranges from 0-1. Multiply it by ten so range is 0-10
	clamp_temp_variable = {
		var = FNG_alliance_of_state_and_business_var
		min = 0
		max = 10
	}
	round_temp_variable = FNG_alliance_of_state_and_business_var
	if = {
		limit = { check_variable = { FNG_alliance_of_state_and_business_var < 3 } }
		FNG_alliance_of_state_and_business_nanjing_effect = yes
	}
	else_if = {
		limit = { check_variable = { FNG_alliance_of_state_and_business_var < 5 } }
		FNG_alliance_of_state_and_business_nanjing_effect = yes
		FNG_alliance_of_state_and_business_jilin_effect = yes
	}
	else_if = {
		limit = { check_variable = { FNG_alliance_of_state_and_business_var < 7 } }
		FNG_alliance_of_state_and_business_nanjing_effect = yes
		FNG_alliance_of_state_and_business_jilin_effect = yes
		FNG_alliance_of_state_and_business_wuhan_effect = yes
	}
	else_if = {
		limit = { check_variable = { FNG_alliance_of_state_and_business_var < 9 } }
		FNG_alliance_of_state_and_business_nanjing_effect = yes
		FNG_alliance_of_state_and_business_jilin_effect = yes
		FNG_alliance_of_state_and_business_wuhan_effect = yes
		FNG_alliance_of_state_and_business_beijing_effect = yes
	}
	else_if = {
		limit = { check_variable = { FNG_alliance_of_state_and_business_var < 11 } }
		FNG_alliance_of_state_and_business_nanjing_effect = yes
		FNG_alliance_of_state_and_business_jilin_effect = yes
		FNG_alliance_of_state_and_business_wuhan_effect = yes
		FNG_alliance_of_state_and_business_beijing_effect = yes
		597 = { #Jinan
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
}

FNG_alliance_of_state_and_business_nanjing_effect = {
	613 = { #Nanjing
		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = arms_factory
			level = 1
			instant_build = yes
		}
	}
}
FNG_alliance_of_state_and_business_jilin_effect = {
	886 = { #Jilin
		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = arms_factory
			level = 1
			instant_build = yes
		}
	}
}
FNG_alliance_of_state_and_business_wuhan_effect = {
	1048 = { #Wuhan
		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = arms_factory
			level = 1
			instant_build = yes
		}
	}
}
FNG_alliance_of_state_and_business_beijing_effect = {
	608 = { #Beijing
		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = arms_factory
			level = 1
			instant_build = yes
		}
	}
}

FNG_the_state_socialist_regime_effect = {
	custom_effect_tooltip = FNG_the_state_socialist_regime_tt
	set_temp_variable = { FNG_the_state_socialist_regime_base_temp_var = party_popularity@social_liberal }
	set_temp_variable = { FNG_social_democrat_pop_temp_var = party_popularity@social_democrat }
	set_temp_variable = { FNG_national_populist_pop_temp_var = party_popularity@national_populist }
	multiply_temp_variable = { FNG_social_democrat_pop_temp_var = 0.5 }
	multiply_temp_variable = { FNG_national_populist_pop_temp_var = 0.5 }
	multiply_temp_variable = { FNG_the_state_socialist_regime_base_temp_var = 0.5 }
	add_to_temp_variable = { FNG_the_state_socialist_regime_base_temp_var = FNG_social_democrat_pop_temp_var }
	add_to_temp_variable = { FNG_the_state_socialist_regime_base_temp_var = FNG_national_populist_pop_temp_var }
	multiply_temp_variable = { FNG_the_state_socialist_regime_base_temp_var = 10 } #Party Pop ranges from 0-1. Multiply it by ten so range is 0-10
	clamp_temp_variable = {
		var = FNG_the_state_socialist_regime_base_temp_var
		min = 0
		max = 10
	}
	round_temp_variable = FNG_the_state_socialist_regime_base_temp_var
	if = {
		limit = { check_variable = { FNG_the_state_socialist_regime_base_temp_var < 2 } }
		FNG_freedom_of_the_five_races_harbin_effect = yes
	}
	else_if = {
		limit = { check_variable = { FNG_the_state_socialist_regime_base_temp_var < 4 } }
		FNG_freedom_of_the_five_races_nanjing_effect = yes
		FNG_freedom_of_the_five_races_harbin_effect = yes
	}
	else_if = {
		limit = { check_variable = { FNG_the_state_socialist_regime_base_temp_var < 6 } }
		FNG_freedom_of_the_five_races_nanjing_effect = yes
		FNG_freedom_of_the_five_races_harbin_effect = yes
		FNG_freedom_of_the_five_races_wuhan_effect = yes
	}
	else_if = {
		limit = { check_variable = { FNG_the_state_socialist_regime_base_temp_var < 8 } }
		FNG_freedom_of_the_five_races_nanjing_effect = yes
		FNG_freedom_of_the_five_races_harbin_effect = yes
		FNG_freedom_of_the_five_races_wuhan_effect = yes
		FNG_freedom_of_the_five_races_beijing_effect = yes
	}
	else_if = {
		limit = { check_variable = { FNG_the_state_socialist_regime_base_temp_var < 11 } }
		FNG_freedom_of_the_five_races_nanjing_effect = yes
		FNG_freedom_of_the_five_races_harbin_effect = yes
		FNG_freedom_of_the_five_races_wuhan_effect = yes
		FNG_freedom_of_the_five_races_beijing_effect = yes
		597 = { #Jinan
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
}
