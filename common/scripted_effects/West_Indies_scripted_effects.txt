
###################
#
# West Indies
#
###################

#
# (British) Empire's Anger
#

### Add
CAF_empire_add_one = {
	add_to_variable = { var = CAF_british_anger value = 1 }
	custom_effect_tooltip = CAF_add_1_empire
	CAF_evaluate_anger = yes
}
CAF_empire_add_two = {
	add_to_variable = { var = CAF_british_anger value = 2 }
	custom_effect_tooltip = CAF_add_2_empire
	CAF_evaluate_anger = yes
}
CAF_empire_add_three = {
	add_to_variable = { var = CAF_british_anger value = 3 }
	custom_effect_tooltip = CAF_add_3_empire
	CAF_evaluate_anger = yes
}
CAF_empire_add_four = {
	add_to_variable = { var = CAF_british_anger value = 4 }
	custom_effect_tooltip = CAF_add_4_empire
	CAF_evaluate_anger = yes
}
CAF_empire_add_five = {
	add_to_variable = { var = CAF_british_anger value = 5 }
	custom_effect_tooltip = CAF_add_5_empire
	CAF_evaluate_anger = yes
}
CAF_empire_add_six = {
	add_to_variable = { var = CAF_british_anger value = 6 }
	custom_effect_tooltip = CAF_add_6_empire
	CAF_evaluate_anger = yes
}
CAF_empire_add_seven = {
	add_to_variable = { var = CAF_british_anger value = 7 }
	custom_effect_tooltip = CAF_add_7_empire
	CAF_evaluate_anger = yes
}
CAF_empire_add_eight = {
	add_to_variable = { var = CAF_british_anger value = 8 }
	custom_effect_tooltip = CAF_add_8_empire
	CAF_evaluate_anger = yes
}
CAF_empire_add_ten = {
	add_to_variable = { var = CAF_british_anger value = 10 }
	custom_effect_tooltip = CAF_add_10_empire
	CAF_evaluate_anger = yes
}
CAF_empire_add_fifteen = {
	add_to_variable = { var = CAF_british_anger value = 15 }
	custom_effect_tooltip = CAF_add_15_empire
	CAF_evaluate_anger = yes
}

### Sub
CAF_empire_sub_one = {
	subtract_from_variable = { var = CAF_british_anger value = 1 }
	custom_effect_tooltip = CAF_remove_1_empire
	CAF_evaluate_anger = yes
}
CAF_empire_sub_two = {
	subtract_from_variable = { var = CAF_british_anger value = 2 }
	custom_effect_tooltip = CAF_remove_2_empire
	CAF_evaluate_anger = yes
}
CAF_empire_sub_three = {
	subtract_from_variable = { var = CAF_british_anger value = 3 }
	custom_effect_tooltip = CAF_remove_3_empire
	CAF_evaluate_anger = yes
}
CAF_empire_sub_four = {
	subtract_from_variable = { var = CAF_british_anger value = 4 }
	custom_effect_tooltip = CAF_remove_4_empire
	CAF_evaluate_anger = yes
}
CAF_empire_sub_five = {
	subtract_from_variable = { var = CAF_british_anger value = 5 }
	custom_effect_tooltip = CAF_remove_5_empire
	CAF_evaluate_anger = yes
}
CAF_empire_sub_six = {
	subtract_from_variable = { var = CAF_british_anger value = 6 }
	custom_effect_tooltip = CAF_remove_6_empire
	CAF_evaluate_anger = yes
}
CAF_empire_sub_eight = {
	subtract_from_variable = { var = CAF_british_anger value = 8 }
	custom_effect_tooltip = CAF_remove_8_empire
	CAF_evaluate_anger = yes
}
CAF_empire_sub_ten = {
	subtract_from_variable = { var = CAF_british_anger value = 10 }
	custom_effect_tooltip = CAF_remove_10_empire
	CAF_evaluate_anger = yes
}

#
# Socialist's Anger
#

### Add
CAF_socialist_add_one = {
	add_to_variable = { var = CAF_socialist_anger value = 1 }
	custom_effect_tooltip = CAF_add_1_socialist
	CAF_evaluate_anger = yes
}
CAF_socialist_add_two = {
	add_to_variable = { var = CAF_socialist_anger value = 2 }
	custom_effect_tooltip = CAF_add_2_socialist
	CAF_evaluate_anger = yes
}
CAF_socialist_add_three = {
	add_to_variable = { var = CAF_socialist_anger value = 3 }
	custom_effect_tooltip = CAF_add_3_socialist
	CAF_evaluate_anger = yes
}
CAF_socialist_add_four = {
	add_to_variable = { var = CAF_socialist_anger value = 4 }
	custom_effect_tooltip = CAF_add_4_socialist
	CAF_evaluate_anger = yes
}
CAF_socialist_add_five = {
	add_to_variable = { var = CAF_socialist_anger value = 5 }
	custom_effect_tooltip = CAF_add_5_socialist
	CAF_evaluate_anger = yes
}
CAF_socialist_add_six = {
	add_to_variable = { var = CAF_socialist_anger value = 6 }
	custom_effect_tooltip = CAF_add_6_socialist
	CAF_evaluate_anger = yes
}
CAF_socialist_add_seven = {
	add_to_variable = { var = CAF_socialist_anger value = 7 }
	custom_effect_tooltip = CAF_add_7_socialist
	CAF_evaluate_anger = yes
}
CAF_socialist_add_eight = {
	add_to_variable = { var = CAF_socialist_anger value = 8 }
	custom_effect_tooltip = CAF_add_8_socialist
	CAF_evaluate_anger = yes
}
CAF_socialist_add_ten = {
	add_to_variable = { var = CAF_socialist_anger value = 10 }
	custom_effect_tooltip = CAF_add_10_socialist
	CAF_evaluate_anger = yes
}
CAF_socialist_add_twenty-five = {
	add_to_variable = { var = CAF_socialist_anger value = 25 }
	custom_effect_tooltip = CAF_add_25_socialist
	CAF_evaluate_anger = yes
}

### Subtract
CAF_socialist_sub_one = {
	subtract_from_variable = { var = CAF_socialist_anger value = 1 }
	custom_effect_tooltip = CAF_remove_1_socialist
	CAF_evaluate_anger = yes
}
CAF_socialist_sub_two = {
	subtract_from_variable = { var = CAF_socialist_anger value = 2 }
	custom_effect_tooltip = CAF_remove_2_socialist
	CAF_evaluate_anger = yes
}
CAF_socialist_sub_three = {
	subtract_from_variable = { var = CAF_socialist_anger value = 3 }
	custom_effect_tooltip = CAF_remove_3_socialist
	CAF_evaluate_anger = yes
}
CAF_socialist_sub_four = {
	subtract_from_variable = { var = CAF_socialist_anger value = 4 }
	custom_effect_tooltip = CAF_remove_4_socialist
	CAF_evaluate_anger = yes
}
CAF_socialist_sub_five = {
	subtract_from_variable = { var = CAF_socialist_anger value = 5 }
	custom_effect_tooltip = CAF_remove_5_socialist
	CAF_evaluate_anger = yes
}
CAF_socialist_sub_six = {
	subtract_from_variable = { var = CAF_socialist_anger value = 6 }
	custom_effect_tooltip = CAF_remove_6_socialist
	CAF_evaluate_anger = yes
}
CAF_socialist_sub_eight = {
	subtract_from_variable = { var = CAF_socialist_anger value = 8 }
	custom_effect_tooltip = CAF_remove_8_socialist
	CAF_evaluate_anger = yes
}

#
# West Indies Federation Integration
#

### Add
CAF_wifint_add_one = {
	custom_effect_tooltip = CAF_add_1_wifint
	add_to_variable = { var = wifint value = 1 }
}
CAF_wifint_add_two = {
	custom_effect_tooltip = CAF_add_2_wifint
	add_to_variable = { var = wifint value = 2 }
}
CAF_wifint_add_three = {
	custom_effect_tooltip = CAF_add_3_wifint
	add_to_variable = { var = wifint value = 3 }
}
CAF_wifint_add_five = {
	custom_effect_tooltip = CAF_add_5_wifint
	add_to_variable = { var = wifint value = 5 }
}
CAF_wifint_add_ten = {
	custom_effect_tooltip = CAF_add_10_wifint
	add_to_variable = { var = wifint value = 10 }
}
CAF_wifint_add_fifteen = {
	custom_effect_tooltip = CAF_add_15_wifint
	add_to_variable = { var = wifint value = 15 }
}

### Subtract
CAF_wifint_sub_five = {
	custom_effect_tooltip = CAF_remove_5_wifint
	subtract_from_variable = { var = wifint value = 5 }
}
CAF_wifint_sub_ten = {
	custom_effect_tooltip = CAF_remove_10_wifint
	subtract_from_variable = { var = wifint value = 10 }
}
CAF_wifint_sub_fifteen = {
	custom_effect_tooltip = CAF_remove_15_wifint
	subtract_from_variable = { var = wifint value = 15 }
}

### Other WIF Scripted Effects

CAF_remove_canadian_commanders = { #Perhaps these commanders can be move to CAN if this happens?
	random_unit_leader = {
		limit = { has_id = 1640 }
		retire = yes
	}
	random_unit_leader = {
		limit = { has_id = 1641 }
		retire = yes
	}
	random_unit_leader = {
		limit = { has_id = 1642 }
		retire = yes
	}
	random_unit_leader = {
		limit = { has_id = 1643 }
		retire = yes
	}
	random_unit_leader = {
		limit = { has_id = 1644 }
		retire = yes
	}
	random_unit_leader = {
		limit = { has_id = 1645 }
		retire = yes
	}
	random_unit_leader = {
		limit = { has_id = 1646 }
		retire = yes
	}
	random_unit_leader = {
		limit = { has_id = 1647 }
		retire = yes
	}
	random_unit_leader = {
		limit = { has_id = 925 }
		set_nationality = CAN #Let him return to CAN
	}
	set_country_flag = Thomas_Cubitt_dead #COS
	set_country_flag = Bede_Clifford_dead #CARM
	set_country_flag = Reginald_Drax_dead #CNAV
	set_country_flag = Arthur_Rowe_Spurling_dead #CAIR
}

CAF_add_canadian_commanders = {
	random_unit_leader = {
		limit = { has_id = 1640 }
		set_nationality = CAF
	}
	random_unit_leader = {
		limit = { has_id = 1641 }
		set_nationality = CAF
	}
	random_unit_leader = {
		limit = { has_id = 1642 }
		set_nationality = CAF
	}
	random_unit_leader = {
		limit = { has_id = 1643 }
		set_nationality = CAF
	}
	random_unit_leader = {
		limit = { has_id = 1644 }
		set_nationality = CAF
	}
	random_unit_leader = {
		limit = { has_id = 1645 }
		set_nationality = CAF
	}
	random_unit_leader = {
		limit = { has_id = 1646 }
		set_nationality = CAF
	}
	random_unit_leader = {
		limit = { has_id = 1647 }
		set_nationality = CAF
	}
	random_unit_leader = {
		limit = { has_id = 925 }
		set_nationality = CAF
	}
	clr_country_flag = Thomas_Cubitt_dead #COS
	clr_country_flag = Bede_Clifford_dead #CARM
	clr_country_flag = Reginald_Drax_dead #CNAV
	clr_country_flag = Arthur_Rowe_Spurling_dead #CAIR
}

CAF_add_caribbean_commanders = {
	create_field_marshal = {
		name = "Tubal Uriah Butler"
		desc = "ARMY_URIAH_BUTLER_DESC"
		picture = "Portrait_CAF_Tubal_Uriah_Butler.tga"
		traits = {
			politically_connected
			media_personality
			trickster
			guerilla_fighter
		}
		id = 1648
		skill = 1
		attack_skill = 1
		defense_skill = 1
		planning_skill = 1
		logistics_skill = 1
	}
	create_corps_commander = {
		name = "Arthur Andrew Cipriani"
		desc = "ARMY_ANDREW_CIPRIANI_DESC"
		picture = "Portrait_CAF_Arthur_Andrew_Cipriani.tga"
		traits = {
			trait_cautious
		}
		id = 1649
		skill = 1
		attack_skill = 1
		defense_skill = 1
		planning_skill = 1
		logistics_skill = 1
	}
	#add leftist ministers here
}

CAF_remove_caribbean_commanders = {
	random_unit_leader = {
		limit = { has_id = 1648 }
		retire = yes
	}
	random_unit_leader = {
		limit = { has_id = 1649 }
		retire = yes
	}
	#remove leftist ministers here
}

CAF_evaluate_anger = {
	CAF = {
		set_variable = { CAF.var_wif_stability = 0 }
		set_variable = { CAF.var_wif_war_support = 0 }
		set_variable = { CAF.var_wif_pol_power = 0 }
		hidden_effect = {
			#Socialist baseline
			if = {
				limit = {
					check_variable = { CAF_socialist_anger > 80 }
				}
				add_to_variable = { CAF.var_wif_stability = -0.2 }
				add_to_variable = { CAF.var_wif_war_support = -0.15 }
			}
			else_if = {
				limit = {
					check_variable = { CAF_socialist_anger > 60 }
				}
				add_to_variable = { CAF.var_wif_stability = -0.15 }
				add_to_variable = { CAF.var_wif_war_support = -0.1 }
			}
			else_if = {
				limit = {
					check_variable = { CAF_socialist_anger > 40 }
				}
				add_to_variable = { CAF.var_wif_stability = -0.1 }
				add_to_variable = { CAF.var_wif_war_support = -0.05 }
			}
			else_if = {
				limit = {
					check_variable = { CAF_socialist_anger > 20 }
				}
				add_to_variable = { CAF.var_wif_stability = -0.05 }
			}

			#Imperial baseline
			if = {
				limit = {
					check_variable = { CAF_british_anger > 80 }
				}
				add_to_variable = { CAF.var_wif_pol_power = -0.2 }
				add_to_variable = { CAF.var_wif_war_support = -0.15 }
			}
			else_if = {
				limit = {
					check_variable = { CAF_british_anger > 60 }
				}
				add_to_variable = { CAF.var_wif_pol_power = -0.15 }
				add_to_variable = { CAF.var_wif_war_support = -0.1 }
			}
			else_if = {
				limit = {
					check_variable = { CAF_british_anger > 40 }
				}
				add_to_variable = { CAF.var_wif_pol_power = -0.1 }
				add_to_variable = { CAF.var_wif_war_support = -0.05 }
			}
			else_if = {
				limit = {
					check_variable = { CAF_british_anger > 20 }
				}
				set_variable = { CAF.var_wif_pol_power = -0.05 }
			}

			if = {
				limit = {
					has_authoritarian_government = yes
				}
				multiply_variable = { CAF.var_wif_pol_power = 0 }
				multiply_variable = { CAF.var_wif_stability = 1.5 } #not two in order to make up for initial hit after a soc/imp coup
			}
			else = {
				multiply_variable = { CAF.var_wif_pol_power = 1.5 } #not two in order to make up for initial hit after a soc/imp coup
				multiply_variable = { CAF.var_wif_stability = 0 }
			}
		}
		force_update_dynamic_modifier = yes
	}
}
