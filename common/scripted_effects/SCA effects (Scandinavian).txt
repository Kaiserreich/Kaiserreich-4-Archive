#######################
## Idea Improvement ###
#######################

SCA_eco_improve = {
	if = {
		limit = {
			has_idea = SCA_nordic_standard
		}
		swap_ideas = {
			remove_idea = SCA_nordic_standard
			add_idea = SCA_plan_stage_2_standard
		}
	}
	else_if = {
		limit = {
			has_idea = SCA_plan_stage_2_standard
		}
		swap_ideas = {
			remove_idea = SCA_plan_stage_2_standard
			add_idea = SCA_plan_stage_3_standard
		}
	}
	else_if = {
		limit = {
			has_idea = SCA_nordic_example
		}
		swap_ideas = {
			remove_idea = SCA_nordic_example
			add_idea = SCA_plan_stage_2_example
		}
	}
	else_if = {
		limit = {
			has_idea = SCA_plan_stage_2_example
		}
		swap_ideas = {
			remove_idea = SCA_plan_stage_2_example
			add_idea = SCA_plan_stage_3_example
		}
	}
	else_if = {
		limit = {
			has_idea = SCA_nordic_model
		}
		swap_ideas = {
			remove_idea = SCA_nordic_model
			add_idea = SCA_plan_stage_2_model
		}
	}
	else_if = {
		limit = {
			has_idea = SCA_plan_stage_2_model
		}
		swap_ideas = {
			remove_idea = SCA_plan_stage_2_model
			add_idea = SCA_plan_stage_3_model
		}
	}
	else_if = {
		limit = {
			has_idea = SCA_plan_stage_3_model
		}
		swap_ideas = {
			remove_idea = SCA_plan_stage_3_model
			add_idea = SCA_giant_awake
		}
	}
	else_if = {
		limit = {
			has_idea = SCA_plan_stage_3_example
		}
		swap_ideas = {
			remove_idea = SCA_plan_stage_3_example
			add_idea = SCA_giant_awake
		}
	}
	else_if = {
		limit = {
			has_idea = SCA_plan_stage_3_standard
		}
		swap_ideas = {
			remove_idea = SCA_plan_stage_3_standard
			add_idea = SCA_giant_awake
		}
	}
}

SCA_unlock_resources_decisions = {
	custom_effect_tooltip = tooltip_white_line
	custom_effect_tooltip = SCA_activate_resource_extraction_decisions
	hidden_effect = {
		EST_estonian_oil_decisions_activation = yes
		NOR_activate_resources_extraction_decisions = yes
		SWE_activate_resources_extraction_decisions = yes
	}
}

SCA_setup_develop_country_decisions = {
	activate_targeted_decision = { target = THIS decision = SCA_stage_2 }
	activate_targeted_decision = { target = THIS decision = SCA_stage_3 }
	activate_targeted_decision = { target = THIS decision = SCA_stage_unknown }
	activate_targeted_decision = { target = THIS decision = SCA_develop_stockholm }
	activate_targeted_decision = { target = THIS decision = SCA_develop_oslo }
	activate_targeted_decision = { target = THIS decision = SCA_develop_copenhagen }
	activate_targeted_decision = { target = THIS decision = SCA_develop_helsinki }
	activate_targeted_decision = { target = THIS decision = SCA_develop_gothenburg }
	activate_targeted_decision = { target = THIS decision = SCA_develop_reykjavik }
	activate_targeted_decision = { target = THIS decision = SCA_build_norway }
	activate_targeted_decision = { target = THIS decision = SCA_build_sweden }
	activate_targeted_decision = { target = THIS decision = SCA_build_denmark }
	activate_targeted_decision = { target = THIS decision = SCA_build_iceland }
	activate_targeted_decision = { target = THIS decision = SCA_build_finland }
	activate_targeted_decision = { target = THIS decision = SCA_industrialize_Bohuslan }
	activate_targeted_decision = { target = THIS decision = SCA_industrialize_Gotland }
	activate_targeted_decision = { target = THIS decision = SCA_industrialize_trondelag }
	activate_targeted_decision = { target = THIS decision = SCA_industrialize_Jamtland }
	activate_targeted_decision = { target = THIS decision = SCA_industrialize_Norrland }
	activate_targeted_decision = { target = THIS decision = SCA_industrialize_West_Bothnia }
	activate_targeted_decision = { target = THIS decision = SCA_industrialize_Nordland_Troms }
	activate_targeted_decision = { target = THIS decision = SCA_industrialize_Haparanda }
	activate_targeted_decision = { target = THIS decision = SCA_industrialize_Finnmark }
	activate_targeted_decision = { target = THIS decision = SCA_industrialize_Aland }
	activate_targeted_decision = { target = THIS decision = SCA_industrialize_Tornio }
	activate_targeted_decision = { target = THIS decision = SCA_industrialize_Faroes }
	activate_targeted_decision = { target = THIS decision = SCA_industrialize_Iceland }
}
SCA_setup_negotiations_decisions = {
	activate_targeted_decision = { target = THIS decision = SCA_negotiate_with_germany }
	activate_targeted_decision = { target = THIS decision = SCA_negotiate_with_russia }
	activate_targeted_decision = { target = THIS decision = SCA_negotiate_with_internationale }
	activate_targeted_decision = { target = THIS decision = SCA_finish_negotiations }

}
SCA_get_ideologies = {
	SWE = { SCA_get_ideology_of_tag = yes }
	NOR = { SCA_get_ideology_of_tag = yes }
	DEN = { SCA_get_ideology_of_tag = yes }
}

SCA_get_ideology_of_tag = {
	if = {
		limit = { has_government = social_democrat }
		add_to_variable = { SCA.socdem_gov_var = 1 }
	}
	else_if = {
		limit = { has_marlib_or_soclib_government = yes }
		add_to_variable = { SCA.liberal_gov_var = 1 }
	}
	else = {
		add_to_variable = { SCA.soccon_gov_var = 1 }
	}
}

SCA_determine_election = {
	if = {
		limit = {
			check_variable = { SCA.socdem_gov_var > SCA.liberal_gov_var }
			check_variable = { SCA.socdem_gov_var > SCA.soccon_gov_var }
		}
		set_country_flag = SCA_socdem_govt
	}
	else_if = {
		limit = {
			check_variable = { SCA.liberal_gov_var > SCA.socdem_gov_var }
			check_variable = { SCA.liberal_gov_var > SCA.soccon_gov_var }
		}
		set_country_flag = SCA_lib_govt
	}
	else_if = {
		limit = {
			check_variable = { SCA.soccon_gov_var > SCA.socdem_gov_var }
			check_variable = { SCA.soccon_gov_var > SCA.liberal_gov_var }
		}
		set_country_flag = SCA_soccon_govt
	}
}

SCA_create_starting_ship_variants = {
	#SWE part
	create_equipment_variant = {
		name = "Draken Class"
		type = ship_hull_submarine_2
		name_group = SWE_SS_HISTORICAL
		modules = {
			fixed_ship_torpedo_slot = ship_torpedo_sub_2
			fixed_ship_engine_slot = sub_ship_engine_2
			rear_1_custom_slot = ship_torpedo_sub_2
		}
	}
	create_equipment_variant = {
		name = "Bävern Class"					# represents Hajen and Bävern classes
		type = ship_hull_submarine_1
		name_group = SWE_SS_HISTORICAL
		modules = {
			fixed_ship_torpedo_slot = ship_torpedo_sub_1
			fixed_ship_engine_slot = sub_ship_engine_1
			rear_1_custom_slot = ship_torpedo_sub_1
		}
		obsolete = yes
	}
	create_equipment_variant = {
		name = "Göteborg Class"
		type = ship_hull_light_2
		name_group = SWE_DD_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_light_battery_2
			fixed_ship_anti_air_slot = ship_anti_air_2
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = light_ship_engine_2
			fixed_ship_torpedo_slot = ship_torpedo_2
			mid_1_custom_slot = ship_torpedo_2
			rear_1_custom_slot = ship_light_battery_2
		}
	}
	create_equipment_variant = {
		name = "Ehrensköld Class"
		type = ship_hull_light_1
		name_group = SWE_DD_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_light_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = light_ship_engine_1
			fixed_ship_torpedo_slot = ship_torpedo_1
			mid_1_custom_slot = ship_depth_charge_1
			rear_1_custom_slot = ship_depth_charge_1
		}
		obsolete = yes
	}
	create_equipment_variant = {
		name = "Tre Kronor Class" # Borrow the class name a bit
		type = ship_hull_cruiser_1
		name_group = SWE_CL_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_light_medium_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = cruiser_ship_engine_1
			fixed_ship_armor_slot = ship_armor_cruiser_1
			fixed_ship_secondaries_slot = ship_secondaries_1
			mid_1_custom_slot = ship_airplane_launcher_1
			mid_2_custom_slot = ship_light_medium_battery_1
			rear_1_custom_slot = ship_light_medium_battery_1
		}
	}
	create_equipment_variant = {
		name = "Oden Class"
		type = ship_hull_cruiser_1
		name_group = SWE_CA_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_medium_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = cruiser_ship_engine_1
			fixed_ship_armor_slot = ship_armor_cruiser_1
			fixed_ship_secondaries_slot = ship_secondaries_1
			mid_1_custom_slot = ship_airplane_launcher_1
			mid_2_custom_slot = ship_secondaries_1
			rear_1_custom_slot = ship_medium_battery_1
		}
	}
	if = {
		limit = { SWE = { has_completed_focus = SWE_hms_karl_xii } }
		create_equipment_variant = {
			name = "Kustflottan Class"
			type = ship_hull_heavy_2
			parent_version = 0
			name_group = SWE_CA_HISTORICAL
			modules = {
				fixed_ship_battery_slot = ship_heavy_battery_2
				fixed_ship_anti_air_slot = ship_anti_air_2
				fixed_ship_fire_control_system_slot = ship_fire_control_system_1
				fixed_ship_radar_slot = empty
				fixed_ship_engine_slot = heavy_ship_engine_2
				fixed_ship_secondaries_slot = ship_secondaries_2
				fixed_ship_armor_slot = ship_armor_bc_2
				front_1_custom_slot = ship_anti_air_2
				mid_1_custom_slot = ship_heavy_battery_2
				mid_2_custom_slot = ship_secondaries_2
				rear_1_custom_slot = ship_heavy_battery_2
			}
		}
	}

	#DEN part
	create_equipment_variant = {
		name = "Narhvalen Class"								# Fictional One
		type = ship_hull_submarine_2
		name_group = DEN_SS_HISTORICAL
		modules = {
			fixed_ship_torpedo_slot = ship_torpedo_sub_2
			fixed_ship_engine_slot = sub_ship_engine_2
			rear_1_custom_slot = ship_torpedo_sub_1
		}
	}
	create_equipment_variant = {
		name = "Rota/ Daphne Class"								# represents Rota and Daphne classes
		type = ship_hull_submarine_1
		name_group = DEN_SS_HISTORICAL
		modules = {
			fixed_ship_torpedo_slot = ship_torpedo_sub_1
			fixed_ship_engine_slot = sub_ship_engine_1
			rear_1_custom_slot = empty
		}
		obsolete = yes
	}
	create_equipment_variant = {
		name = "Ægir Class"
		type = ship_hull_submarine_1
		name_group = DEN_SS_HISTORICAL
		modules = {
			fixed_ship_torpedo_slot = ship_torpedo_sub_1
			fixed_ship_engine_slot = sub_ship_engine_1
			rear_1_custom_slot = empty
		}
		obsolete = yes
	}
	create_equipment_variant = {
		name = "Sehested Class"
		type = ship_hull_cruiser_2
		name_group = DEN_CL_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_light_medium_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = cruiser_ship_engine_2
			fixed_ship_secondaries_slot = ship_secondaries_1
			fixed_ship_armor_slot = ship_armor_cruiser_2
			mid_1_custom_slot = ship_torpedo_2
			mid_2_custom_slot = ship_anti_air_1
			rear_1_custom_slot = ship_light_battery_2
		}
	}
	create_equipment_variant = {
		name = "Gejser Class"
		type = ship_hull_cruiser_1
		name_group = DEN_CL_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_light_medium_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = cruiser_ship_engine_1
			fixed_ship_armor_slot = ship_armor_cruiser_1
			mid_1_custom_slot = ship_torpedo_1
			mid_2_custom_slot = ship_anti_air_1
			rear_1_custom_slot = ship_light_battery_1
		}
		obsolete = yes
	}
	create_equipment_variant = {
		name = "Søridderen Class"
		type = ship_hull_light_1
		name_group = DEN_DD_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_light_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = light_ship_engine_1
			fixed_ship_torpedo_slot = ship_torpedo_1
			mid_1_custom_slot = empty
			rear_1_custom_slot = ship_depth_charge_1
		}
		obsolete = yes
	}
	create_equipment_variant = {
		name = "Hvalrossen Class"
		type = ship_hull_light_1
		name_group = DEN_DD_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_light_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = light_ship_engine_1
			fixed_ship_torpedo_slot = ship_torpedo_1
			mid_1_custom_slot = empty
			rear_1_custom_slot = ship_depth_charge_1
		}
		obsolete = yes
	}
	create_equipment_variant = {
		name = "Dragen Class"
		type = ship_hull_light_2
		name_group = DEN_DD_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_light_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = light_ship_engine_1
			fixed_ship_torpedo_slot = ship_torpedo_1
			mid_1_custom_slot = ship_torpedo_1
			rear_1_custom_slot = ship_depth_charge_1
		}
	}
	create_equipment_variant = {
		name = "Herluf Trolle Class"
		type = ship_hull_cruiser_coastal_defense_ship
		name_group = DEN_CA_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_medium_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = cruiser_ship_engine_1
			fixed_ship_armor_slot = ship_armor_cruiser_2
			fixed_ship_secondaries_slot = ship_secondaries_1
			mid_1_custom_slot = empty
			mid_2_custom_slot = empty
			rear_1_custom_slot = ship_torpedo_1
		}
		obsolete = yes
	}
	create_equipment_variant = {
		name = "Niels Juel Class"
		type = ship_hull_cruiser_coastal_defense_ship
		name_group = DEN_CA_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_light_medium_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = cruiser_ship_engine_1
			fixed_ship_armor_slot = ship_armor_cruiser_2
			fixed_ship_secondaries_slot = empty
			mid_1_custom_slot = ship_anti_air_1
			mid_2_custom_slot = empty
			rear_1_custom_slot = ship_light_medium_battery_1
		}
	}
	create_equipment_variant = {
		name = "Nassau/Helgoland Class"
		type = ship_hull_heavy_1
		name_group = DEN_BB_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_heavy_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = heavy_ship_engine_1
			fixed_ship_secondaries_slot = ship_secondaries_1
			fixed_ship_armor_slot = ship_armor_bb_1
			front_1_custom_slot = ship_heavy_battery_1
			mid_1_custom_slot = ship_secondaries_1
			mid_2_custom_slot = ship_secondaries_1
			rear_1_custom_slot = empty
		}
		obsolete = yes
	}

	#NOR
	create_equipment_variant = {
		name = "C Class"
		type = ship_hull_submarine_2
		name_group = NOR_SS_HISTORICAL
		modules = {
			fixed_ship_torpedo_slot = ship_torpedo_sub_1
			fixed_ship_engine_slot = sub_ship_engine_2
			rear_1_custom_slot = ship_mine_layer_sub
		}
	}
	create_equipment_variant = {
		name = "A & B Class"
		type = ship_hull_submarine_1
		name_group = NOR_SS_HISTORICAL
		modules = {
			fixed_ship_torpedo_slot = ship_torpedo_sub_1
			fixed_ship_engine_slot = sub_ship_engine_1
			rear_1_custom_slot = ship_mine_layer_sub
		}
	}
	create_equipment_variant = {
		name = "Olav Tryggvason Class"							# minelayer
		type = ship_hull_light_2
		name_group = NOR_DD_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_light_battery_2
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = light_ship_engine_2
			fixed_ship_torpedo_slot = ship_torpedo_2
			mid_1_custom_slot = ship_mine_layer_1
			rear_1_custom_slot = ship_mine_layer_1
		}
	}
	create_equipment_variant = {
		name = "Draug Class"
		type = ship_hull_light_1
		name_group = NOR_DD_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_light_battery_1
			fixed_ship_anti_air_slot = empty
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = light_ship_engine_1
			fixed_ship_torpedo_slot = empty
			mid_1_custom_slot = ship_torpedo_1
			rear_1_custom_slot = empty
		}
		obsolete = yes
	}
	create_equipment_variant = {
		name = "Nassau/Helgoland Class"
		name_group = NOR_BB_HISTORICAL
		type = ship_hull_heavy_1
		modules = {
			fixed_ship_battery_slot = ship_heavy_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = heavy_ship_engine_1
			fixed_ship_secondaries_slot = ship_secondaries_1
			fixed_ship_armor_slot = ship_armor_bb_1
			front_1_custom_slot = ship_heavy_battery_1
			mid_1_custom_slot = ship_secondaries_1
			mid_2_custom_slot = ship_secondaries_1
			rear_1_custom_slot = empty
		}
		obsolete = yes
	}

	create_equipment_variant = {
		name = "Norge/Harald Haarfagre Class"
		type = ship_hull_cruiser_coastal_defense_ship
		name_group = NOR_CA_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_medium_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = cruiser_ship_engine_1
			fixed_ship_armor_slot = ship_armor_cruiser_1
			fixed_ship_secondaries_slot = ship_secondaries_1
			mid_1_custom_slot = empty
			mid_2_custom_slot = empty
			rear_1_custom_slot = empty
		}
	}
	create_equipment_variant = {#TBC
		name = "Falsen Class"
		type = ship_hull_cruiser_2
		name_group = NOR_CL_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_light_medium_battery_2
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = cruiser_ship_engine_2
			fixed_ship_armor_slot = ship_armor_cruiser_2
			front_1_custom_slot = ship_anti_air_1
			mid_1_custom_slot = ship_torpedo_1
			mid_2_custom_slot = ship_airplane_launcher_1
			rear_1_custom_slot = ship_light_medium_battery_2
		}
	}
	create_equipment_variant = {	# Training Ship, Scrapped in 1928
		name = "Frithjof Class"
		type = ship_hull_cruiser_1
		name_group = NOR_CL_HISTORICAL
		modules = {
			fixed_ship_battery_slot = ship_light_medium_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = cruiser_ship_engine_1
			fixed_ship_armor_slot = ship_armor_cruiser_1
			mid_1_custom_slot = empty
			mid_2_custom_slot = empty
			rear_1_custom_slot = empty
		}
		obsolete = yes
	}
	if = {
		limit = { NOR = { has_completed_focus = NOR_submarines } }
		create_equipment_variant = {
			name = "U Class"
			type = ship_hull_submarine_2
			parent_version = 0
			name_group = NOR_SS_HISTORICAL
			modules = {
				fixed_ship_torpedo_slot = ship_torpedo_sub_2
				fixed_ship_engine_slot = sub_ship_engine_2
				rear_1_custom_slot = ship_torpedo_sub_2
			}
		}
	}
	if = {
		limit = { NOR = { has_completed_focus = NOR_destroyers } }
		create_equipment_variant = {
			name = "Balder Class"
			type = ship_hull_light_2
			parent_version = 0
			name_group = NOR_DD_HISTORICAL
			modules = {
				fixed_ship_battery_slot = ship_light_battery_2
				fixed_ship_anti_air_slot = ship_anti_air_1
				fixed_ship_fire_control_system_slot = ship_fire_control_system_0
				fixed_ship_radar_slot = empty
				fixed_ship_engine_slot = light_ship_engine_2
				fixed_ship_torpedo_slot = ship_torpedo_1
				mid_1_custom_slot = ship_torpedo_1
				rear_1_custom_slot = ship_depth_charge_1
			}
		}
	}
}
