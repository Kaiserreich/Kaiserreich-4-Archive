##################################
#    Liangguang Effects     #
##################################
# Initial GXC rework by Vidyaorsz√°g
##################################
# Second South China Rework by Chiang Kai-Shrek, Suzuha, Hazo, Toaster, Clawedash, Festive, and the rest of the Second South China Rework Team
##################################

########################################
#########- Table of Contents - #########
########################################

#Section 1: Introgame Effects
#Section 2: Early game Effects
#Section 3: Mid Game Effects
#Section 4: Late Game Effects
#Section 5: End Game Effects

########################################
######- Section 01: Introgame - ########
########################################

###- Character Related Effects -###

GXC_EDC_recruit_characters_effect = {
	GXC_hu_hanmin = { CHN_recruit_character_effect = yes }
	GXC_li_wenfan = { CHN_recruit_character_effect = yes }
	GXC_yu_youren = { CHN_recruit_character_effect = yes }
	GXC_gu_yingfen = { CHN_recruit_character_effect = yes }
	GXC_ma_chaojun = { CHN_recruit_character_effect = yes }
}

GXC_NGD_recruit_characters_effect = {
	GXC_chen_jitang = { CHN_recruit_character_effect = yes }
	GXC_chen_weizhou = { CHN_recruit_character_effect = yes }
	GXC_huang_guangrui = { CHN_recruit_character_effect = yes }
	GXC_fan_hanjie = { CHN_recruit_character_effect = yes }
	GXC_li_yangjing = { CHN_recruit_character_effect = yes }
	GXC_yu_hanmou = { CHN_recruit_character_effect = yes }
}

GXC_NGX_recruit_characters_effect = {
	GXC_li_zongren = { CHN_recruit_character_effect = yes }
	GXC_bai_chongxi = { CHN_recruit_character_effect = yes }
	GXC_huang_shaohong = { CHN_recruit_character_effect = yes }
	GXC_huang_xuchu = { CHN_recruit_character_effect = yes }
	GXC_yu_zuobai = { CHN_recruit_character_effect = yes }
	GXC_xia_wei = { CHN_recruit_character_effect = yes }
}

GXC_WHC_recruit_characters_effect = {
	GXC_lin_sen = { CHN_recruit_character_effect = yes }
	GXC_ju_zheng = { CHN_recruit_character_effect = yes }
	GXC_xu_chongzhi = { CHN_recruit_character_effect = yes }
	GXC_li_liejun = { CHN_recruit_character_effect = yes }
	GXC_zou_lu = { CHN_recruit_character_effect = yes }
	GXC_shen_dingyi = { CHN_recruit_character_effect = yes }
}

GXC_RCF_recruit_characters_effect = {
	CHI = { CHI_sun_fo = { CHN_recruit_character_effect = yes } }
	GXC_liang_hancao = { CHN_recruit_character_effect = yes }
	GXC_huang_hanliang = { CHN_recruit_character_effect = yes }
	GXC_wu_chaoshu = { CHN_recruit_character_effect = yes }
	GXC_li_hanhun = { CHN_recruit_character_effect = yes }
	GXC_chen_ce = { CHN_recruit_character_effect = yes }
}

GXC_PPP_recruit_characters_effect = {
	GXC_chen_mingshu = { CHN_recruit_character_effect = yes }
	GXC_jiang_guangnai = { CHN_recruit_character_effect = yes }
	GXC_cai_tingkai = { CHN_recruit_character_effect = yes }
	GXC_dai_ji = { CHN_recruit_character_effect = yes }
}
GXC_GPA_recruit_characters_effect = {
	GXC_tan_pingshan = { CHN_recruit_character_effect = yes }
	GXC_ye_jianying = { CHN_recruit_character_effect = yes }
	GXC_huang_yong = { CHN_recruit_character_effect = yes }
	GXC_xiang_ying = { CHN_recruit_character_effect = yes }
	GXC_zhou_shidi = { CHN_recruit_character_effect = yes }
	GXC_liu_shixin = { CHN_recruit_character_effect = yes }
	GXC_ye_jizhuang = { CHN_recruit_character_effect = yes }
}
GXC_GFA_recruit_characters_effect = {
	GXC_peng_pai = { CHN_recruit_character_effect = yes }
	GXC_gu_dacun = { CHN_recruit_character_effect = yes }
	GXC_tan_furen = { CHN_recruit_character_effect = yes }
	GXC_wei_baqun = { CHN_recruit_character_effect = yes }
}
GXC_SPO_recruit_characters_effect = {
	GXC_deng_fa = { CHN_recruit_character_effect = yes }
	GXC_deng_zhongxia = { CHN_recruit_character_effect = yes }
	GXC_yan_hanzhang = { CHN_recruit_character_effect = yes }
	GXC_zeng_sheng = { CHN_recruit_character_effect = yes }
}
GXC_SPR_recruit_characters_effect = {
	GXC_zhang_tailei = { CHN_recruit_character_effect = yes }
}

GXC_rkmt_recruit_characters_effect = {
	GXC_EDC_recruit_characters_effect = yes
	GXC_NGD_recruit_characters_effect = yes
	GXC_NGX_recruit_characters_effect = yes
	GXC_WHC_recruit_characters_effect = yes
	GXC_RCF_recruit_characters_effect = yes
}

GXC_lkmt_recruit_characters_effect = {
	GXC_PPP_recruit_characters_effect = yes
	GXC_GPA_recruit_characters_effect = yes
	GXC_GFA_recruit_characters_effect = yes
	GXC_SPO_recruit_characters_effect = yes
	GXC_SPR_recruit_characters_effect = yes
}

GXC_kmt_recruit_characters_effect = {
	GXC_rkmt_recruit_characters_effect = yes
	GXC_lkmt_recruit_characters_effect = yes
}

GXC_EDC_purge_advisors_effect = {
	every_character = {
		limit = { has_character_flag = GXC_EDC_character_flag }
		retire = yes
	}
}

GXC_NGD_purge_advisors_effect = {
	every_character = {
		limit = { has_character_flag = GXC_NGD_character_flag }
		retire = yes
	}
}

GXC_NGX_purge_advisors_effect = {
	every_character = {
		limit = { has_character_flag = GXC_NGX_character_flag }
		retire = yes
	}
}

GXC_WHC_purge_advisors_effect = {
	every_character = {
		limit = { has_character_flag = GXC_WHC_character_flag }
		retire = yes
	}
}

GXC_RCF_purge_advisors_effect = {
	every_character = {
		limit = { has_character_flag = GXC_RCF_character_flag }
		retire = yes
	}
}

GXC_PPP_purge_advisors_effect = {
	every_character = {
		limit = { has_character_flag = GXC_PPP_character_flag }
		retire = yes
	}
}
GXC_GPA_purge_advisors_effect = {
	every_character = {
		limit = { has_character_flag = GXC_GPA_character_flag }
		retire = yes
	}
}
GXC_GFA_purge_advisors_effect = {
	every_character = {
		limit = { has_character_flag = GXC_GFA_character_flag }
		retire = yes
	}
}
GXC_SPO_purge_advisors_effect = {
	every_character = {
		limit = { has_character_flag = GXC_SPO_character_flag }
		retire = yes
	}
}
GXC_SPR_purge_advisors_effect = {
	every_character = {
		limit = { has_character_flag = GXC_SPR_character_flag }
		retire = yes
	}
}

GXC_rkmt_purge_advisors_effect = {
	GXC_EDC_purge_advisors_effect = yes
	GXC_NGD_purge_advisors_effect = yes
	GXC_NGX_purge_advisors_effect = yes
	GXC_WHC_purge_advisors_effect = yes
	GXC_RCF_purge_advisors_effect = yes
}

GXC_lkmt_purge_advisors_effect = {
	GXC_PPP_purge_advisors_effect = yes
	GXC_GPA_purge_advisors_effect = yes
	GXC_GFA_purge_advisors_effect = yes
	GXC_SPO_purge_advisors_effect = yes
	GXC_SPR_purge_advisors_effect = yes
}

GXC_kmt_purge_advisors_effect = {
	GXC_rkmt_purge_advisors_effect = yes
	GXC_lkmt_purge_advisors_effect = yes
}

###- Phase I Minigame Effects -###
GXC_introgame_minigame_cleanup_scripted_effect = {
	if = {
		limit = { has_active_mission = GXC_frontlines_shift_in_liangguang_mission_timer }
		remove_mission = GXC_frontlines_shift_in_liangguang_mission_timer
	}
	if = {
		limit = { has_active_mission = GXC_introminigame_KMT_make_their_move_mission }
		remove_mission = GXC_introminigame_KMT_make_their_move_mission
	}
	if = {
		limit = { has_active_mission = GXC_introminigame_UPC_make_their_move_mission }
		remove_mission = GXC_introminigame_UPC_make_their_move_mission
	}
	if = {
		limit = { has_active_mission = GXC_introminigame_NPA_make_their_move_mission }
		remove_mission = GXC_introminigame_NPA_make_their_move_mission
	}
	for_each_scope_loop = {
		array = GXC.liangguang_regions_array
		GXC = { remove_targeted_decision = { decision = GXC_introminigame_secure_state_decision target = PREV } }
		for_each_scope_loop = {
			array = GXC.external_backers_array
			remove_targeted_decision = { decision = GXC_introminigame_secure_state_external_NPA_decision target = PREV }
			remove_targeted_decision = { decision = GXC_introminigame_secure_state_external_UPC_decision target = PREV }
			remove_targeted_decision = { decision = GXC_introminigame_secure_state_external_KMT_decision target = PREV }
		}
	}
}

GXC_introgame_declare_victor_scripted_effect = {
	#REMEMBER EFFECT IS STATE SCOPE SO COUNTRY EFFECTS NEED TO RESCOPE TO GXC.
	if = {
		limit = {
			NOT = { check_variable = { GXC.GXC_introgame_total_KMT_points_var < GXC.GXC_introgame_total_points_var } }
		}
		GXC = {
			country_event = { id = GXC.earlygame.400 days = 0 } #The Kuomintang Return to Liangguang
			GXC_introgame_minigame_cleanup_scripted_effect = yes
			delete_units = { division_template = "Paobing Shi" }
			delete_units = { division_template = "Bubing Shi" }
			592 = {
				create_unit = {
					division = "name = \"Guomin Geming Jun Di 11 Shi\"division_template = \"Bubing Shi\" start_experience_factor = 0.2 start_equipment_factor = 1"
					prioritize_location = 1047
					owner = ROOT
				}
			}
			800 = {
				create_unit = {
					division = "name = \"Guoming Geming Jun Di 10 Shi\"division_template = \"Bubing Shi\" start_experience_factor = 0.3 start_equipment_factor = 0.6"
					prioritize_location = 1120
					owner = ROOT
				}
			}
			594 = {
				create_unit = {
					division = "name = \"Guoming Geming Jun Di 7 Jun\"division_template = \"Paobing Shi\" start_experience_factor = 0.3 start_equipment_factor = 0.7"
					prioritize_location = 7137
					owner = ROOT
				}
			}
		}
	}
	else_if = {
		limit = {
			NOT = { check_variable = { GXC.GXC_introgame_total_UPC_points_var < GXC.GXC_introgame_total_points_var } }
		}
		GXC = {
			country_event = GXC.earlygame.600 #The Federalists Seize Liangguang
			GXC_introgame_minigame_cleanup_scripted_effect = yes
			delete_units = { division_template = "Paobing Shi" }
			delete_units = { division_template = "Bubing Shi" }
			592 = {
				create_unit = {
					division = "name = \"Jiu Yue Jun Di 1 Jun\"division_template = \"Paobing Shi\" start_experience_factor = 0.2 start_equipment_factor = 1"
					prioritize_location = 1047
					owner = ROOT
				}
			}
			800 = {
				create_unit = {
					division = "name = \"Dongjiang Duli Fen Shi\"division_template = \"Bubing Shi\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
					prioritize_location = 12014
					owner = ROOT
				}
			}
			593 = {
				create_unit = {
					division = "name = \"Jiu Yue Jun Di 2 Jun\"division_template = \"Bubing Shi\" start_experience_factor = 0.2 start_equipment_factor = 0.6"
					prioritize_location = 11941
					owner = ROOT
				}
			}
		}
	}
	else_if = {
		limit = {
			NOT = { check_variable = { GXC.GXC_introgame_total_NPA_points_var < GXC.GXC_introgame_total_points_var } }
		}
		GXC = {
			country_event = { id = GXC.earlygame.800 days = 0 } #The Old Order Holds in Liangguang
			GXC_introgame_minigame_cleanup_scripted_effect = yes
		}
	}
	#Otherwise, the game keeps going.
}

GXC_introgame_calculate_total_strength_effect = {
	#REMEMBER EFFECT IS STATE SCOPE SO COUNTRY EFFECTS NEED TO RESCOPE TO GXC.
	set_variable = { GXC.GXC_introgame_total_KMT_points_var = 0 }
	set_variable = { GXC.GXC_introgame_total_UPC_points_var = 0 }
	set_variable = { GXC.GXC_introgame_total_NPA_points_var = 0 }
	#Calculate KMT strength
	for_each_scope_loop = {
		array = GXC.liangguang_regions_array
		add_to_variable = { GXC.GXC_introgame_total_KMT_points_var = THIS.GXC_introgame_local_KMT_strength_var }
	}
	#Calculate UPC strength
	for_each_scope_loop = {
		array = GXC.liangguang_regions_array
		add_to_variable = { GXC.GXC_introgame_total_UPC_points_var = THIS.GXC_introgame_local_UPC_strength_var }
	}
	#Calculate NPA strength
	for_each_scope_loop = {
		array = GXC.liangguang_regions_array
		add_to_variable = { GXC.GXC_introgame_total_NPA_points_var = THIS.GXC_introgame_local_NPA_strength_var }
	}
	#Now check to see if there is a winner
	GXC_update_map_gui_effect = yes
	GXC_introgame_declare_victor_scripted_effect = yes
}

GXC_introgame_KMT_add_state_strength_effect = {
	#REMEMBER EFFECT IS STATE SCOPE SO COUNTRY EFFECTS NEED TO RESCOPE TO GXC.

	#For ease of coding, we use rock, paper, scissors. KMT beats UPC, UPC beats NPA, NPA beats KMT when all else is equal.

	if = {
		limit = { GXC = { GXC_is_phase_1_trigger = yes } }
		if = {
			limit = { GXC_introgame_KMT_state_total_control_trigger = yes }
			GXC = { add_command_power = 10 } #REMEMBER THIS IS STATE SCOPED, NEED TO SCOPE TO OWNER
		}
		else = {
			custom_effect_tooltip = {
				localization_key = GXC_introgame_faction_add_state_strength_tt
				FACTION = GXC_faction_kuomintang
			}
			add_to_variable = { THIS.GXC_introgame_local_KMT_strength_var = 1 }
			if = {
				limit = { check_variable = { THIS.GXC_introgame_local_NPA_strength_var > THIS.GXC_introgame_local_UPC_strength_var } }
				custom_effect_tooltip = {
					localization_key = GXC_introgame_faction_sub_state_strength_tt
					FACTION = GXC_faction_regionalists
				}
				subtract_from_variable = { THIS.GXC_introgame_local_NPA_strength_var = 1 }
			}
			else = {
				#If UPC strength = NPA strength, KMT will eat from them first.
				custom_effect_tooltip = {
					localization_key = GXC_introgame_faction_sub_state_strength_tt
					FACTION = GXC_faction_federalists
				}
				subtract_from_variable = { THIS.GXC_introgame_local_UPC_strength_var = 1 }
			}
		}
		GXC_introgame_calculate_total_strength_effect = yes
	}
}

GXC_introgame_UPC_add_state_strength_effect = {
	#REMEMBER EFFECT IS STATE SCOPE SO COUNTRY EFFECTS NEED TO RESCOPE TO GXC.

	#For ease of coding, we use rock, paper, scissors. KMT beats UPC, UPC beats NPA, NPA beats KMT when all else is equal.

	if = {
		limit = { GXC = { GXC_is_phase_1_trigger = yes } }
		if = {
			limit = { GXC_introgame_UPC_state_total_control_trigger = yes }
			GXC = { add_command_power = 10 } #REMEMBER THIS IS STATE SCOPED, NEED TO SCOPE TO OWNER
		}
		else = {
			custom_effect_tooltip = {
				localization_key = GXC_introgame_faction_add_state_strength_tt
				FACTION = GXC_faction_federalists
			}
			add_to_variable = { THIS.GXC_introgame_local_UPC_strength_var = 1 }
			if = {
				limit = { check_variable = { THIS.GXC_introgame_local_KMT_strength_var > THIS.GXC_introgame_local_NPA_strength_var } }
				custom_effect_tooltip = {
					localization_key = GXC_introgame_faction_sub_state_strength_tt
					FACTION = GXC_faction_kuomintang
				}
				subtract_from_variable = { THIS.GXC_introgame_local_KMT_strength_var = 1 }
			}
			else = {
				#If NPA strength = KMT strength, UPC will eat from them first.
				custom_effect_tooltip = {
					localization_key = GXC_introgame_faction_sub_state_strength_tt
					FACTION = GXC_faction_regionalists
				}
				subtract_from_variable = { THIS.GXC_introgame_local_NPA_strength_var = 1 }
			}
		}
		GXC_introgame_calculate_total_strength_effect = yes
	}
}

GXC_introgame_NPA_add_state_strength_effect = {
	#REMEMBER EFFECT IS STATE SCOPE SO COUNTRY EFFECTS NEED TO RESCOPE TO GXC.

	#For ease of coding, we use rock, paper, scissors. KMT beats UPC, UPC beats NPA, NPA beats KMT when all else is equal.

	if = {
		limit = { GXC = { GXC_is_phase_1_trigger = yes } }
		if = {
			limit = { GXC_introgame_NPA_state_total_control_trigger = yes }
			GXC = { add_command_power = 10 } #REMEMBER THIS IS STATE SCOPED, NEED TO SCOPE TO OWNER
		}
		else = {
			custom_effect_tooltip = {
				localization_key = GXC_introgame_faction_add_state_strength_tt
				FACTION = GXC_faction_regionalists
			}
			add_to_variable = { THIS.GXC_introgame_local_NPA_strength_var = 1 }
			if = {
				limit = { check_variable = { THIS.GXC_introgame_local_UPC_strength_var > THIS.GXC_introgame_local_KMT_strength_var } }
				custom_effect_tooltip = {
					localization_key = GXC_introgame_faction_sub_state_strength_tt
					FACTION = GXC_faction_federalists
				}
				subtract_from_variable = { THIS.GXC_introgame_local_UPC_strength_var = 1 }
			}
			else = {
				#If KMT strength = UPC strength, NPA will eat from them first.
				custom_effect_tooltip = {
					localization_key = GXC_introgame_faction_sub_state_strength_tt
					FACTION = GXC_faction_kuomintang
				}
				subtract_from_variable = { THIS.GXC_introgame_local_KMT_strength_var = 1 }
			}
		}
		GXC_introgame_calculate_total_strength_effect = yes
	}
}

GXC_introgame_eliminate_regionalists_scripted_effect = {
	custom_effect_tooltip = {
		localization_key = GXC_introgame_eliminate_the_weakest_faction_scripted_effect_tt
		FACTION1 = GXC_faction_regionalists
		FACTION2 = GXC_faction_federalists
	}
	set_country_flag = GXC_introminigame_NPA_eliminated_flag
	if = {
		limit = { has_active_mission = GXC_introminigame_NPA_make_their_move_mission }
		remove_mission = GXC_introminigame_NPA_make_their_move_mission
	}
	for_each_scope_loop = {
		#REMEMBER EFFECT IS STATE SCOPE SO COUNTRY EFFECTS NEED TO RESCOPE TO GXC.
		array = GXC.liangguang_regions_array
		#...Transfer all the NPA strength to UPC.
		add_to_variable = { THIS.GXC_introgame_local_UPC_strength_var = THIS.GXC_introgame_local_NPA_strength_var }
		subtract_from_variable = { THIS.GXC_introgame_local_NPA_strength_var = THIS.GXC_introgame_local_NPA_strength_var }
	}
	if = {
		limit = { has_country_flag = GXC_introminigame_choose_NPA_side_flag }
		clr_country_flag = GXC_introminigame_choose_NPA_side_flag
		set_country_flag = GXC_introminigame_choose_UPC_side_flag
		if = {
			limit = { has_active_mission = GXC_introminigame_UPC_make_their_move_mission }
			remove_mission = GXC_introminigame_UPC_make_their_move_mission
		}
	}
}

GXC_introgame_eliminate_federalists_scripted_effect = {
	custom_effect_tooltip = {
		localization_key = GXC_introgame_eliminate_the_weakest_faction_scripted_effect_tt
		FACTION1 = GXC_faction_federalists
		FACTION2 = GXC_faction_kuomintang
	}
	set_country_flag = GXC_introminigame_UPC_eliminated_flag
	if = {
		limit = { has_active_mission = GXC_introminigame_UPC_make_their_move_mission }
		remove_mission = GXC_introminigame_UPC_make_their_move_mission
	}
	for_each_scope_loop = {
		#REMEMBER EFFECT IS STATE SCOPE SO COUNTRY EFFECTS NEED TO RESCOPE TO GXC.
		array = GXC.liangguang_regions_array
		#...Transfer all the UPC strength to KMT.
		add_to_variable = { THIS.GXC_introgame_local_KMT_strength_var = THIS.GXC_introgame_local_UPC_strength_var }
		subtract_from_variable = { THIS.GXC_introgame_local_UPC_strength_var = THIS.GXC_introgame_local_UPC_strength_var }
	}
	if = {
		limit = { has_country_flag = GXC_introminigame_choose_UPC_side_flag }
		clr_country_flag = GXC_introminigame_choose_UPC_side_flag
		set_country_flag = GXC_introminigame_choose_KMT_side_flag
		if = {
			limit = { has_active_mission = GXC_introminigame_KMT_make_their_move_mission }
			remove_mission = GXC_introminigame_KMT_make_their_move_mission
		}
	}
}

GXC_introgame_eliminate_kuomintang_scripted_effect = {
	custom_effect_tooltip = {
		localization_key = GXC_introgame_eliminate_the_weakest_faction_scripted_effect_tt
		FACTION1 = GXC_faction_kuomintang
		FACTION2 = GXC_faction_regionalists
	}
	set_country_flag = GXC_introminigame_KMT_eliminated_flag
	if = {
		limit = { has_active_mission = GXC_introminigame_KMT_make_their_move_mission }
		remove_mission = GXC_introminigame_KMT_make_their_move_mission
	}
	for_each_scope_loop = {
		#REMEMBER EFFECT IS STATE SCOPE SO COUNTRY EFFECTS NEED TO RESCOPE TO GXC.
		array = GXC.liangguang_regions_array
		#...Transfer all the KMT strength to NPA.
		add_to_variable = { THIS.GXC_introgame_local_NPA_strength_var = THIS.GXC_introgame_local_KMT_strength_var }
		subtract_from_variable = { THIS.GXC_introgame_local_KMT_strength_var = THIS.GXC_introgame_local_KMT_strength_var }
	}
	if = {
		limit = { has_country_flag = GXC_introminigame_choose_KMT_side_flag }
		clr_country_flag = GXC_introminigame_choose_KMT_side_flag
		set_country_flag = GXC_introminigame_choose_NPA_side_flag
		if = {
			limit = { has_active_mission = GXC_introminigame_NPA_make_their_move_mission }
			remove_mission = GXC_introminigame_NPA_make_their_move_mission
		}
	}
}

GXC_introgame_eliminate_the_weakest_faction_scripted_effect = {
	#If you set a game rule, the game is rigged.
	if = {
		limit = {
			has_game_rule = { rule = GXC_PATH option = GXC_PATH_NPA_AUTDEM }
		}
		custom_effect_tooltip = CHN_game_rule_rigged_warning_tt
		if = {
			limit = { check_variable = { GXC.GXC_introgame_total_KMT_points_var < GXC.GXC_introgame_total_UPC_points_var } }
			GXC_introgame_eliminate_kuomintang_scripted_effect = yes
		}
		else = {
			GXC_introgame_eliminate_federalists_scripted_effect = yes
		}
	}
	else_if = {
		limit = {
			has_game_rule = { rule = GXC_PATH option = GXC_PATH_UPC_AUTDEM }
		}
		custom_effect_tooltip = CHN_game_rule_rigged_warning_tt
		if = {
			limit = { check_variable = { GXC.GXC_introgame_total_KMT_points_var < GXC.GXC_introgame_total_NPA_points_var } }
			GXC_introgame_eliminate_kuomintang_scripted_effect = yes
		}
		else = {
			GXC_introgame_eliminate_regionalists_scripted_effect = yes
		}
	}
	else_if = {
		limit = {
			has_game_rule = { rule = GXC_PATH option = GXC_PATH_KMT_AUTDEM }
		}
		custom_effect_tooltip = CHN_game_rule_rigged_warning_tt
		if = {
			limit = { check_variable = { GXC.GXC_introgame_total_UPC_points_var < GXC.GXC_introgame_total_NPA_points_var } }
			GXC_introgame_eliminate_federalists_scripted_effect = yes
		}
		else = {
			GXC_introgame_eliminate_regionalists_scripted_effect = yes
		}
	}
	#Okay here are the actual effects
	#For ease of coding, we use rock, paper, scissors. KMT beats UPC, UPC beats NPA, NPA beats KMT when all else is equal.
	else_if = {
		limit = {
			#NPA is weaker than both UPC and KMT, so...
			check_variable = { GXC.GXC_introgame_total_NPA_points_var < GXC.GXC_introgame_total_KMT_points_var }
			NOT = { check_variable = { GXC.GXC_introgame_total_NPA_points_var > GXC.GXC_introgame_total_UPC_points_var } }
		}
		GXC_introgame_eliminate_regionalists_scripted_effect = yes
	}
	else_if = {
		limit = {
			#UPC is weaker than both KMT and NPA, so...
			check_variable = { GXC.GXC_introgame_total_UPC_points_var < GXC.GXC_introgame_total_NPA_points_var }
			NOT = { check_variable = { GXC.GXC_introgame_total_UPC_points_var > GXC.GXC_introgame_total_KMT_points_var } }
		}
		GXC_introgame_eliminate_federalists_scripted_effect = yes
	}
	else = {
		#By default NPA will gain KMT's strength. If my calculations were correct, this will only happen if the KMT is the weakest or everything is tied.
		GXC_introgame_eliminate_kuomintang_scripted_effect = yes
	}
	#Then recalculate total strength.
	GXC_introgame_calculate_total_strength_effect = yes
}

GXC_introgame_eliminate_both_non_kuomintang_factions_effect = {
	custom_effect_tooltip = {
		localization_key = GXC_introgame_eliminate_both_weaker_factions_scripted_effect_tt
		FACTION = GXC_faction_kuomintang
	}
	for_each_scope_loop = {
		#REMEMBER EFFECT IS STATE SCOPE SO COUNTRY EFFECTS NEED TO RESCOPE TO GXC.
		array = GXC.liangguang_regions_array
		set_variable = { THIS.GXC_introgame_local_NPA_strength_var = 0 }
		set_variable = { THIS.GXC_introgame_local_UPC_strength_var = 0 }
		set_variable = { THIS.GXC_introgame_local_KMT_strength_var = 5 }
	}
}

GXC_introgame_eliminate_both_non_federalist_factions_effect = {
	custom_effect_tooltip = {
		localization_key = GXC_introgame_eliminate_both_weaker_factions_scripted_effect_tt
		FACTION = GXC_faction_federalists
	}
	for_each_scope_loop = {
		#REMEMBER EFFECT IS STATE SCOPE SO COUNTRY EFFECTS NEED TO RESCOPE TO GXC.
		array = GXC.liangguang_regions_array
		set_variable = { THIS.GXC_introgame_local_NPA_strength_var = 0 }
		set_variable = { THIS.GXC_introgame_local_UPC_strength_var = 5 }
		set_variable = { THIS.GXC_introgame_local_KMT_strength_var = 0 }
	}
}

GXC_introgame_eliminate_both_non_regionalist_factions_effect = {
	custom_effect_tooltip = {
		localization_key = GXC_introgame_eliminate_both_weaker_factions_scripted_effect_tt
		FACTION = GXC_faction_regionalists
	}
	for_each_scope_loop = {
		#REMEMBER EFFECT IS STATE SCOPE SO COUNTRY EFFECTS NEED TO RESCOPE TO GXC.
		array = GXC.liangguang_regions_array
		set_variable = { THIS.GXC_introgame_local_NPA_strength_var = 5 }
		set_variable = { THIS.GXC_introgame_local_UPC_strength_var = 0 }
		set_variable = { THIS.GXC_introgame_local_KMT_strength_var = 0 }
	}
}

GXC_introgame_eliminate_both_weaker_factions_scripted_effect = {
	#If you set a game rule, the game is rigged.
	if = {
		limit = {
			has_game_rule = { rule = GXC_PATH option = GXC_PATH_NPA_AUTDEM }
		}
		custom_effect_tooltip = CHN_game_rule_rigged_warning_tt
		GXC_introgame_eliminate_both_non_regionalist_factions_effect = yes
	}
	else_if = {
		limit = {
			has_game_rule = { rule = GXC_PATH option = GXC_PATH_UPC_AUTDEM }
		}
		custom_effect_tooltip = CHN_game_rule_rigged_warning_tt
		GXC_introgame_eliminate_both_non_federalist_factions_effect = yes
	}
	else_if = {
		limit = {
			has_game_rule = { rule = GXC_PATH option = GXC_PATH_KMT_AUTDEM }
		}
		custom_effect_tooltip = CHN_game_rule_rigged_warning_tt
		GXC_introgame_eliminate_both_non_kuomintang_factions_effect = yes
	}
	#Okay here are the actual effects
	#For ease of coding, we use rock, paper, scissors. KMT beats UPC, UPC beats NPA, NPA beats KMT when all else is equal.
	else_if = {
		limit = {
			#KMT is stronger than both UPC and NPA, so...
			check_variable = { GXC.GXC_introgame_total_KMT_points_var > GXC.GXC_introgame_total_NPA_points_var }
			NOT = { check_variable = { GXC.GXC_introgame_total_KMT_points_var < GXC.GXC_introgame_total_UPC_points_var } }
		}
		GXC_introgame_eliminate_both_non_kuomintang_factions_effect = yes
	}
	else_if = {
		limit = {
			#UPC is stronger than both KMT and NPA, so...
			check_variable = { GXC.GXC_introgame_total_UPC_points_var > GXC.GXC_introgame_total_KMT_points_var }
			NOT = { check_variable = { GXC.GXC_introgame_total_UPC_points_var < GXC.GXC_introgame_total_NPA_points_var } }
		}
		GXC_introgame_eliminate_both_non_federalist_factions_effect = yes
	}
	else = {
		#By default NPA will win it all
		GXC_introgame_eliminate_both_non_regionalist_factions_effect = yes
	}
	#Then recalculate total strength.
	GXC_introgame_calculate_total_strength_effect = yes
}

GXC_update_map_gui_effect = {
	for_each_scope_loop = {
		array = GXC.liangguang_regions_array

		if = {
			limit = {
				GXC_introgame_NPA_state_total_control_trigger = yes
			}
			set_variable = { THIS.china_liangguang_state_control = 7 }
		}
		else_if = {
			limit = {
				GXC_introgame_UPC_state_total_control_trigger = yes
			}
			set_variable = { THIS.china_liangguang_state_control = 6 }
		}
		else_if = {
			limit = {
				GXC_introgame_KMT_state_total_control_trigger = yes
			}
			set_variable = { THIS.china_liangguang_state_control = 5 }
		}
		else_if = {
			limit = {
				GXC_introgame_NPA_state_partial_dominance_trigger = yes
			}
			set_variable = { THIS.china_liangguang_state_control = 4 }
		}
		else_if = {
			limit = {
				GXC_introgame_UPC_state_partial_dominance_trigger = yes
			}
			set_variable = { THIS.china_liangguang_state_control = 3 }
		}
		else_if = {
			limit = {
				GXC_introgame_KMT_state_partial_dominance_trigger = yes
			}
			set_variable = { THIS.china_liangguang_state_control = 2 }
		}
		else = {
			set_variable = { THIS.china_liangguang_state_control = 1 }
		}
	}
}

########################################
######- Section 02: Early Game - #######
########################################

### Early Game Faction Influence Change Constants ###
@GXC_size_small_constant = 0.01
@GXC_size_medium_constant = 0.03
@GXC_size_large_constant = 0.05
@GXC_size_mega_constant = 0.10
@GXC_size_giga_constant = 0.25

###- KMT Early Game Effects -###

GXC_KMT_set_initial_parties = {
	set_party_name = {
		ideology = totalist
		long_name = GXC_csp_radical_party_long
		name = GXC_csp_radical_party
	}
	set_party_name = {
		ideology = syndicalist
		long_name = GXC_csp_orthodox_party_long
		name = GXC_csp_orthodox_party
	}
	set_party_name = {
		ideology = radical_socialist
		long_name = GXC_farmers_association_party_long
		name = GXC_farmers_association_party
	}
	set_party_name = {
		ideology = social_democrat
		long_name = GXC_new_fourth_army_party_long
		name = GXC_new_fourth_army_party
	}
	set_party_name = {
		ideology = social_liberal
		long_name = GXC_reconstruction_faction_initial_party_long
		name = GXC_reconstruction_faction_initial_party
	}
	set_party_name = {
		ideology = market_liberal
		long_name = GXC_dangwai_party_long
		name = GXC_dangwai_party
	}
	set_party_name = {
		ideology = social_conservative
		long_name = GXC_western_hills_clique_party_long
		name = GXC_western_hills_clique_party
	}
	set_party_name = {
		ideology = authoritarian_democrat
		long_name = GXC_new_guangdong_clique_party_long
		name = GXC_new_guangdong_clique_party
	}
	set_party_name = {
		ideology = paternal_autocrat
		long_name = GXC_new_guangxi_clique_party_long
		name = GXC_new_guangxi_clique_party
	}
	set_party_name = {
		ideology = national_populist
		long_name = GXC_warlord_remnant_party_long
		name = GXC_warlord_remnant_party
	}

	promote_character = {
		character = GXC_zhang_tailei
		ideology = totalist_subtype
	}
	promote_character = {
		character = GXC_tan_pingshan
		ideology = syndicalist_subtype
	}
	promote_character = {
		character = GXC_peng_pai
		ideology = radical_socialist_subtype
	}
	promote_character = {
		character = GXC_chen_mingshu
		ideology = social_democrat_subtype
	}
	promote_character = {
		character = GXC_liang_hancao
		ideology = social_liberal_subtype
	}
	promote_character = {
		character = GXC_assorted_leaders
		ideology = market_liberal_subtype
	}
	promote_character = {
		character = GXC_assorted_leaders
		ideology = social_conservative_subtype
	}
	promote_character = {
		character = GXC_chen_jitang
		ideology = authoritarian_democrat_subtype
	}
	promote_character = {
		character = GXC_li_zongren
		ideology = paternal_autocrat_subtype
	}
	promote_character = {
		character = GXC_assorted_leaders
		ideology = national_populist_subtype
	}
}

#Strengthening EDC
GXC_add_EDC_effect = {
	add_popularity = {
		ideology = authoritarian_democrat
		popularity = var:GXC_size_var
	}
}

GXC_EDC_mechanic_effect = {
	if = {
		limit = {
			OR = {
				GXC_is_phase_3_trigger = yes
				GXC_is_phase_4_trigger = yes
				GXC_is_phase_5_trigger = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = GXC_EDC_event_one_flag }
				GXC_EDC_level_one_trigger = yes
			}
			hidden_effect = { country_event = { id = GXC.midgame.460 days = 3 } }
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = GXC_EDC_event_two_flag }
				GXC_EDC_level_two_trigger = yes
			}
			hidden_effect = { country_event = { id = GXC.midgame.461 days = 3 } }
		}
	}
}

GXC_EDC_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_EDC_effect = yes
	GXC_EDC_mechanic_effect = yes
}
GXC_EDC_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_EDC_effect = yes
	GXC_EDC_mechanic_effect = yes
}
GXC_EDC_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_EDC_effect = yes
	GXC_EDC_mechanic_effect = yes
}
GXC_EDC_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_EDC_effect = yes
	GXC_EDC_mechanic_effect = yes
}
GXC_EDC_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_EDC_effect = yes
	GXC_EDC_mechanic_effect = yes
}

#Strengthening NGD
GXC_add_NGD_effect = {
	add_popularity = {
		ideology = authoritarian_democrat
		popularity = var:GXC_size_var
	}
}

GXC_NGD_mechanic_effect = {
	if = {
		limit = {
			OR = {
				GXC_is_phase_3_trigger = yes
				GXC_is_phase_4_trigger = yes
				GXC_is_phase_5_trigger = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = GXC_NGD_event_one_flag }
				GXC_NGD_level_one_trigger = yes
			}
			hidden_effect = { country_event = { id = GXC.midgame.462 days = 3 } }
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = GXC_NGD_event_two_flag }
				GXC_NGD_level_two_trigger = yes
			}
			hidden_effect = { country_event = { id = GXC.midgame.463 days = 3 } }
		}
	}
}

GXC_NGD_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_NGD_effect = yes
	GXC_NGD_mechanic_effect = yes
}
GXC_NGD_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_NGD_effect = yes
	GXC_NGD_mechanic_effect = yes
}
GXC_NGD_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_NGD_effect = yes
	GXC_NGD_mechanic_effect = yes
}
GXC_NGD_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_NGD_effect = yes
	GXC_NGD_mechanic_effect = yes
}
GXC_NGD_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_NGD_effect = yes
	GXC_NGD_mechanic_effect = yes
}

#Strengthening NGX
GXC_add_NGX_effect = {
	add_popularity = {
		ideology = paternal_autocrat
		popularity = var:GXC_size_var
	}
}

GXC_NGX_mechanic_effect = {
	if = {
		limit = {
			OR = {
				GXC_is_phase_3_trigger = yes
				GXC_is_phase_4_trigger = yes
				GXC_is_phase_5_trigger = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = GXC_NGX_event_one_flag }
				GXC_NGX_level_one_trigger = yes
			}
			hidden_effect = { country_event = { id = GXC.midgame.464 days = 3 } }
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = GXC_NGX_event_two_flag }
				GXC_NGX_level_two_trigger = yes
			}
			hidden_effect = { country_event = { id = GXC.midgame.465 days = 3 } }
		}
	}
}

GXC_NGX_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_NGX_effect = yes
	GXC_NGX_mechanic_effect = yes
}
GXC_NGX_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_NGX_effect = yes
	GXC_NGX_mechanic_effect = yes
}
GXC_NGX_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_NGX_effect = yes
	GXC_NGX_mechanic_effect = yes
}
GXC_NGX_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_NGX_effect = yes
	GXC_NGX_mechanic_effect = yes
}
GXC_NGX_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_NGX_effect = yes
	GXC_NGX_mechanic_effect = yes
}

#Strengthening WHC
GXC_add_WHC_effect = {
	add_popularity = {
		ideology = social_conservative
		popularity = var:GXC_size_var
	}
}

GXC_WHC_mechanic_effect = {
	if = {
		limit = {
			OR = {
				GXC_is_phase_3_trigger = yes
				GXC_is_phase_4_trigger = yes
				GXC_is_phase_5_trigger = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = GXC_WHC_event_one_flag }
				GXC_WHC_level_one_trigger = yes
			}
			hidden_effect = { country_event = { id = GXC.midgame.468 days = 3 } }
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = GXC_WHC_event_two_flag }
				GXC_WHC_level_two_trigger = yes
			}
			hidden_effect = { country_event = { id = GXC.midgame.469 days = 3 } }
		}
	}
}

GXC_WHC_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_WHC_effect = yes
	GXC_WHC_mechanic_effect = yes
}
GXC_WHC_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_WHC_effect = yes
	GXC_WHC_mechanic_effect = yes
}
GXC_WHC_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_WHC_effect = yes
	GXC_WHC_mechanic_effect = yes
}
GXC_WHC_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_WHC_effect = yes
	GXC_WHC_mechanic_effect = yes
}
GXC_WHC_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_WHC_effect = yes
	GXC_WHC_mechanic_effect = yes
}

#Strengthening RCF
GXC_add_RCF_effect = {
	add_popularity = {
		ideology = social_liberal
		popularity = var:GXC_size_var
	}
}

GXC_RCF_mechanic_effect = {
	if = {
		limit = {
			OR = {
				GXC_is_phase_3_trigger = yes
				GXC_is_phase_4_trigger = yes
				GXC_is_phase_5_trigger = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = GXC_RCF_event_one_flag }
				GXC_RCF_level_one_trigger = yes
			}
			hidden_effect = { country_event = { id = GXC.midgame.466 days = 3 } }
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = GXC_RCF_event_two_flag }
				GXC_RCF_level_two_trigger = yes
			}
			hidden_effect = { country_event = { id = GXC.midgame.467 days = 3 } }
		}
	}
}

GXC_RCF_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_RCF_effect = yes
	GXC_RCF_mechanic_effect = yes
}
GXC_RCF_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_RCF_effect = yes
	GXC_RCF_mechanic_effect = yes
}
GXC_RCF_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_RCF_effect = yes
	GXC_RCF_mechanic_effect = yes
}
GXC_RCF_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_RCF_effect = yes
	GXC_RCF_mechanic_effect = yes
}
GXC_RCF_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_RCF_effect = yes
	GXC_RCF_mechanic_effect = yes
}
#Strengthening PPP
GXC_add_PPP_effect = {
	add_popularity = {
		ideology = social_democrat
		popularity = var:GXC_size_var
	}
}
GXC_PPP_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_PPP_effect = yes
}
GXC_PPP_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_PPP_effect = yes
}
GXC_PPP_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_PPP_effect = yes
}
GXC_PPP_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_PPP_effect = yes
}
GXC_PPP_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_PPP_effect = yes
}

#Strengthening GPA
GXC_add_GPA_effect = {
	add_popularity = {
		ideology = syndicalist
		popularity = var:GXC_size_var
	}
}
GXC_GPA_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_GPA_effect = yes
}
GXC_GPA_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_GPA_effect = yes
}
GXC_GPA_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_GPA_effect = yes
}
GXC_GPA_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_GPA_effect = yes
}
GXC_GPA_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_GPA_effect = yes
}

#Strengthening GFA
GXC_add_GFA_effect = {
	add_popularity = {
		ideology = radical_socialist
		popularity = var:GXC_size_var
	}
}
GXC_GFA_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_GFA_effect = yes
}
GXC_GFA_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_GFA_effect = yes
}
GXC_GFA_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_GFA_effect = yes
}
GXC_GFA_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_GFA_effect = yes
}
GXC_GFA_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_GFA_effect = yes
}

#Strengthening SPO
GXC_add_SPO_effect = {
	add_popularity = {
		ideology = syndicalist
		popularity = var:GXC_size_var
	}
}
GXC_SPO_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_SPO_effect = yes
}
GXC_SPO_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_SPO_effect = yes
}
GXC_SPO_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_SPO_effect = yes
}
GXC_SPO_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_SPO_effect = yes
}
GXC_SPO_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_SPO_effect = yes
}

#Strengthening SPR
GXC_add_SPR_effect = {
	add_popularity = {
		ideology = totalist
		popularity = var:GXC_size_var
	}
}
GXC_SPR_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_SPR_effect = yes
}
GXC_SPR_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_SPR_effect = yes
}
GXC_SPR_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_SPR_effect = yes
}
GXC_SPR_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_SPR_effect = yes
}
GXC_SPR_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_SPR_effect = yes
}

#Strengthening DSP
GXC_add_DSP_effect = {
	add_popularity = {
		ideology = social_democrat
		popularity = var:GXC_size_var
	}
}

GXC_DSP_mechanic_effect = {
	if = {
		limit = {
			OR = {
				GXC_is_phase_3_trigger = yes
				GXC_is_phase_4_trigger = yes
				GXC_is_phase_5_trigger = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = GXC_DSP_event_one_flag }
				GXC_DSP_level_one_trigger = yes
			}
			hidden_effect = { country_event = { id = GXC.midgame.640 days = 3 } } #The Two Zhangs of the DSP
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = GXC_DSP_event_two_flag }
				GXC_DSP_level_two_trigger = yes
			}
			hidden_effect = { country_event = { id = GXC.midgame.641 days = 3 } } #Democracy Among Democratic Socialists
		}
	}
}

GXC_DSP_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_DSP_effect = yes
	GXC_DSP_mechanic_effect = yes
}
GXC_DSP_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_DSP_effect = yes
	GXC_DSP_mechanic_effect = yes
}
GXC_DSP_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_DSP_effect = yes
	GXC_DSP_mechanic_effect = yes
}
GXC_DSP_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_DSP_effect = yes
	GXC_DSP_mechanic_effect = yes
}
GXC_DSP_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_DSP_effect = yes
	GXC_DSP_mechanic_effect = yes
}

#Strengthening PIP
GXC_add_PIP_effect = {
	add_popularity = {
		ideology = social_liberal
		popularity = var:GXC_size_var
	}
}

GXC_PIP_mechanic_effect = {
	if = {
		limit = {
			OR = {
				GXC_is_phase_3_trigger = yes
				GXC_is_phase_4_trigger = yes
				GXC_is_phase_5_trigger = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = GXC_PIP_event_one_flag }
				GXC_PIP_level_one_trigger = yes
			}
			if = {
				limit = { china_is_aligned_with_federalists = yes }
				hidden_effect = { country_event = { id = GXC.midgame.642 days = 3 } } #Chen Jiongming, the Reformer?
			}
			else = {
				hidden_effect = { country_event = { id = GXC.midgame.830 days = 3 } } #New Tricks for an Old Warlord
			}
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = GXC_PIP_event_two_flag }
				GXC_PIP_level_two_trigger = yes
			}
			if = {
				limit = { china_is_aligned_with_federalists = yes }
				hidden_effect = { country_event = { id = GXC.midgame.643 days = 3 } } #The PIP Grows in Size
			}
			else = {
				hidden_effect = { country_event = { id = GXC.midgame.831 days = 3 } } #Resurgence of the Yue Clique
			}
		}
	}
}

GXC_PIP_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_PIP_effect = yes
	GXC_PIP_mechanic_effect = yes
}
GXC_PIP_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_PIP_effect = yes
	GXC_PIP_mechanic_effect = yes
}
GXC_PIP_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_PIP_effect = yes
	GXC_PIP_mechanic_effect = yes
}
GXC_PIP_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_PIP_effect = yes
	GXC_PIP_mechanic_effect = yes
}
GXC_PIP_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_PIP_effect = yes
	GXC_PIP_mechanic_effect = yes
}

#Strengthening CMC
GXC_add_CMC_effect = {
	if = {
		limit = {
			china_is_aligned_with_federalists = no
			china_is_aligned_with_kmt = no
		}
		add_popularity = {
			ideology = social_conservative
			popularity = var:GXC_size_var
		}
	}
	else = {
		add_popularity = {
			ideology = market_liberal
			popularity = var:GXC_size_var
		}
	}
}

GXC_CMC_mechanic_effect = {
	if = {
		limit = {
			OR = {
				GXC_is_phase_3_trigger = yes
				GXC_is_phase_4_trigger = yes
				GXC_is_phase_5_trigger = yes
			}
		}
		if = {
			limit = { china_alignment_federalists = yes }
			if = {
				limit = {
					NOT = { has_country_flag = GXC_CMC_event_one_flag }
					market_liberal > 0.15
				}
				hidden_effect = { country_event = { id = GXC.midgame.644 days = 3 } } #Cantonese Liberalism in Government?
			}
			else_if = {
				limit = {
					NOT = { has_country_flag = GXC_CMC_event_two_flag }
					market_liberal > 0.35
				}
				hidden_effect = { country_event = { id = GXC.midgame.645 days = 3 } } #The Governor and His Mayor
			}
		}
		else = {
			if = {
				limit = {
					NOT = { has_country_flag = GXC_CMC_event_one_flag }
					social_conservative > 0.25
				}
				hidden_effect = { country_event = { id = GXC.midgame.834 days = 3 } } #Chen Lianbo, the Merchant Prince
			}
			else_if = {
				limit = {
					NOT = { has_country_flag = GXC_CMC_event_two_flag }
					social_conservative > 0.35
				}
				hidden_effect = { country_event = { id = GXC.midgame.835 days = 3 } } #The AACSG Entrenches Themselves
			}
		}
	}
}

GXC_CMC_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_CMC_effect = yes
	GXC_CMC_mechanic_effect = yes
}
GXC_CMC_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_CMC_effect = yes
	GXC_CMC_mechanic_effect = yes
}
GXC_CMC_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_CMC_effect = yes
	GXC_CMC_mechanic_effect = yes
}
GXC_CMC_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_CMC_effect = yes
	GXC_CMC_mechanic_effect = yes
}
GXC_CMC_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_CMC_effect = yes
	GXC_CMC_mechanic_effect = yes
}

#Strengthening GIM
GXC_add_GIM_effect = {
	add_popularity = {
		ideology = social_conservative
		popularity = var:GXC_size_var
	}
}

GXC_GIM_mechanic_effect = {
	if = {
		limit = {
			OR = {
				GXC_is_phase_3_trigger = yes
				GXC_is_phase_4_trigger = yes
				GXC_is_phase_5_trigger = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = GXC_GIM_event_one_flag }
				GXC_GIM_level_one_trigger = yes
				china_is_aligned_with_federalists = yes
			}
			hidden_effect = { country_event = { id = GXC.midgame.646 days = 3 } } #Chen Jiongming and the Chens of Haifeng
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = GXC_GIM_event_two_flag }
				GXC_GIM_level_two_trigger = yes
				china_is_aligned_with_federalists = yes
			}
			hidden_effect = { country_event = { id = GXC.midgame.647 days = 3 } } #The GIMA Expands in Size!
		}
	}
}

GXC_GIM_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_GIM_effect = yes
	GXC_GIM_mechanic_effect = yes
}
GXC_GIM_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_GIM_effect = yes
	GXC_GIM_mechanic_effect = yes
}
GXC_GIM_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_GIM_effect = yes
	GXC_GIM_mechanic_effect = yes
}
GXC_GIM_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_GIM_effect = yes
	GXC_GIM_mechanic_effect = yes
}
GXC_GIM_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_GIM_effect = yes
	GXC_GIM_mechanic_effect = yes
}

#Strengthening YUE
GXC_add_YUE_effect = {
	add_popularity = {
		ideology = authoritarian_democrat
		popularity = var:GXC_size_var
	}
}

GXC_YUE_mechanic_effect = {
	if = {
		limit = {
			OR = {
				GXC_is_phase_3_trigger = yes
				GXC_is_phase_4_trigger = yes
				GXC_is_phase_5_trigger = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = GXC_YUE_event_one_flag }
				GXC_YUE_level_one_trigger = yes
				china_is_aligned_with_federalists = yes
			}
			hidden_effect = { country_event = { id = GXC.midgame.648 days = 3 } } #Chen Jiongming, Defender of Order
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = GXC_YUE_event_two_flag }
				GXC_YUE_level_two_trigger = yes
				china_is_aligned_with_federalists = yes
			}
			hidden_effect = { country_event = { id = GXC.midgame.649 days = 3 } } #The Dominance of the Yue Army
		}
	}
}

GXC_YUE_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_YUE_effect = yes
	GXC_YUE_mechanic_effect = yes
}
GXC_YUE_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_YUE_effect = yes
	GXC_YUE_mechanic_effect = yes
}
GXC_YUE_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_YUE_effect = yes
	GXC_YUE_mechanic_effect = yes
}
GXC_YUE_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_YUE_effect = yes
	GXC_YUE_mechanic_effect = yes
}
GXC_YUE_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_YUE_effect = yes
	GXC_YUE_mechanic_effect = yes
}

#Strengthening SAF
GXC_add_SAF_effect = {
	add_popularity = {
		ideology = paternal_autocrat
		popularity = var:GXC_size_var
	}
}

GXC_SAF_mechanic_effect = {
	if = {
		limit = {
			OR = {
				GXC_is_phase_3_trigger = yes
				GXC_is_phase_4_trigger = yes
				GXC_is_phase_5_trigger = yes
			}
		}
		if = {
			limit = { china_is_aligned_with_federalists = yes }
			if = {
				limit = {
					NOT = { has_country_flag = GXC_SAF_event_one_flag }
					GXC_SAF_level_one_trigger = yes
				}
				hidden_effect = { country_event = { id = GXC.midgame.650 days = 3 } } #Deng Benyin, a Progressive Warlord?
			}
			else_if = {
				limit = {
					NOT = { has_country_flag = GXC_SAF_event_two_flag }
					GXC_SAF_level_two_trigger = yes
				}
				hidden_effect = { country_event = { id = GXC.midgame.651 days = 3 } } #The Petty Warlords of Liangguang
			}
		}
		else = {
			if = {
				limit = {
					NOT = { has_country_flag = GXC_SAF_event_one_flag }
					GXC_SAF_level_one_trigger = yes
				}
				hidden_effect = { country_event = { id = GXC.midgame.838 days = 3 } } #From a Bandit to a Warlord
			}
			else_if = {
				limit = {
					NOT = { has_country_flag = GXC_SAF_event_two_flag }
					GXC_SAF_level_two_trigger = yes
				}
				hidden_effect = { country_event = { id = GXC.midgame.839 days = 3 } } #Zhu Jiahua, the Grey Eminence
			}
		}
	}
}

GXC_SAF_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_SAF_effect = yes
	GXC_SAF_mechanic_effect = yes
}
GXC_SAF_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_SAF_effect = yes
	GXC_SAF_mechanic_effect = yes
}
GXC_SAF_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_SAF_effect = yes
	GXC_SAF_mechanic_effect = yes
}
GXC_SAF_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_SAF_effect = yes
	GXC_SAF_mechanic_effect = yes
}
GXC_SAF_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_SAF_effect = yes
	GXC_SAF_mechanic_effect = yes
}

#Strengthening YGF
GXC_add_YGF_effect = {
	add_popularity = {
		ideology = authoritarian_democrat
		popularity = var:GXC_size_var
	}
}
GXC_YGF_mechanic_event_effect = {
	if = {
		limit = {
			NOT = { has_country_flag = GXC_YGF_event_one_flag }
			GXC_YGF_level_one_trigger = yes
		}
		hidden_effect = { country_event = { id = GXC.midgame.836 days = 3 } } #The Young Marshal of the South
	}
	else_if = {
		limit = {
			NOT = { has_country_flag = GXC_YGF_event_two_flag }
			GXC_YGF_level_two_trigger = yes
		}
		hidden_effect = { country_event = { id = GXC.midgame.837 days = 3 } } #Marshal Lu and the Triumvirs
	}
}

GXC_YGF_mechanic_effect = {
	if = {
		limit = {
			OR = {
				GXC_is_phase_3_trigger = yes
				GXC_is_phase_4_trigger = yes
				GXC_is_phase_5_trigger = yes
			}
		}
		GXC_YGF_mechanic_event_effect = yes
	}
}

GXC_YGF_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_YGF_effect = yes
	GXC_YGF_mechanic_effect = yes
}
GXC_YGF_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_YGF_effect = yes
	GXC_YGF_mechanic_effect = yes
}
GXC_YGF_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_YGF_effect = yes
	GXC_YGF_mechanic_effect = yes
}
GXC_YGF_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_YGF_effect = yes
	GXC_YGF_mechanic_effect = yes
}
GXC_YGF_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_YGF_effect = yes
	GXC_YGF_mechanic_effect = yes
}

#Strengthening PSC
GXC_add_PSC_effect = {
	add_popularity = {
		ideology = market_liberal
		popularity = var:GXC_size_var
	}
}

GXC_PSC_mechanic_effect = {
	if = {
		limit = {
			OR = {
				GXC_is_phase_3_trigger = yes
				GXC_is_phase_4_trigger = yes
				GXC_is_phase_5_trigger = yes
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = GXC_PSC_event_one_flag }
				market_liberal > 0.15
				china_is_aligned_with_federalists = no
				china_is_aligned_with_kmt = no
			}
			hidden_effect = { country_event = { id = GXC.midgame.832 days = 3 } } #\"Rebellious Boy\"; the Guangxi Playboy
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = GXC_PSC_event_two_flag }
				market_liberal > 0.35
				china_is_aligned_with_federalists = no
				china_is_aligned_with_kmt = no
			}
			hidden_effect = { country_event = { id = GXC.midgame.833 days = 3 } } #Western Liberalism in Today's China
		}
	}
}

GXC_PSC_small_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_small_constant }
	GXC_add_PSC_effect = yes
	GXC_PSC_mechanic_effect = yes
}
GXC_PSC_medium_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_medium_constant }
	GXC_add_PSC_effect = yes
	GXC_PSC_mechanic_effect = yes
}
GXC_PSC_large_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_large_constant }
	GXC_add_PSC_effect = yes
	GXC_PSC_mechanic_effect = yes
}
GXC_PSC_mega_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_mega_constant }
	GXC_add_PSC_effect = yes
	GXC_PSC_mechanic_effect = yes
}
GXC_PSC_giga_effect = {
	set_temp_variable = { GXC_size_var = @GXC_size_giga_constant }
	GXC_add_PSC_effect = yes
	GXC_PSC_mechanic_effect = yes
}

########################################
######- Section 03: Mid Game - #########
########################################

### - Political Effects -###

GXC_KMT_popular_support_effect = {
	#Upgrade from 0 to Level 1 start of Phase II
	#Need this twice effect in Phase II (one mandatory, one optional)
	#None of this effect in Phase III
	#Need this effect in Phase IV + backup
	#Need this effect in Phase V + backup + epilogue
	if = {
		limit = { has_idea = GXC_KMT_popular_support_1 }
		swap_ideas = {
			remove_idea = GXC_KMT_popular_support_1
			add_idea = GXC_KMT_popular_support_2
		}
	}
	else_if = {
		limit = { has_idea = GXC_KMT_popular_support_2 }
		swap_ideas = {
			remove_idea = GXC_KMT_popular_support_2
			add_idea = GXC_KMT_popular_support_3
		}
	}
	else_if = {
		limit = { has_idea = GXC_KMT_popular_support_3 }
		swap_ideas = {
			remove_idea = GXC_KMT_popular_support_3
			add_idea = GXC_KMT_popular_support_4
		}
	}
	else_if = {
		limit = { has_idea = GXC_KMT_popular_support_4 }
		swap_ideas = {
			remove_idea = GXC_KMT_popular_support_4
			add_idea = GXC_KMT_popular_support_5
		}
	}
}

GXC_UPC_popular_support_effect = {
	#Upgrade from 0 to Level 1 start of Phase II
	#Need this twice effect in Phase II (one mandatory, one optional)
	#None of this effect in Phase III
	#Need this effect in Phase IV + backup
	#Need this effect in Phase V + backup + epilogue
	if = {
		limit = { has_idea = GXC_UPC_popular_support_1 }
		swap_ideas = {
			remove_idea = GXC_UPC_popular_support_1
			add_idea = GXC_UPC_popular_support_2
		}
	}
	else_if = {
		limit = { has_idea = GXC_UPC_popular_support_2 }
		swap_ideas = {
			remove_idea = GXC_UPC_popular_support_2
			add_idea = GXC_UPC_popular_support_3
		}
	}
	else_if = {
		limit = { has_idea = GXC_UPC_popular_support_3 }
		swap_ideas = {
			remove_idea = GXC_UPC_popular_support_3
			add_idea = GXC_UPC_popular_support_4
		}
	}
	else_if = {
		limit = { has_idea = GXC_UPC_popular_support_4 }
		swap_ideas = {
			remove_idea = GXC_UPC_popular_support_4
			add_idea = GXC_UPC_popular_support_5
		}
	}
}

GXC_NPA_popular_support_effect = {
	if = {
		limit = { has_idea = GXC_NPA_popular_support_1 }
		swap_ideas = {
			remove_idea = GXC_NPA_popular_support_1
			add_idea = GXC_NPA_popular_support_2
		}
	}
	else_if = {
		limit = { has_idea = GXC_NPA_popular_support_2 }
		swap_ideas = {
			remove_idea = GXC_NPA_popular_support_2
			add_idea = GXC_NPA_popular_support_3
		}
	}
	else_if = {
		limit = { has_idea = GXC_NPA_popular_support_3 }
		swap_ideas = {
			remove_idea = GXC_NPA_popular_support_3
			add_idea = GXC_NPA_popular_support_4
		}
	}
	else_if = {
		limit = { has_idea = GXC_NPA_popular_support_4 }
		swap_ideas = {
			remove_idea = GXC_NPA_popular_support_4
			add_idea = GXC_NPA_popular_support_5
		}
	}
}

### - Military Effects - ###
GXC_forts_effect = {
	1012 = {
		add_building_construction = {
			type = bunker
			level = 1
			instant_build = yes
			province = 4050 #Huiyang
		}
	}
	800 = {
		add_building_construction = {
			type = bunker
			level = 1
			instant_build = yes
			province = 1120 #Shaoguan
		}
	}
	592 = {
		add_building_construction = {
			type = bunker
			level = 2
			instant_build = yes
			province = 1047 #Guangzhou
		}
	}
	593 = {
		add_building_construction = {
			type = bunker
			level = 1
			instant_build = yes
			province = 11941 #Qingyuan
		}
		add_building_construction = {
			type = bunker
			level = 1
			instant_build = yes
			province = 1187 #Taishan
		}
	}
	599 = {
		add_building_construction = {
			type = bunker
			level = 1
			instant_build = yes
			province = 4152 #Wuzhou
		}
		add_building_construction = {
			type = bunker
			level = 1
			instant_build = yes
			province = 10404 #Guilin
		}
	}
	1055 = {
		add_building_construction = {
			type = bunker
			level = 1
			instant_build = yes
			province = 4134 #Liuzhou
		}
	}
	594 = {
		add_building_construction = {
			type = bunker
			level = 2
			instant_build = yes
			province = 7137 #Nanning
		}
		add_building_construction = {
			type = bunker
			level = 1
			instant_build = yes
			province = 12023 #Yulin
		}
	}
	1054 = {
		add_building_construction = {
			type = bunker
			level = 1
			instant_build = yes
			province = 10459 #Baise
		}
		add_building_construction = {
			type = bunker
			level = 2
			instant_build = yes
			province = 4121 #Chongzuo
		}
	}
	1056 = {
		add_building_construction = {
			type = bunker
			level = 1
			instant_build = yes
			province = 4023 #Beihai
		}
	}
	591 = {
		add_building_construction = {
			type = bunker
			level = 1
			instant_build = yes
			province = 1070 #Haikou
		}
		add_building_construction = {
			type = bunker
			level = 1
			instant_build = yes
			province = 994 #Yaxian
		}
	}
}

GXC_coastal_forts_effect = {
	1056 = {  #Beihai
		add_building_construction = {
			type = coastal_bunker
			level = 3
			instant_build = yes
			province = 4023
		}
	}
	591 = {  #Haikou
		add_building_construction = {
			type = coastal_bunker
			level = 3
			instant_build = yes
			province = 1070
		}
	}
	591 = {  #Yaxian
		add_building_construction = {
			type = coastal_bunker
			level = 3
			instant_build = yes
			province = 994
		}
	}
	1012 = {   #Huiyang
		add_building_construction = {
			type = coastal_bunker
			level = 3
			instant_build = yes
			province = 4050
		}
	}
	592 = {  #Guangzhou
		add_building_construction = {
			type = coastal_bunker
			level = 5
			instant_build = yes
			province = 1047
		}
		add_building_construction = {
			type = anti_air_building
			level = 2
			instant_build = yes
		}
		add_building_construction = {
			type = naval_base
			level = 2
			instant_build = yes
			province = 1047
		}
	}
	if = {   #Shantou
		limit = { owns_state = 801 }
		801 = {
			add_building_construction = {
				type = coastal_bunker
				level = 4
				instant_build = yes
				province = 9938
			}
		}
	}
	if = {   #Hong Kong
		limit = { owns_state = 326 }
		326 = {
			add_building_construction = {
				type = coastal_bunker
				level = 4
				instant_build = yes
				province = 10062
			}
		}
	}
	if = {   #Macau
		limit = { owns_state = 729 }
		729 = {
			add_building_construction = {
				type = coastal_bunker
				level = 4
				instant_build = yes
				province = 4189
			}
		}
	}
	if = {   #Zhanjiang
		limit = { owns_state = 728 }
		728 = {
			add_building_construction = {
				type = coastal_bunker
				level = 4
				instant_build = yes
				province = 11981
			}
		}
	}
}

@GXC_max_militia_division_cap = 200
@GXC_militia_cap_increase = 5
@GXC_militia_cap_increase_fourfold = 20
GXC_increase_militia_cap = {
	set_temp_variable = { GXC_militia_division_cap_new = GXC_militia_division_cap?10 } #Default cap is 10
	add_to_temp_variable = { GXC_militia_division_cap_new = @GXC_militia_cap_increase }
	clamp_temp_variable = { var = GXC_militia_division_cap_new min = 0 max = @GXC_max_militia_division_cap }
	set_division_template_cap = {
		division_template = "Gui Minbing"
		division_cap = GXC_militia_division_cap_new
	}
	set_variable = { GXC_militia_division_cap = GXC_militia_division_cap_new }
}
GXC_increase_militia_cap_fourfold = {
	set_temp_variable = { GXC_militia_division_cap_new = GXC_militia_division_cap?10 } #Default cap is 10
	add_to_temp_variable = { GXC_militia_division_cap_new = @GXC_militia_cap_increase_fourfold }
	clamp_temp_variable = { var = GXC_militia_division_cap_new min = 0 max = @GXC_max_militia_division_cap }
	set_division_template_cap = {
		division_template = "Gui Minbing"
		division_cap = GXC_militia_division_cap_new
	}
	set_variable = { GXC_militia_division_cap = GXC_militia_division_cap_new }
}
GXC_dockyards_effect = {
	if = {
		limit = { owns_state = 716 } #Shenyang
		716 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = dockyard
				level = 1
				instant_build = yes
			}
		}
	}
	if = {
		limit = { owns_state = 1065 } #Jiadong
		1065 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = dockyard
				level = 1
				instant_build = yes
			}
		}
	}
	if = {
		limit = { owns_state = 743 } #Shanghai
		743 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = dockyard
				level = 1
				instant_build = yes
			}
		}
	}
	if = {
		limit = { owns_state = 747 } #Fuzhou
		747 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = dockyard
				level = 1
				instant_build = yes
			}
		}
	}
	if = {
		limit = { owns_state = 592 } #Guangzhou
		592 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = dockyard
				level = 1
				instant_build = yes
			}
		}
	}
}

GXC_air_reform_effect = {
	if = {
		limit = { has_idea = GXC_republic_of_china_air_force_idea }
		swap_ideas = {
			remove_idea = GXC_republic_of_china_air_force_idea
			add_idea = GXC_republic_of_china_air_force_idea2
		}
	}
	else_if = {
		limit = { has_idea = GXC_republic_of_china_air_force_idea2 }
		swap_ideas = {
			remove_idea = GXC_republic_of_china_air_force_idea2
			add_idea = GXC_republic_of_china_air_force_idea3
		}
	}
	else_if = {
		limit = { has_idea = GXC_republic_of_china_air_force_idea3 }
		swap_ideas = {
			remove_idea = GXC_republic_of_china_air_force_idea3
			add_idea = GXC_republic_of_china_air_force_idea4
		}
	}
}
GXC_air_defenses_effect = {
	if = {
		limit = {
			NOT = {
				has_tech = antiair2
			}
		}
		if = {
			limit = { owns_state = 592 }  #Guangzhou
			592 = {
				add_building_construction = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
			}
		}
		if = {
			limit = { owns_state = 326 } #Hong Kong
			326 = {
				add_building_construction = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
			}
		}
		if = {
			limit = { owns_state = 743 } #Shanghai
			743 = {
				add_building_construction = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
			}
		}
		if = {
			limit = { owns_state = 596 } #Hangzhou
			596 = {
				add_building_construction = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
			}
		}
		if = {
			limit = { owns_state = 1075 } #Nantong
			1075 = {
				add_building_construction = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
			}
		}
		if = {
			limit = { owns_state = 609 } #Tianjin
			609 = {
				add_building_construction = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
			}
		}
		if = {
			limit = { owns_state = 745 } #Port Arthur
			745 = {
				add_building_construction = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
			}
		}
	}
	else = {
		if = {
			limit = { owns_state = 592 }  #Guangzhou
			592 = {
				add_building_construction = {
					type = anti_air_building
					level = 3
					instant_build = yes
				}
			}
		}
		if = {
			limit = { owns_state = 326 } #Hong Kong
			326 = {
				add_building_construction = {
					type = anti_air_building
					level = 3
					instant_build = yes
				}
			}
		}
		if = {
			limit = { owns_state = 743 } #Shanghai
			743 = {
				add_building_construction = {
					type = anti_air_building
					level = 3
					instant_build = yes
				}
			}
		}
		if = {
			limit = { owns_state = 596 } #Hangzhou
			596 = {
				add_building_construction = {
					type = anti_air_building
					level = 3
					instant_build = yes
				}
			}
		}
		if = {
			limit = { owns_state = 1075 } #Nantong
			1075 = {
				add_building_construction = {
					type = anti_air_building
					level = 3
					instant_build = yes
				}
			}
		}
		if = {
			limit = { owns_state = 609 } #Tianjin
			609 = {
				add_building_construction = {
					type = anti_air_building
					level = 3
					instant_build = yes
				}
			}
		}
		if = {
			limit = { owns_state = 745 } #Port Arthur
			745 = {
				add_building_construction = {
					type = anti_air_building
					level = 3
					instant_build = yes
				}
			}
		}
	}
}
GXC_scorched_earth_effect = {
	if = {
		limit = { owns_state = 594 } #Nanning
		594 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = fuel_silo
				level = 1
				instant_build = yes
			}
		}
	}
	if = {
		limit = { owns_state = 325 }  #Kunming
		325 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = fuel_silo
				level = 1
				instant_build = yes
			}
		}
	}
	if = {
		limit = { owns_state = 650 } #Chongqing
		650 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = fuel_silo
				level = 1
				instant_build = yes
			}
		}
	}
	if = {
		limit = { owns_state = 1051 } #Guizhou
		1051 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = fuel_silo
				level = 1
				instant_build = yes
			}
		}
	}
}

GXC_LKMT_decide_phase_iv_effect = {
	#Rig it if you have game rules active
	if = {
		limit = {
			has_game_rule = { rule = GXC_KMT_path option = GXC_KMT_PATH_RADSOC }
		}
		GXC = { country_event = { id = GXC.midgame.548 days = 3 } } #The Fourth Guangzhou Uprising
		CHI = { country_event = { id = GXC.midgame.548 days = 5 } } #The Fourth Guangzhou Uprising
	}
	else_if = {
		limit = {
			has_game_rule = { rule = GXC_KMT_path option = GXC_KMT_PATH_RADSOC }
		}
		GXC = { country_event = { id = GXC.midgame.549 days = 3 } } #The Liangguang Agrarian Revolution
		CHI = { country_event = { id = GXC.midgame.549 days = 5 } } #The Liangguang Agrarian Revolution
	}
	else_if = {
		limit = {
			has_game_rule = { rule = GXC_KMT_path option = GXC_KMT_PATH_SOCDEM }
		}
		GXC = { country_event = { id = GXC.midgame.550 days = 3 } } #The Iron Army Restores Order
		CHI = { country_event = { id = GXC.midgame.550 days = 5 } } #The Iron Army Restores Order
	}
	#The actual way this will work
	else_if = {
		limit = {
			check_variable = { ROOT.party_popularity@syndicalist > ROOT.party_popularity@social_democrat }
			check_variable = { ROOT.party_popularity@syndicalist > ROOT.party_popularity@radical_socialist }
		}
		GXC = { country_event = { id = GXC.midgame.548 days = 3 } } #The Fourth Guangzhou Uprising
		CHI = { country_event = { id = GXC.midgame.548 days = 5 } } #The Fourth Guangzhou Uprising
	}
	else_if = {
		limit = {
			check_variable = { ROOT.party_popularity@radical_socialist > ROOT.party_popularity@social_democrat }
			check_variable = { ROOT.party_popularity@radical_socialist > ROOT.party_popularity@syndicalist }
		}
		GXC = { country_event = { id = GXC.midgame.549 days = 3 } } #The Liangguang Agrarian Revolution
		CHI = { country_event = { id = GXC.midgame.549 days = 5 } } #The Liangguang Agrarian Revolution
	}
	else = {
		GXC = { country_event = { id = GXC.midgame.550 days = 3 } } #The Iron Army Restores Order
		CHI = { country_event = { id = GXC.midgame.550 days = 5 } } #The Iron Army Restores Order
	}
}
########################################
######- Section 04: Late Game - ########
########################################

GXC_clear_phase2_debuffs = {
	if = {
		limit = { has_idea = GXC_struggling_literacy_idea }
		remove_ideas = GXC_struggling_literacy_idea
	}
	if = {
		limit = { has_idea = GXC_begin_the_yuegui_three_year_plan_idea }
		remove_ideas = GXC_begin_the_yuegui_three_year_plan_idea
	}
	if = {
		limit = { has_idea = GXC_workers_unrest_idea }
		remove_ideas = GXC_workers_unrest_idea
	}
	if = {
		limit = { has_idea = GXC_production_bonus }
		remove_ideas = 	GXC_production_bonus
	}
	if = {
		limit = { has_idea = GXC_foreign_assets }
		remove_ideas = GXC_foreign_assets
	}
	if = {
		limit = { has_idea = GXC_exports }
		remove_ideas = GXC_exports
	}
	if = {
		limit = { has_idea = GXC_merchant_alliance }
		remove_ideas = 	GXC_merchant_alliance
	}
	if = {
		limit = { has_idea = GXC_liangguangs_developing_economy1 }
		remove_ideas = 	GXC_liangguangs_developing_economy1
	}
	if = {
		limit = { has_idea = GXC_liangguangs_developing_economy2 }
		remove_ideas = 	GXC_liangguangs_developing_economy2
	}
	if = {
		limit = { has_idea = GXC_liangguangs_developing_economy3 }
		remove_ideas = GXC_liangguangs_developing_economy3
	}
	if = {
		limit = { has_idea = GXC_liangguangs_developing_economy4a }
		remove_ideas = GXC_liangguangs_developing_economy4a
	}
	if = {
		limit = { has_idea = GXC_liangguangs_developing_economy4b }
		remove_ideas = GXC_liangguangs_developing_economy4b
	}
	if = {
		limit = { has_idea = GXC_liangguangs_developing_economy5a }
		remove_ideas = GXC_liangguangs_developing_economy5a
	}
	if = {
		limit = { has_idea = GXC_liangguangs_developing_economy5b }
		remove_ideas = GXC_liangguangs_developing_economy5b
	}
	if = {
		limit = { has_idea = GXC_agricultural_reform_idea1 }
		remove_ideas = GXC_agricultural_reform_idea1
	}
	if = {
		limit = { has_idea = GXC_agricultural_reform_idea2 }
		remove_ideas = GXC_agricultural_reform_idea2
	}
	if = {
		limit = { has_idea = GXC_agricultural_reform_idea3 }
		remove_ideas = GXC_agricultural_reform_idea3
	}
	if = {
		limit = { has_idea = GXC_agricultural_reform_idea4a }
		remove_ideas = GXC_agricultural_reform_idea4a
	}
	if = {
		limit = { has_idea = GXC_agricultural_reform_idea4b }
		remove_ideas = GXC_agricultural_reform_idea4b
	}
	if = {
		limit = { has_idea = GXC_agricultural_reform_idea5a }
		remove_ideas = 	GXC_agricultural_reform_idea5a
	}
	if = {
		limit = { has_idea = GXC_agricultural_reform_idea5b }
		remove_ideas = GXC_agricultural_reform_idea5b
	}
	if = {
		limit = { has_idea = GXC_guangdong_cooperative_idea }
		remove_ideas = 	GXC_guangdong_cooperative_idea
	}
	if = {
		limit = { has_idea = GXC_corvee_labour_system_idea }
		remove_ideas = 	GXC_corvee_labour_system_idea
	}
	if = {
		limit = { has_idea = GXC_peasant_and_autarkic_reform }
		remove_ideas = 	GXC_peasant_and_autarkic_reform
	}
	if = {
		limit = { has_idea = GXC_peasant_and_free_trade_reform }
		remove_ideas = GXC_peasant_and_free_trade_reform
	}
	if = {
		limit = { has_idea = GXC_modernized_and_autarkic_reform }
		remove_ideas = 	GXC_modernized_and_autarkic_reform
	}
	if = {
		limit = { has_idea = GXC_modernized_and_free_trade_reform }
		remove_ideas = GXC_modernized_and_free_trade_reform
	}
}

GXC_expand_civil_service_effect = {
	if = {
		limit = {
			GXC_ju_zheng = {
				OR = {
					is_country_leader = yes
					is_political_advisor = yes
				}
			}
			GXC_gu_yingfen = {
				OR = {
					is_political_advisor = yes
					is_country_leader = yes
				}
			}
			GXC_wu_chaoshu = { is_political_advisor = yes }
		}
		add_timed_idea = {
			idea = GXC_stimulated_civil_bureaucracy_max
			days = 200
		}
	}
	else_if = {
		limit = {
			OR = {
				AND = {
					GXC_ju_zheng = {
						OR = {
							is_country_leader = yes
							is_political_advisor = yes
						}
					}
					GXC_wu_chaoshu = { is_political_advisor = yes }
				}
				AND = {
					GXC_ju_zheng = {
						OR = {
							is_country_leader = yes
							is_political_advisor = yes
						}
					}
					GXC_gu_yingfen = {
						OR = {
							is_political_advisor = yes
							is_country_leader = yes
						}
					}
				}
				AND = {
					GXC_gu_yingfen = {
						OR = {
							is_political_advisor = yes
							is_country_leader = yes
						}
					}
					GXC_wu_chaoshu = { is_political_advisor = yes }
				}
			}
		}
		add_timed_idea = {
			idea = GXC_stimulated_civil_bureaucracy_tier_2
			days = 150
		}
	}
	else_if = {
		limit = {
			OR = {
				GXC_ju_zheng = {
					OR = {
						is_country_leader = yes
						is_political_advisor = yes
					}
				}
				GXC_gu_yingfen = {
					OR = {
						is_political_advisor = yes
						is_country_leader = yes
					}
				}
				GXC_wu_chaoshu = { is_political_advisor = yes }
			}
		}
		add_timed_idea = {
			idea = GXC_stimulated_civil_bureaucracy
			days = 150
		}
	}
	else = {
		add_timed_idea = {
			idea = GXC_stimulated_civil_bureaucracy_weak
			days = 150
		}
	}
}

GXC_light_the_torch_of_the_future_effect = {
	if = {
		limit = {
			GXC_yu_youren = { is_political_advisor = yes }
			GXC_zou_lu = { is_political_advisor = yes }
		}
		add_timed_idea = {
			idea = GXC_mass_education_efforts
			days = 250
		}
	}
	else_if = {
		limit = {
			OR = {
				GXC_yu_youren = { is_political_advisor = yes }
				GXC_zou_lu = { is_political_advisor = yes }
			}
		}
		add_timed_idea = {
			idea = GXC_mass_education_efforts
			days = 200
		}
	}
	else = {
		add_timed_idea = {
			idea = GXC_mass_education_efforts_poor
			days = 200
		}
	}
}

########################################
######- Section 05: End Game - #########
########################################

GXC_recruit_RF_endgame_generals_effect = {
	if = {
		limit = {
			NOT = { has_character = CHI_zhang_fakui }
			NOT = { has_character = CHI_xue_yue }
		}
		CHI_zhang_fakui = { CHN_recruit_character_effect = yes }
		CHI_xue_yue = { CHN_recruit_character_effect = yes }
	}
	if = {
		limit = {
			ANQ_sun_liren = { has_character_flag = CHI_RCF_military_loyalist_flag }
		}
		ANQ_sun_liren = { CHN_recruit_character_effect = yes }
	}
}

GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = {
	613 = { #Nanjing
		add_extra_state_shared_building_slots = 2
		add_building_construction = {
			type = industrial_complex
			level = 2
			instant_build = yes
		}
	}
}
GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = {
	592 = { #Guangzhou
		add_extra_state_shared_building_slots = 2
		add_building_construction = {
			type = industrial_complex
			level = 2
			instant_build = yes
		}
	}
}
GXC_enshrine_the_primacy_of_law_and_order_wuhan_effect = {
	1048 = { #Wuhan
		add_extra_state_shared_building_slots = 2
		add_building_construction = {
			type = industrial_complex
			level = 2
			instant_build = yes
		}
	}
}
GXC_enshrine_the_primacy_of_law_and_order_beijing_effect = {
	608 = { #Beijing
		add_extra_state_shared_building_slots = 2
		add_building_construction = {
			type = industrial_complex
			level = 2
			instant_build = yes
		}
	}
}

GXC_enshrine_the_primacy_of_law_and_order_rights_effect = {
	custom_effect_tooltip = GXC_enshrine_the_primacy_of_law_and_order_tt
	set_temp_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var = party_popularity@social_democrat }
	add_to_temp_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var = party_popularity@social_liberal }
	add_to_temp_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var = party_popularity@market_liberal }
	add_to_temp_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var = party_popularity@social_conservative }
	add_to_temp_Variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var = party_popularity@authoritarian_democrat }
	multiply_temp_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var = 10 } #Party Pop ranges from 0-1. Multiply it by ten so range is 0-10
	clamp_temp_variable = {
		var = GXC_enshrine_the_primacy_of_law_and_order_temp_var
		min = 0
		max = 10
	}
	round_temp_variable = GXC_enshrine_the_primacy_of_law_and_order_temp_var
	if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 2 } }
		613 = { #Nanjing
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 3 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 4 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		592 = { #Guangzhou
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 5 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 6 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		1048 = { #Wuhan
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 7 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_wuhan_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 8 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_wuhan_effect = yes
		608 = { #Beijing
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 9 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_wuhan_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_beijing_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 10 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_wuhan_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_beijing_effect = yes
		602 = { #Changsha
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 11 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_wuhan_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_beijing_effect = yes
		602 = { #Changsha
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
	}
}

GXC_enshrine_the_primacy_of_law_and_order_PPP_effect = {
	custom_effect_tooltip = GXC_enshrine_the_primacy_of_law_and_order_tt
	set_temp_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var = party_popularity@social_democrat }
	add_to_temp_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var = party_popularity@social_liberal }
	add_to_temp_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var = party_popularity@radical_socialist }
	add_to_temp_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var = party_popularity@syndicalist }
	multiply_temp_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var = 10 } #Party Pop ranges from 0-1. Multiply it by ten so range is 0-10
	clamp_temp_variable = {
		var = GXC_enshrine_the_primacy_of_law_and_order_temp_var
		min = 0
		max = 10
	}
	round_temp_variable = GXC_enshrine_the_primacy_of_law_and_order_temp_var
	if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 2 } }
		613 = { #Nanjing
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 3 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 4 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		592 = { #Guangzhou
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 5 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 6 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		1048 = { #Wuhan
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 7 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_wuhan_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 8 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_wuhan_effect = yes
		608 = { #Beijing
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 9 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_wuhan_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_beijing_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 10 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_wuhan_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_beijing_effect = yes
		602 = { #Changsha
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_enshrine_the_primacy_of_law_and_order_temp_var < 11 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_wuhan_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_beijing_effect = yes
		602 = { #Changsha
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
	}
}

GXC_new_guangxi_unbowed_effect = {
	custom_effect_tooltip = GXC_new_guangxi_unbowed_effect_tt
	custom_effect_tooltip = tooltip_white_line
	set_temp_variable = { GXC_social_democrat_pop_temp_var = party_popularity@social_democrat }
	set_temp_variable = { GXC_social_liberal_pop_temp_var = party_popularity@social_liberal }
	set_temp_variable = { GXC_market_liberal_pop_temp_var = party_popularity@market_liberal }
	set_temp_variable = { GXC_social_conservative_pop_temp_var = party_popularity@social_conservative }
	set_temp_variable = { GXC_authoritarian_democrat_pop_temp_var = party_popularity@authoritarian_democrat }
	set_temp_variable = { GXC_ngx_opposition_influence_var = GXC_social_democrat_pop_temp_var }
	add_to_temp_variable = { GXC_ngx_opposition_influence_var = GXC_social_liberal_pop_temp_var }
	add_to_temp_variable = { GXC_ngx_opposition_influence_var = GXC_market_liberal_pop_temp_var }
	add_to_temp_variable = { GXC_ngx_opposition_influence_var = GXC_social_conservative_pop_temp_var }
	add_to_temp_variable = { GXC_ngx_opposition_influence_var = GXC_authoritarian_democrat_pop_temp_var }
	#GXC_ngx_opposition_influence_var should range from 0-1, greater depending on higher opposition
	multiply_temp_variable = { GXC_ngx_opposition_influence_var = -0.75 }
	#GXC_ngx_opposition_influence_var should now range from -0.75-0, lower depending on higher opposition.
	clamp_temp_variable = {
		var = GXC_ngx_opposition_influence_var
		min = -1
		max = 0
	}
	add_stability = GXC_ngx_opposition_influence_var
}

GXC_promise_a_thorough_tutelage_effect = {
	set_temp_variable = { GXC_stability_loss_temp_var = ROOT.party_popularity@totalist }
	add_to_temp_variable = { GXC_stability_loss_temp_var = ROOT.party_popularity@radical_socialist }
	add_to_temp_variable = { GXC_stability_loss_temp_var = ROOT.party_popularity@syndicalist }
	add_to_temp_variable = { GXC_stability_loss_temp_var = ROOT.party_popularity@social_democrat }
	add_to_temp_variable = { GXC_stability_loss_temp_var = ROOT.party_popularity@social_liberal }
	add_to_temp_variable = { GXC_stability_loss_temp_var = ROOT.party_popularity@market_liberal }
	add_to_temp_variable = { GXC_stability_loss_temp_var = ROOT.party_popularity@social_conservative }
	add_to_temp_variable = { GXC_stability_loss_temp_var = ROOT.party_popularity@paternal_autocrat }
	add_to_temp_variable = { GXC_stability_loss_temp_var = ROOT.party_popularity@national_populist }
	multiply_temp_variable = { GXC_stability_loss_temp_var = -1 }
	clamp_temp_variable = {
		var = GXC_stability_loss_temp_var
		min = -1
		max = 0
	}
	add_stability = GXC_stability_loss_temp_var
}

GXC_empowering_the_national_legislature_beijing_effect = {
	608 = { #Beijing
		add_extra_state_shared_building_slots = 2
	}
}

GXC_empowering_the_national_legislature_baoding_effect = {
	1048 = { #Baoding
		add_extra_state_shared_building_slots = 2
	}
}

GXC_empowering_the_national_legislature_guanzhong_effect = {
	799 = { #guanzhong
		add_extra_state_shared_building_slots = 2
	}
}

GXC_empowering_the_national_legislature_taiyuan_effect = {
	1072 = { #taiyuan
		add_extra_state_shared_building_slots = 2
	}
}

GXC_empowering_the_national_legislature_effect = {
	custom_effect_tooltip = GXC_empowering_the_national_legislature_tt
	set_temp_variable = { GXC_empowering_the_national_legislature_temp_var = party_popularity@social_conservative }
	multiply_temp_variable = { GXC_empowering_the_national_legislature_temp_var = 10 } #Party Pop ranges from 0-1. Multiply it by ten so range is 0-10
	clamp_temp_variable = {
		var = GXC_empowering_the_national_legislature_temp_var
		min = 0
		max = 10
	}
	round_temp_variable = GXC_empowering_the_national_legislature_temp_var
	if = {
		limit = { check_variable = { GXC_empowering_the_national_legislature_temp_var < 2 } }
		1072 = { #Taiyuan
			add_extra_state_shared_building_slots = 1
		}
	}
	else_if = {
		limit = { check_variable = { GXC_empowering_the_national_legislature_temp_var < 3 } }
		GXC_empowering_the_national_legislature_taiyuan_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_empowering_the_national_legislature_temp_var < 4 } }
		GXC_empowering_the_national_legislature_taiyuan_effect = yes
		799 = { #Guanzhong
			add_extra_state_shared_building_slots = 1
		}
	}
	else_if = {
		limit = { check_variable = { GXC_empowering_the_national_legislature_temp_var < 5 } }
		GXC_empowering_the_national_legislature_taiyuan_effect = yes
		GXC_empowering_the_national_legislature_guanzhong_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_empowering_the_national_legislature_temp_var < 6 } }
		GXC_empowering_the_national_legislature_taiyuan_effect = yes
		GXC_empowering_the_national_legislature_guanzhong_effect = yes
		1048 = { #Baoding
			add_extra_state_shared_building_slots = 1
		}
	}
	else_if = {
		limit = { check_variable = { GXC_empowering_the_national_legislature_temp_var < 7 } }
		GXC_empowering_the_national_legislature_taiyuan_effect = yes
		GXC_empowering_the_national_legislature_guanzhong_effect = yes
		GXC_empowering_the_national_legislature_baoding_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_empowering_the_national_legislature_temp_var < 8 } }
		GXC_empowering_the_national_legislature_taiyuan_effect = yes
		GXC_empowering_the_national_legislature_guanzhong_effect = yes
		GXC_empowering_the_national_legislature_baoding_effect = yes
		608 = { #Beijing
			add_extra_state_shared_building_slots = 1
		}
	}
	else_if = {
		limit = { check_variable = { GXC_empowering_the_national_legislature_temp_var < 9 } }
		GXC_empowering_the_national_legislature_taiyuan_effect = yes
		GXC_empowering_the_national_legislature_guanzhong_effect = yes
		GXC_empowering_the_national_legislature_baoding_effect = yes
		GXC_empowering_the_national_legislature_beijing_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_empowering_the_national_legislature_temp_var < 10 } }
		GXC_empowering_the_national_legislature_taiyuan_effect = yes
		GXC_empowering_the_national_legislature_guanzhong_effect = yes
		GXC_empowering_the_national_legislature_baoding_effect = yes
		GXC_empowering_the_national_legislature_beijing_effect = yes
		597 = { #Jinan
			add_extra_state_shared_building_slots = 1
		}
	}
	else_if = {
		limit = { check_variable = { GXC_empowering_the_national_legislature_temp_var < 11 } }
		GXC_empowering_the_national_legislature_taiyuan_effect = yes
		GXC_empowering_the_national_legislature_guanzhong_effect = yes
		GXC_empowering_the_national_legislature_baoding_effect = yes
		GXC_empowering_the_national_legislature_beijing_effect = yes
		597 = { #Jinan
			add_extra_state_shared_building_slots = 2
		}
	}
}

GXC_dismantle_the_yellow_unions_effect = {
	592 = { #Guangzhou
		remove_building = {
			type = industrial_complex
			level = 2
		}
	}
	613 = { #Nanjing
		remove_building = {
			type = industrial_complex
			level = 1
		}
	}
	608 = { #Beijing
		remove_building = {
			type = industrial_complex
			level = 1
		}
	}
	if = {
		limit = { owns_state = 716 } #Shenyang
		716 = {
			remove_building = {
				type = industrial_complex
				level = 1
			}
		}
	}
	if = {
		limit = { owns_state = 743 } #Shanghai
		743 = {
			remove_building = {
				type = industrial_complex
				level = 2
			}
		}
	}
}

GXC_political_consultative_conference_effect = {
	custom_effect_tooltip = GXC_political_consultative_conference_effect_tt
	custom_effect_tooltip = tooltip_white_line
	set_temp_variable = { GXC_paternal_autocrat_pop_temp_var = party_popularity@paternal_autocrat }
	set_temp_variable = { GXC_national_populist_pop_temp_var = party_popularity@national_populist }
	set_temp_variable = { GXC_authoritarian_democrat_pop_temp_var = party_popularity@authoritarian_democrat }
	set_temp_variable = { GXC_social_democrat_pop_temp_var = party_popularity@social_democrat }
	set_temp_variable = { GXC_authoritarian_influence_var = GXC_paternal_autocrat_pop_temp_var }
	add_to_temp_variable = { GXC_authoritarian_influence_var = GXC_national_populist_pop_temp_var }
	add_to_temp_variable = { GXC_authoritarian_influence_var = GXC_authoritarian_democrat_pop_temp_var }
	add_to_temp_variable = { GXC_authoritarian_influence_var = GXC_social_democrat_pop_temp_var }
	set_temp_variable = { GXC_authoritarian_influence_var_neg_var = GXC_authoritarian_influence_var }
	multiply_temp_variable = { GXC_authoritarian_influence_var_neg_var = -100 }
	multiply_temp_variable = { GXC_paternal_autocrat_pop_temp_var = -0.5 }
	multiply_temp_variable = { GXC_national_populist_pop_temp_var = -0.5 }
	multiply_temp_variable = { GXC_authoritarian_democrat_pop_temp_var = -0.5 }
	multiply_temp_variable = { GXC_social_democrat_pop_temp_var = -0.5 }
	set_temp_variable = { GXC_social_liberal_pop_temp_var = party_popularity@social_liberal }
	set_temp_variable = { GXC_social_conservative_pop_temp_var = party_popularity@social_conservative }
	set_temp_variable = { GXC_democratic_influence_var = GXC_social_liberal_pop_temp_var }
	add_to_temp_variable = { GXC_democratic_influence_var = GXC_social_conservative_pop_temp_var }
	multiply_temp_variable = { GXC_democratic_influence_var = 0.33 }
	add_stability = GXC_democratic_influence_var
	add_political_power = GXC_authoritarian_influence_var_neg_var
	add_popularity = { ideology = paternal_autocrat popularity = GXC_paternal_autocrat_pop_temp_var }
	add_popularity = { ideology = national_populist popularity = GXC_national_populist_pop_temp_var }
}

GXC_cabinet_takes_the_lead_effect = {
	if = {
		limit = {
			GXC_lin_sen = { is_political_advisor = yes }
			GXC_hu_hanmin = { is_political_advisor = yes }
			GXC_wu_chaoshu = { is_political_advisor = yes }
		}
		add_timed_idea = {
			idea = GXC_cabinet_takes_the_lead_max
			days = 200
		}
		GXC_RCF_medium_effect = yes
		GXC_EDC_medium_effect = yes
		GXC_WHC_medium_effect = yes
	}
	else_if = {
		limit = {
			OR = {
				AND = {
					GXC_lin_sen = { is_political_advisor = yes }
					GXC_wu_chaoshu = { is_political_advisor = yes }
				}
				AND = {
					GXC_lin_sen = { is_political_advisor = yes }
					GXC_hu_hanmin = { is_political_advisor = yes }
				}
				AND = {
					GXC_hu_hanmin = { is_political_advisor = yes }
					GXC_wu_chaoshu = { is_political_advisor = yes }
				}
			}
		}
		add_timed_idea = {
			idea = GXC_cabinet_takes_the_lead_tier_2
			days = 150
		}
	}
	else_if = {
		limit = {
			OR = {
				GXC_lin_sen = { is_political_advisor = yes }
				GXC_hu_hanmin = { is_political_advisor = yes }
				GXC_wu_chaoshu = { is_political_advisor = yes }
			}
		}
		add_timed_idea = {
			idea = GXC_cabinet_takes_the_lead_tier_1
			days = 150
		}
	}
}

GXC_recruit_gmj_effect = {
	SHX = {
		SHX_feng_yuxiang = {
			CHN_recruit_character_effect = yes
			remove_second_in_command_role = yes
		}
		SHX_sun_yue = {
			CHN_recruit_character_effect = yes
			remove_second_in_command_role = yes
		}
		SHX_zhang_zizhong = { CHN_recruit_character_effect = yes }
		SHX_shang_zhen = {
			CHN_recruit_character_effect = yes
			remove_second_in_command_role = yes
			set_portraits = {
				army = { large = GFX_portrait_SHX_shang_zhen_army_large_kuomintang }
			}
		}
	}
}

GXC_recruit_psc_effect = {
	QIE = {
		QIE_huang_fu = { CHN_recruit_character_effect = yes }
		QIE_gu_zhongxiu = { CHN_recruit_character_effect = yes }
		QIE_liu_zhenhua = { CHN_recruit_character_effect = yes }
	}
	YUN = {
		if = {
			limit = { exists = no }
			YUN_li_genyuan = { custom_effect_tooltip = character_becomes_a_general }
			hidden_effect = { YUN_li_genyuan = { CHN_recruit_character_effect = yes } }
		}
	}
	custom_effect_tooltip = tooltip_white_line
	set_party_name = {
		ideology = market_liberal
		long_name = QIE_Old_PSC_party_long_tt
		name = GXC_Old_PSC_party
	}
	promote_character = {
		character = QIE_huang_fu
		ideology = market_liberal_subtype
	}
	hidden_effect = {
		set_party_name = {
			ideology = market_liberal
			long_name = GXC_Old_PSC_party_long
			name = GXC_Old_PSC_party
		}
		if = {
			limit = { GXC = { has_character = QIE_huang_fu } }
			if = {
				limit = { QIE_huang_fu = { NOT = { has_advisor_role = political_advisor } } }
				add_advisor_role = {
					character = QIE_huang_fu
					advisor = {
						slot = political_advisor
						idea_token = QIE_huang_fu_advisor
						desc = QIE_huang_fu_advisor_desc
						traits = { KR_hero_of_chinese_liberalism }
					}
				}
			}
		}
	}
}

GXC_recruit_beiyang_intellectuals_effect = {
	QIE = {
		QIE_hu_shih = { CHN_recruit_character_effect = yes }
		QIE_li_huang = { CHN_recruit_character_effect = yes }
		QIE_zeng_qi = { CHN_recruit_character_effect = yes }
		QIE_wang_chonghui = { CHN_recruit_character_effect = yes }
	}
	LEP = {
		LEP_ding_wenjiang = { CHN_recruit_character_effect = yes }
	}
	if = {
		limit = { HNN = { exists = no } }
		HNN = {
			HNN_huang_yanpei = { CHN_recruit_character_effect = yes }
		}
	}
	hidden_effect = {
		if = {
			limit = { GXC = { has_character = QIE_li_huang } }
			QIE_li_huang = {
				remove_civilian_advisor_roles = yes
				add_advisor_role = {
					advisor = {
						slot = political_advisor
						idea_token = QIE_li_huang_advisor
						desc = QIE_li_huang_sic_desc
						traits = { KR_pragmatic_statesman }
					}
				}
			}
		}
	}
}

GXC_a_china_safe_for_liberalism_effect = {
	QIE = {
		QIE_hu_shih = { CHN_recruit_character_effect = yes }
		QIE_li_huang = { CHN_recruit_character_effect = yes }
		QIE_huang_fu = { CHN_recruit_character_effect = yes }
		QIE_gu_zhongxiu = { CHN_recruit_character_effect = yes }
		QIE_wang_chonghui = { CHN_recruit_character_effect = yes }
	}
	if = {
		limit = { HNN = { exists = no } }
		HNN = {
			HNN_huang_yanpei = { CHN_recruit_character_effect = yes }
		}
	}
	hidden_effect = {
		if = {
			limit = { GXC = { has_character = QIE_li_huang } }
			QIE_li_huang = {
				remove_civilian_advisor_roles = yes
				add_advisor_role = {
					advisor = {
						slot = political_advisor
						idea_token = QIE_li_huang_advisor
						desc = QIE_li_huang_sic_desc
						traits = { KR_pragmatic_statesman }
					}
				}
			}
		}
		if = {
			limit = { GXC = { has_character = QIE_huang_fu } }
			if = {
				limit = { QIE_huang_fu = { NOT = { has_advisor_role = political_advisor } } }
				add_advisor_role = {
					character = QIE_huang_fu
					advisor = {
						slot = political_advisor
						idea_token = QIE_huang_fu_advisor
						desc = QIE_huang_fu_advisor_desc
						traits = { KR_hero_of_chinese_liberalism }
					}
				}
			}
		}
	}
}

GXC_vigilance_against_the_eternal_threat_effect = {
	if = {
		limit = { NOT = { has_character = GXC_huang_xuchu } }
		GXC_huang_xuchu = { CHN_recruit_character_effect = yes }
	}
	if = {
		limit = { NOT = { has_character = GXC_bai_chongxi } }
		GXC_bai_chongxi = { CHN_recruit_character_effect = yes }
	}
	if = {
		limit = {
			NOT = { has_character = YUN_he_yingqin }
			NOT = { country_exists = YUN }
		}
		YUN = { YUN_he_yingqin = { CHN_recruit_character_effect = yes } }
	}
	if = {
		limit = {
			NOT = { has_character = YUN_gu_zhutong }
			NOT = { country_exists = YUN }
		}
		YUN = { YUN_gu_zhutong = { CHN_recruit_character_effect = yes } }
	}
	if = {
		limit = {
			NOT = { has_character = YUN_jiang_dingwen }
			NOT = { country_exists = YUN }
		}
		YUN = { YUN_jiang_dingwen = { CHN_recruit_character_effect = yes } }
	}
	if = {
		limit = {
			NOT = { has_character = YUN_liu_zhi }
			NOT = { country_exists = YUN }
		}
		YUN = { YUN_liu_zhi = { CHN_recruit_character_effect = yes } }
	}
	if = {
		limit = {
			NOT = { has_character = YUN_chen_lifu }
			NOT = { country_exists = YUN }
		}
		YUN = { YUN_chen_lifu = { CHN_recruit_character_effect = yes } }
	}
	if = {
		limit = {
			NOT = { has_character = YUN_chen_guofu }
			NOT = { country_exists = YUN }
		}
		YUN = { YUN_chen_guofu = { CHN_recruit_character_effect = yes } }
	}
	if = {
		limit = {
			NOT = { has_character = YUN_dai_jitao }
			NOT = { country_exists = YUN }
		}
		YUN = { YUN_dai_jitao = { CHN_recruit_character_effect = yes } }
	}
}

GXC_a_coalition_for_tomorrow_effect = {
	if = {
		limit = { NOT = { has_character = CHI_chen_duxiu } }
		CHI = { CHI_chen_duxiu = { CHN_recruit_character_effect = yes } }
	}
	if = {
		limit = { NOT = { has_character = CHI_chen_youren } }
		CHI = { CHI_cai_yuanpei = { CHN_recruit_character_effect = yes } }
	}
	if = {
		limit = { NOT = { has_character = CHI_li_jishen } }
		CHI = { CHI_li_jishen = { CHN_recruit_character_effect = yes } }
	}
	if = {
		limit = { NOT = { has_character = CHI_huang_qixiang } }
		CHI = { CHI_huang_qixiang = { CHN_recruit_character_effect = yes } }
	}
	hidden_effect = {
		if = {
			limit = { GXC = { has_character = CHI_chen_duxiu } }
			CHI_chen_duxiu = {
				remove_civilian_advisor_roles = yes
				add_advisor_role = {
					advisor = {
						slot = political_advisor
						idea_token = CHI_chen_duxiu_advisor
						desc = CHI_chen_duxiu_sic_desc
						traits = { KR_union_advocate }
					}
				}
			}
		}
	}
}

GXC_set_up_socialist_agencies = {
	if = {
		limit = {
			has_dlc_lar = no
			CHI = { has_country_flag = CHI_chose_teke_flag }
		}
		add_political_power = 50
		add_ideas = CHI_teke_idea
	}
	else_if = {
		limit = {
			has_dlc_lar = no
			CHI = { has_country_flag = CHI_chose_bis_flag }
		}
		add_political_power = 50
		add_ideas = CHI_bis_idea
	}
	else_if = {
		limit = {
			has_dlc_lar = no
			CHI = { has_country_flag = CHI_chose_mss_flag }
		}
		add_political_power = 50
		add_ideas = CHI_mss_idea
	}
	else_if = {
		limit = { has_intelligence_agency = no }
		create_intelligence_agency = yes
	}
	else_if = {
		limit = { NOT = { has_done_agency_upgrade = upgrade_form_department } }
		upgrade_intelligence_agency = upgrade_form_department
	}
	else_if = {
		limit = { NOT = { has_done_agency_upgrade = upgrade_psycho_warfare } }
		upgrade_intelligence_agency = upgrade_psycho_warfare
	}
	else = { add_political_power = 50 }
}

GXC_national_economic_coordination_effect = {
	custom_effect_tooltip = GXC_national_economic_coordination_effect_tt
	set_temp_variable = { GXC_national_economic_coordination_temp_var = party_popularity@social_democrat }
	add_to_temp_variable = { GXC_national_economic_coordination_temp_var = party_popularity@social_liberal }
	add_to_temp_variable = { GXC_national_economic_coordination_temp_var = party_popularity@market_liberal }
	add_to_temp_variable = { GXC_national_economic_coordination_temp_var = party_popularity@social_conservative }
	add_to_temp_Variable = { GXC_national_economic_coordination_temp_var = party_popularity@authoritarian_democrat }
	multiply_temp_variable = { GXC_national_economic_coordination_temp_var = 10 } #Party Pop ranges from 0-1. Multiply it by ten so range is 0-10
	clamp_temp_variable = {
		var = GXC_national_economic_coordination_temp_var
		min = 0
		max = 10
	}
	round_temp_variable = GXC_national_economic_coordination_temp_var
	if = {
		limit = { check_variable = { GXC_national_economic_coordination_temp_var < 2 } }
		613 = { #Nanjing
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_national_economic_coordination_temp_var < 3 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_national_economic_coordination_temp_var < 4 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		592 = { #Guangzhou
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_national_economic_coordination_temp_var < 5 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_national_economic_coordination_temp_var < 6 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		1048 = { #Wuhan
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_national_economic_coordination_temp_var < 7 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_wuhan_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_national_economic_coordination_temp_var < 8 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_wuhan_effect = yes
		596 = { #Hangzhou
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_national_economic_coordination_temp_var < 9 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_wuhan_effect = yes
		596 = { #Hangzhou
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_national_economic_coordination_temp_var < 10 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_wuhan_effect = yes
		596 = { #Hangzhou
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
		602 = { #Changsha
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_national_economic_coordination_temp_var < 11 } }
		GXC_enshrine_the_primacy_of_law_and_order_nanjing_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_guangzhou_effect = yes
		GXC_enshrine_the_primacy_of_law_and_order_wuhan_effect = yes
		596 = { #Hangzhou
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
		602 = { #Changsha
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
	}
}

GXC_absolute_freedom_in_education_effect = {
	if = {
		limit = {
			QIE_hu_shih = { is_political_advisor = yes }
			GXC_zhang_junmai = { is_political_advisor = yes }
			HNN_huang_yanpei = { is_political_advisor = yes }
		}
		add_timed_idea = {
			idea = GXC_absolute_freedom_in_education_idea_3
			days = 200
		}
		UPC_REP_medium_effect = yes
		UPC_CDL_large_effect = yes
	}
	else_if = {
		limit = {
			OR = {
				AND = {
					GXC_zhang_junmai = { is_political_advisor = yes }
					HNN_huang_yanpei = { is_political_advisor = yes }
				}
				AND = {
					GXC_zhang_junmai = { is_political_advisor = yes }
					QIE_hu_shih = { is_political_advisor = yes }
				}
				AND = {
					QIE_hu_shih = { is_political_advisor = yes }
					HNN_huang_yanpei = { is_political_advisor = yes }
				}
			}
		}
		add_timed_idea = {
			idea = GXC_absolute_freedom_in_education_idea_2
			days = 150
		}
	}
	else_if = {
		limit = {
			OR = {
				GXC_zhang_junmai = { is_political_advisor = yes }
				QIE_hu_shih = { is_political_advisor = yes }
				HNN_huang_yanpei = { is_political_advisor = yes }
			}
		}
		add_timed_idea = {
			idea = GXC_absolute_freedom_in_education_idea
			days = 150
		}
	}
}

GXC_democratic_literati_effect = {
	if = {
		limit = {
			GXC_xu_fulin = { is_political_advisor = yes }
			SZC_Zhang_lan = { is_political_advisor = yes }
			QIE_shen_junru = { is_political_advisor = yes }
		}
		add_timed_idea = {
			idea = GXC_rule_of_the_democratic_literati_3
			days = 200
		}
	}
	else_if = {
		limit = {
			OR = {
				AND = {
					QIE_shen_junru = { is_political_advisor = yes }
					SZC_Zhang_lan = { is_political_advisor = yes }
				}
				AND = {
					QIE_shen_junru = { is_political_advisor = yes }
					GXC_xu_fulin = { is_political_advisor = yes }
				}
				AND = {
					GXC_xu_fulin = { is_political_advisor = yes }
					SZC_Zhang_lan = { is_political_advisor = yes }
				}
			}
		}
		add_timed_idea = {
			idea = GXC_rule_of_the_democratic_literati_2
			days = 150
		}
	}
	else_if = {
		limit = {
			OR = {
				QIE_shen_junru = { is_political_advisor = yes }
				GXC_xu_fulin = { is_political_advisor = yes }
				SZC_Zhang_lan = { is_political_advisor = yes }
			}
		}
		add_timed_idea = {
			idea = GXC_rule_of_the_democratic_literati_0
			days = 150
		}
	}
}

GXC_disarming_provincial_warlords_nanjing_effect = {
	613 = { #Nanjing
		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = arms_factory
			level = 1
			instant_build = yes
		}
	}
}
GXC_disarming_provincial_warlords_guangzhou_effect = {
	592 = { #Guangzhou
		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = arms_factory
			level = 1
			instant_build = yes
		}
	}
}
GXC_disarming_provincial_warlords_wuhan_effect = {
	1048 = { #Wuhan
		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = arms_factory
			level = 1
			instant_build = yes
		}
	}
}
GXC_disarming_provincial_warlords_beijing_effect = {
	608 = { #Beijing
		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = arms_factory
			level = 1
			instant_build = yes
		}
	}
}
GXC_disarming_provincial_warlords_effect = {
	custom_effect_tooltip = GXC_disarming_provincial_warlords_effect_tt
	set_temp_variable = { GXC_disarming_provincial_warlords_var = party_popularity@paternal_autocrat }
	multiply_temp_variable = { GXC_disarming_provincial_warlords_var = 10 } #Party Pop ranges from 0-1. Multiply it by ten so range is 0-10
	clamp_temp_variable = {
		var = GXC_disarming_provincial_warlords_var
		min = 0
		max = 10
	}
	round_temp_variable = GXC_disarming_provincial_warlords_var
	if = {
		limit = { check_variable = { GXC_disarming_provincial_warlords_var < 2 } }
		613 = { #Nanjing
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_disarming_provincial_warlords_var < 3 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_disarming_provincial_warlords_var < 4 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
		592 = { #Guangzhou
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_disarming_provincial_warlords_var < 5 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
		GXC_disarming_provincial_warlords_guangzhou_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_disarming_provincial_warlords_var < 6 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
		GXC_disarming_provincial_warlords_guangzhou_effect = yes
		1048 = { #Wuhan
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_disarming_provincial_warlords_var < 7 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
		GXC_disarming_provincial_warlords_guangzhou_effect = yes
		GXC_disarming_provincial_warlords_wuhan_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_disarming_provincial_warlords_var < 8 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
		GXC_disarming_provincial_warlords_guangzhou_effect = yes
		GXC_disarming_provincial_warlords_wuhan_effect = yes
		608 = { #Beijing
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_disarming_provincial_warlords_var < 9 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
		GXC_disarming_provincial_warlords_guangzhou_effect = yes
		GXC_disarming_provincial_warlords_wuhan_effect = yes
		GXC_disarming_provincial_warlords_beijing_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_disarming_provincial_warlords_var < 10 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
		GXC_disarming_provincial_warlords_guangzhou_effect = yes
		GXC_disarming_provincial_warlords_wuhan_effect = yes
		GXC_disarming_provincial_warlords_beijing_effect = yes
		602 = { #Changsha
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_disarming_provincial_warlords_var < 11 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
		GXC_disarming_provincial_warlords_guangzhou_effect = yes
		GXC_disarming_provincial_warlords_wuhan_effect = yes
		GXC_disarming_provincial_warlords_beijing_effect = yes
		602 = { #Changsha
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
}

GXC_fulfilling_our_social_promises_effect = {
	custom_effect_tooltip = GXC_fulfilling_our_social_promises_tt
	set_temp_variable = { GXC_fulfilling_our_social_promises_base_temp_var = party_popularity@social_liberal }
	set_temp_variable = { GXC_authoritarian_democrat_pop_temp_var = party_popularity@authoritarian_democrat }
	set_temp_variable = { GXC_paternal_autocrat_pop_temp_var = party_popularity@paternal_autocrat }
	multiply_temp_variable = { GXC_authoritarian_democrat_pop_temp_var = 0.5 }
	multiply_temp_variable = { GXC_paternal_autocrat_pop_temp_var = 0.5 }
	multiply_temp_variable = { GXC_fulfilling_our_social_promises_base_temp_var = 0.5 }
	add_to_temp_variable = { GXC_fulfilling_our_social_promises_base_temp_var = GXC_paternal_autocrat_pop_temp_var }
	add_to_temp_variable = { GXC_fulfilling_our_social_promises_base_temp_var = GXC_authoritarian_democrat_pop_temp_var }
	multiply_temp_variable = { GXC_fulfilling_our_social_promises_base_temp_var = 10 } #Party Pop ranges from 0-1. Multiply it by ten so range is 0-10
	clamp_temp_variable = {
		var = GXC_fulfilling_our_social_promises_base_temp_var
		min = 0
		max = 10
	}
	round_temp_variable = GXC_fulfilling_our_social_promises_base_temp_var
	if = {
		limit = { check_variable = { GXC_fulfilling_our_social_promises_base_temp_var < 2 } }
		YUN_revolutionary_datong_aut_dem_nanjing_effect = yes #To save code repetition I am reusing the CCC effects
	}
	else_if = {
		limit = { check_variable = { GXC_fulfilling_our_social_promises_base_temp_var < 4 } }
		YUN_revolutionary_datong_aut_dem_nanjing_effect = yes
		YUN_revolutionary_datong_aut_dem_guangzhou_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_fulfilling_our_social_promises_base_temp_var < 6 } }
		YUN_revolutionary_datong_aut_dem_nanjing_effect = yes
		YUN_revolutionary_datong_aut_dem_guangzhou_effect = yes
		YUN_revolutionary_datong_aut_dem_wuhan_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_fulfilling_our_social_promises_base_temp_var < 8 } }
		YUN_revolutionary_datong_aut_dem_nanjing_effect = yes
		YUN_revolutionary_datong_aut_dem_guangzhou_effect = yes
		YUN_revolutionary_datong_aut_dem_wuhan_effect = yes
		YUN_revolutionary_datong_aut_dem_beijing_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_fulfilling_our_social_promises_base_temp_var < 11 } }
		YUN_revolutionary_datong_aut_dem_nanjing_effect = yes
		YUN_revolutionary_datong_aut_dem_guangzhou_effect = yes
		YUN_revolutionary_datong_aut_dem_wuhan_effect = yes
		YUN_revolutionary_datong_aut_dem_beijing_effect = yes
		602 = { #Changsha
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
	}
}

GXC_promoting_social_justice_kunming_effect = {
	325 = { #Kunming
		increase_state_category_by_two_levels = yes
		add_building_construction = {
			type = industrial_complex
			level = 1
			instant_build = yes
		}
	}
}

GXC_promoting_social_justice_nanning_effect = {
	594 = { #Nanning
		increase_state_category_by_two_levels = yes
		add_building_construction = {
			type = industrial_complex
			level = 1
			instant_build = yes
		}
	}
}

GXC_promoting_social_justice_changsha_effect = {
	602 = { #Changsha
		increase_state_category_by_two_levels = yes
		add_building_construction = {
			type = industrial_complex
			level = 1
			instant_build = yes
		}
	}
}

GXC_promoting_social_justice_wuhan_effect = {
	1048 = { #Wuhan
		increase_state_category_by_two_levels = yes
		add_building_construction = {
			type = industrial_complex
			level = 1
			instant_build = yes
		}
	}
}

GXC_promoting_social_justice_guangzhou_effect = {
	592 = { #Guangzhou
		increase_state_category_by_two_levels = yes
		add_building_construction = {
			type = industrial_complex
			level = 1
			instant_build = yes
		}
	}
}

GXC_promoting_social_justice_effect = {
	custom_effect_tooltip = GXC_promote_social_justice_tt
	set_temp_variable = { GXC_promoting_social_justice_temp_var = party_popularity@social_democrat }
	add_to_temp_variable = { GXC_promoting_social_justice_temp_var = party_popularity@social_liberal }
	add_to_temp_variable = { GXC_promoting_social_justice_temp_var = party_popularity@market_liberal }
	add_to_temp_variable = { GXC_promoting_social_justice_temp_var = party_popularity@social_conservative }
	add_to_temp_Variable = { GXC_promoting_social_justice_temp_var = party_popularity@authoritarian_democrat }
	multiply_temp_variable = { GXC_promoting_social_justice_temp_var = 0.5 }
	multiply_temp_variable = { GXC_promoting_social_justice_temp_var = 10 } #Party Pop ranges from 0-1. Multiply it by ten so range is 0-10
	clamp_temp_variable = {
		var = GXC_promoting_social_justice_temp_var
		min = 0
		max = 10
	}
	round_temp_variable = GXC_promoting_social_justice_temp_var
	if = {
		limit = { check_variable = { GXC_promoting_social_justice_temp_var < 2 } }
		592 = { #Guangzhou
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_promoting_social_justice_temp_var < 3 } }
		GXC_promoting_social_justice_guangzhou_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_promoting_social_justice_temp_var < 4 } }
		GXC_promoting_social_justice_guangzhou_effect = yes
		594 = { #Nanning
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_promoting_social_justice_temp_var < 5 } }
		GXC_promoting_social_justice_guangzhou_effect = yes
		GXC_promoting_social_justice_nanning_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_promoting_social_justice_temp_var < 6 } }
		GXC_promoting_social_justice_guangzhou_effect = yes
		GXC_promoting_social_justice_nanning_effect = yes
		602 = { #Changsha
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_promoting_social_justice_temp_var < 7 } }
		GXC_promoting_social_justice_guangzhou_effect = yes
		GXC_promoting_social_justice_nanning_effect = yes
		GXC_promoting_social_justice_changsha_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_promoting_social_justice_temp_var < 8 } }
		GXC_promoting_social_justice_guangzhou_effect = yes
		GXC_promoting_social_justice_nanning_effect = yes
		GXC_promoting_social_justice_changsha_effect = yes
		325 = { #Kunming
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_promoting_social_justice_temp_var < 9 } }
		GXC_promoting_social_justice_guangzhou_effect = yes
		GXC_promoting_social_justice_nanning_effect = yes
		GXC_promoting_social_justice_changsha_effect = yes
		GXC_promoting_social_justice_kunming_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_promoting_social_justice_temp_var < 10 } }
		GXC_promoting_social_justice_guangzhou_effect = yes
		GXC_promoting_social_justice_nanning_effect = yes
		GXC_promoting_social_justice_changsha_effect = yes
		GXC_promoting_social_justice_kunming_effect = yes
		1048 = { #Wuhan
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_promoting_social_justice_temp_var < 11 } }
		GXC_promoting_social_justice_guangzhou_effect = yes
		GXC_promoting_social_justice_nanning_effect = yes
		GXC_promoting_social_justice_changsha_effect = yes
		GXC_promoting_social_justice_kunming_effect = yes
		GXC_promoting_social_justice_wuhan_effect = yes
	}
}

GXC_purge_the_yue_clique = {
	custom_effect_tooltip = characters_will_be_retired
	character_list_tooltip = {
		limit = {
			OR = {
				is_character = GXC_xiong_lue
				is_character = GXC_ye_ju
				is_character = GXC_ma_yuhang
				is_character = GXC_luo_xianxiang
				is_character = GXC_ge_zhaohuang
				is_character = GXC_hong_zhaolin
				is_character = GXC_weng_shiliang
				is_character = GXC_yang_kunru
				is_character = GXC_zhong_xiunan
				is_character = GXC_chen_lianbo
				is_character = GXC_lin_douwen
				is_character = GXC_zhong_xiunan
			}
		}
	}
	hidden_effect = {
		every_character = {
			limit = {
				OR = {
					is_character = GXC_xiong_lue
					is_character = GXC_ye_ju
					is_character = GXC_ma_yuhang
					is_character = GXC_luo_xianxiang
					is_character = GXC_ge_zhaohuang
					is_character = GXC_hong_zhaolin
					is_character = GXC_weng_shiliang
					is_character = GXC_yang_kunru
					is_character = GXC_zhong_xiunan
					is_character = GXC_chen_lianbo
					is_character = GXC_lin_douwen
				}
			}
			retire = yes
		}
	}
}

GXC_purge_the_anti_yue_plotters = {
	custom_effect_tooltip = characters_will_be_retired
	every_character = {
		limit = {
			OR = {
				has_character_flag = YUN_CMS_character_flag
				has_character_flag = CHI_RCF_military_loyalist_flag
				has_character_flag = GXC_PPP_character_flag
				has_character_flag = GXC_DSP_character_flag
				is_character = GXC_lin_hu
				is_character = GXC_liu_zhenhuan
			}
		}
		retire = yes
	}
}

GXC_constructing_a_singular_economic_organ_effect = {
	custom_effect_tooltip = GXC_constructing_a_single_economic_organ_effect_tt
	set_temp_variable = { GXC_constructing_a_singular_economic_organ_var = party_popularity@authoritarian_democrat }
	add_to_temp_variable = { GXC_constructing_a_singular_economic_organ_var = party_popularity@social_conservative }
	multiply_temp_variable = { GXC_constructing_a_singular_economic_organ_var = 10 } #Party Pop ranges from 0-1. Multiply it by ten so range is 0-10
	clamp_temp_variable = {
		var = GXC_constructing_a_singular_economic_organ_var
		min = 0
		max = 10
	}
	round_temp_variable = GXC_constructing_a_singular_economic_organ_var
	if = {
		limit = { check_variable = { GXC_constructing_a_singular_economic_organ_var < 2 } }
		613 = { #Nanjing
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_constructing_a_singular_economic_organ_var < 3 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_constructing_a_singular_economic_organ_var < 4 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
		592 = { #Guangzhou
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_constructing_a_singular_economic_organ_var < 5 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
		GXC_disarming_provincial_warlords_guangzhou_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_constructing_a_singular_economic_organ_var < 6 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
		GXC_disarming_provincial_warlords_guangzhou_effect = yes
		1048 = { #Wuhan
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_constructing_a_singular_economic_organ_var < 7 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
		GXC_disarming_provincial_warlords_guangzhou_effect = yes
		GXC_disarming_provincial_warlords_wuhan_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_constructing_a_singular_economic_organ_var < 8 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
		GXC_disarming_provincial_warlords_guangzhou_effect = yes
		GXC_disarming_provincial_warlords_wuhan_effect = yes
		608 = { #Beijing
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_constructing_a_singular_economic_organ_var < 9 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
		GXC_disarming_provincial_warlords_guangzhou_effect = yes
		GXC_disarming_provincial_warlords_wuhan_effect = yes
		GXC_disarming_provincial_warlords_beijing_effect = yes
	}
	else_if = {
		limit = { check_variable = { GXC_constructing_a_singular_economic_organ_var < 10 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
		GXC_disarming_provincial_warlords_guangzhou_effect = yes
		GXC_disarming_provincial_warlords_wuhan_effect = yes
		GXC_disarming_provincial_warlords_beijing_effect = yes
		602 = { #Changsha
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
	else_if = {
		limit = { check_variable = { GXC_constructing_a_singular_economic_organ_var < 11 } }
		GXC_disarming_provincial_warlords_nanjing_effect = yes
		GXC_disarming_provincial_warlords_guangzhou_effect = yes
		GXC_disarming_provincial_warlords_wuhan_effect = yes
		GXC_disarming_provincial_warlords_beijing_effect = yes
		602 = { #Changsha
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
}

GXC_new_republic_effect = {
	if = {
		limit = { has_idea = GXC_a_new_republic }
		swap_ideas = {
			remove_idea = GXC_a_new_republic
			add_idea = GXC_a_new_republic_1
		}
	}
	else_if = {
		limit = { has_idea = GXC_a_new_republic_1 }
		swap_ideas = {
			remove_idea = GXC_a_new_republic_1
			add_idea = GXC_a_new_republic_2
		}
	}
}

GXC_clear_popular_support_effect = {
	remove_ideas = {
		GXC_KMT_popular_support_1
		GXC_KMT_popular_support_2
		GXC_KMT_popular_support_3
		GXC_KMT_popular_support_4
		GXC_KMT_popular_support_5

		GXC_KMT_popular_support_iron_necked_liberalism
		GXC_KMT_popular_support_western_hills_ascendant
		GXC_KMT_popular_support_harmonious_tutelage
		GXC_KMT_popular_support_exceptional_tutelage
		GXC_KMT_popular_support_revolutionary_diarchy
		GXC_KMT_popular_support_citizen_soldier_stratocracy
		GXC_KMT_popular_support_rule_of_the_heroic_general
		GXC_KMT_popular_support_third_way_ascendant
		GXC_KMT_popular_support_supervision_of_the_king_of_peasants

		GXC_UPC_popular_support_1
		GXC_UPC_popular_support_2
		GXC_UPC_popular_support_3
		GXC_UPC_popular_support_4
		GXC_UPC_popular_support_5

		GXC_UPC_popular_support_the_party_of_washington
		GXC_UPC_popular_support_republic_of_yin_and_yang
		GXC_UPC_popular_support_socialism_of_all_mankind
		GXC_UPC_popular_support_democracy_by_decree
		GXC_UPC_popular_support_the_party_in_pursuit_of_democracy
		GXC_UPC_popular_support_the_new_revolution
		GXC_UPC_popular_support_the_new_democratic_norm
		GXC_UPC_popular_support_harmonious_state_machine
		GXC_UPC_popular_support_governed_under_the_gun

		GXC_NPA_popular_support_1
		GXC_NPA_popular_support_2
		GXC_NPA_popular_support_3
		GXC_NPA_popular_support_4
		GXC_NPA_popular_support_5

		GXC_NPA_popular_support_unbridled_modernisers
		GXC_NPA_popular_support_rule_of_the_iron_men
		GXC_NPA_popular_support_the_young_consul
		GXC_NPA_popular_support_sword_of_progress
		GXC_NPA_popular_support_the_chinese_plutocracy
		GXC_NPA_popular_support_apostles_of_democracy
	}
}
