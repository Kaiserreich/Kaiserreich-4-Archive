#Economic Effects
KMT_NRC_initial_reconstruction_effect = {
	set_country_flag = KMT_NRC_initial_reconstruction_flag
	unlock_decision_category_tooltip = KMT_national_reconstruction_category
	set_variable = {
		var = KMT_factory_goals
		value = ROOT.num_of_factories
	}
	add_to_variable = { KMT_factory_goals = 50 }
	if = {
		limit = {
			NOT = {
				has_tech = concentrated_industry
				has_tech = dispersed_industry
			}
		}
		set_country_flag = KMT_industry_level_0
	}
	else_if = {
		limit = {
			OR = {
				has_tech = concentrated_industry
				has_tech = dispersed_industry
			}
		}
		set_country_flag = KMT_industry_level_1
	}
	else_if = {
		limit = {
			OR = {
				has_tech = concentrated_industry2
				has_tech = dispersed_industry2
			}
		}
		set_country_flag = KMT_industry_level_2
	}
	else_if = {
		limit = {
			OR = {
				has_tech = concentrated_industry3
				has_tech = dispersed_industry3
			}
		}
		set_country_flag = KMT_industry_level_3
	}
	else_if = {
		limit = {
			OR = {
				has_tech = concentrated_industry4
				has_tech = dispersed_industry4
			}
		}
		set_country_flag = KMT_industry_level_4
	}
	activate_mission = KMT_national_reconstruction_mission
	hidden_effect = {
		if = {
			limit = { 886 = { dam < 1 } }
			activate_targeted_decision = { decision = KMT_finish_fengman_hydroelectric_dam target = 886 } #Nanjing
		}
	}
}

KMT_NRC_heavy_industry_effect = {
	set_country_flag = KMT_NRC_reconstruction_heavy_industry_flag
	custom_effect_tooltip = KMT_NRC_heavy_industry_decisions_tt
}

KMT_NRC_trade_and_autarky_effect = {
	set_country_flag = KMT_NRC_trade_and_autarky_flag
	custom_effect_tooltip = KMT_NRC_autarky_decisions_tt
}

KMT_NRC_setup_resource_effect = {
	set_country_flag = KMT_NRC_resource_flag
	custom_effect_tooltip = KMT_NRC_resource_decisions_tt
}

KMT_NRC_railroad_effect = {
	set_country_flag = KMT_NRC_railroad_flag
	custom_effect_tooltip = KMT_NRC_railroad_decisions_flag
}

KMT_set_conservative_land_reform_effect = {
	#Represents RKMT thinkers who believe redistribution is pointless, only real solution is increase productivity to reduce number of people needed working on farms via investments in capital goods.
	custom_effect_tooltip = KMT_set_conservative_land_reform_tt
	set_country_flag = KMT_conservative_land_reform_flag
	set_variable = { China_land_reform_var = 35 }
}
KMT_set_moderate_land_reform_effect = {
	#Taiwan style land reform - aka land to the tiller, compulsatory purchases, 37.5% Rent Cap Reform, contract reforms, supervision.
	custom_effect_tooltip = KMT_set_moderate_land_reform_tt
	set_country_flag = KMT_set_moderate_land_reform_flag
	set_variable = { China_land_reform_var = 75 }
}
KMT_set_radical_land_reform_effect = {
	#PRC style land expropriation, collectivisation, yada yada socialist stuff or other radical government inventions.
	custom_effect_tooltip = KMT_set_radical_land_reform_tt
	set_country_flag = KMT_radical_land_reform_flag
	set_variable = { China_land_reform_var = 50 }
}
KMT_set_total_land_reform_effect = {
	#Totalitarian treatment of the country-side, everything gets nationalised.
	custom_effect_tooltip = KMT_set_total_land_reform_tt
	set_country_flag = KMT_total_land_reform_flag
	set_variable = { China_land_reform_var = 100 }
}

#Zeal Effects
RKT_clamp_zeal_effect = {
	clamp_variable = {
		var = global.RKT_revolutionary_zeal_var
		min = 0
		max = 1
	}
}

RKT_add_zeal_small_effect = {
	add_to_variable = {
		var = global.RKT_revolutionary_zeal_var
		value = 0.01
	}
	RKT_clamp_zeal_effect = yes
	if = {
		limit = {
			OR = {
				tag = RKT
				is_subject_of = RKT
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = RKT_add_zeal_small_tt
	}
	hidden_effect = {
		RKT = {
			if = {
				limit = {
					country_exists = RKT
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = RKT_power_balance
					value = 0.02
					tooltip_side = RKT_high_zeal_side
				}
			}
		}
	}
}

RKT_add_zeal_medium_effect = {
	add_to_variable = {
		var = global.RKT_revolutionary_zeal_var
		value = 0.03
	}
	RKT_clamp_zeal_effect = yes
	if = {
		limit = {
			OR = {
				tag = RKT
				is_subject_of = RKT
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = RKT_add_zeal_medium_tt
	}
	hidden_effect = {
		RKT = {
			if = {
				limit = {
					country_exists = RKT
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = RKT_power_balance
					value = 0.06
					tooltip_side = RKT_high_zeal_side
				}
			}
		}
	}
}
RKT_add_zeal_large_effect = {
	add_to_variable = {
		var = global.RKT_revolutionary_zeal_var
		value = 0.05
	}
	RKT_clamp_zeal_effect = yes
	if = {
		limit = {
			OR = {
				tag = RKT
				is_subject_of = RKT
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = RKT_add_zeal_large_tt
	}
	hidden_effect = {
		RKT = {
			if = {
				limit = {
					country_exists = RKT
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = RKT_power_balance
					value = 0.10
					tooltip_side = RKT_high_zeal_side
				}
			}
		}
	}
}
RKT_add_zeal_mega_effect = {
	add_to_variable = {
		var = global.RKT_revolutionary_zeal_var
		value = 0.10
	}
	RKT_clamp_zeal_effect = yes
	if = {
		limit = {
			OR = {
				tag = RKT
				is_subject_of = RKT
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = RKT_add_zeal_mega_tt
	}
	hidden_effect = {
		RKT = {
			if = {
				limit = {
					country_exists = RKT
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = RKT_power_balance
					value = 0.20
					tooltip_side = RKT_high_zeal_side
				}
			}
		}
	}
}
RKT_add_zeal_giga_effect = {
	add_to_variable = {
		var = global.RKT_revolutionary_zeal_var
		value = 0.25
	}
	RKT_clamp_zeal_effect = yes
	if = {
		limit = {
			OR = {
				tag = RKT
				is_subject_of = RKT
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = RKT_add_zeal_giga_tt
	}
	hidden_effect = {
		RKT = {
			if = {
				limit = {
					country_exists = RKT
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = RKT_power_balance
					value = 0.50
					tooltip_side = RKT_high_zeal_side
				}
			}
		}
	}
}
RKT_sub_zeal_small_effect = {
	add_to_variable = {
		var = global.RKT_revolutionary_zeal_var
		value = -0.01
	}
	RKT_clamp_zeal_effect = yes
	if = {
		limit = {
			OR = {
				tag = RKT
				is_subject_of = RKT
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = RKT_sub_zeal_small_tt
	}
	hidden_effect = {
		RKT = {
			if = {
				limit = {
					country_exists = RKT
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = RKT_power_balance
					value = -0.02
					tooltip_side = RKT_low_zeal_side
				}
			}
		}
	}
}
RKT_sub_zeal_medium_effect = {
	add_to_variable = {
		var = global.RKT_revolutionary_zeal_var
		value = -0.03
	}
	RKT_clamp_zeal_effect = yes
	if = {
		limit = {
			OR = {
				tag = RKT
				is_subject_of = RKT
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = RKT_sub_zeal_medium_tt
	}
	hidden_effect = {
		RKT = {
			if = {
				limit = {
					country_exists = RKT
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = RKT_power_balance
					value = -0.06
					tooltip_side = RKT_low_zeal_side
				}
			}
		}
	}
}
RKT_sub_zeal_large_effect = {
	add_to_variable = {
		var = global.RKT_revolutionary_zeal_var
		value = -0.05
	}
	RKT_clamp_zeal_effect = yes
	if = {
		limit = {
			OR = {
				tag = RKT
				is_subject_of = RKT
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = RKT_sub_zeal_large_tt
	}
	hidden_effect = {
		RKT = {
			if = {
				limit = {
					country_exists = RKT
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = RKT_power_balance
					value = -0.10
					tooltip_side = RKT_low_zeal_side
				}
			}
		}
	}
}
RKT_sub_zeal_mega_effect = {
	add_to_variable = {
		var = global.RKT_revolutionary_zeal_var
		value = -0.10
	}
	RKT_clamp_zeal_effect = yes
	if = {
		limit = {
			OR = {
				tag = RKT
				is_subject_of = RKT
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = RKT_sub_zeal_mega_tt
	}
	hidden_effect = {
		RKT = {
			if = {
				limit = {
					country_exists = RKT
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = RKT_power_balance
					value = -0.20
					tooltip_side = RKT_low_zeal_side
				}
			}
		}
	}
}
RKT_sub_zeal_giga_effect = {
	add_to_variable = {
		var = global.RKT_revolutionary_zeal_var
		value = -0.25
	}
	RKT_clamp_zeal_effect = yes
	if = {
		limit = {
			OR = {
				tag = RKT
				is_subject_of = RKT
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = RKT_sub_zeal_giga_tt
	}
	hidden_effect = {
		RKT = {
			if = {
				limit = {
					country_exists = RKT
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = RKT_power_balance
					value = -0.50
					tooltip_side = RKT_low_zeal_side
				}
			}
		}
	}
}

RKT_ctr_zeal_small_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = RKT_power_balance
				range > RKT_bop_rising_cynicism
			}
		}
		RKT_sub_zeal_small_effect = yes
	}
	else = {
		#Cynicism Side
		RKT_add_zeal_small_effect = yes
	}
}

RKT_ctr_zeal_medium_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = RKT_power_balance
				range > RKT_bop_rising_cynicism
			}
		}
		RKT_sub_zeal_medium_effect = yes
	}
	else = {
		#Cynicism Side
		RKT_add_zeal_medium_effect = yes
	}
}

RKT_ctr_zeal_large_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = RKT_power_balance
				range > RKT_bop_rising_cynicism
			}
		}
		RKT_sub_zeal_large_effect = yes
	}
	else = {
		#Cynicism Side
		RKT_add_zeal_large_effect = yes
	}
}

RKT_ctr_zeal_mega_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = RKT_power_balance
				range > RKT_bop_rising_cynicism
			}
		}
		RKT_sub_zeal_mega_effect = yes
	}
	else = {
		#Cynicism Side
		RKT_add_zeal_mega_effect = yes
	}
}

RKT_ctr_zeal_giga_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = RKT_power_balance
				range > RKT_bop_rising_cynicism
			}
		}
		RKT_sub_zeal_giga_effect = yes
	}
	else = {
		#Cynicism Side
		RKT_add_zeal_giga_effect = yes
	}
}

RKT_ext_zeal_small_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = RKT_power_balance
				range > RKT_bop_rising_cynicism
			}
		}
		RKT_add_zeal_small_effect = yes
	}
	else = {
		#Cynicism Side
		RKT_sub_zeal_small_effect = yes
	}
}

RKT_ext_zeal_medium_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = RKT_power_balance
				range > RKT_bop_rising_cynicism
			}
		}
		RKT_add_zeal_medium_effect = yes
	}
	else = {
		#Cynicism Side
		RKT_sub_zeal_medium_effect = yes
	}
}

RKT_ext_zeal_large_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = RKT_power_balance
				range > RKT_bop_rising_cynicism
			}
		}
		RKT_add_zeal_large_effect = yes
	}
	else = {
		#Cynicism Side
		RKT_sub_zeal_large_effect = yes
	}
}

RKT_ext_zeal_mega_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = RKT_power_balance
				range > RKT_bop_rising_cynicism
			}
		}
		RKT_add_zeal_mega_effect = yes
	}
	else = {
		#Cynicism Side
		RKT_sub_zeal_mega_effect = yes
	}
}

RKT_ext_zeal_giga_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = RKT_power_balance
				range > RKT_bop_rising_cynicism
			}
		}
		RKT_add_zeal_giga_effect = yes
	}
	else = {
		#Cynicism Side
		RKT_sub_zeal_giga_effect = yes
	}
}

KMT_recalculate_founder_minsheng_partnership_effects = {
	set_variable = { KMT_minsheng_local_resources_var = KMT_minsheng_number_of_members_var }
	set_variable = { KMT_minsheng_construction_var = KMT_minsheng_number_of_members_var }
	set_variable = { KMT_minsheng_consumer_goods_var = KMT_minsheng_number_of_members_var }
	set_variable = { KMT_minsheng_trade_opinion_var = KMT_minsheng_number_of_members_var }
	set_variable = { KMT_minsheng_research_speed_var = KMT_minsheng_number_of_members_var }

	multiply_variable = { KMT_minsheng_local_resources_var = 0.005 } #1 becomes 0.01, 10 becomes 0.10 -> 0.50%, 5.00%
	multiply_variable = { KMT_minsheng_construction_var = 0.005 } #1 becomes 0.005, 10 becomes 0.05 -> 0.50%, 5.00%
	multiply_variable = { KMT_minsheng_consumer_goods_var = -0.006 } #1 becomes -0.002, 10 becomes -0.025 -> -0.20%, -2.50%
	multiply_variable = { KMT_minsheng_trade_opinion_var = 0.010 } #1 becomes 0.01, 10 becomes 0.10 -> 1.00%, 10.00%
	multiply_variable = { KMT_minsheng_research_speed_var = 0.002 } #1 becomes 0.002, 10 becomes 0.025 -> 0.20%, 2.50%
	if = {
		limit = { has_completed_focus = KMT_uniting_anticolonial_minds }
		add_to_variable = { KMT_minsheng_research_speed_var = 0.05 }
	}
}

KMT_add_to_minsheng_partnership = {
	if = {
		limit = {
			NOT = { has_country_flag = KMT_minsheng_partnership_flag }
		}
		if = {
			limit = { NOT = { is_faction_leader = yes } }
			custom_effect_tooltip = CHI_member_of_minsheng_partnership
		}
		set_country_flag = KMT_minsheng_partnership_flag
		add_to_array = { global.KMT_minsheng_partnership_members = THIS }
		hidden_effect = {
			faction_leader = {
				remove_opinion_modifier = { target = PREV modifier = KR_disapproves_of_govt }
				remove_opinion_modifier = { target = PREV modifier = KR_hates_govt }
				remove_opinion_modifier = { target = PREV modifier = KR_outraged }
				add_to_variable = { KMT_minsheng_number_of_members_var = 1 }
				KMT_recalculate_founder_minsheng_partnership_effects = yes
			}
			if = {
				limit = {
					is_faction_leader = yes
					NOT = { has_dynamic_modifier = { modifier = KR_minsheng_partnership_leader_dynamic_mod } }
				}
				add_dynamic_modifier = { modifier = KR_minsheng_partnership_leader_dynamic_mod }
			}
			else_if = {
				limit = {
					NOT = {
						is_faction_leader = yes
						has_dynamic_modifier = { modifier = KR_minsheng_partnership_member_dynamic_mod }
					}
				}
				add_dynamic_modifier = { modifier = KR_minsheng_partnership_member_dynamic_mod }
			}
		}
	}
}

KMT_found_minsheng_partnership = {
	custom_effect_tooltip = CHI_invitation_for_minsheng_partnership_tt
	hidden_effect = {
		for_each_scope_loop = {
			array = global.asian_tags_array
			if = {
				limit = {
					NOT = {
						is_chinese_tag = yes
						tag = DEI
						tag = GEA
					}
				}
				ROOT = {
					activate_targeted_decision = { target = PREV decision = KMT_invite_into_economic_sphere }
				}
			}
		}
		for_each_scope_loop = {
			array = global.oceania_tags_array
			ROOT = {
				activate_targeted_decision = { target = PREV decision = KMT_invite_into_economic_sphere }
			}
		}
		for_each_scope_loop = {
			array = global.indian_tags_array
			ROOT = {
				activate_targeted_decision = { target = PREV decision = KMT_invite_into_economic_sphere }
			}
		}
		#Kemalist Turkey apparently should be able to join
		activate_targeted_decision = { target = TUR decision = KMT_invite_into_economic_sphere }
	}
}

KMT_remove_from_economic_sphere = {
	if = {
		limit = { has_country_flag = KMT_minsheng_partnership_flag }
		custom_effect_tooltip = KMT_withdraws_from_sphere
		clr_country_flag = KMT_minsheng_partnership_flag
		remove_from_array = { global.KMT_minsheng_partnership_members = THIS }
		if = {
			limit = { has_dynamic_modifier = { modifier = KR_minsheng_partnership_member_dynamic_mod scope = THIS } }
			remove_dynamic_modifier = { modifier = KR_minsheng_partnership_member_dynamic_mod }
		}
		hidden_effect = {
			subtract_from_variable = { KMT_minsheng_number_of_members_var = 1 }
			LKT = { KMT_recalculate_founder_minsheng_partnership_effects = yes }
			RKT = { KMT_recalculate_founder_minsheng_partnership_effects = yes }
		}
	}
}
