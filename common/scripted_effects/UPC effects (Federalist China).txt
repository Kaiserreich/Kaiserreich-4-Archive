#Dem Enthusiasm Effects
UPC_clamp_enthusiasm_effect = {
	clamp_variable = {
		var = global.UPC_democratic_enthusiasm_var
		min = 0
		max = 1
	}
}

UPC_add_enthusiasm_small_effect = {
	add_to_variable = {
		var = global.UPC_democratic_enthusiasm_var
		value = 0.01
	}
	UPC_clamp_enthusiasm_effect = yes
	if = {
		limit = {
			OR = {
				tag = UPC
				is_subject_of = UPC
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = UPC_add_enthusiasm_small_tt
	}
	hidden_effect = {
		UPC = {
			if = {
				limit = {
					country_exists = UPC
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = UPC_power_balance
					value = 0.02
					tooltip_side = UPC_high_enthusiasm_side
				}
			}
		}
	}
}

UPC_add_enthusiasm_medium_effect = {
	add_to_variable = {
		var = global.UPC_democratic_enthusiasm_var
		value = 0.03
	}
	UPC_clamp_enthusiasm_effect = yes
	if = {
		limit = {
			OR = {
				tag = UPC
				is_subject_of = UPC
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = UPC_add_enthusiasm_medium_tt
	}
	hidden_effect = {
		UPC = {
			if = {
				limit = {
					country_exists = UPC
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = UPC_power_balance
					value = 0.06
					tooltip_side = UPC_high_enthusiasm_side
				}
			}
		}
	}
}
UPC_add_enthusiasm_large_effect = {
	add_to_variable = {
		var = global.UPC_democratic_enthusiasm_var
		value = 0.05
	}
	UPC_clamp_enthusiasm_effect = yes
	if = {
		limit = {
			OR = {
				tag = UPC
				is_subject_of = UPC
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = UPC_add_enthusiasm_large_tt
	}
	hidden_effect = {
		UPC = {
			if = {
				limit = {
					country_exists = UPC
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = UPC_power_balance
					value = 0.10
					tooltip_side = UPC_high_enthusiasm_side
				}
			}
		}
	}
}
UPC_add_enthusiasm_mega_effect = {
	add_to_variable = {
		var = global.UPC_democratic_enthusiasm_var
		value = 0.10
	}
	UPC_clamp_enthusiasm_effect = yes
	if = {
		limit = {
			OR = {
				tag = UPC
				is_subject_of = UPC
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = UPC_add_enthusiasm_mega_tt
	}
	hidden_effect = {
		UPC = {
			if = {
				limit = {
					country_exists = UPC
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = UPC_power_balance
					value = 0.20
					tooltip_side = UPC_high_enthusiasm_side
				}
			}
		}
	}
}
UPC_add_enthusiasm_giga_effect = {
	add_to_variable = {
		var = global.UPC_democratic_enthusiasm_var
		value = 0.25
	}
	UPC_clamp_enthusiasm_effect = yes
	if = {
		limit = {
			OR = {
				tag = UPC
				is_subject_of = UPC
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = UPC_add_enthusiasm_giga_tt
	}
	hidden_effect = {
		UPC = {
			if = {
				limit = {
					country_exists = UPC
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = UPC_power_balance
					value = 0.50
					tooltip_side = UPC_high_enthusiasm_side
				}
			}
		}
	}
}
UPC_sub_enthusiasm_small_effect = {
	add_to_variable = {
		var = global.UPC_democratic_enthusiasm_var
		value = -0.01
	}
	UPC_clamp_enthusiasm_effect = yes
	if = {
		limit = {
			OR = {
				tag = UPC
				is_subject_of = UPC
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = UPC_sub_enthusiasm_small_tt
	}
	hidden_effect = {
		UPC = {
			if = {
				limit = {
					country_exists = UPC
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = UPC_power_balance
					value = -0.02
					tooltip_side = UPC_low_enthusiasm_side
				}
			}
		}
	}
}
UPC_sub_enthusiasm_medium_effect = {
	add_to_variable = {
		var = global.UPC_democratic_enthusiasm_var
		value = -0.03
	}
	UPC_clamp_enthusiasm_effect = yes
	if = {
		limit = {
			OR = {
				tag = UPC
				is_subject_of = UPC
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = UPC_sub_enthusiasm_medium_tt
	}
	hidden_effect = {
		UPC = {
			if = {
				limit = {
					country_exists = UPC
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = UPC_power_balance
					value = -0.06
					tooltip_side = UPC_low_enthusiasm_side
				}
			}
		}
	}
}
UPC_sub_enthusiasm_large_effect = {
	add_to_variable = {
		var = global.UPC_democratic_enthusiasm_var
		value = -0.05
	}
	UPC_clamp_enthusiasm_effect = yes
	if = {
		limit = {
			OR = {
				tag = UPC
				is_subject_of = UPC
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = UPC_sub_enthusiasm_large_tt
	}
	hidden_effect = {
		UPC = {
			if = {
				limit = {
					country_exists = UPC
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = UPC_power_balance
					value = -0.10
					tooltip_side = UPC_low_enthusiasm_side
				}
			}
		}
	}
}
UPC_sub_enthusiasm_mega_effect = {
	add_to_variable = {
		var = global.UPC_democratic_enthusiasm_var
		value = -0.10
	}
	UPC_clamp_enthusiasm_effect = yes
	if = {
		limit = {
			OR = {
				tag = UPC
				is_subject_of = UPC
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = UPC_sub_enthusiasm_mega_tt
	}
	hidden_effect = {
		UPC = {
			if = {
				limit = {
					country_exists = UPC
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = UPC_power_balance
					value = -0.20
					tooltip_side = UPC_low_enthusiasm_side
				}
			}
		}
	}
}
UPC_sub_enthusiasm_giga_effect = {
	add_to_variable = {
		var = global.UPC_democratic_enthusiasm_var
		value = -0.25
	}
	UPC_clamp_enthusiasm_effect = yes
	if = {
		limit = {
			OR = {
				tag = UPC
				is_subject_of = UPC
			}
		}
		#Hides this tooltip if you aren't affected but doesn't actually stop the effect
		custom_effect_tooltip = UPC_sub_enthusiasm_giga_tt
	}
	hidden_effect = {
		UPC = {
			if = {
				limit = {
					country_exists = UPC
					has_any_power_balance = yes
				}
				#Sucks but atm add power balance doesn't accept variables
				add_power_balance_value = {
					id = UPC_power_balance
					value = -0.50
					tooltip_side = UPC_low_enthusiasm_side
				}
			}
		}
	}
}

UPC_ctr_enthusiasm_small_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = UPC_power_balance
				range > UPC_bop_emerging_realism
			}
		}
		UPC_sub_enthusiasm_small_effect = yes
	}
	else = {
		#Cynicism Side
		UPC_add_enthusiasm_small_effect = yes
	}
}

UPC_ctr_enthusiasm_medium_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = UPC_power_balance
				range > UPC_bop_emerging_realism
			}
		}
		UPC_sub_enthusiasm_medium_effect = yes
	}
	else = {
		#Cynicism Side
		UPC_add_enthusiasm_medium_effect = yes
	}
}

UPC_ctr_enthusiasm_large_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = UPC_power_balance
				range > UPC_bop_emerging_realism
			}
		}
		UPC_sub_enthusiasm_large_effect = yes
	}
	else = {
		#Cynicism Side
		UPC_add_enthusiasm_large_effect = yes
	}
}

UPC_ctr_enthusiasm_mega_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = UPC_power_balance
				range > UPC_bop_emerging_realism
			}
		}
		UPC_sub_enthusiasm_mega_effect = yes
	}
	else = {
		#Cynicism Side
		UPC_add_enthusiasm_mega_effect = yes
	}
}

UPC_ctr_enthusiasm_giga_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = UPC_power_balance
				range > UPC_bop_emerging_realism
			}
		}
		UPC_sub_enthusiasm_giga_effect = yes
	}
	else = {
		#Cynicism Side
		UPC_add_enthusiasm_giga_effect = yes
	}
}

UPC_ext_enthusiasm_small_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = UPC_power_balance
				range > UPC_bop_emerging_realism
			}
		}
		UPC_add_enthusiasm_small_effect = yes
	}
	else = {
		#Cynicism Side
		UPC_sub_enthusiasm_small_effect = yes
	}
}

UPC_ext_enthusiasm_medium_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = UPC_power_balance
				range > UPC_bop_emerging_realism
			}
		}
		UPC_add_enthusiasm_medium_effect = yes
	}
	else = {
		#Cynicism Side
		UPC_sub_enthusiasm_medium_effect = yes
	}
}

UPC_ext_enthusiasm_large_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = UPC_power_balance
				range > UPC_bop_emerging_realism
			}
		}
		UPC_add_enthusiasm_large_effect = yes
	}
	else = {
		#Cynicism Side
		UPC_sub_enthusiasm_large_effect = yes
	}
}

UPC_ext_enthusiasm_mega_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = UPC_power_balance
				range > UPC_bop_emerging_realism
			}
		}
		UPC_add_enthusiasm_mega_effect = yes
	}
	else = {
		#Cynicism Side
		UPC_sub_enthusiasm_mega_effect = yes
	}
}

UPC_ext_enthusiasm_giga_effect = {
	if = {
		limit = {
			#Conviction Side
			is_power_balance_in_range = {
				id = UPC_power_balance
				range > UPC_bop_emerging_realism
			}
		}
		UPC_add_enthusiasm_giga_effect = yes
	}
	else = {
		#Cynicism Side
		UPC_sub_enthusiasm_giga_effect = yes
	}
}

#UPC Election Effects
#These effects basically are the ways we can alter elections.

UPC_add_one_campaign_action_effect = {
	custom_effect_tooltip = UPC_add_one_campaign_action_effect_tt
	add_to_variable = { UPC.campaign_actions_var = 1 }
}

UPC_elections_fire_province_based_event_effect = {
	#Tier 01: Super Yield (200-209) 25% Popularity + Enthusiasm
	if = {
		limit = { FROM = { state = 605 } }
		country_event = UPC.federalelections.200 #Sichuan
	}
	else_if = {
		limit = { FROM = { state = 597 } }
		country_event = UPC.federalelections.201 #Shandong
	}
	else_if = {
		limit = { FROM = { state = 608 } }
		country_event = UPC.federalelections.202 #Beijing
	}
	else_if = {
		limit = { FROM = { state = 1059 } }
		country_event = UPC.federalelections.203 #Henan
	}
	else_if = {
		limit = { FROM = { state = 592 } }
		country_event = UPC.federalelections.204 #Guangdong
	}
	else_if = {
		limit = { FROM = { state = 613 } }
		country_event = UPC.federalelections.205 #Jiangsu
	}
	#Tier 02: High Yield (210-219) 20% Popularity + Enthusiasm
	else_if = {
		limit = { FROM = { state = 602 } }
		country_event = UPC.federalelections.210 #Hunan
	}
	else_if = {
		limit = { FROM = { state = 1048 } }
		country_event = UPC.federalelections.211 #Hubei
	}
	else_if = {
		limit = { FROM = { state = 606 } }
		country_event = UPC.federalelections.212 #Anhui
	}
	else_if = {
		limit = { FROM = { state = 596 } }
		country_event = UPC.federalelections.213 #Zhejiang
	}
	else_if = {
		limit = { FROM = { state = 716 } }
		country_event = UPC.federalelections.214 #Fengtian
	}
	else_if = {
		limit = { FROM = { state = 1044 } }
		country_event = UPC.federalelections.215 #Jiangxi
	}
	#Tier 03: Medium Yield (220-229) 15% Popularity + Enthusiasm
	else_if = {
		limit = { FROM = { state = 594 } }
		country_event = UPC.federalelections.220 #Guangxi
	}
	else_if = {
		limit = { FROM = { state = 325 } }
		country_event = UPC.federalelections.221 #Yunnan
	}
	else_if = {
		limit = { FROM = { state = 886 } }
		country_event = UPC.federalelections.222 #Jilin
	}
	else_if = {
		limit = { FROM = { state = 1066 } }
		country_event = UPC.federalelections.223 #Fujian
	}
	else_if = {
		limit = { FROM = { state = 1072 } }
		country_event = UPC.federalelections.224 #Shanxi
	}
	else_if = {
		limit = { FROM = { state = 1051 } }
		country_event = UPC.federalelections.225 #Guizhou
	}
	#Tier 04: Low Yield (230-239): 10% Popularity + Enthusiasm
	else_if = {
		limit = { FROM = { state = 799 } }
		country_event = UPC.federalelections.230 #Shaanxi
	}
	else_if = {
		limit = { FROM = { state = 283 } }
		country_event = UPC.federalelections.231 #Xibei
	}
	else_if = {
		limit = { FROM = { state = 621 } }
		country_event = UPC.federalelections.232 #Inner Mongolia
	}
	else_if = {
		limit = { FROM = { state = 885 } }
		country_event = UPC.federalelections.233 #Heilongjiang
	}
	else_if = {
		limit = { FROM = { state = 524 } }
		country_event = UPC.federalelections.234 #Taiwan
	}
	else_if = {
		limit = { FROM = { state = 743 } }
		country_event = UPC.federalelections.235 #Shanghai
	}
	#Tier 05: Fringe Yield (240-249) 5% Popularity + Enthusiasm
	else_if = {
		limit = { FROM = { state = 617 } }
		country_event = UPC.federalelections.240 #Xinjiang
	}
	else_if = {
		limit = { FROM = { state = 322 } }
		country_event = UPC.federalelections.241 #Tibet
	}
	else_if = {
		limit = { FROM = { state = 330 } }
		country_event = UPC.federalelections.242 #Outer Mongolia
	}
	else_if = {
		limit = { FROM = { state = 408 } }
		country_event = UPC.federalelections.243 #Outer Manchuria
	}
	else_if = {
		limit = { FROM = { state = 336 } }
		country_event = UPC.federalelections.244 #Singapore
	}
	else_if = {
		limit = { FROM = { state = 326 } }
		country_event = UPC.federalelections.245 #Overseas Chinese
	}
}

UPC_elections_fire_interest_group_event_effect = {
	random_list = {
		#They can be all equally likely because their effects are gradiented.

		#Tier 02: High Yield (250-259) 20% Popularity + Enthusiasm
		10 = {
			country_event = UPC.federalelections.250 #Unions/Socialists/Workers
			modifier = {
				factor = 2
				has_country_flag = UPC_assembly_occupation_representation_flag
			}
		}
		10 = {
			country_event = UPC.federalelections.251 #Gentry/Farmers/Agrarians
			modifier = {
				factor = 2
				has_country_flag = UPC_assembly_occupation_representation_flag
			}
		}
		10 = {
			country_event = UPC.federalelections.252 #Northern Establishment
			modifier = {
				factor = 2
				has_country_flag = UPC_assembly_occupation_representation_flag
			}
		}

		#Tier 03: Medium Yield (260-269) 15% Popularity + Enthusiasm
		10 = {
			country_event = UPC.federalelections.260 #Student activists/Intellectuals
			modifier = {
				factor = 2
				has_country_flag = UPC_assembly_occupation_representation_flag
			}
		}
		10 = {
			country_event = UPC.federalelections.261 #Business/Foreign rearguards/Merchants
			modifier = {
				factor = 2
				has_country_flag = UPC_assembly_occupation_representation_flag
			}
		}
		10 = {
			country_event = UPC.federalelections.262 #Military
			modifier = {
				factor = 0.50
				has_country_flag = UPC_depoliticise_the_military_flag
			}
		}
		10 = {
			country_event = UPC.federalelections.263 #Former warlords/strongmen surge in the polls?
			modifier = {
				factor = 0.50
				has_country_flag = UPC_depoliticise_the_military_flag
			}
		}

		#Tier 04: Low Yield (270-279) 10% Popularity + Enthusiasm
		10 = {
			country_event = UPC.federalelections.270 #Women's Activism Event
			modifier = {
				factor = 2
				has_country_flag = UPC_constitution_womens_suffrage_granted_flag
			}
		}
		10 = {
			country_event = UPC.federalelections.271 #Particularists/Single Issue Voters
		}
		10 = {
			country_event = UPC.federalelections.272 #Minority Rights
			modifier = {
				factor = 2
				NOT = { owns_state = 617 } #Dihua
				NOT = { owns_state = 322 } #Lhasa
				NOT = { owns_state = 152 } #Urga
			}
		}
	}
}

UPC_elections_fire_election_challenges_event_effect = {
	random_list = {
		#They can be all equally likely because their effects are gradiented.

		#Tier 02: High Yield (280-289) 20% Popularity + Enthusiasm
		10 = {
			country_event = UPC.federalelections.280 #Gerrymandering?/Pocket Districts/Low voter turnout
		}
		10 = {
			country_event = UPC.federalelections.281 #Terrorism and political violence
		}
		10 = {
			country_event = UPC.federalelections.282 #Political Machines
		}
		#Tier 03: Medium Yield (290-299) 15% Popularity + Enthusiasm
		10 = {
			country_event = UPC.federalelections.290 #Low Literacy and few democratic traditions
		}
		10 = {
			country_event = UPC.federalelections.291 #Voter Intimidation by local forces (army falls under terrorism)
		}
		10 = {
			country_event = UPC.federalelections.292 #Corruption/Lobbying/Bribery Scandal
		}
		10 = {
			country_event = UPC.federalelections.293 #Disenfranchisement
		}
		#Tier 04: Medium Yield (300-309) 10% Popularity + Enthusiasm
		10 = {
			country_event = UPC.federalelections.300 #Mudslinging and Propaganda
		}
		10 = {
			country_event = UPC.federalelections.301 #Accusation of fraud + lawsuits in advance
		}
		10 = {
			country_event = UPC.federalelections.302 #Dirty Tricks
		}
	}
}

UPC_set_indirect_presidential_elections_effect = {
	custom_effect_tooltip = UPC_set_indirect_presidential_elections_effect_tt
	#Presidents will be elected indirectly, allowing the player to choose who wins the election by spending political power and democratic enthusiasm.
}

UPC_set_direct_presidential_elections_effect = {
	custom_effect_tooltip = UPC_set_direct_presidential_elections_effect_tt
	set_country_flag = UPC_direct_presidential_elections_flag
	#This will make it so every time you campaign, you gain more popularity for your chosen party however the outcome of the election is immediate.
}

UPC_assembly_default_representation_effect = {
	custom_effect_tooltip = UPC_assembly_default_representation_effect_tt
	set_variable = { global.UPC_total_seats_var = 800 }
	set_variable = { global.UPC_majority_seats_var = 401 }
}

UPC_assembly_minority_representation_effect = {
	custom_effect_tooltip = UPC_assembly_minority_representation_effect_tt
	set_country_flag = UPC_assembly_minority_representation_flag #Useful for campaigning in minority regions.
	set_variable = { global.UPC_total_seats_var = 900 }
	set_variable = { global.UPC_majority_seats_var = 451 }
}

UPC_assembly_occupation_representation_effect = {
	custom_effect_tooltip = UPC_assembly_occupation_representation_effect_tt
	set_country_flag = UPC_assembly_occupation_representation_flag #Useful for interest group events
	set_variable = { global.UPC_total_seats_var = 900 }
	set_variable = { global.UPC_majority_seats_var = 451 }
}

UPC_assembly_minority_and_occupation_representation_effect = {
	custom_effect_tooltip = UPC_assembly_minority_and_occupation_representation_effect_tt
	set_country_flag = UPC_assembly_minority_representation_flag #Useful for campaigning in minority regions.
	set_country_flag = UPC_assembly_occupation_representation_flag #Useful for interest group events
	set_variable = { global.UPC_total_seats_var = 1000 }
	set_variable = { global.UPC_majority_seats_var = 501 }
}

UPC_grant_womens_suffrage_effect = {
	custom_effect_tooltip = UPC_grant_womens_suffrage_effect_tt
	set_country_flag = UPC_constitution_womens_suffrage_granted_flag
}

#Stabilising the Republic Effects
UPC_crackdown_on_electoral_fraud_effect = {
	custom_effect_tooltip = UPC_crackdown_on_electoral_fraud_effect_tt
	set_country_flag = UPC_crackdown_on_electoral_fraud_flag
}

UPC_stabilise_the_democratic_system_effect = {
	custom_effect_tooltip = UPC_stabilise_the_democratic_system_effect_tt
	set_country_flag = UPC_stabilise_the_democratic_system_flag
}

UPC_depoliticise_the_military_effect = {
	custom_effect_tooltip = UPC_depoliticise_the_military_effect_tt
	set_country_flag = UPC_depoliticise_the_military_flag
}

UPC_democratic_backsliding_blocked_effect = {
	custom_effect_tooltip = UPC_democratic_backsliding_blocked_flag_tt
	set_country_flag = UPC_democratic_backsliding_blocked_flag
}

#Ending Fed Democracy Effects
UPC_end_elections_effect = {
	if = {
		limit = { has_country_flag = UPC_actively_holding_elections_flag }
		clr_country_flag = UPC_actively_holding_elections_flag
	}
	for_each_scope_loop = {
		array = global.federal_elections_targets_array
		UPC = { remove_targeted_decision = { decision = UPC_campaign_in_state_decision target = PREV } }
	}
	if = {
		limit = { has_active_mission = UPC_upcoming_federal_elections_timer }
		remove_mission = UPC_upcoming_federal_elections_timer
	}
	every_subject_country = {
		remove_targeted_decision = { target = UPC decision = UPC_warlord_supports_GRA_decision }
		remove_targeted_decision = { target = UPC decision = UPC_warlord_supports_CDL_decision }
		remove_targeted_decision = { target = UPC decision = UPC_warlord_supports_liberals_decision }
		remove_targeted_decision = { target = UPC decision = UPC_warlord_supports_regionalism_decision }
		remove_targeted_decision = { target = UPC decision = UPC_warlord_embrace_radicalism_decision }
	}
}

UPC_end_federalist_democracy_effect = {
	custom_effect_tooltip = UPC_end_federalist_democracy_effect_tt
	hidden_effect = {
		if = {
			limit = { has_country_flag = UPC_has_federalist_democracy_flag }
			clr_country_flag = UPC_has_federalist_democracy_flag
		}
		set_country_flag = UPC_democratic_backsliding_flag #For GXC, there are two examples of backsliding, this one is more for post-unification backsliding rather than Phase IV backsliding.
		UPC_end_elections_effect = yes
		UPC_reset_majority_government_effect = yes
		if = {
			limit = { has_active_mission = UPC_annual_coalition_expectations_timer }
			remove_mission = UPC_annual_coalition_expectations_timer
		}
		UPC_lock_coalition_mechanic_effect = yes
	}
	custom_effect_tooltip = focus_tree_will_change_tt
	mark_focus_tree_layout_dirty = yes #Remove coalition tree
}

##Banning Parties

UPC_penalty_for_banned_parties_effect = {
	if = {
		limit = { check_variable = { UPC_banned_parties_seat_temp_var > 200 } }
		UPC_sub_enthusiasm_giga_effect = yes
	}
	else_if = {
		limit = { check_variable = { UPC_banned_parties_seat_temp_var > 150 } }
		UPC_sub_enthusiasm_mega_effect = yes
	}
	else_if = {
		limit = { check_variable = { UPC_banned_parties_seat_temp_var > 100 } }
		UPC_sub_enthusiasm_large_effect = yes
	}
	else_if = {
		limit = { check_variable = { UPC_banned_parties_seat_temp_var > 50 } }
		UPC_sub_enthusiasm_medium_effect = yes
	}
	else_if = {
		limit = { check_variable = { UPC_banned_parties_seat_temp_var > 0 } }
		UPC_sub_enthusiasm_small_effect = yes
	}
}

UPC_election_ban_RAD_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_election_ban_party_effect_tt
			PARTY = UPC_RAD_party
		}
		set_country_flag = UPC_election_ban_RAD_flag
	}
	if = {
		limit = {
			check_variable = { global.UPC_RAD_seats_var > 0 }
		}
		add_to_temp_variable = { UPC_banned_parties_seat_temp_var = global.UPC_RAD_seats_var }
		UPC_penalty_for_banned_parties_effect = yes
		#Transfer all seats to the statists
		add_to_variable = { global.UPC_STA_seats_var = global.UPC_RAD_seats_var }
		subtract_from_variable = { global.UPC_RAD_seats_var = global.UPC_RAD_seats_var }
	}
	#Set coalition promises to 0
	set_variable = { global.UPC_RAD_promises_var = 0 }
}

UPC_election_unban_RAD_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_election_unban_party_effect_tt
			PARTY = UPC_RAD_party
		}
		clr_country_flag = UPC_election_ban_RAD_flag
	}
}

UPC_election_ban_CSP_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_election_ban_party_effect_tt
			PARTY = UPC_CSP_party
		}
		set_country_flag = UPC_election_ban_CSP_flag
	}
	if = {
		limit = {
			check_variable = { global.UPC_CSP_seats_var > 0 }
		}
		add_to_temp_variable = { UPC_banned_parties_seat_temp_var = global.UPC_CSP_seats_var }
		UPC_penalty_for_banned_parties_effect = yes
		#Transfer all seats to the statists
		add_to_variable = { global.UPC_STA_seats_var = global.UPC_CSP_seats_var }
		subtract_from_variable = { global.UPC_CSP_seats_var = global.UPC_CSP_seats_var }
	}
	#Set coalition promises to 0
	set_variable = { global.UPC_CSP_promises_var = 0 }
}

UPC_election_unban_CSP_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_election_unban_party_effect_tt
			PARTY = UPC_CSP_party
		}
		clr_country_flag = UPC_election_ban_CSP_flag
	}
}

UPC_election_ban_KMT_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_election_ban_party_effect_tt
			PARTY = UPC_KMT_party
		}
		set_country_flag = UPC_election_ban_KMT_flag
	}
	if = {
		limit = {
			check_variable = { global.UPC_KMT_seats_var > 0 }
		}
		add_to_temp_variable = { UPC_banned_parties_seat_temp_var = global.UPC_KMT_seats_var }
		UPC_penalty_for_banned_parties_effect = yes
		#Transfer all seats to the statists
		add_to_variable = { global.UPC_STA_seats_var = global.UPC_KMT_seats_var }
		subtract_from_variable = { global.UPC_KMT_seats_var = global.UPC_KMT_seats_var }
	}
	#Set coalition promises to 0
	set_variable = { global.UPC_KMT_promises_var = 0 }
}

UPC_election_unban_KMT_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_election_unban_party_effect_tt
			PARTY = UPC_KMT_party
		}
		clr_country_flag = UPC_election_ban_KMT_flag
	}
}

UPC_election_ban_CDL_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_election_ban_party_effect_tt
			PARTY = UPC_CDL_party
		}
		set_country_flag = UPC_election_ban_CDL_flag
	}
	if = {
		limit = {
			check_variable = { global.UPC_CDL_seats_var > 0 }
		}
		add_to_temp_variable = { UPC_banned_parties_seat_temp_var = global.UPC_CDL_seats_var }
		UPC_penalty_for_banned_parties_effect = yes
		#Transfer all seats to the statists
		add_to_variable = { global.UPC_STA_seats_var = global.UPC_CDL_seats_var }
		subtract_from_variable = { global.UPC_CDL_seats_var = global.UPC_CDL_seats_var }
	}
	#Set coalition promises to 0
	set_variable = { global.UPC_CDL_seats_var = 0 }
}

UPC_election_unban_CDL_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_election_unban_party_effect_tt
			PARTY = UPC_CDL
		}
		clr_country_flag = UPC_election_ban_CDL_flag
	}
}

UPC_election_ban_GRA_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_election_ban_party_effect_tt
			PARTY = UPC_GRA_party
		}
		set_country_flag = UPC_election_ban_GRA_flag
	}
	if = {
		limit = {
			check_variable = { global.UPC_GRA_seats_var > 0 }
		}
		add_to_temp_variable = { UPC_banned_parties_seat_temp_var = global.UPC_GRA_seats_var }
		UPC_penalty_for_banned_parties_effect = yes
		#Transfer all seats to the statists
		add_to_variable = { global.UPC_STA_seats_var = global.UPC_GRA_seats_var }
		subtract_from_variable = { global.UPC_GRA_seats_var = global.UPC_GRA_seats_var }
	}
	#Set coalition promises to 0
	set_variable = { global.UPC_GRA_seats_var = 0 }
}

UPC_election_unban_GRA_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_election_unban_party_effect_tt
			PARTY = UPC_GRA_party
		}
		clr_country_flag = UPC_election_ban_GRA_flag
	}
}

UPC_election_ban_REG_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_election_ban_party_effect_tt
			PARTY = UPC_REG_party
		}
		set_country_flag = UPC_election_ban_REG_flag
	}
	if = {
		limit = {
			check_variable = { global.UPC_REG_seats_var > 0 }
		}
		add_to_temp_variable = { UPC_banned_parties_seat_temp_var = global.UPC_REG_seats_var }
		UPC_penalty_for_banned_parties_effect = yes
		#Transfer all seats to the statists
		add_to_variable = { global.UPC_STA_seats_var = global.UPC_REG_seats_var }
		subtract_from_variable = { global.UPC_REG_seats_var = global.UPC_REG_seats_var }
	}
	#Set coalition promises to 0
	set_variable = { global.UPC_REG_promises_var = 0 }
}

UPC_election_unban_REG_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_election_unban_party_effect_tt
			PARTY = UPC_REG_party
		}
		clr_country_flag = UPC_election_ban_REG_flag
	}
}

UPC_election_ban_YCP_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_election_ban_party_effect_tt
			PARTY = UPC_YCP_party
		}
		set_country_flag = UPC_election_ban_YCP_flag
	}
	if = {
		limit = {
			check_variable = { global.UPC_YCP_seats_var > 0 }
		}
		add_to_temp_variable = { UPC_banned_parties_seat_temp_var = global.UPC_YCP_seats_var }
		UPC_penalty_for_banned_parties_effect = yes
		#Transfer all seats to the statists
		add_to_variable = { global.UPC_STA_seats_var = global.UPC_YCP_seats_var }
		subtract_from_variable = { global.UPC_YCP_seats_var = global.UPC_YCP_seats_var }
	}
	#Set coalition promises to 0
	set_variable = { global.UPC_YCP_promises_var = 0 }
}
UPC_election_unban_YCP_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_election_unban_party_effect_tt
			PARTY = UPC_YCP_party
		}
		clr_country_flag = UPC_election_ban_YCP_flag
	}
}

#UPC Party Popularity Effects - we need these to help keep track of bonuses also because some parties have different slots depending on tag.

### UPC Party Popularity Change Constants ###
@UPC_size_small_constant = 0.01
@UPC_size_medium_constant = 0.03
@UPC_size_large_constant = 0.05
@UPC_size_mega_constant = 0.10

#Independent Radicals
UPC_add_RAD_effect = {
	add_popularity = {
		ideology = totalist
		popularity = var:UPC_size_var
	}
}
UPC_RAD_small_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_small_constant }
	UPC_add_RAD_effect = yes
}
UPC_RAD_medium_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_medium_constant }
	UPC_add_RAD_effect = yes
}
UPC_RAD_large_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_large_constant }
	UPC_add_RAD_effect = yes
}
UPC_RAD_mega_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_mega_constant }
	UPC_add_RAD_effect = yes
}

#Chinese Syndicalist Party
UPC_add_CSP_effect = {
	add_popularity = {
		ideology = syndicalist
		popularity = var:UPC_size_var
	}
}
UPC_CSP_small_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_small_constant }
	UPC_add_CSP_effect = yes
}
UPC_CSP_medium_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_medium_constant }
	UPC_add_CSP_effect = yes
}
UPC_CSP_large_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_large_constant }
	UPC_add_CSP_effect = yes
}
UPC_CSP_mega_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_mega_constant }
	UPC_add_CSP_effect = yes
}

#Kuomintang
UPC_add_KMT_effect = {
	add_popularity = {
		ideology = radical_socialist
		popularity = var:UPC_size_var
	}
}
UPC_KMT_small_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_small_constant }
	UPC_add_KMT_effect = yes
}
UPC_KMT_medium_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_medium_constant }
	UPC_add_KMT_effect = yes
}
UPC_KMT_large_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_large_constant }
	UPC_add_KMT_effect = yes
}
UPC_KMT_mega_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_mega_constant }
	UPC_add_KMT_effect = yes
}

#China Democratic League
UPC_add_CDL_effect = {
	if = {
		limit = { tag = GXC }
		set_temp_variable = { ideology_change_target = token:social_democrat }
	}
	else_if = {
		limit = {
			tag = YUN
			has_country_flag = YUN_UPC_satellite_election_path_flag
		}
		set_temp_variable = { ideology_change_target = token:social_democrat }
	}
	else_if = {
		limit = {
			tag = YUN
			NOT = { has_country_flag = YUN_UPC_satellite_election_path_flag }
		}
		set_temp_variable = { ideology_change_target = token:social_liberal }
	}
	else_if = {
		limit = { tag = SZC }
		set_temp_variable = { ideology_change_target = token:social_democrat }
	}
	add_popularity = {
		ideology = var:ideology_change_target
		popularity = var:UPC_size_var
	}
}
UPC_CDL_small_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_small_constant }
	UPC_add_CDL_effect = yes
}
UPC_CDL_medium_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_medium_constant }
	UPC_add_CDL_effect = yes
}
UPC_CDL_large_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_large_constant }
	UPC_add_CDL_effect = yes
}
UPC_CDL_mega_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_mega_constant }
	UPC_add_CDL_effect = yes
}

#Grand Republican Alliance
UPC_add_GRA_effect = {
	if = {
		limit = { tag = GXC }
		set_temp_variable = { ideology_change_target = token:social_liberal }
	}
	else_if = {
		limit = {
			tag = YUN
			has_country_flag = YUN_UPC_satellite_election_path_flag
		}
		set_temp_variable = { ideology_change_target = token:market_liberal }
	}
	else_if = {
		limit = {
			tag = YUN
			NOT = { has_country_flag = YUN_UPC_satellite_election_path_flag }
		}
		set_temp_variable = { ideology_change_target = token:social_conservative }
	}
	else_if = {
		limit = { tag = SZC }
		set_temp_variable = { ideology_change_target = token:social_liberal }
	}
	add_popularity = {
		ideology = var:ideology_change_target
		popularity = var:UPC_size_var
	}
}
UPC_GRA_small_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_small_constant }
	UPC_add_GRA_effect = yes
}
UPC_GRA_medium_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_medium_constant }
	UPC_add_GRA_effect = yes
}
UPC_GRA_large_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_large_constant }
	UPC_add_GRA_effect = yes
}
UPC_GRA_mega_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_mega_constant }
	UPC_add_GRA_effect = yes
}

#Independent Republicans
UPC_add_REP_effect = {
	if = {
		limit = { tag = GXC }
		set_temp_variable = { ideology_change_target = token:market_liberal }
	}
	else_if = {
		limit = {
			tag = YUN
			has_country_flag = YUN_UPC_satellite_election_path_flag
		}
		set_temp_variable = { ideology_change_target = token:social_liberal }
	}
	else_if = {
		limit = {
			tag = YUN
			NOT = { has_country_flag = YUN_UPC_satellite_election_path_flag }
		}
		set_temp_variable = { ideology_change_target = token:market_liberal }
	}
	else_if = {
		limit = { tag = SZC }
		set_temp_variable = { ideology_change_target = token:market_liberal }
	}
	add_popularity = {
		ideology = var:ideology_change_target
		popularity = var:UPC_size_var
	}
}
UPC_REP_small_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_small_constant }
	UPC_add_REP_effect = yes
}
UPC_REP_medium_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_medium_constant }
	UPC_add_REP_effect = yes
}
UPC_REP_large_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_large_constant }
	UPC_add_REP_effect = yes
}
UPC_REP_mega_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_mega_constant }
	UPC_add_REP_effect = yes
}

#Chinese Constitutionalist Party/Democratic Constitutionalist Party
UPC_add_DCP_effect = {
	if = {
		limit = { tag = GXC }
		set_temp_variable = { ideology_change_target = token:social_conservative }
	}
	else_if = {
		limit = {
			tag = YUN
			has_country_flag = YUN_UPC_satellite_election_path_flag
		}
		set_temp_variable = { ideology_change_target = token:social_conservative }
	}
	else_if = {
		limit = {
			tag = YUN
			NOT = { has_country_flag = YUN_UPC_satellite_election_path_flag }
		}
		set_temp_variable = { ideology_change_target = token:social_democrat }
	}
	else_if = {
		limit = { tag = SZC }
		set_temp_variable = { ideology_change_target = token:social_conservative }
	}
	add_popularity = {
		ideology = var:ideology_change_target
		popularity = var:UPC_size_var
	}
}
UPC_DCP_small_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_small_constant }
	UPC_add_DCP_effect = yes
}
UPC_DCP_medium_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_medium_constant }
	UPC_add_DCP_effect = yes
}
UPC_DCP_large_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_large_constant }
	UPC_add_DCP_effect = yes
}
UPC_DCP_mega_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_mega_constant }
	UPC_add_DCP_effect = yes
}

#Statists - whoever the evil federalist faction of a tag is lol
UPC_add_STA_effect = {
	add_popularity = {
		ideology = authoritarian_democrat
		popularity = var:UPC_size_var
	}
}
UPC_STA_small_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_small_constant }
	UPC_add_STA_effect = yes
}
UPC_STA_medium_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_medium_constant }
	UPC_add_STA_effect = yes
}
UPC_STA_large_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_large_constant }
	UPC_add_STA_effect = yes
}
UPC_STA_mega_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_mega_constant }
	UPC_add_STA_effect = yes
}

#Independent Regionalists
UPC_add_REG_effect = {
	add_popularity = {
		ideology = paternal_autocrat
		popularity = var:UPC_size_var
	}
}
UPC_REG_small_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_small_constant }
	UPC_add_REG_effect = yes
}
UPC_REG_medium_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_medium_constant }
	UPC_add_REG_effect = yes
}
UPC_REG_large_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_large_constant }
	UPC_add_REG_effect = yes
}
UPC_REG_mega_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_mega_constant }
	UPC_add_REG_effect = yes
}

#Young China Party
UPC_add_YCP_effect = {
	add_popularity = {
		ideology = national_populist
		popularity = var:UPC_size_var
	}
}
UPC_YCP_small_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_small_constant }
	UPC_add_YCP_effect = yes
}
UPC_YCP_medium_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_medium_constant }
	UPC_add_YCP_effect = yes
}
UPC_YCP_large_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_large_constant }
	UPC_add_YCP_effect = yes
}
UPC_YCP_mega_effect = {
	set_temp_variable = { UPC_size_var = @UPC_size_mega_constant }
	UPC_add_YCP_effect = yes
}

UPC_RUL_small_effect = {
	if = {
		limit = { UPC_incumbent_is_GRA_trigger = yes }
		UPC_GRA_small_effect = yes
	}
	else = {
		UPC_CDL_small_effect = yes
	}
}

UPC_RUL_medium_effect = {
	if = {
		limit = { UPC_incumbent_is_GRA_trigger = yes }
		UPC_GRA_medium_effect = yes
	}
	else = {
		UPC_CDL_medium_effect = yes
	}
}

UPC_RUL_large_effect = {
	if = {
		limit = { UPC_incumbent_is_GRA_trigger = yes }
		UPC_GRA_large_effect = yes
	}
	else = {
		UPC_CDL_large_effect = yes
	}
}

UPC_RUL_mega_effect = {
	if = {
		limit = { UPC_incumbent_is_GRA_trigger = yes }
		UPC_GRA_mega_effect = yes
	}
	else = {
		UPC_CDL_mega_effect = yes
	}
}

UPC_OPP_small_effect = {
	if = {
		limit = { UPC_incumbent_is_GRA_trigger = no }
		UPC_GRA_small_effect = yes
	}
	else = {
		UPC_CDL_small_effect = yes
	}
}

UPC_OPP_medium_effect = {
	if = {
		limit = { UPC_incumbent_is_GRA_trigger = no }
		UPC_GRA_medium_effect = yes
	}
	else = {
		UPC_CDL_medium_effect = yes
	}
}

UPC_OPP_large_effect = {
	if = {
		limit = { UPC_incumbent_is_GRA_trigger = no }
		UPC_GRA_large_effect = yes
	}
	else = {
		UPC_CDL_large_effect = yes
	}
}

UPC_OPP_mega_effect = {
	if = {
		limit = { UPC_incumbent_is_GRA_trigger = no }
		UPC_GRA_mega_effect = yes
	}
	else = {
		UPC_CDL_mega_effect = yes
	}
}

UPC_PLA_small_effect = {
	if = {
		limit = { NOT = { has_country_flag = UPC_is_campaigning_as_CDL } }
		UPC_GRA_small_effect = yes
	}
	else = {
		UPC_CDL_small_effect = yes
	}
}

UPC_PLA_medium_effect = {
	if = {
		limit = { NOT = { has_country_flag = UPC_is_campaigning_as_CDL } }
		UPC_GRA_medium_effect = yes
	}
	else = {
		UPC_CDL_medium_effect = yes
	}
}

UPC_PLA_large_effect = {
	if = {
		limit = { NOT = { has_country_flag = UPC_is_campaigning_as_CDL } }
		UPC_GRA_large_effect = yes
	}
	else = {
		UPC_CDL_large_effect = yes
	}
}

UPC_PLA_mega_effect = {
	if = {
		limit = { NOT = { has_country_flag = UPC_is_campaigning_as_CDL } }
		UPC_GRA_mega_effect = yes
	}
	else = {
		UPC_CDL_mega_effect = yes
	}
}

UPC_RIV_small_effect = {
	if = {
		limit = { has_country_flag = UPC_is_campaigning_as_CDL }
		UPC_GRA_small_effect = yes
	}
	else = {
		UPC_CDL_small_effect = yes
	}
}

UPC_RIV_medium_effect = {
	if = {
		limit = { has_country_flag = UPC_is_campaigning_as_CDL }
		UPC_GRA_medium_effect = yes
	}
	else = {
		UPC_CDL_medium_effect = yes
	}
}

UPC_RIV_large_effect = {
	if = {
		limit = { has_country_flag = UPC_is_campaigning_as_CDL }
		UPC_GRA_large_effect = yes
	}
	else = {
		UPC_CDL_large_effect = yes
	}
}

UPC_RIV_mega_effect = {
	if = {
		limit = { has_country_flag = UPC_is_campaigning_as_CDL }
		UPC_GRA_mega_effect = yes
	}
	else = {
		UPC_CDL_mega_effect = yes
	}
}

### UPC Coalition Mechanic ###
UPC_unlock_coalition_mechanic_effect = {
	if = {
		limit = { NOT = { has_country_flag = UPC_coalition_mechanic_unlock_flag } }
		set_country_flag = UPC_coalition_mechanic_unlock_flag
		custom_effect_tooltip = UPC_unlock_coalition_mechanic_effect_tt
		activate_mission = UPC_perils_of_a_minority_government_mission
		mark_focus_tree_layout_dirty = yes
	}
}

UPC_lock_coalition_mechanic_effect = {
	if = {
		limit = { has_country_flag = UPC_coalition_mechanic_unlock_flag }
		clr_country_flag = UPC_coalition_mechanic_unlock_flag
	}
	if = {
		limit = { has_active_mission = UPC_perils_of_a_minority_government_mission }
		remove_mission = UPC_perils_of_a_minority_government_mission
	}
}

UPC_set_majority_government_effect = {
	if = {
		limit = { NOT = { has_country_flag = UPC_has_a_majority_government_flag } }
		custom_effect_tooltip = UPC_set_majority_government_effect_tt
		set_country_flag = UPC_has_a_majority_government_flag
	}
}

UPC_reset_majority_government_effect = {
	if = {
		limit = { has_country_flag = UPC_has_a_majority_government_flag }
		custom_effect_tooltip = UPC_reset_majority_government_effect_tt
		clr_country_flag = UPC_has_a_majority_government_flag
		activate_mission = UPC_perils_of_a_minority_government_mission
	}
}

UPC_add_coalition_cost_effect = {
	custom_effect_tooltip = UPC_add_coalition_cost_effect_tt
	add_to_variable = { global.UPC_coalition_cost_var = 25 }
}
UPC_sub_coalition_cost_effect = {
	custom_effect_tooltip = UPC_sub_coalition_cost_effect_tt
	subtract_from_variable = { global.UPC_coalition_cost_var = 25 }
}

UPC_recalculate_needed_seats_effect = {
	set_variable = { global.UPC_GRA_needed_votes_for_majority_var = global.UPC_majority_seats_var } #Either 401, 451, or 501
	subtract_from_variable = { global.UPC_GRA_needed_votes_for_majority_var = global.UPC_GRA_aligned_votes_var } #Between -499 and 501.
	set_variable = { global.UPC_CDL_needed_votes_for_majority_var = global.UPC_majority_seats_var } #Either 401, 451, or 501
	subtract_from_variable = { global.UPC_CDL_needed_votes_for_majority_var = global.UPC_CDL_aligned_votes_var } #Between -499 and 501.
}

UPC_add_aligned_votes_effect = {
	#Temp Var is set externally
	if = {
		limit = { UPC_incumbent_is_GRA_trigger = yes }
		add_to_variable = { global.UPC_GRA_aligned_votes_var = UPC_seats_to_be_changed_temp_var }
	}
	else = {
		add_to_variable = { global.UPC_CDL_aligned_votes_var = UPC_seats_to_be_changed_temp_var }
	}
	UPC_recalculate_needed_seats_effect = yes
}

UPC_sub_aligned_votes_effect = {
	#Temp Var is set externally
	if = {
		limit = { UPC_incumbent_is_GRA_trigger = yes }
		subtract_from_variable = { global.UPC_GRA_aligned_votes_var = UPC_seats_to_be_changed_temp_var }
	}
	else = {
		subtract_from_variable = { global.UPC_CDL_aligned_votes_var = UPC_seats_to_be_changed_temp_var }
	}
	UPC_recalculate_needed_seats_effect = yes
}

UPC_KMT_joins_governing_coalition_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_joins_governing_coalition_effect_tt
			PARTY = UPC_KMT_party
		}
		#Set Appropriate Flag
		set_country_flag = UPC_KMT_in_governing_coalition_flag
	}
	#Add them into coalition in-game
	hidden_effect = {
		set_temp_variable = { coalition_partner_var = token:radical_socialist }
		add_to_coalition = yes
	}
	set_temp_variable = { UPC_seats_to_be_changed_temp_var = global.UPC_KMT_seats_var }
	UPC_add_aligned_votes_effect = yes
	#Add appropriate number of promises
	if = {
		limit = { check_variable = { global.UPC_KMT_seats_var > 150 } }
		set_variable = { global.UPC_KMT_promises_var = 4 }
	}
	else_if = {
		limit = { check_variable = { global.UPC_KMT_seats_var > 100 } }
		set_variable = { global.UPC_KMT_promises_var = 3 }
	}
	else_if = {
		limit = { check_variable = { global.UPC_KMT_seats_var > 50 } }
		set_variable = { global.UPC_KMT_promises_var = 2 }
	}
	else = {
		set_variable = { global.UPC_KMT_promises_var = 1 }
	}
	UPC_add_coalition_cost_effect = yes
	mark_focus_tree_layout_dirty = yes
}

UPC_CDL_joins_governing_coalition_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_joins_governing_coalition_effect_tt
			PARTY = UPC_CDL_party
		}
		#Set Appropriate Flag
		set_country_flag = UPC_CDL_in_governing_coalition_flag
	}
	#Add them into coalition in-game
	hidden_effect = {
		if = {
			limit = { tag = GXC }
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			add_to_coalition = yes
		}
		else_if = {
			limit = {
				tag = YUN
				has_country_flag = YUN_UPC_satellite_election_path_flag
			}
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			add_to_coalition = yes
		}
		else_if = {
			limit = {
				tag = YUN
				NOT = { has_country_flag = YUN_UPC_satellite_election_path_flag }
			}
			set_temp_variable = { coalition_partner_var = token:social_liberal }
			add_to_coalition = yes
		}
		else_if = {
			limit = { tag = HNN }
			set_temp_variable = { coalition_partner_var = token:social_liberal }
			add_to_coalition = yes
		}
		else_if = {
			limit = { tag = SZC }
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			add_to_coalition = yes
		}
	}

	set_temp_variable = { UPC_seats_to_be_changed_temp_var = global.UPC_CDL_seats_var }
	UPC_add_aligned_votes_effect = yes
	#Add appropriate number of promises
	if = {
		limit = { check_variable = { global.UPC_CDL_seats_var > 150 } }
		set_variable = { global.UPC_CDL_promises_var = 4 }
	}
	else_if = {
		limit = { check_variable = { global.UPC_CDL_seats_var > 100 } }
		set_variable = { global.UPC_CDL_promises_var = 3 }
	}
	else_if = {
		limit = { check_variable = { global.UPC_CDL_seats_var > 50 } }
		set_variable = { global.UPC_CDL_promises_var = 2 }
	}
	else = {
		set_variable = { global.UPC_CDL_promises_var = 1 }
	}
	UPC_add_coalition_cost_effect = yes
	mark_focus_tree_layout_dirty = yes
}

UPC_GRA_joins_governing_coalition_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_joins_governing_coalition_effect_tt
			PARTY = UPC_GRA_party
		}
		#Set Appropriate Flag
		set_country_flag = UPC_GRA_in_governing_coalition_flag
	}
	#Add them into coalition in-game
	hidden_effect = {
		if = {
			limit = { tag = GXC }
			set_temp_variable = { coalition_partner_var = token:social_liberal }
			add_to_coalition = yes
		}
		else_if = {
			limit = {
				tag = YUN
				has_country_flag = YUN_UPC_satellite_election_path_flag
			}
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			add_to_coalition = yes
		}
		else_if = {
			limit = {
				tag = YUN
				NOT = { has_country_flag = YUN_UPC_satellite_election_path_flag }
			}
			set_temp_variable = { coalition_partner_var = token:social_conservative }
			add_to_coalition = yes
		}
		else_if = {
			limit = { tag = HNN }
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			add_to_coalition = yes
		}
		else_if = {
			limit = { tag = SZC }
			set_temp_variable = { coalition_partner_var = token:social_liberal }
			add_to_coalition = yes
		}
	}

	set_temp_variable = { UPC_seats_to_be_changed_temp_var = global.UPC_GRA_seats_var }
	UPC_add_aligned_votes_effect = yes
	#Add appropriate number of promises
	if = {
		limit = { check_variable = { global.UPC_GRA_seats_var > 150 } }
		set_variable = { global.UPC_GRA_promises_var = 4 }
	}
	else_if = {
		limit = { check_variable = { global.UPC_GRA_seats_var > 100 } }
		set_variable = { global.UPC_GRA_promises_var = 3 }
	}
	else_if = {
		limit = { check_variable = { global.UPC_GRA_seats_var > 50 } }
		set_variable = { global.UPC_GRA_promises_var = 2 }
	}
	else = {
		set_variable = { global.UPC_GRA_promises_var = 1 }
	}
	UPC_add_coalition_cost_effect = yes
	mark_focus_tree_layout_dirty = yes
}

UPC_REP_joins_governing_coalition_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_joins_governing_coalition_effect_tt
			PARTY = UPC_REP_party
		}
		#Set Appropriate Flag
		set_country_flag = UPC_REP_in_governing_coalition_flag
	}
	#Add them into coalition in-game
	hidden_effect = {
		if = {
			limit = { tag = GXC }
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			add_to_coalition = yes
		}
		else_if = {
			limit = {
				tag = YUN
				has_country_flag = YUN_UPC_satellite_election_path_flag
			}
			set_temp_variable = { coalition_partner_var = token:social_liberal }
			add_to_coalition = yes
		}
		else_if = {
			limit = {
				tag = YUN
				NOT = { has_country_flag = YUN_UPC_satellite_election_path_flag }
			}
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			add_to_coalition = yes
		}
		else_if = {
			limit = { tag = HNN }
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			add_to_coalition = yes
		}
		else_if = {
			limit = { tag = SZC }
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			add_to_coalition = yes
		}
	}

	set_temp_variable = { UPC_seats_to_be_changed_temp_var = global.UPC_REP_seats_var }
	UPC_add_aligned_votes_effect = yes
	#Add appropriate number of promises
	if = {
		limit = { check_variable = { global.UPC_REP_seats_var > 150 } }
		set_variable = { global.UPC_REP_promises_var = 4 }
	}
	else_if = {
		limit = { check_variable = { global.UPC_REP_seats_var > 100 } }
		set_variable = { global.UPC_REP_promises_var = 3 }
	}
	else_if = {
		limit = { check_variable = { global.UPC_REP_seats_var > 50 } }
		set_variable = { global.UPC_REP_promises_var = 2 }
	}
	else = {
		set_variable = { global.UPC_REP_promises_var = 1 }
	}
	UPC_add_coalition_cost_effect = yes
	mark_focus_tree_layout_dirty = yes
}

UPC_DCP_joins_governing_coalition_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_joins_governing_coalition_effect_tt
			PARTY = UPC_DCP_party
		}
		#Set Appropriate Flag
		set_country_flag = UPC_DCP_in_governing_coalition_flag
	}
	#Add them into coalition in-game
	hidden_effect = {
		if = {
			limit = { tag = GXC }
			set_temp_variable = { coalition_partner_var = token:social_conservative }
			add_to_coalition = yes
		}
		else_if = {
			limit = {
				tag = YUN
				has_country_flag = YUN_UPC_satellite_election_path_flag
			}
			set_temp_variable = { coalition_partner_var = token:social_conservative }
			add_to_coalition = yes
		}
		else_if = {
			limit = {
				tag = YUN
				NOT = { has_country_flag = YUN_UPC_satellite_election_path_flag }
			}
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			add_to_coalition = yes
		}
		else_if = {
			limit = { tag = HNN }
			set_temp_variable = { coalition_partner_var = token:social_conservative }
			add_to_coalition = yes
		}
		else_if = {
			limit = { tag = SZC }
			set_temp_variable = { coalition_partner_var = token:social_conservative }
			add_to_coalition = yes
		}
	}

	set_temp_variable = { UPC_seats_to_be_changed_temp_var = global.UPC_DCP_seats_var }
	UPC_add_aligned_votes_effect = yes
	#Add appropriate number of promises
	if = {
		limit = { check_variable = { global.UPC_DCP_seats_var > 150 } }
		set_variable = { global.UPC_DCP_promises_var = 4 }
	}
	else_if = {
		limit = { check_variable = { global.UPC_DCP_seats_var > 100 } }
		set_variable = { global.UPC_DCP_promises_var = 3 }
	}
	else_if = {
		limit = { check_variable = { global.UPC_DCP_seats_var > 50 } }
		set_variable = { global.UPC_DCP_promises_var = 2 }
	}
	else = {
		set_variable = { global.UPC_DCP_promises_var = 1 }
	}
	UPC_add_coalition_cost_effect = yes
	mark_focus_tree_layout_dirty = yes
}

UPC_STA_joins_governing_coalition_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_joins_governing_coalition_effect_tt
			PARTY = UPC_STA_party
		}
		#Set Appropriate Flag
		set_country_flag = UPC_STA_in_governing_coalition_flag
	}
	#Add them into coalition in-game
	hidden_effect = {
		set_temp_variable = { coalition_partner_var = token:authoritarian_democrat }
		add_to_coalition = yes
	}

	set_temp_variable = { UPC_seats_to_be_changed_temp_var = global.UPC_STA_seats_var }
	UPC_add_aligned_votes_effect = yes
	#Add appropriate number of promises
	if = {
		limit = { check_variable = { global.UPC_STA_seats_var > 150 } }
		set_variable = { global.UPC_STA_promises_var = 4 }
	}
	else_if = {
		limit = { check_variable = { global.UPC_STA_seats_var > 100 } }
		set_variable = { global.UPC_STA_promises_var = 3 }
	}
	else_if = {
		limit = { check_variable = { global.UPC_STA_seats_var > 50 } }
		set_variable = { global.UPC_STA_promises_var = 2 }
	}
	else = {
		set_variable = { global.UPC_STA_promises_var = 1 }
	}
	UPC_add_coalition_cost_effect = yes
	mark_focus_tree_layout_dirty = yes
}
UPC_REG_joins_governing_coalition_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_joins_governing_coalition_effect_tt
			PARTY = UPC_REG_party
		}
		#Set Appropriate Flag
		set_country_flag = UPC_REG_in_governing_coalition_flag
	}
	#Add them into coalition in-game
	hidden_effect = {
		set_temp_variable = { coalition_partner_var = token:paternal_autocrat }
		add_to_coalition = yes
	}

	set_temp_variable = { UPC_seats_to_be_changed_temp_var = global.UPC_REG_seats_var }
	UPC_add_aligned_votes_effect = yes
	#Add appropriate number of promises
	if = {
		limit = { check_variable = { global.UPC_REG_seats_var > 150 } }
		set_variable = { global.UPC_REG_promises_var = 4 }
	}
	else_if = {
		limit = { check_variable = { global.UPC_REG_seats_var > 100 } }
		set_variable = { global.UPC_REG_promises_var = 3 }
	}
	else_if = {
		limit = { check_variable = { global.UPC_REG_seats_var > 50 } }
		set_variable = { global.UPC_REG_promises_var = 2 }
	}
	else = {
		set_variable = { global.UPC_REG_promises_var = 1 }
	}
	UPC_add_coalition_cost_effect = yes
	mark_focus_tree_layout_dirty = yes
}

UPC_YCP_joins_governing_coalition_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_joins_governing_coalition_effect_tt
			PARTY = UPC_YCP_party
		}
		#Set Appropriate Flag
		set_country_flag = UPC_YCP_in_governing_coalition_flag
	}
	#Add them into coalition in-game
	hidden_effect = {
		set_temp_variable = { coalition_partner_var = token:national_populist }
		add_to_coalition = yes
	}

	set_temp_variable = { UPC_seats_to_be_changed_temp_var = global.UPC_YCP_seats_var }
	UPC_add_aligned_votes_effect = yes
	#Add appropriate number of promises
	if = {
		limit = { check_variable = { global.UPC_YCP_seats_var > 150 } }
		set_variable = { global.UPC_YCP_promises_var = 4 }
	}
	else_if = {
		limit = { check_variable = { global.UPC_YCP_seats_var > 100 } }
		set_variable = { global.UPC_YCP_promises_var = 3 }
	}
	else_if = {
		limit = { check_variable = { global.UPC_YCP_seats_var > 50 } }
		set_variable = { global.UPC_YCP_promises_var = 2 }
	}
	else = {
		set_variable = { global.UPC_YCP_promises_var = 1 }
	}
	UPC_add_coalition_cost_effect = yes
	mark_focus_tree_layout_dirty = yes
}

#Leaving Coalitions
UPC_KMT_leaves_governing_coalition_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_leaves_governing_coalition_effect_tt
			PARTY = UPC_KMT_party
		}
		#Clear Appropriate Flag
		clr_country_flag = UPC_KMT_in_governing_coalition_flag
	}
	#Remove them into coalition in-game
	hidden_effect = {
		set_temp_variable = { coalition_partner_var = token:radical_socialist }
		remove_from_coalition = yes
	}

	set_temp_variable = { UPC_seats_to_be_changed_temp_var = global.UPC_KMT_seats_var }
	UPC_sub_aligned_votes_effect = yes
	#Remove promises
	set_variable = { global.UPC_KMT_promises_var = 0 }
	UPC_sub_coalition_cost_effect = yes
	mark_focus_tree_layout_dirty = yes
}
UPC_CDL_leaves_governing_coalition_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_leaves_governing_coalition_effect_tt
			PARTY = UPC_CDL_party
		}
		#Clear Appropriate Flag
		clr_country_flag = UPC_CDL_in_governing_coalition_flag
	}
	#Remove them into coalition in-game
	hidden_effect = {
		if = {
			limit = { tag = GXC }
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			remove_from_coalition = yes
		}
		else_if = {
			limit = {
				tag = YUN
				has_country_flag = YUN_UPC_satellite_election_path_flag
			}
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			remove_from_coalition = yes
		}
		else_if = {
			limit = {
				tag = YUN
				NOT = { has_country_flag = YUN_UPC_satellite_election_path_flag }
			}
			set_temp_variable = { coalition_partner_var = token:social_liberal }
			remove_from_coalition = yes
		}
		else_if = {
			limit = { tag = HNN }
			set_temp_variable = { coalition_partner_var = token:social_liberal }
			remove_from_coalition = yes
		}
		else_if = {
			limit = { tag = SZC }
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			remove_from_coalition = yes
		}
	}

	set_temp_variable = { UPC_seats_to_be_changed_temp_var = global.UPC_CDL_seats_var }
	UPC_sub_aligned_votes_effect = yes
	#Remove promises
	set_variable = { global.UPC_CDL_promises_var = 0 }
	UPC_sub_coalition_cost_effect = yes
	mark_focus_tree_layout_dirty = yes
}
UPC_GRA_leaves_governing_coalition_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_leaves_governing_coalition_effect_tt
			PARTY = UPC_GRA_party
		}
		#Clear Appropriate Flag
		clr_country_flag = UPC_GRA_in_governing_coalition_flag
	}
	#Remove them into coalition in-game
	hidden_effect = {
		if = {
			limit = { tag = GXC }
			set_temp_variable = { coalition_partner_var = token:social_liberal }
			remove_from_coalition = yes
		}
		else_if = {
			limit = {
				tag = YUN
				has_country_flag = YUN_UPC_satellite_election_path_flag
			}
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			remove_from_coalition = yes
		}
		else_if = {
			limit = {
				tag = YUN
				NOT = { has_country_flag = YUN_UPC_satellite_election_path_flag }
			}
			set_temp_variable = { coalition_partner_var = token:social_conservative }
			remove_from_coalition = yes
		}
		else_if = {
			limit = { tag = HNN }
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			remove_from_coalition = yes
		}
		else_if = {
			limit = { tag = SZC }
			set_temp_variable = { coalition_partner_var = token:social_liberal }
			remove_from_coalition = yes
		}
	}

	set_temp_variable = { UPC_seats_to_be_changed_temp_var = global.UPC_GRA_seats_var }
	UPC_sub_aligned_votes_effect = yes
	#Remove promises
	set_variable = { global.UPC_GRA_promises_var = 0 }
	UPC_sub_coalition_cost_effect = yes
	mark_focus_tree_layout_dirty = yes
}
UPC_REP_leaves_governing_coalition_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_leaves_governing_coalition_effect_tt
			PARTY = UPC_REP_party
		}
		#Clear Appropriate Flag
		clr_country_flag = UPC_REP_in_governing_coalition_flag
	}
	#Remove them into coalition in-game
	hidden_effect = {
		if = {
			limit = { tag = GXC }
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			remove_from_coalition = yes
		}
		else_if = {
			limit = {
				tag = YUN
				has_country_flag = YUN_UPC_satellite_election_path_flag
			}
			set_temp_variable = { coalition_partner_var = token:social_liberal }
			remove_from_coalition = yes
		}
		else_if = {
			limit = {
				tag = YUN
				NOT = { has_country_flag = YUN_UPC_satellite_election_path_flag }
			}
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			remove_from_coalition = yes
		}
		else_if = {
			limit = { tag = HNN }
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			remove_from_coalition = yes
		}
		else_if = {
			limit = { tag = SZC }
			set_temp_variable = { coalition_partner_var = token:market_liberal }
			remove_from_coalition = yes
		}
	}

	set_temp_variable = { UPC_seats_to_be_changed_temp_var = global.UPC_REP_seats_var }
	UPC_sub_aligned_votes_effect = yes
	#Remove promises
	set_variable = { global.UPC_REP_promises_var = 0 }
	UPC_sub_coalition_cost_effect = yes
	mark_focus_tree_layout_dirty = yes
}
UPC_DCP_leaves_governing_coalition_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_leaves_governing_coalition_effect_tt
			PARTY = UPC_DCP_party
		}
		#Clear Appropriate Flag
		clr_country_flag = UPC_DCP_in_governing_coalition_flag
	}
	#Remove them into coalition in-game
	hidden_effect = {
		if = {
			limit = { tag = GXC }
			set_temp_variable = { coalition_partner_var = token:social_conservative }
			remove_from_coalition = yes
		}
		else_if = {
			limit = {
				tag = YUN
				has_country_flag = YUN_UPC_satellite_election_path_flag
			}
			set_temp_variable = { coalition_partner_var = token:social_conservative }
			remove_from_coalition = yes
		}
		else_if = {
			limit = {
				tag = YUN
				NOT = { has_country_flag = YUN_UPC_satellite_election_path_flag }
			}
			set_temp_variable = { coalition_partner_var = token:social_democrat }
			remove_from_coalition = yes
		}
		else_if = {
			limit = { tag = HNN }
			set_temp_variable = { coalition_partner_var = token:social_conservative }
			remove_from_coalition = yes
		}
		else_if = {
			limit = { tag = SZC }
			set_temp_variable = { coalition_partner_var = token:social_conservative }
			remove_from_coalition = yes
		}
	}

	set_temp_variable = { UPC_seats_to_be_changed_temp_var = global.UPC_DCP_seats_var }
	UPC_sub_aligned_votes_effect = yes
	#Remove promises
	set_variable = { global.UPC_DCP_promises_var = 0 }
	UPC_sub_coalition_cost_effect = yes
	mark_focus_tree_layout_dirty = yes
}
UPC_STA_leaves_governing_coalition_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_leaves_governing_coalition_effect_tt
			PARTY = UPC_STA_party
		}
		#Clear Appropriate Flag
		clr_country_flag = UPC_STA_in_governing_coalition_flag
	}
	#Remove them into coalition in-game
	hidden_effect = {
		set_temp_variable = { coalition_partner_var = token:authoritarian_democrat }
		remove_from_coalition = yes
	}

	set_temp_variable = { UPC_seats_to_be_changed_temp_var = global.UPC_STA_seats_var }
	UPC_sub_aligned_votes_effect = yes
	#Remove promises
	set_variable = { global.UPC_STA_promises_var = 0 }
	UPC_sub_coalition_cost_effect = yes
	mark_focus_tree_layout_dirty = yes
}
UPC_REG_leaves_governing_coalition_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_leaves_governing_coalition_effect_tt
			PARTY = UPC_REG_party
		}
		#Clear Appropriate Flag
		clr_country_flag = UPC_REG_in_governing_coalition_flag
	}
	#Remove them into coalition in-game
	hidden_effect = {
		set_temp_variable = { coalition_partner_var = token:paternal_autocrat }
		remove_from_coalition = yes
	}

	set_temp_variable = { UPC_seats_to_be_changed_temp_var = global.UPC_REG_seats_var }
	UPC_sub_aligned_votes_effect = yes
	#Remove promises
	set_variable = { global.UPC_REG_promises_var = 0 }
	UPC_sub_coalition_cost_effect = yes
	mark_focus_tree_layout_dirty = yes
}
UPC_YCP_leaves_governing_coalition_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_leaves_governing_coalition_effect_tt
			PARTY = UPC_YCP_party
		}
		#Clear Appropriate Flag
		clr_country_flag = UPC_YCP_in_governing_coalition_flag
	}
	#Remove them into coalition in-game
	hidden_effect = {
		set_temp_variable = { coalition_partner_var = token:national_populist }
		remove_from_coalition = yes
	}

	set_temp_variable = { UPC_seats_to_be_changed_temp_var = global.UPC_YCP_seats_var }
	UPC_sub_aligned_votes_effect = yes
	#Remove promises
	set_variable = { global.UPC_YCP_promises_var = 0 }
	UPC_sub_coalition_cost_effect = yes
	mark_focus_tree_layout_dirty = yes
}

#Fulfilling Promises
UPC_KMT_fulfill_coalition_promises_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_fulfil_coalition_promises_effect_tt
			PARTY_LONG = UPC_KMT_party_long
		}
		subtract_from_variable = { global.UPC_KMT_promises_var = 1 }
	}
	clamp_variable = {
		var = global.UPC_KMT_promises_var
		min = 0 #Having negative promises looks ugly unfortunately
	}
	set_country_flag = UPC_KMT_coalition_progress_flag #Will be removed via the mission
	mark_focus_tree_layout_dirty = yes
}
UPC_CDL_fulfill_coalition_promises_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_fulfil_coalition_promises_effect_tt
			PARTY_LONG = UPC_CDL_party_long
		}
		subtract_from_variable = { global.UPC_CDL_promises_var = 1 }
	}
	clamp_variable = {
		var = global.UPC_CDL_promises_var
		min = 0 #Having negative promises looks ugly unfortunately
	}
	set_country_flag = UPC_CDL_coalition_progress_flag #Will be removed via the mission
	mark_focus_tree_layout_dirty = yes
}
UPC_GRA_fulfill_coalition_promises_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_fulfil_coalition_promises_effect_tt
			PARTY_LONG = UPC_GRA_party_long
		}
		subtract_from_variable = { global.UPC_GRA_promises_var = 1 }
	}
	clamp_variable = {
		var = global.UPC_GRA_promises_var
		min = 0 #Having negative promises looks ugly unfortunately
	}
	set_country_flag = UPC_GRA_coalition_progress_flag #Will be removed via the mission
	mark_focus_tree_layout_dirty = yes
}
UPC_REP_fulfill_coalition_promises_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_fulfil_coalition_promises_effect_tt
			PARTY_LONG = UPC_REP_party_long
		}
		subtract_from_variable = { global.UPC_REP_promises_var = 1 }
	}
	clamp_variable = {
		var = global.UPC_REP_promises_var
		min = 0 #Having negative promises looks ugly unfortunately
	}
	set_country_flag = UPC_REP_coalition_progress_flag #Will be removed via the mission
	mark_focus_tree_layout_dirty = yes
}
UPC_DCP_fulfill_coalition_promises_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_fulfil_coalition_promises_effect_tt
			PARTY_LONG = UPC_DCP_party_long
		}
		subtract_from_variable = { global.UPC_DCP_promises_var = 1 }
	}
	clamp_variable = {
		var = global.UPC_DCP_promises_var
		min = 0 #Having negative promises looks ugly unfortunately
	}
	set_country_flag = UPC_DCP_coalition_progress_flag #Will be removed via the mission
	mark_focus_tree_layout_dirty = yes
}
UPC_STA_fulfill_coalition_promises_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_fulfil_coalition_promises_effect_tt
			PARTY_LONG = UPC_STA_party_long
		}
		subtract_from_variable = { global.UPC_STA_promises_var = 1 }
	}
	clamp_variable = {
		var = global.UPC_STA_promises_var
		min = 0 #Having negative promises looks ugly unfortunately
	}
	set_country_flag = UPC_STA_coalition_progress_flag #Will be removed via the mission
	mark_focus_tree_layout_dirty = yes
}
UPC_REG_fulfill_coalition_promises_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_fulfil_coalition_promises_effect_tt
			PARTY_LONG = UPC_REG_party_long
		}
		subtract_from_variable = { global.UPC_REG_promises_var = 1 }
	}
	clamp_variable = {
		var = global.UPC_REG_promises_var
		min = 0 #Having negative promises looks ugly unfortunately
	}
	set_country_flag = UPC_REG_coalition_progress_flag #Will be removed via the mission
	mark_focus_tree_layout_dirty = yes
}
UPC_YCP_fulfill_coalition_promises_effect = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = UPC_party_fulfil_coalition_promises_effect_tt
			PARTY_LONG = UPC_YCP_party_long
		}
		subtract_from_variable = { global.UPC_YCP_promises_var = 1 }
	}
	clamp_variable = {
		var = global.UPC_YCP_promises_var
		min = 0 #Having negative promises looks ugly unfortunately
	}
	set_country_flag = UPC_YCP_coalition_progress_flag #Will be removed via the mission
	mark_focus_tree_layout_dirty = yes
}

#Set Up Party Effects
UPC_DCP_setup_soccon_party_effect = {
	set_party_name = {
		ideology = social_conservative
		long_name = CHN_DCP_party_long
		name = CHN_DCP_party
	}
	QIE = {
		QIE_wu_xianzi = {
			CHN_recruit_character_effect = yes
			if = {
				limit = {
					has_ideology = social_conservative_subtype
				}
				promote_character = social_conservative_subtype
			}
			else = {
				add_country_leader_role = {
					country_leader = {
						desc = QIE_wu_xianzi_leader_desc
						ideology = social_conservative_subtype
						traits = { CHN_beiyang_aligned }
					}
					promote_leader = yes
				}
			}
		}
	}
}

UPC_REP_setup_marlib_party_effect = {
	set_party_name = {
		ideology = market_liberal
		long_name = CHN_republicans_party_long
		name = CHN_republicans_party
	}
	if = {
		limit = { has_character = GXC_assorted_leaders }
		GXC_assorted_leaders = { promote_character = market_liberal_subtype }
	}
	else_if = {
		limit = { has_character = YUN_assorted_leaders }
		YUN_assorted_leaders = { promote_character = market_liberal_subtype }
	}
}
