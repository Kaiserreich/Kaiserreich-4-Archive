add_improved_light_tank_design = {
	if = {
		limit = { has_dlc_nsb = yes }
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_tech = improved_light_tank_chassis }
				}
				set_technology = { improved_light_tank_chassis = 1 }
			}
		}
		create_equipment_variant = {
			type = light_tank_chassis_2
			parent_version = 0
			modules = {
				main_armament_slot = tank_small_cannon_2
				turret_type_slot = tank_light_two_man_tank_turret
				suspension_type_slot = tank_christie_suspension
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_gasoline_engine
			}
		}
	}
}

get_best_submarine_modules = {
	if = {
		limit = { has_tech = advanced_ship_hull_submarine }
		set_temp_variable = { hull_type = token:ship_hull_submarine_4 }
		set_temp_variable = { engine_module = token:sub_ship_engine_4 }
	}
	else_if = {
		limit = { has_tech = improved_ship_hull_submarine }
		set_temp_variable = { hull_type = token:ship_hull_submarine_3 }
		set_temp_variable = { engine_module = token:sub_ship_engine_3 }
	}
	else_if = {
		limit = { has_tech = basic_ship_hull_submarine }
		set_temp_variable = { hull_type = token:ship_hull_submarine_2 }
		set_temp_variable = { engine_module = token:sub_ship_engine_2 }
	}
	else = {
		set_temp_variable = { hull_type = token:ship_hull_submarine_1 }
		set_temp_variable = { engine_module = token:sub_ship_engine_1 }
	}

	if = {
		limit = { has_tech = improved_submarine_snorkel }
		set_temp_variable = { snorkel_module = token:ship_sub_snorkel_2 }
	}
	else_if = {
		limit = { has_tech = basic_submarine_snorkel }
		set_temp_variable = { snorkel_module = token:ship_sub_snorkel_1 }
	}
	else = {
		set_temp_variable = { snorkel_module = token:empty }
	}

	if = {
		limit = { has_tech = modern_ship_torpedo_launcher }
		set_temp_variable = { torpedo_module = token:ship_torpedo_sub_4 }
	}
	else_if = {
		limit = { has_tech = advanced_ship_torpedo_launcher }
		set_temp_variable = { torpedo_module = token:ship_torpedo_sub_2 }
	}
	else_if = {
		limit = { has_tech = improved_ship_torpedo_launcher }
		set_temp_variable = { torpedo_module = token:ship_torpedo_sub_3 }
	}
	else_if = {
		limit = { has_tech = basic_torpedo }
		set_temp_variable = { torpedo_module = token:ship_torpedo_sub_1 }
	}
	else = {
		set_temp_variable = { snorkel_module = token:empty }
	}
}
