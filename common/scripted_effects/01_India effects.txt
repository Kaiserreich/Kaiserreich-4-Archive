SKM_remove_monarchy = {
	if = {
		limit = { has_character = SKM_tashi_namgyal }
		SKM_tashi_namgyal = {
			remove_all_country_leader_roles = yes
			retire = yes
		}
	}
}

SKM_create_tashi_namgyal = {
	if = {
		limit = { SKM = { SKM_tashi_namgyal = { is_dead = no } } }
		SKM = {
			SKM_tashi_namgyal = {
				character_becomes_leader_of_ruling_party_effect_tooltip = yes
				hidden_effect = {
					set_nationality = PREV.PREV
					remove_all_country_leader_roles = yes
					for_each_loop = {
						array = global.ideology_groups
						if = {
							limit = { ideology_group_is_socialist = no }
							meta_effect = {
								text = {
									add_country_leader_role = {
										country_leader = {
											desc = SKM_tashi_namgyal_leader_desc
											ideology = [IDEOLOGY]
										}
										promote_leader = yes
									}
								}
								IDEOLOGY = "[?v.GetTokenKey]_subtype"
							}
						}
					}
				}
			}
		}
	}
}
