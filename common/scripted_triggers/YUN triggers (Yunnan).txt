############################################
#          Yunnan Scripted Triggers        #
############################################

#Phase Triggers
YUN_is_phase_1_trigger = { #Introgame - Game Start until Sorted into KMT/UPC
	custom_trigger_tooltip = {
		tooltip = YUN_is_phase_1_tt
		YUN = {
			NOT = {
				has_country_flag = YUN_phase_2_begins_flag
				has_country_flag = YUN_phase_3_begins_flag
				has_country_flag = YUN_phase_4_begins_flag
				has_country_flag = YUN_phase_5_begins_flag
			}
		}
	}
}

YUN_is_phase_2_trigger = { #Early game - KMT/UPC/NPA Takeover Until They Form Rival Government or Become a Satellite
	custom_trigger_tooltip = {
		tooltip = YUN_is_phase_2_tt
		YUN = {
			has_country_flag = YUN_phase_2_begins_flag
			NOT = {
				has_country_flag = YUN_phase_3_begins_flag
				has_country_flag = YUN_phase_4_begins_flag
				has_country_flag = YUN_phase_5_begins_flag
			}
		}
	}
}

YUN_is_phase_3_trigger = { #Midgame - Rival Government Until Beijing or Satellite Until Master Hits Lategame
	custom_trigger_tooltip = {
		tooltip = YUN_is_phase_3_tt
		YUN = {
			has_country_flag = YUN_phase_3_begins_flag
			NOT = {
				has_country_flag = YUN_phase_4_begins_flag
				has_country_flag = YUN_phase_5_begins_flag
			}
		}
	}
}

YUN_is_phase_4_trigger = { #Late Game - Beijing Until National Unification
	custom_trigger_tooltip = {
		tooltip = YUN_is_phase_4_tt
		YUN = {
			has_country_flag = YUN_phase_4_begins_flag
			NOT = {
				has_country_flag = YUN_phase_5_begins_flag
			}
		}
	}
}

YUN_is_phase_5_trigger = { #Endgame Game - National Unification until Epilogue
	custom_trigger_tooltip = {
		tooltip = YUN_is_phase_5_tt
		YUN = {
			has_country_flag = YUN_phase_5_begins_flag
		}
	}
}

YUN_KMT_unifier_route_trigger = { #As opposed to going the satellite route
	has_completed_focus = YUN_hold_a_national_congress_focus
}

#YUN Introminigame Triggers
YUN_introgame_KMT_overwhelmingly_winning_trigger = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = YUN_introgame_KMT_overwhelmingly_winning_trigger_tt
		}
		not_tooltip = YUN_introgame_KMT_overwhelmingly_winning_trigger_tt_NOT
		NOT = { check_variable = { YUN_introminigame_KMT_soldiers_difference_var < 10000 } }
	}
}

YUN_introgame_UPC_overwhelmingly_winning_trigger = {
	custom_override_tooltip = {
		tooltip = {
			localization_key = YUN_introgame_UPC_overwhelmingly_winning_trigger_tt
		}
		not_tooltip = YUN_introgame_UPC_overwhelmingly_winning_trigger_tt_NOT
		NOT = { check_variable = { YUN_introminigame_UPC_soldiers_difference_var < 10000 } }
	}
}

#YUN-GXC War Triggers
YUN_GXC_war_become_satellite_trigger = {
	var:594.owner = {
		OR = {
			china_is_potential_government = yes
			AND = {
				is_subject = yes
				overlord = { china_is_potential_government = yes }
			}
		}
	}
	YUN = {
		NOT = {
			AND = {
				controls_province = 1114 #Mengzi
				controls_province = 1319 #Kunming
				controls_province = 5072 #Zhaotong
				controls_province = 7965 #Dali
				controls_province = 10413 #Jinghong
			}
		}
	}
}

YUN_GXC_war_lose_guizhou_trigger = {
	YUN = {
		NOT = {
			controls_state = 1051 #Guiyang
			controls_state = 603 #Zunyi
		}
	}
}

#Endgame Triggers

#Government Triggers

# Zeal Triggers

YUN_zeal_level_one_trigger = {
	check_variable = { global.RKT_revolutionary_zeal_var < 0.05 }
}

YUN_zeal_level_two_trigger = {
	check_variable = { global.RKT_revolutionary_zeal_var < 0.25 }
}

YUN_zeal_level_three_trigger = {
	check_variable = { global.RKT_revolutionary_zeal_var < 0.50 }
}

YUN_zeal_level_four_trigger = {
	check_variable = { global.RKT_revolutionary_zeal_var > 0.50 }
}

YUN_zeal_level_five_trigger = {
	check_variable = { global.RKT_revolutionary_zeal_var > 0.75 }
}

YUN_zeal_level_six_trigger = {
	check_variable = { global.RKT_revolutionary_zeal_var > 0.95 }
}

#AI Triggers
YUN_ai_factor_prioritize_military_focuses_trigger = {
	has_war = yes
	#Consider adding additional checks but usually AI will be better off stacking military bonuses unless otherwise stated
}

YUN_ai_factor_prioritize_economic_focuses_trigger = {
	has_war = no
	date < 1939.01.01 #Try to teach AI to prioritize econ when at peace before 1939 to maximize economic builduip.
}

YUN_ai_factor_beeline_war_with_GXC_focuses_trigger = {
	has_war = no
	is_subject = no
	OR = {
		china_is_aligned_with_federalists = yes
		china_is_aligned_with_kmt = yes
	}
	NOT = {
		owns_state = 592
		var:592.owner = { YUN = { china_compatible_alignment_to_PREV = yes } }
	}
}
