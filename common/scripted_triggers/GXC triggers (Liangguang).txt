############################################
#        Liangguang Scripted Triggers      #
############################################

#Phase Triggers
GXC_is_phase_1_trigger = { #Introgame - Game Start until Sorted into KMT/UPC/NPA
	custom_trigger_tooltip = {
		tooltip = GXC_is_phase_1_tt
		GXC = {
			NOT = {
				has_country_flag = GXC_phase_2_begins_flag
				has_country_flag = GXC_phase_3_begins_flag
				has_country_flag = GXC_phase_4_begins_flag
				has_country_flag = GXC_phase_5_begins_flag
			}
		}
	}
}

GXC_is_phase_2_trigger = { #Early game - KMT/UPC/NPA Takeover Until They Form Rival Government
	custom_trigger_tooltip = {
		tooltip = GXC_is_phase_2_tt
		GXC = {
			has_country_flag = GXC_phase_2_begins_flag
			NOT = {
				has_country_flag = GXC_phase_3_begins_flag
				has_country_flag = GXC_phase_4_begins_flag
				has_country_flag = GXC_phase_5_begins_flag
			}
		}
	}
}

GXC_is_phase_3_trigger = { #Midgame - Rival Government Until Beijing
	custom_trigger_tooltip = {
		tooltip = GXC_is_phase_3_tt
		GXC = {
			has_country_flag = GXC_phase_3_begins_flag
			NOT = {
				has_country_flag = GXC_phase_4_begins_flag
				has_country_flag = GXC_phase_5_begins_flag
			}
		}
	}
}

GXC_is_phase_4_trigger = { #Late Game - Beijing Until National Unification
	custom_trigger_tooltip = {
		tooltip = GXC_is_phase_4_tt
		GXC = {
			has_country_flag = GXC_phase_4_begins_flag
			NOT = {
				has_country_flag = GXC_phase_5_begins_flag
			}
		}
	}
}

GXC_is_phase_5_trigger = { #Endgame Game - National Unification until Epilogue
	custom_trigger_tooltip = {
		tooltip = GXC_is_phase_5_tt
		GXC = {
			has_country_flag = GXC_phase_5_begins_flag
		}
	}
}

#Endgame Triggers
GXC_has_dem_rkmt_government = {
	var:country_leader = {
		OR = {
			has_character_flag = GXC_RCF_character_flag
			has_character_flag = GXC_WHC_character_flag
		}
	}
}
GXC_has_auth_rkmt_government = {
	var:country_leader = {
		OR = {
			has_character_flag = GXC_EDC_character_flag
			has_character_flag = GXC_NGX_character_flag
			has_character_flag = GXC_NGD_character_flag
		}
	}
}
GXC_has_lkmt_government = {
	var:country_leader = {
		OR = {
			has_character_flag = GXC_PPP_character_flag
			has_character_flag = GXC_GPA_character_flag
			has_character_flag = GXC_GFA_character_flag
		}
	}
}

GXC_has_regionalist_government = {
	OR = {
		china_is_aligned_with_beiyang = yes
		has_country_leader = { character = GXC_lu_yuguang }
	}
}

#Phase I Minigame Triggers
GXC_introgame_KMT_state_partial_dominance_trigger = {
	#THIS MUST BE IN STATE SCOPE
	custom_override_tooltip = {
		tooltip = {
			localization_key = GXC_introgame_faction_state_partial_dominance_trigger_tt
			FACTION = GXC_faction_kuomintang
		}
		check_variable = { THIS.GXC_introgame_local_KMT_strength_var > 2 }
	}
}
GXC_introgame_KMT_state_total_control_trigger = {
	#THIS MUST BE IN STATE SCOPE
	custom_override_tooltip = {
		tooltip = {
			localization_key = GXC_introgame_faction_state_total_control_trigger_tt
			FACTION = GXC_faction_kuomintang
		}
		check_variable = { THIS.GXC_introgame_local_KMT_strength_var > 4 }
	}
}

GXC_introgame_UPC_state_partial_dominance_trigger = {
	#THIS MUST BE IN STATE SCOPE
	custom_override_tooltip = {
		tooltip = {
			localization_key = GXC_introgame_faction_state_partial_dominance_trigger_tt
			FACTION = GXC_faction_federalists
		}
		check_variable = { THIS.GXC_introgame_local_UPC_strength_var > 2 }
	}
}
GXC_introgame_UPC_state_total_control_trigger = {
	#THIS MUST BE IN STATE SCOPE
	custom_override_tooltip = {
		tooltip = {
			localization_key = GXC_introgame_faction_state_total_control_trigger_tt
			FACTION = GXC_faction_federalists
		}
		check_variable = { THIS.GXC_introgame_local_UPC_strength_var > 4 }
	}
}

GXC_introgame_NPA_state_partial_dominance_trigger = {
	#THIS MUST BE IN STATE SCOPE
	custom_override_tooltip = {
		tooltip = {
			localization_key = GXC_introgame_faction_state_partial_dominance_trigger_tt
			FACTION = GXC_faction_regionalists
		}
		check_variable = { THIS.GXC_introgame_local_NPA_strength_var > 2 }
	}
}
GXC_introgame_NPA_state_total_control_trigger = {
	#THIS MUST BE IN STATE SCOPE
	custom_override_tooltip = {
		tooltip = {
			localization_key = GXC_introgame_faction_state_total_control_trigger_tt
			FACTION = GXC_faction_regionalists
		}
		check_variable = { THIS.GXC_introgame_local_NPA_strength_var > 4 }
	}
}

#Party Popularity Triggers

#EDC
GXC_EDC_level_one_trigger = {
	GXC_hu_hanmin = { is_country_leader = yes }
	authoritarian_democrat > 0.35
}

GXC_EDC_level_two_trigger = {
	GXC_hu_hanmin = { is_country_leader = yes }
	authoritarian_democrat > 0.50
}

#NGD
GXC_NGD_level_one_trigger = {
	GXC_lin_sen = { is_country_leader = yes } #Needed due to content sharing auth dem pop
	authoritarian_democrat > 0.15
}

GXC_NGD_level_two_trigger = {
	GXC_lin_sen = { is_country_leader = yes } #Needed due to content sharing auth dem pop
	authoritarian_democrat > 0.35
}

#NGX
GXC_NGX_level_one_trigger = { paternal_autocrat > 0.35 }

GXC_NGX_level_two_trigger = { paternal_autocrat > 0.50 }

#RCF
GXC_RCF_level_one_trigger = {
	has_character = CHI_sun_fo
	social_liberal > 0.15
}

GXC_RCF_level_two_trigger = {
	has_character = CHI_sun_fo
	social_liberal > 0.35
}

#WHC
GXC_WHC_level_one_trigger = { social_conservative > 0.15 }

GXC_WHC_level_two_trigger = { social_conservative > 0.35 }

#DSP
GXC_DSP_level_one_trigger = { social_democrat > 0.25 }

GXC_DSP_level_two_trigger = { social_democrat > 0.35 }

#PIP
GXC_PIP_level_one_trigger = { social_liberal > 0.25 }

GXC_PIP_level_two_trigger = { social_liberal > 0.35 }

#GIM
GXC_GIM_level_one_trigger = { social_conservative > 0.15 }

GXC_GIM_level_two_trigger = { social_conservative > 0.35 }

#YUE
GXC_YUE_level_one_trigger = { authoritarian_democrat > 0.25 }

GXC_YUE_level_two_trigger = { authoritarian_democrat > 0.35 }

#SAF
GXC_SAF_level_one_trigger = { paternal_autocrat > 0.25 }

GXC_SAF_level_two_trigger = { paternal_autocrat > 0.35 }

#YGF
GXC_YGF_level_one_trigger = { authoritarian_democrat > 0.15 }

GXC_YGF_level_two_trigger = { authoritarian_democrat > 0.35 }

#Faction Influence
GXC_popularity_join_fengtian_trigger = { social_conservative > 0.25 }

GXC_popularity_join_zhili_trigger = { paternal_autocrat > 0.25 }

# Zeal Triggers

GXC_zeal_level_one_trigger = {
	check_variable = { global.RKT_revolutionary_zeal_var < 0.05 }
}

GXC_zeal_level_two_trigger = {
	check_variable = { global.RKT_revolutionary_zeal_var < 0.25 }
}

# No trigger for between 25 and 50 %

GXC_zeal_level_four_trigger = {
	check_variable = { global.RKT_revolutionary_zeal_var > 0.50 }
}

GXC_zeal_level_five_trigger = {
	check_variable = { global.RKT_revolutionary_zeal_var > 0.75 }
}

GXC_zeal_level_six_trigger = {
	check_variable = { global.RKT_revolutionary_zeal_var > 0.95 }
}

#AI Training Triggers
GXC_ai_factor_prioritize_military_focuses_trigger = {
	has_war = yes
	#Consider adding additional checks but usually AI will be better off stacking military bonuses unless otherwise stated
}

GXC_ai_factor_prioritize_economic_focuses_trigger = {
	has_war = no
	date < 1939.01.01 #Try to teach AI to prioritize econ when at peace before 1939 to maximize economic builduip.
}

GXC_ai_factor_prioritize_helping_LKMT_coup_trigger = {
	GXC_is_phase_2_trigger = yes
	has_country_leader = { character = GXC_chen_jitang }
	GXC = {
		#CHI going aggressive signals to GXC AI to help coup ASAP.
		has_country_flag = GXC_LKMT_aggressive_AI_strategy_flag
		country_exists = CHI
		NOT = { has_war_with = LKT }
	}
}

GXC_ai_factor_prioritize_helping_Zhili_pressure_trigger = {
	GXC_is_phase_2_trigger = yes
	has_country_leader = { character = GXC_lu_yuguang }
	GXC = {
		#Zhili going aggressive signals to GXC AI to help pressure ASAP.
		has_country_flag = GXC_Zhili_aggressive_AI_strategy_flag
		OR = {
			country_exists = NZH
			country_exists = SZH
		}
		NOT = {
			has_war_with = NZH
			has_war_with = SZH
		}
	}
}

GXC_ai_factor_prioritize_helping_Fengtian_pressure_trigger = {
	GXC_is_phase_2_trigger = yes
	has_country_leader = { character = GXC_lu_yuguang }
	GXC = {
		#Fengtian going aggressive signals to GXC AI to help pressure ASAP.
		has_country_flag = GXC_Fengtian_aggressive_AI_strategy_flag
		country_exists = AGJ
		NOT = {
			has_war_with = AGJ
		}
	}
}

GXC_ai_factor_prioritize_forming_a_government_focus_trigger = {
	NOT = {
		#I was considering giving the 3 different AIs different degrees of aggressiveness pursuing forming a government, but I decided that it would be better to instead have them all equally aggressive in forming one and have the requirements be harder for the Feds and NPA.
		GXC_is_phase_3_trigger = yes
		GXC_ai_factor_prioritize_helping_LKMT_coup_trigger = yes
		GXC_ai_factor_prioritize_helping_Zhili_pressure_trigger = yes
		GXC_ai_factor_prioritize_helping_Fengtian_pressure_trigger = yes
	}
}
