###########################
# Canada Decisions
###########################

CAN_american_civil_war_decisions = {

	CAN_reinforce_ottawa = {
		icon = fortress
		allowed = {
			original_tag = CAN
		}

		highlight_states = {
			state = 276
		}

		available = {
			has_full_control_of_state = 276
		}

		visible = {
			has_global_flag = USA_civil_war_begun_flag
			country_exists = CSA
		}

		fire_only_once = yes

		cost = 40
		days_remove = 90

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_reinforce_ottawa"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_reinforce_ottawa"
			if = {
				limit = { controls_state = 276 }
				276 = {
					add_building_construction = {
						type = bunker
						province = 3778
						level = 4
						instant_build = yes
					}
				}
			}
		}
	}

	CAN_reinforce_montreal = {
		icon = fortress
		allowed = {
			original_tag = CAN
		}

		highlight_states = {
			state = 466
		}

		available = {
			has_full_control_of_state = 466
		}

		visible = {
			has_global_flag = USA_civil_war_begun_flag
			country_exists = CSA
		}

		fire_only_once = yes

		cost = 40
		days_remove = 90

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_reinforce_montreal"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_reinforce_montreal"
			if = {
				limit = { controls_state = 466 }
				466 = {
					add_building_construction = {
						type = bunker
						province = 4345
						level = 4
						instant_build = yes
					}
				}
			}
		}
	}

	CAN_reinforce_vancouver = {
		icon = fortress
		allowed = {
			original_tag = CAN
		}

		highlight_states = {
			state = 473
		}

		available = {
			has_full_control_of_state = 473
		}

		visible = {
			has_global_flag = USA_civil_war_begun_flag
			country_exists = CSA
		}

		fire_only_once = yes

		cost = 40
		days_remove = 90

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_reinforce_vancouver"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_reinforce_vancouver"
			if = {
				limit = { controls_state = 473 }
				473 = {
					add_building_construction = {
						type = bunker
						province = 1408
						level = 4
						instant_build = yes
					}
				}
			}
		}
	}

	CAN_reinforce_halifax = {
		icon = fortress
		allowed = {
			original_tag = CAN
		}

		highlight_states = {
			state = 464
		}

		available = {
			has_full_control_of_state = 464
		}

		visible = {
			has_global_flag = USA_civil_war_begun_flag
			country_exists = CSA
		}

		fire_only_once = yes

		cost = 40
		days_remove = 90

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_reinforce_halifax"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_reinforce_halifax"
			if = {
				limit = { controls_state = 464 }
				464 = {
					add_building_construction = {
						type = bunker
						province = 7361
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						province = 7361
						level = 4
						instant_build = yes
					}
				}
			}
		}
	}

	CAN_the_red_menace = {
		icon = generic_civil_support
		allowed = {
			original_tag = CAN
		}

		visible = {
			has_global_flag = USA_civil_war_begun_flag
			country_exists = CSA
			is_faction_leader = yes
		}

		fire_only_once = yes

		cost = 50

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_the_red_menace"
			add_ideas = CAN_red_menace
		}
	}

	CAN_recognize_the_USA = {
		icon = generic_agreement
		allowed = {
			original_tag = CAN
		}

		available = {
			NOT = { has_war_with = USA }
			USA = {
				OR = {
					has_war_with = CSA
					has_war_with = TEX
					has_war_with = CAL
				}
			}
		}

		visible = {
			is_subject = no
			country_exists = USA
			has_global_flag = USA_civil_war_begun_flag
			has_country_flag = CAN_acw_intervention
			NOT = {
				has_socialist_government = yes
				has_country_flag = CAN_supports_psa
				has_country_flag = CAN_supports_aus
				has_country_flag = CAN_white_peaced_acw
				has_global_flag = USA_civil_war_over_flag
			}
		}

		fire_only_once = yes

		cost = 50

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 4
				OR = {
					has_government = social_conservative
					has_government = paternal_autocrat
					has_government = authoritarian_democrat
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_recognize_the_USA"
			set_country_flag = CAN_supports_usa
			add_ideas = ACW_support_usa
			reverse_add_opinion_modifier = { target = USA modifier = ACW_help_from_entente }
			USA = { country_event = canada.875 }
		}
	}

	CAN_recognize_the_PSA = {
		icon = generic_agreement
		allowed = {
			original_tag = CAN
		}
		available = {
			NOT = { has_war_with = CAL }
			CAL = {
				OR = {
					has_war_with = CSA
					has_war_with = TEX
					has_war_with = USA
				}
			}
		}
		visible = {
			is_subject = no
			country_exists = CAL
			has_global_flag = USA_civil_war_begun_flag
			has_country_flag = CAN_acw_intervention
			NOT = {
				has_socialist_government = yes
				has_country_flag = CAN_supports_usa
				has_country_flag = CAN_supports_aus
				has_country_flag = CAN_white_peaced_acw
				has_global_flag = USA_civil_war_over_flag
			}
		}

		fire_only_once = yes

		cost = 50

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 4
				OR = {
					has_government = market_liberal
					has_government = social_liberal
					has_government = social_democrat
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_recognize_the_PSA"
			set_country_flag = CAN_supports_psa
			add_ideas = ACW_support_psa
			reverse_add_opinion_modifier = { target = CAL modifier = ACW_help_from_entente }
			CAL = { country_event = canada.875 }
		}
	}

	CAN_recognize_the_AUS = {
		icon = generic_agreement
		allowed = { original_tag = CAN }
		available = {
			NOT = { has_war_with = TEX }
			TEX = {
				OR = {
					has_war_with = CSA
					has_war_with = USA
					has_war_with = CAL
				}
			}
		}
		visible = {
			is_subject = no
			country_exists = TEX
			has_global_flag = USA_civil_war_begun_flag
			has_country_flag = CAN_acw_intervention
			NOT = {
				has_socialist_government = yes
				has_country_flag = CAN_supports_psa
				has_country_flag = CAN_supports_usa
				has_country_flag = CAN_white_peaced_acw
				has_global_flag = USA_civil_war_over_flag
			}
		}

		fire_only_once = yes

		cost = 50

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 4
				has_government = national_populist
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_recognize_the_AUS"
			set_country_flag = CAN_supports_aus
			add_ideas = ACW_support_aus
			reverse_add_opinion_modifier = { target = TEX modifier = ACW_help_from_entente }
			TEX = { country_event = canada.875 }
		}
	}

	CAN_intervene_in_ACW_USA = {
		icon = generic_ignite_civil_war
		allowed = {
			original_tag = CAN
		}
		available = {
			USA = {
				OR = {
					surrender_progress > 0.50
					num_of_controlled_states < 5
				}
			}
			CAN = {
				controls_all_owned_states = yes
				NOT = { has_idea = CAN_divided_nation }
			}
			OR = {
				CAN = { has_government = paternal_autocrat }
				CAN = { has_government = authoritarian_democrat }
				USA = { has_war_with = MEX }
				custom_trigger_tooltip = {
					tooltip = CAN_MEX_intervened_ACW
					CSA = { has_war_together_with = MEX }
				}
			}
		}
		visible = {
			country_exists = USA
			is_subject = no
			has_global_flag = USA_civil_war_begun_flag
			NOT = { has_global_flag = USA_civil_war_over_flag }
			USA = {
				is_subject = no
				has_war_with = CSA
			}
			has_country_flag = CAN_acw_intervention
			has_country_flag = CAN_supports_usa
			NOT = {
				has_war_with = USA
				has_war_with = CSA
				has_war_with = TEX
				has_war_with = CAL
				has_socialist_government = yes
				has_country_flag = CAN_white_peaced_acw
			}
		}
		fire_only_once = yes

		cost = freedec?0

		ai_will_do = {
			factor = 20
			modifier = {
				factor = 0
				OR = {
					has_war_with = AST
					any_enemy_country = { is_actual_major = yes }
					has_government = authoritarian_democrat
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_intervene_in_ACW_USA"
			set_country_flag = CAN_joined_the_ACW
			USA = { country_event = canada.878 }
			if = {
				limit = {
					USA = { has_war_with = CSA }
					NOT = { has_war_with = CSA }
				}
				add_to_war = { targeted_alliance = USA enemy = CSA }
			}
			if = {
				limit = {
					USA = { has_war_with = CAL }
					NOT = { has_war_with = CAL }
				}
				add_to_war = { targeted_alliance = USA enemy = CAL }
			}
			if = {
				limit = {
					USA = { has_war_with = TEX }
					NOT = { has_war_with = TEX }
				}
				add_to_war = { targeted_alliance = USA enemy = TEX }
			}
		}
	}

	CAN_intervene_in_ACW_PSA = {
		icon = generic_ignite_civil_war
		allowed = {
			original_tag = CAN
		}
		available = {
			CAL = {
				OR = {
					surrender_progress > 0.50
					num_of_controlled_states < 4
				}
			}
			CAN = {
				controls_all_owned_states = yes
				NOT = { has_idea = CAN_divided_nation }
			}
			OR = {
				CAN = { has_government = paternal_autocrat }
				CAN = { has_government = authoritarian_democrat }
				CAL = { has_war_with = MEX }
				custom_trigger_tooltip = {
					tooltip = CAN_MEX_intervened_ACW
					CSA = { has_war_together_with = MEX }
				}
			}
		}
		visible = {
			country_exists = CAL
			is_subject = no
			has_global_flag = USA_civil_war_begun_flag
			NOT = { has_global_flag = USA_civil_war_over_flag }
			CAL = {
				is_subject = no
				has_war_with = CSA
			}
			has_country_flag = CAN_acw_intervention
			has_country_flag = CAN_supports_psa
			NOT = {
				has_war_with = USA
				has_war_with = CSA
				has_war_with = TEX
				has_war_with = CAL
				has_socialist_government = yes
				has_country_flag = CAN_white_peaced_acw
			}
		}
		fire_only_once = yes

		cost = freedec?0

		ai_will_do = {
			factor = 20
			modifier = {
				factor = 3
				has_elected_government = yes
			}
			modifier = {
				factor = 0
				OR = {
					has_war_with = AST
					any_enemy_country = { is_actual_major = yes }
					has_government = authoritarian_democrat
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_intervene_in_ACW_PSA"
			set_country_flag = CAN_joined_the_ACW
			CAL = { country_event = canada.878 }
			if = {
				limit = {
					CAL = { has_war_with = CSA }
					NOT = { has_war_with = CSA }
				}
				add_to_war = { targeted_alliance = CAL enemy = CSA }
			}
			if = {
				limit = {
					CAL = { has_war_with = USA }
					NOT = { has_war_with = USA }
				}
				add_to_war = { targeted_alliance = CAL enemy = USA }
			}
			if = {
				limit = {
					CAL = { has_war_with = TEX }
					NOT = { has_war_with = TEX }
				}
				add_to_war = { targeted_alliance = CAL enemy = TEX }
			}
		}
	}

	CAN_intervene_in_ACW_AUS = {
		icon = generic_ignite_civil_war
		allowed = {
			original_tag = CAN
		}
		available = {
			TEX = {
				OR = {
					surrender_progress > 0.50
					num_of_controlled_states < 5
				}
			}
			CAN = {
				controls_all_owned_states = yes
				NOT = { has_idea = CAN_divided_nation }
			}
			OR = {
				CAN = { has_government = paternal_autocrat }
				CAN = { has_government = authoritarian_democrat }
				TEX = { has_war_with = MEX }
				custom_trigger_tooltip = {
					tooltip = CAN_MEX_intervened_ACW
					CSA = { has_war_together_with = MEX }
				}
			}
		}
		visible = {
			country_exists = TEX
			is_subject = no
			has_global_flag = USA_civil_war_begun_flag
			NOT = { has_global_flag = USA_civil_war_over_flag }
			TEX = {
				is_subject = no
				has_war_with = CSA
			}
			has_country_flag = CAN_acw_intervention
			has_country_flag = CAN_supports_aus
			NOT = {
				has_war_with = USA
				has_war_with = CSA
				has_war_with = TEX
				has_war_with = CAL
				has_socialist_government = yes
				has_country_flag = CAN_white_peaced_acw
			}
		}
		fire_only_once = yes

		cost = freedec?0

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					has_war_with = AST
					any_enemy_country = { is_actual_major = yes }
					has_government = authoritarian_democrat
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_intervene_in_ACW_AUS"
			set_country_flag = CAN_joined_the_ACW
			TEX = { country_event = canada.878 }
			if = {
				limit = {
					TEX = { has_war_with = CSA }
					NOT = { has_war_with = CSA }
				}
				add_to_war = { targeted_alliance = TEX enemy = CSA }
			}
			if = {
				limit = {
					TEX = { has_war_with = USA }
					NOT = { has_war_with = USA }
				}
				add_to_war = { targeted_alliance = TEX enemy = USA }
			}
			if = {
				limit = {
					TEX = { has_war_with = CAL }
					NOT = { has_war_with = CAL }
				}
				add_to_war = { targeted_alliance = TEX enemy = CAL }
			}
		}
	}

	CAN_declare_war_on_CSA = {
		icon = generic_ignite_civil_war
		allowed = {
			original_tag = CAN
		}
		available = {
			CAN = {
				controls_all_owned_states = yes
				NOT = { has_idea = CAN_divided_nation }
			}
			OR = {
				has_global_flag = USA_civil_war_over_flag
				custom_trigger_tooltip = {
					tooltip = CAN_CSA_is_winning_ACW
					CSA = {
						surrender_progress < 0.20
						num_of_controlled_states > 24
					}
				}
			}
			OR = {
				has_global_flag = USA_civil_war_over_flag
				CAN = { has_government = paternal_autocrat }
				CAN = { has_government = authoritarian_democrat }
				custom_trigger_tooltip = {
					tooltip = CAN_MEX_intervened_ACW
					CSA = { has_war_together_with = MEX }
				}
			}
		}
		visible = {
			OR = {
				has_country_flag = CAN_taking_land
				AND = {
					has_country_flag = CAN_supports_usa
					NOT = { country_exists = USA }
				}
				AND = {
					has_country_flag = CAN_supports_psa
					NOT = { country_exists = CAL }
				}
				AND = {
					has_country_flag = CAN_supports_aus
					NOT = { country_exists = TEX }
				}
			}
			country_exists = CSA
			is_subject = no
			NOT = {
				has_country_flag = CAN_white_peaced_acw
				has_socialist_government = yes
				has_war_with = CSA
			}
			CSA = {
				is_subject = no
				has_socialist_government = yes
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		fire_only_once = yes

		cost = 50

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				OR = {
					has_war_with = AST
					has_war_with = CAL
					has_war_with = TEX
					any_enemy_country = { is_actual_major = yes }
				}
			}
			# let's not go to war unless CSA is sufficiently flanked or the civil war is over
			modifier = {
				factor = 0
				NOT = {
					has_global_flag = USA_civil_war_over_flag
					CSA = { has_war_together_with = MEX }
					is_in_faction_with = CAL
					AND = {
						CSA = { has_war_with = TEX }
						TEX = { num_of_controlled_states > 4 }
					}
					AND = {
						CSA = { has_war_with = USA }
						USA = { num_of_controlled_states > 4 }
					}
					AND = {
						CSA = { has_war_with = CAL }
						CAL = { num_of_controlled_states > 4 }
					}
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_declare_war_on_CSA"
			set_country_flag = CAN_joined_the_ACW
			declare_war_on = { target = CSA type = annex_everything	}
		}
	}
}

CAN_new_england_decisions = {
	
	CAN_put_down_maine_rebellion = {
		icon = us_flag

		allowed = {
			original_tag = CAN
		}
		
		highlight_states = {
			state = 357
		}

		available = {
			controls_state = 357 #Maine
			custom_trigger_tooltip = {
				tooltip = CAN_not_currently_fighting_yank
				NOT = { has_country_flag = CAN_fighting_yankees }
			}
		}

		visible = {
			357 = {
				is_owned_by = CAN
				has_state_flag = CAN_in_rebellion
			}
		}

		modifier = {
			political_power_cost = 0.075
			army_morale_factor = -0.05
		}

		fire_only_once = no
		days_remove = 40

		cost = 25
		ai_will_do = {
			base = 10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_put_down_maine_rebellion"
			set_country_flag = CAN_fighting_yankees
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_put_down_maine_rebellion"
			clr_country_flag = CAN_fighting_yankees
			add_political_power = 25
			357 = {
				custom_effect_tooltip = CAN_rebellion_quelled
				clr_state_flag = CAN_in_rebellion
			}
			hidden_effect = {
				ROOT = {
					add_to_variable = { var = CAN_yankee_rebellion value = -1 }
				}
			}
		}
	}

	CAN_put_down_newhamp_rebellion = {
		icon = us_flag

		allowed = {
			original_tag = CAN
		}
		
		highlight_states = {
			state = 934
		}

		available = {
			controls_state = 934 #New Hampshire
			custom_trigger_tooltip = {
				tooltip = CAN_not_currently_fighting_yank
				NOT = { has_country_flag = CAN_fighting_yankees }
			}
		}

		visible = {
			934 = {
				is_owned_by = CAN
				has_state_flag = CAN_in_rebellion
			}
		}

		modifier = {
			political_power_cost = 0.075
			army_morale_factor = -0.05
		}

		fire_only_once = no
		days_remove = 30

		cost = 25
		ai_will_do = {
			base = 10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_put_down_newhamp_rebellion"
			set_country_flag = CAN_fighting_yankees
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_put_down_newhamp_rebellion"
			clr_country_flag = CAN_fighting_yankees
			add_political_power = 25
			934 = {
				custom_effect_tooltip = CAN_rebellion_quelled
				clr_state_flag = CAN_in_rebellion
			}
			hidden_effect = {
				ROOT = {
					add_to_variable = { var = CAN_yankee_rebellion value = -1 }
				}
			}
		}
	}	

	CAN_put_down_verm_rebellion = {
		icon = us_flag

		allowed = {
			original_tag = CAN
		}
		
		highlight_states = {
			state = 933
		}

		available = {
			controls_state = 933 #Vermont
			custom_trigger_tooltip = {
				tooltip = CAN_not_currently_fighting_yank
				NOT = { has_country_flag = CAN_fighting_yankees }
			}
		}

		visible = {
			933 = {
				is_owned_by = CAN
				has_state_flag = CAN_in_rebellion
			}
		}

		modifier = {
			political_power_cost = 0.075
			army_morale_factor = -0.05
		}

		fire_only_once = no
		days_remove = 30

		cost = 25
		ai_will_do = {
			base = 10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_put_down_verm_rebellion"
			set_country_flag = CAN_fighting_yankees
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_put_down_verm_rebellion"
			clr_country_flag = CAN_fighting_yankees
			add_political_power = 25
			933 = {
				custom_effect_tooltip = CAN_rebellion_quelled
				clr_state_flag = CAN_in_rebellion
			}
			hidden_effect = {
				ROOT = {
					add_to_variable = { var = CAN_yankee_rebellion value = -1 }
				}
			}
		}
	}

	CAN_put_down_mass_rebellion = {
		icon = us_flag

		allowed = {
			original_tag = CAN
		}
		
		highlight_states = {
			state = 932
		}

		available = {
			controls_state = 932 #Massachusetts
			custom_trigger_tooltip = {
				tooltip = CAN_not_currently_fighting_yank
				NOT = { has_country_flag = CAN_fighting_yankees }
			}
		}

		visible = {
			932 = {
				is_owned_by = CAN
				has_state_flag = CAN_in_rebellion
			}
		}

		modifier = {
			political_power_cost = 0.075
			army_morale_factor = -0.05
		}

		fire_only_once = no
		days_remove = 60

		cost = 25
		ai_will_do = {
			base = 10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_put_down_mass_rebellion"
			set_country_flag = CAN_fighting_yankees
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_put_down_mass_rebellion"
			clr_country_flag = CAN_fighting_yankees
			add_political_power = 25
			932 = {
				custom_effect_tooltip = CAN_rebellion_quelled
				clr_state_flag = CAN_in_rebellion
			}
			hidden_effect = {
				ROOT = {
					add_to_variable = { var = CAN_yankee_rebellion value = -1 }
				}
			}
		}
	}

	CAN_put_down_rhode_rebellion = {
		icon = us_flag

		allowed = {
			original_tag = CAN
		}
		
		highlight_states = {
			state = 935
		}

		available = {
			controls_state = 935 #Rhode Island
			custom_trigger_tooltip = {
				tooltip = CAN_not_currently_fighting_yank
				NOT = { has_country_flag = CAN_fighting_yankees }
			}
		}

		visible = {
			935 = {
				is_owned_by = CAN
				has_state_flag = CAN_in_rebellion
			}
		}

		modifier = {
			political_power_cost = 0.075
			army_morale_factor = -0.05
		}

		fire_only_once = no
		days_remove = 20

		cost = 25
		ai_will_do = {
			base = 10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_put_down_rhode_rebellion"
			set_country_flag = CAN_fighting_yankees
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_put_down_rhode_rebellion"
			clr_country_flag = CAN_fighting_yankees
			add_political_power = 25
			935 = {
				custom_effect_tooltip = CAN_rebellion_quelled
				clr_state_flag = CAN_in_rebellion
			}
			hidden_effect = {
				ROOT = {
					add_to_variable = { var = CAN_yankee_rebellion value = -1 }
				}
			}
		}
	}

	CAN_put_down_conn_rebellion = {
		icon = us_flag

		allowed = {
			original_tag = CAN
		}
		
		highlight_states = {
			state = 931
		}

		available = {
			controls_state = 931 #Connecticut
			custom_trigger_tooltip = {
				tooltip = CAN_not_currently_fighting_yank
				NOT = { has_country_flag = CAN_fighting_yankees }
			}
		}

		visible = {
			931 = {
				is_owned_by = CAN
				has_state_flag = CAN_in_rebellion
			}
		}

		modifier = {
			political_power_cost = 0.075
			army_morale_factor = -0.05
		}

		fire_only_once = no
		days_remove = 60

		cost = 25
		ai_will_do = {
			base = 10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_put_down_conn_rebellion"
			set_country_flag = CAN_fighting_yankees
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_put_down_conn_rebellion"
			clr_country_flag = CAN_fighting_yankees
			add_political_power = 25
			931 = {
				custom_effect_tooltip = CAN_rebellion_quelled
				clr_state_flag = CAN_in_rebellion
			}
			hidden_effect = {
				ROOT = {
					add_to_variable = { var = CAN_yankee_rebellion value = -1 }
				}
			}
		}
	}

	CAN_put_down_nyork_rebellion = {
		icon = us_flag

		allowed = {
			original_tag = CAN
		}
		
		highlight_states = {
			state = 796
		}

		available = {
			controls_state = 796 #Upstate New York
			custom_trigger_tooltip = {
				tooltip = CAN_not_currently_fighting_yank
				NOT = { has_country_flag = CAN_fighting_yankees }
			}
		}

		visible = {
			796 = {
				is_owned_by = CAN
				has_state_flag = CAN_in_rebellion
			}
		}

		modifier = {
			political_power_cost = 0.075
			army_morale_factor = -0.05
		}

		fire_only_once = no
		days_remove = 90

		cost = 25
		ai_will_do = {
			base = 10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_put_down_nyork_rebellion"
			set_country_flag = CAN_fighting_yankees
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_put_down_nyork_rebellion"
			clr_country_flag = CAN_fighting_yankees
			add_political_power = 25
			796 = {
				custom_effect_tooltip = CAN_rebellion_quelled
				clr_state_flag = CAN_in_rebellion
			}
			hidden_effect = {
				ROOT = {
					add_to_variable = { var = CAN_yankee_rebellion value = -1 }
				}
			}
		}
	}

	CAN_nee_recruitment1 = {
		icon = generic_agreement

		allowed = {
			original_tag = CAN
		}

		available = {
			932 = { is_owned_and_controlled_by = CAN } #Massachusetts
			custom_trigger_tooltip = {
				tooltip = CAN_nee_order_restored
				has_country_flag = CAN_yankee_rebellion_over
			}
		}

		visible = {
			OR = {
				357 = { is_owned_by = CAN } #Maine
				934 = { is_owned_by = CAN } #New Hampshire
				933 = { is_owned_by = CAN } #Vermont
				932 = { is_owned_by = CAN } #Massachusetts
				935 = { is_owned_by = CAN } #Rhode Island
				931 = { is_owned_by = CAN } #Connecticut
				796 = { is_owned_by = CAN } #Upstate New York
			}
		}

		fire_only_once = yes
		cost = 50
		days_remove = 90

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_nee_recruitment1"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_nee_recruitment1"
			set_country_flag = CAN_nee_recruitment1
			add_manpower = 50000
		}
	}

	CAN_nee_recruitment2 = {
		icon = generic_agreement

		allowed = {
			original_tag = CAN
		}

		available = {
			932 = { is_owned_and_controlled_by = CAN } #Massachusetts
			OR = {
				has_idea = extensive_conscription
				has_idea = service_by_requirement
				has_idea = all_adults_serve
				has_idea = scraping_the_barrel
			}
		}

		visible = {
			has_country_flag = CAN_nee_recruitment1
			OR = {
				357 = { is_owned_by = CAN } #Maine
				934 = { is_owned_by = CAN } #New Hampshire
				933 = { is_owned_by = CAN } #Vermont
				932 = { is_owned_by = CAN } #Massachusetts
				935 = { is_owned_by = CAN } #Rhode Island
				931 = { is_owned_by = CAN } #Connecticut
				796 = { is_owned_by = CAN } #Upstate New York
			}
		}

		fire_only_once = yes
		cost = 50
		days_remove = 90

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_nee_recruitment2"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_nee_recruitment2"
			set_country_flag = CAN_nee_recruitment2
			add_manpower = 30000
			custom_effect_tooltip = CAN_three_nee_divisions
			hidden_effect = {
				division_template = {
					name = "New England Regulars"
					priority = 2
					division_names_group = CAN_INF_01
					is_locked = yes
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 0 y = 3 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
						infantry = { x = 2 y = 0 }
						infantry = { x = 2 y = 1 }
						infantry = { x = 2 y = 2 }
					}
					support = {
						engineer = { x = 0 y = 0 }
						recon = { x = 0 y = 1 }
					}
				}
				932 = {
					create_unit = {
						division = "name = \"1st New England Regulars\" division_template = \"New England Regulars\"  start_experience_factor = 0.8"
						owner = CAN
					}
					create_unit = {
						division = "name = \"2nd New England Regulars\" division_template = \"New England Regulars\"  start_experience_factor = 0.8"
						owner = CAN
					}
					create_unit = {
						division = "name = \"3rd New England Regulars\" division_template = \"New England Regulars\"  start_experience_factor = 0.8"
						owner = CAN
					}
				}
			}
		}
	}

	CAN_nee_recruitment3 = {
		icon = generic_agreement

		allowed = {
			original_tag = CAN
		}

		available = {
			932 = { is_owned_and_controlled_by = CAN } #Massachusetts
			OR = {
				has_idea = all_adults_serve
				has_idea = scraping_the_barrel
			}
		}

		visible = {
			has_country_flag = CAN_nee_recruitment2
			OR = {
				357 = { is_owned_by = CAN } #Maine
				934 = { is_owned_by = CAN } #New Hampshire
				933 = { is_owned_by = CAN } #Vermont
				932 = { is_owned_by = CAN } #Massachusetts
				935 = { is_owned_by = CAN } #Rhode Island
				931 = { is_owned_by = CAN } #Connecticut
				796 = { is_owned_by = CAN } #Upstate New York
			}
		}

		fire_only_once = yes
		cost = 50
		days_remove = 90

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_nee_recruitment3"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_nee_recruitment3"
			set_country_flag = CAN_nee_recruitment3
			add_manpower = 50000
		}
	}

	CAN_develop_maine_steel = {
		icon = steel

		allowed = {
			original_tag = CAN
		}

		highlight_states = {
			state = 357
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
			357 = { is_owned_and_controlled_by = CAN }
			custom_trigger_tooltip = {
				tooltip = CAN_nee_order_restored
				has_country_flag = CAN_yankee_rebellion_over
			}
		}

		visible = {
			357 = {
				is_owned_and_controlled_by = CAN
				NOT = { has_state_flag = CAN_steel_developed }
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_develop_maine_steel"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_develop_maine_steel"
			357 = {
				set_state_flag = CAN_steel_developed
				add_resource = {
					type = steel
					amount = 16
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CAN_develop_boston_synth = {
		icon = oil

		allowed = {
			original_tag = CAN
		}

		highlight_states = {
			state = 932
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
			932 = { is_owned_and_controlled_by = CAN }
			custom_trigger_tooltip = {
				tooltip = CAN_nee_order_restored
				has_country_flag = CAN_yankee_rebellion_over
			}
		}

		visible = {
			932 = {
				is_owned_and_controlled_by = CAN
				NOT = { has_state_flag = CAN_synth_developed }
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_develop_boston_synth"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_develop_boston_synth"
			if = {
				limit = { NOT = { has_tech = synth_oil_experiments } }
				set_technology = {
					synth_oil_experiments = 1
				}
			}
			932 = {
				set_state_flag = CAN_synth_developed
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = synthetic_refinery
					level = 1
					instant_build = yes
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
}

CAN_exploit_resources = {

	CAN_develop_ontario_coal_mines = {
		icon = steel

		highlight_states = {
			state = 276
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
			276 = { is_owned_and_controlled_by = ROOT }
			OR = {
				has_completed_focus = CAN_resources
				has_tech = excavation2
			}
		}

		visible = {
			276 = {
				is_owned_by = ROOT
				NOT = { has_state_flag = CAN_coal_mines_developed }
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_develop_ontario_coal_mines"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_develop_ontario_coal_mines"
			276 = {
				set_state_flag = CAN_coal_mines_developed
				add_resource = {
					type = steel
					amount = 16
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CAN_develop_alberta_oil_wells = {
		icon = oil

		highlight_states = {
			state = 470
		}

		available = {
			num_of_civilian_factories_available_for_projects > 1
			470 = { is_owned_and_controlled_by = ROOT }
			OR = {
				has_completed_focus = CAN_resources
				has_tech = excavation2
			}
		}

		visible = {
			470 = {
				is_owned_by = ROOT
				NOT = { has_state_flag = CAN_oil_wells_developed }
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_develop_alberta_oil_wells"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_develop_alberta_oil_wells"
			470 = {
				set_state_flag = CAN_oil_wells_developed
				add_resource = {
					type = oil
					amount = 4
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CAN_develop_ontario_aluminium_mines = {
		icon = aluminium

		highlight_states = {
			state = 682
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
			682 = { is_owned_and_controlled_by = ROOT }
			OR = {
				has_completed_focus = CAN_resources
				has_tech = excavation2
			}
		}

		visible = {
			682 = {
				is_owned_by = ROOT
				NOT = { has_state_flag = CAN_aluminium_mines_developed }
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_develop_ontario_aluminium_mines"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_develop_ontario_aluminium_mines"
			682 = {
				set_state_flag = CAN_aluminium_mines_developed
				add_resource = {
					type = aluminium
					amount = 16
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CAN_develop_alberta_oil_wells2 = {
		icon = oil

		highlight_states = {
			state = 470
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
			470 = { is_owned_and_controlled_by = ROOT }
			OR = {
				has_completed_focus = CAN_oil
				has_tech = oil_processing
			}
		}

		visible = {
			470 = {
				is_owned_by = ROOT
				has_state_flag = CAN_oil_wells_developed
				NOT = { has_state_flag = CAN_oil_wells_developed2 }
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_develop_alberta_oil_wells2"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_develop_alberta_oil_wells2"
			470 = {
				set_state_flag = CAN_oil_wells_developed2
				add_resource = {
					type = oil
					amount = 12
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CAN_develop_sask_oil_wells = {
		icon = oil

		highlight_states = {
			state = 469
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
			469 = { is_owned_and_controlled_by = ROOT }
			OR = {
				has_completed_focus = CAN_resources
				has_tech = excavation2
			}
		}

		visible = {
			469 = {
				is_owned_by = ROOT
				NOT = { has_state_flag = CAN_oil_wells_developed }
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_develop_sask_oil_wells"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_develop_sask_oil_wells"
			469 = {
				set_state_flag = CAN_oil_wells_developed
				add_resource = {
					type = oil
					amount = 6
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CAN_develop_yukon_oil_wells = {
		icon = oil

		highlight_states = {
			state = 471
		}

		available = {
			num_of_civilian_factories_available_for_projects > 1
			471 = { is_owned_and_controlled_by = ROOT }
			OR = {
				has_completed_focus = CAN_resources
				has_tech = excavation2
			}
		}

		visible = {
			471 = {
				is_owned_by = ROOT
				NOT = { has_state_flag = CAN_oil_wells_developed }
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_develop_yukon_oil_wells"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_develop_yukon_oil_wells"
			471 = {
				set_state_flag = CAN_oil_wells_developed
				add_resource = {
					type = oil
					amount = 2
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CAN_develop_quebec_tungsten_mines = {
		icon = tungsten

		highlight_states = {
			state = 683
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
			683 = { is_owned_and_controlled_by = ROOT }
			OR = {
				has_completed_focus = CAN_mine
				has_tech = excavation3
			}
		}

		visible = {
			683 = {
				is_owned_by = ROOT
				NOT = { has_state_flag = CAN_tungsten_mines_developed }
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_develop_quebec_tungsten_mines"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_develop_quebec_tungsten_mines"
			683 = {
				set_state_flag = CAN_tungsten_mines_developed
				add_resource = {
					type = tungsten
					amount = 16
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CAN_develop_newbrun_tungsten_mines = {
		icon = tungsten

		highlight_states = {
			state = 465
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
			465 = { is_owned_and_controlled_by = ROOT }
			OR = {
				has_completed_focus = CAN_mine
				has_tech = excavation3
			}
		}

		visible = {
			465 = {
				is_owned_by = ROOT
				NOT = { has_state_flag = CAN_tungsten_mines_developed }
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_develop_newbrun_tungsten_mines"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_develop_newbrun_tungsten_mines"
			465 = {
				set_state_flag = CAN_tungsten_mines_developed
				add_resource = {
					type = tungsten
					amount = 4
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CAN_develop_labrador_iron_mines = {
		icon = steel

		highlight_states = {
			state = 332
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
			332 = { is_owned_and_controlled_by = ROOT }
			OR = {
				has_completed_focus = CAN_mine
				has_tech = excavation3
			}
		}

		visible = {
			332 = {
				is_owned_by = ROOT
				NOT = { has_state_flag = CAN_iron_mines_developed }
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_develop_labrador_iron_mines"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_develop_labrador_iron_mines"
			332 = {
				set_state_flag = CAN_iron_mines_developed
				add_resource = {
					type = steel
					amount = 8
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CAN_develop_quebec_aluminium_mines = {
		icon = aluminium

		highlight_states = {
			state = 466
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
			466 = { is_owned_and_controlled_by = ROOT }
			OR = {
				has_completed_focus = CAN_mine
				has_tech = excavation3
			}
		}

		visible = {
			466 = {
				is_owned_by = ROOT
				NOT = { has_state_flag = CAN_aluminium_mines_developed }
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_develop_quebec_aluminium_mines"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_develop_quebec_aluminium_mines"
			466 = {
				set_state_flag = CAN_aluminium_mines_developed
				add_resource = {
					type = aluminium
					amount = 8
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CAN_develop_ontario_chromium_mines = {
		icon = chromium

		highlight_states = {
			state = 682
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
			682 = { is_owned_and_controlled_by = ROOT }
			OR = {
				has_completed_focus = CAN_mine
				has_tech = excavation3
			}
		}

		visible = {
			682 = {
				is_owned_by = ROOT
				NOT = { has_state_flag = CAN_chromium_mines_developed }
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_develop_ontario_chromium_mines"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_develop_ontario_chromium_mines"
			682 = {
				set_state_flag = CAN_chromium_mines_developed
				add_resource = {
					type = chromium
					amount = 12
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	CAN_develop_quebec_chromium_mines = {
		icon = chromium

		highlight_states = {
			state = 683
		}

		available = {
			num_of_civilian_factories_available_for_projects > 2
			683 = { is_owned_and_controlled_by = ROOT }
			OR = {
				has_completed_focus = CAN_mine
				has_tech = excavation3
			}
		}

		visible = {
			683 = {
				is_owned_by = ROOT
				NOT = { has_state_flag = CAN_chromium_mines_developed }
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAN_develop_quebec_chromium_mines"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAN_develop_quebec_chromium_mines"
			683 = {
				set_state_flag = CAN_chromium_mines_developed
				add_resource = {
					type = chromium
					amount = 8
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
}

