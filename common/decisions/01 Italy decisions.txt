
political_actions = {

	SRD_pack_the_courts = {# Pack the Courts
		icon = generic_political_discourse
		allowed = { always = no }
		fire_only_once = yes
		cost = 50
		ai_will_do = { factor = 1000 }
		days_remove = 30
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRD_pack_the_courts"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SRD_pack_the_courts"
			SRD = {
				SRD_weaken_opposition_effect = yes
			}
		}
	}

	SRD_request_french_help = {# Request French Help
		icon = generic_political_discourse
		allowed = { always = no }
		fire_only_once = yes
		cost = 80
		ai_will_do = { factor = 1000 }
		days_remove = 30
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRD_request_french_help"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SRD_request_french_help"
			SRD = {
				SRD_weaken_opposition_effect = yes
			}
		}
	}

	SRD_enable_internal_exiles = {# Expand Internal Exiling Procedures
		icon = generic_political_discourse
		allowed = { always = no }
		fire_only_once = yes
		cost = 50
		ai_will_do = { factor = 1000 }
		days_remove = 30
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRD_enable_internal_exiles"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SRD_enable_internal_exiles"
			SRD = {
				SRD_weaken_opposition_effect = yes
			}
		}
	}

	SRD_terminate_rival_cliques = {# Terminate Rival Cliques
		icon = generic_political_discourse
		allowed = { always = no }
		fire_only_once = yes
		custom_cost_trigger = {
			command_power > 20
			has_manpower > 1000
		}
		custom_cost_text = SWI_1000_manpower_20_cp
		ai_will_do = { factor = 1000 }
		days_remove = 30
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRD_terminate_rival_cliques"
			hidden_effect = {
				add_command_power = -20
				add_manpower = -1000
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SRD_terminate_rival_cliques"
			SRD = {
				SRD_weaken_opposition_effect = yes
			}
		}
	}
}

ITA_foreign_policy = {# Foreign Policy Stuff
	SRI_join_the_intl = {
		icon = generic_political_discourse
		allowed = { tag = SRI }

		available = {
			italy_balance_has_broken = yes
			OR = {
				has_global_flag = second_weltkrieg_has_started
				at_peace_or_same_enemies_as_FROM = yes
			}
		}

		visible = {
			is_in_faction = no
			has_socialist_government = yes
			NOT = { has_country_flag = SRI_refused_intl_membership }
			FROM = {
				has_socialist_government = yes
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		targets = { INT }
		target_trigger = {
			NOT = { has_country_flag = SRI_refused_intl_membership }
			FROM = {
				has_socialist_government = yes
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				has_war = no
				FROM = { surrender_progress > 0.3 }
			}
			modifier = {
				factor = 0
				has_country_flag = { flag = ITA_recent_peace days < 30 }
			}
			modifier = {
				factor = 0
				has_global_flag = { flag = second_weltkrieg_has_started days < 30 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRI_join_the_intl target: [From.GetName]"
			italy_break_balance = yes
			FROM = { country_event = socitaly.129 }
		}
	}
	SRD_join_entente = {
		name = join_faction
		icon = generic_political_discourse

		allowed = { tag = SRD }

		available = {
			italy_balance_has_broken = yes
			OR = {
				has_global_flag = second_weltkrieg_has_started
				at_peace_or_same_enemies_as_FROM = yes
			}
		}

		visible = {
			is_in_faction = no
			NFA = { is_in_faction_with = ENT }
			has_socialist_government = no
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
				has_socialist_government = no
			}
		}

		targets = { ENT }
		target_trigger = {
			has_socialist_government = no
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
				has_socialist_government = no
			}
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				has_war = no
				FROM = { surrender_progress > 0.3 }
			}
			modifier = {
				factor = 0
				has_country_flag = { flag = ITA_recent_peace days < 30 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRD_join_entente target: [From.GetName]"
			italy_break_balance = yes
			FROM = { ask_to_join_faction = yes }
		}
	}

	ITA_call_for_help = {
		icon = generic_agreement
		allowed = {
			OR = {
				tag = ITA
				tag = LOM
				tag = VNC
			}
		}

		available = {
			FROM = { has_war = no }
			if = {
				limit = { has_country_flag = attacked_SRI_first }
				ROOT = { surrender_progress > 0.40 }
			}
			else = {
				ROOT = { surrender_progress > 0.20 }
			}
		}

		visible = {
			is_subject = no
			is_in_faction = no
			has_capitulated = no
			OR = {
				NOT = { has_government = national_populist }
				FROM = { has_government = national_populist }
			}
			if = {
				limit = { tag = VNC }
				SRI = {
					NOT = { has_war_with = LOM }
				}
			}
			FROM = {
				exists = yes
				is_subject = no
				is_in_faction = no
				NOT = { has_war_with = ROOT }
			}
		}

		target_root_trigger = {
			has_war_with = SRI
		}

		targets = { SIC }

		target_trigger = {
			FROM = {
				exists = yes
				is_subject = no
				is_in_faction = no
				NOT = { has_war_with = ROOT }
			}
		}

		fire_only_once = no
		days_re_enable = 365
		cost = 0

		ai_will_do = { factor = 100 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_call_for_help target: [From.GetName]"
			FROM = { country_event = sic.104 }
		}
	}

	SIC_call_for_help = {
		icon = generic_agreement
		allowed = { tag = SIC }

		available = {
			FROM = { has_war = no }
			if = {
				limit = { has_country_flag = attacked_SRI_first }
				ROOT = { surrender_progress > 0.40 }
			}
			else = {
				ROOT = { surrender_progress > 0.20 }
			}
		}

		visible = {
			has_war_with = SRI
			is_subject = no
			is_in_faction = no
			FROM = {
				exists = yes
				is_subject = no
				is_in_faction = no
				if = {
					limit = { tag = LOM }
					NOT = { country_exists = VNC }
				}
				NOT = { has_war_with = ROOT }
			}
		}

		target_root_trigger = {
			has_war_with = SRI
		}

		targets = { ITA VNC LOM }

		target_trigger = {
			FROM = {
				exists = yes
				is_subject = no
				is_in_faction = no
				NOT = { has_war_with = ROOT }
			}
		}

		fire_only_once = no
		days_re_enable = 365
		cost = 0

		ai_will_do = { factor = 100 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SIC_call_for_help target: [From.GetName]"
			FROM = { country_event = sic.104 }
			if = {
				limit = { FROM = { tag = VNC } country_exists = LOM }
				LOM = { country_event = sic.104 }
			}
		}
	}

	ITA_attack_austria = {
		icon = generic_prepare_civil_war
		allowed = { tag = ITA }

		available = {
			NOT = { has_idea = ITA_austrian_influence }
			if = {
				limit = {
					owns_state = 160
					has_country_flag = ITA_venice_will_rebel
				}
				custom_trigger_tooltip = {
					tooltip = ITA_venetian_dissent_eliminated
					NOT = { has_country_flag = ITA_venice_will_rebel }
				}
			}
			else_if = {
				limit = { has_country_flag = ITA_venice_will_rebel }
				owns_state = 160
			}
			is_valid_peace_target = yes
			NOT = { has_non_aggression_pact_with = FROM }
			NOT = { has_guaranteed = FROM }
		}

		visible = {
			OR = {
				has_government = national_populist
				488 = { is_claimed_by = ROOT } #Trieste
				683 = { is_claimed_by = ROOT } #Gorizia
				736 = { is_claimed_by = ROOT } #Istria
				783 = { is_claimed_by = ROOT } #Trentino
			}
			can_declare_war_on = FROM
			FROM = {
				OR = {
					owns_state = 488 #Trieste
					owns_state = 683 #Gorizia
					owns_state = 736 #Istria
					owns_state = 783 #Trentino
				}
			}
		}

		cancel_trigger = {
			OR = {
				NOT = { can_declare_war_on = FROM }
				FROM = {
					NOT = { owns_state = 488 } #Trieste
					NOT = { owns_state = 683 } #Gorizia
					NOT = { owns_state = 736 } #Istria
					NOT = { owns_state = 783 } #Trentino
				}
				is_subject = yes
				is_in_faction_but_not_leader = yes
				has_non_aggression_pact_with = FROM
				has_guaranteed = FROM
			}
		}

		targets = { AUS }
		target_root_trigger = {
			OR = {
				has_government = national_populist
				488 = { is_claimed_by = ROOT } #Trieste
				683 = { is_claimed_by = ROOT } #Gorizia
				736 = { is_claimed_by = ROOT } #Istria
				783 = { is_claimed_by = ROOT } #Trentino
			}
		}
		target_trigger = {
			can_declare_war_on = FROM
			FROM = {
				OR = {
					owns_state = 488 #Trieste
					owns_state = 736 #Istria
					owns_state = 683 #Gorizia
					owns_state = 783 #Trentino
				}
			}
		}

		cost = 0
		days_remove = 25
		fire_only_once = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				country_exists = SER
				SER = {
					is_in_faction_with = BPL
					OR = {
						NOT = { has_completed_focus = SER_Together_Against_Austria }
						has_decision = SER_Attack_Austria
						ROOT = { has_country_flag = SER_will_attack_austria }
					}
				}
			}
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				AUS = {
					NOT = {
						controls_state = 488 #Trieste
						controls_state = 683 #Gorizia
						controls_state = 736 #Istria
						controls_state = 783 #Trentino
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_in_faction_with = GER
					GER = { surrender_progress < 0.20 }
				}
			}
			modifier = {
				factor = 0
				FROM = { is_in_faction_with = RUS }
			}
			modifier = {
				factor = 0
				FROM = {
					set_temp_variable = { strength = num_divisions }
					clamp_temp_variable = { var = strength min = 1 }
					if = {
						limit = { HUN = { is_ally_with = FROM } }
						add_to_temp_variable = { strength = HUN.num_divisions }
					}
					if = {
						limit = { CZE = { is_ally_with = FROM } }
						add_to_temp_variable = { strength = CZE.num_divisions }
					}
					if = {
						limit = { GAL = { is_ally_with = FROM } }
						add_to_temp_variable = { strength = GAL.num_divisions }
					}
					if = {
						limit = { CRO = { is_ally_with = FROM } }
						add_to_temp_variable = { strength = CRO.num_divisions }
					}
					set_temp_variable = { my_strength = ROOT.num_divisions }
					clamp_temp_variable = { var = my_strength min = 1 }
					divide_temp_variable = { strength = my_strength }
					check_variable = { strength > 0.9 }
					NOT = {
						surrender_progress > 0.10
						has_war_with_major = yes
						enemies_strength_ratio > 1
						HUN = {
							is_ally_with = PREV
							surrender_progress > 0.30
						}
					}
				}
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ITA_attack_austria target: [From.GetName]"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_attack_austria target: [From.GetName]"
			add_war_support = 0.10
			if = {
				limit = { gives_military_access_to = AUS }
				AUS = {
					diplomatic_relation = {
						country = ITA
						relation = military_access
						active = no
					}
				}
			}
			setup_decision_attack_AI = yes
			FROM = { incoming_war_notification_effect = yes }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ITA_attack_austria target: [From.GetName]"
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = AUS
				type = annex_everything
			}
		}
	}

	ITA_war_with_venice1 = {
		icon = generic_prepare_civil_war
		allowed = { tag = ITA }

		highlight_states = {
			highlight_state_targets = { state = 160 }
		}

		available = {
			160 = { is_owned_and_controlled_by = ITA }
		}

		activation = {
			has_war_with = VNC
			has_government = national_populist
			has_country_flag = ITA_venice_will_rebel
			is_subject = no
			is_in_faction = no
		}

		selectable_mission = no
		fire_only_once = yes
		is_good = no
		days_mission_timeout = 150

		cancel_trigger = {
			NOT = { has_war_with = VNC }
			NOT = { controls_state = 160 }
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout ITA_war_with_venice1"
			set_country_flag = ITA_venice_war_timeout
			if = {
				limit = {
					AUS = {
						exists = yes
						is_subject = no
						has_socialist_government = no
						NOT = { has_war_with = ITA }
					}
				}
				AUS = { country_event = ita.30 }
			}
			else_if = {
				limit = {
					SRI = {
						exists = yes
						is_subject = no
						has_socialist_government = yes
						NOT = { has_war_with = ITA }
					}
				}
				SRI = { country_event = ita.33 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_war_with_venice1"
			VNC = { clr_country_flag = VNC_republican_revolt }
			clr_country_flag = ITA_venice_will_rebel
			add_stability = 0.10
			add_political_power = 100
		}
	}

	ITA_war_with_venice2 = {
		icon = generic_prepare_civil_war
		allowed = { tag = ITA }

		highlight_states = {
			highlight_state_targets = { state = 160 }
		}

		available = {
			160 = { is_owned_and_controlled_by = ITA }
		}

		activation = {
			has_war_with = VNC
			has_government = national_populist
			has_country_flag = ITA_venice_will_rebel
			has_country_flag = ITA_venice_war_timeout
			is_subject = no
			is_in_faction = no
		}

		selectable_mission = no
		fire_only_once = yes
		is_good = no
		days_mission_timeout = 60

		cancel_trigger = {
			NOT = { has_war_with = VNC }
			NOT = { controls_state = 160 }
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout ITA_war_with_venice2"
			country_event = ita.40
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_war_with_venice2"
			VNC = { clr_country_flag = VNC_republican_revolt }
			clr_country_flag = ITA_venice_will_rebel
			clr_country_flag = ITA_venice_war_timeout
			add_stability = 0.10
			add_political_power = 100
		}
	}

	VNC_war_with_ita1 = {
		icon = generic_prepare_civil_war
		allowed = { always = no }

		highlight_states = { highlight_state_targets = { state = 159 } }

		selectable_mission = no
		fire_only_once = yes
		is_good = no
		days_mission_timeout = 150

		available = { always = no }

		cancel_trigger = { NOT = { has_war_with = ITA } }

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout VNC_war_with_ita1"
			effect_tooltip = {
				if = {
					limit = {
						AUS = {
							exists = yes
							is_subject = no
							has_socialist_government = no
							NOT = { has_war_with = ITA }
						}
					}
					AUS = { country_event = ita.30 }
				}
				if = {
					limit = {
						SRI = {
							exists = yes
							is_subject = no
							has_socialist_government = yes
							NOT = { has_war_with = ITA }
						}
					}
					SRI = { country_event = ita.33 }
				}
			}
			custom_effect_tooltip = VNC_intervention
		}
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel VNC_war_with_ita1"
			hidden_effect = {
				if = {
					limit = { NOT = { owns_state = 159 } }
					ITA = { remove_ideas = VNC_defeatist_sentiment }
					remove_ideas = {
						VNC_military_confusion
						VNC_military_confusion2
						VNC_defender_democracy
						VNC_defender_democracy2
						VNC_desperate_defence_idea
						VNC_austrian_aid
					}
					159 = { remove_core_of = VNC }
					mark_focus_tree_layout_dirty = yes
					clr_country_flag = VNC_republican_revolt
				}
			}
			delete_unit_template_and_units = { division_template = "Volontari della Libert√†" disband = yes }
			add_war_support = -0.1
			decrease_conscription = yes
		}
	}

	VNC_war_with_ita2 = {
		icon = generic_prepare_civil_war
		allowed = { always = no }

		highlight_states = { highlight_state_targets = { state = 159 } }

		available = { controls_state = 159 }

		selectable_mission = no
		fire_only_once = yes
		is_good = no
		days_mission_timeout = 210

		cancel_trigger = { NOT = { has_war_with = ITA } }

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout VNC_war_with_ita2"
			ITA = { country_event = ita.40 }
			event_option_tooltip = ita.41.a
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete VNC_war_with_ita2"
			ITA = { country_event = ita.40 }
			event_option_tooltip = ita.41.a
		}
	}

	ITA_join_the_austrian_pact = {
		icon = generic_political_discourse
		allowed = { original_tag = ITA }
		available = {
			italy_balance_has_broken = yes
			at_peace_or_same_enemies_as_FROM = yes
			OR = {
				FROM = { is_faction_leader = yes }
				GER = {
					is_faction_leader = yes
					is_in_faction_with = FROM #wartime merge
				}
			}
		}
		visible = {
			is_in_faction = no
			is_subject = no
			has_socialist_government = no
			NOT = {
				has_government = national_populist
				has_country_flag = ITA_no_join_aus
			}
			FROM = {
				is_subject = no
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
				OR = {
					is_faction_leader = yes
					AND = {
						is_in_faction = yes
						has_country_flag = AUS_intervened_in_weltkrieg
					}
				}
			}
		}

		targets = { AUS }

		target_trigger = {
			FROM = {
				is_subject = no
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
			}
		}

		fire_only_once = yes
		cost = 25
		ai_will_do = {
			factor = 99
			modifier = {
				factor = 0
				has_country_flag = { flag = ITA_recent_peace days < 30 }
			}
			modifier = {
				factor = 0
				has_global_flag = { flag = second_weltkrieg_has_started days < 30 }
			}
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = ITA_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = ITA_forpol option = ITA_FORPOL_AUS } }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_join_the_austrian_pact target: [From.GetName]"
			FROM = { ask_to_join_faction = yes }
		}
	}

	SIC_join_austria = {
		icon = generic_nationalism

		allowed = { tag = SIC }

		available = {
			italy_balance_has_broken = yes
			at_peace_or_same_enemies_as_FROM = yes
			OR = {
				FROM = { is_faction_leader = yes }
				GER = {
					is_faction_leader = yes
					is_in_faction_with = FROM #wartime merge
				}
			}
		}

		visible = {
			is_in_faction = no
			is_subject = no
			has_socialist_government = no
			FROM = {
				is_subject = no
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
				OR = {
					is_faction_leader = yes
					AND = {
						is_in_faction_with = GER
						has_country_flag = AUS_intervened_in_weltkrieg
					}
				}
			}
			NOT = {
				has_country_flag = { flag = SIC_considering_faction value > 0 }
			}
		}

		target_root_trigger = {
			is_in_faction = no
		}

		targets = { AUS }

		target_trigger = {
			FROM = {
				is_subject = no
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
			}
		}

		fire_only_once = yes

		cost = 0

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SIC_join_austria target: [From.GetName]"
			set_country_flag = { flag = SIC_considering_faction days = 2 value = 1 }
			FROM = { ask_to_join_faction = yes }
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_country_flag = { flag = ITA_recent_peace days < 30 }
			}
			modifier = {
				factor = 0
				has_global_flag = { flag = second_weltkrieg_has_started days < 30 }
			}
			modifier = {
				factor = 0
				FROM = { surrender_progress > 0.20 }
			}
			modifier = {
				factor = 0
				NOT = {
					date > 1938.1.1
					has_war_with = SRI
				}
			}
			modifier = {
				factor = 0
				country_exists = SRI
				FROM = {
					is_in_faction_with = ITA
					NOT = { has_war_with = SRI }
				}
				NOT = { has_game_rule = { rule = SIC_forpol option = SIC_FORPOL_AUS } }
			}
			modifier = {
				factor = 0
				country_exists = SRI
				FROM = {
					has_war = yes
					NOT = { has_war_with = SRI }
				}
			}
			modifier = {
				factor = 0
				country_exists = SRI
				FROM = {
					NOT = { has_war_with = SRI }
					ITA = {
						exists = yes
						is_subject = no
						NOT = { has_government = national_populist }
					}
				}
				NOT = { has_game_rule = { rule = SIC_forpol option = SIC_FORPOL_AUS } }
			}
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = SIC_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = SIC_forpol option = SIC_FORPOL_AUS } }
			}
			modifier = {
				factor = 0.1
				FROM = {
					is_in_faction_with = ITA
					has_war_with = SRI
				}
				OR = {
					GER = {
						is_faction_leader = yes
						surrender_progress < 0.10
						has_war_with = SRI
					}
					ENT = {
						is_faction_leader = yes
						surrender_progress < 0.10
						has_war_with = SRI
					}
				}
				NOT = { has_game_rule = { rule = SIC_forpol option = SIC_FORPOL_AUS } }
			}
			modifier = {
				factor = 2
				FROM = { has_war_with = SRI }
			}
			modifier = {
				factor = 1.5
				FROM = { has_country_flag = sicilian_reengage }
			}
			modifier = {
				factor = 0.2
				FROM = { has_country_flag = sicilian_disengage }
				NOT = { has_game_rule = { rule = SIC_forpol option = SIC_FORPOL_AUS } }
			}
			modifier = {
				factor = 0.1
				has_government = national_populist
				NOT = { has_game_rule = { rule = SIC_forpol option = SIC_FORPOL_AUS } }
			}
		}
	}

	SIC_join_entente = {
		icon = generic_nationalism

		allowed = { tag = SIC }

		available = {
			italy_balance_has_broken = yes
			at_peace_or_same_enemies_as_FROM = yes
		}

		visible = {
			is_in_faction = no
			is_subject = no
			has_socialist_government = no
			FROM = {
				is_faction_leader = yes
				is_in_faction_with = NFA
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
			}
			NOT = {
				has_country_flag = { flag = SIC_considering_faction value > 0 }
			}
		}

		target_root_trigger = {
			is_in_faction = no
		}

		targets = { ENT }

		target_trigger = {
			FROM = {
				is_faction_leader = yes
				is_in_faction_with = NFA
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
			}
		}

		fire_only_once = yes

		cost = 0

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SIC_join_entente target: [From.GetName]"
			set_country_flag = { flag = SIC_considering_faction days = 6 value = 1 }
			FROM = { ask_to_join_faction = yes }
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_country_flag = { flag = ITA_recent_peace days < 30 }
			}
			modifier = {
				factor = 0
				has_global_flag = { flag = second_weltkrieg_has_started days < 30 }
			}
			modifier = {
				factor = 0
				FROM = { surrender_progress > 0.20 }
			}
			modifier = {
				factor = 0
				NOT = {
					date > 1938.1.1
					has_war_with = SRI
				}
			}
			modifier = {
				factor = 0
				country_exists = SRI
				FROM = {
					has_war = yes
					NOT = { has_war_with = SRI }
				}
			}
			modifier = {
				factor = 0
				country_exists = SRI
				FROM = {
					NOT = { has_war_with = SRI }
					ITA = {
						exists = yes
						is_subject = no
						NOT = { has_government = national_populist }
					}
				}
				NOT = { has_game_rule = { rule = SIC_forpol option = SIC_FORPOL_ENT } }
			}
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = SIC_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = SIC_forpol option = SIC_FORPOL_ENT } }
			}
			modifier = {
				factor = 2
				FROM = { has_war_with = SRI }
			}
			modifier = {
				factor = 0.75
				FROM = { has_war_with = SRI }
				GER = {
					is_faction_leader = yes
					surrender_progress < 0.10
					has_war_with = SRI
				}
				NOT = { has_game_rule = { rule = SIC_forpol option = SIC_FORPOL_ENT } }
			}
			modifier = {
				factor = 0.5
				NOT = { has_government = national_populist }
				NOT = { has_game_rule = { rule = SIC_forpol option = SIC_FORPOL_ENT } }
			}
		}
	}

	SIC_join_reichspakt = {
		icon = generic_nationalism

		allowed = { tag = SIC }

		available = {
			italy_balance_has_broken = yes
			at_peace_or_same_enemies_as_FROM = yes
		}

		visible = {
			is_in_faction = no
			is_subject = no
			has_socialist_government = no
			FROM = {
				is_faction_leader = yes
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
			}
			NOT = {
				has_country_flag = { flag = SIC_considering_faction value > 0 }
			}
		}

		target_root_trigger = {
			is_in_faction = no
		}

		targets = { GER }

		target_trigger = {
			FROM = {
				is_faction_leader = yes
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
			}
		}

		fire_only_once = yes

		cost = 0

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SIC_join_reichspakt target: [From.GetName]"
			set_country_flag = { flag = SIC_considering_faction days = 6 value = 1 }
			FROM = { ask_to_join_faction = yes }
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_country_flag = { flag = ITA_recent_peace days < 30 }
			}
			modifier = {
				factor = 0
				has_global_flag = { flag = second_weltkrieg_has_started days < 30 }
			}
			modifier = {
				factor = 0
				FROM = { surrender_progress > 0.20 }
			}
			modifier = {
				factor = 0
				NOT = {
					date > 1938.1.1
					has_war_with = SRI
				}
			}
			modifier = {
				factor = 0
				country_exists = SRI
				FROM = {
					has_war = yes
					NOT = { has_war_with = SRI }
				}
			}
			modifier = {
				factor = 0
				country_exists = SRI
				FROM = {
					NOT = { has_war_with = SRI }
					ITA = {
						exists = yes
						is_subject = no
						NOT = { has_government = national_populist }
					}
				}
				NOT = { has_game_rule = { rule = SIC_forpol option = SIC_FORPOL_GER } }
			}
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = SIC_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = SIC_forpol option = SIC_FORPOL_GER } }
			}
			modifier = {
				factor = 2
				FROM = { has_war_with = SRI }
			}
			modifier = {
				factor = 0.1
				has_government = national_populist
				NOT = { has_game_rule = { rule = SIC_forpol option = SIC_FORPOL_GER } }
			}
		}
	}

	ITA_remove_austrian_influence = {
		icon = generic_civil_support
		allowed = {
			OR = {
				tag = ITA
				tag = VNC
				tag = LOM
			}
		}

		available = {
			if = {
				limit = { tag = ITA }
				has_completed_focus = ITA_market_protection
			}
			else_if = {
				limit = { tag = VNC }
				has_completed_focus = VNC_trade_center
			}
			else_if = {
				limit = { tag = LOM }
				has_completed_focus = LOM_renaissance
			}
		}

		visible = {
			has_idea = ITA_austrian_influence
			OR = {
				NOT = { tag = ITA }
				NOT = {
					has_government = national_populist
					has_government = authoritarian_democrat
				}
			}
			NOT = { is_subject_of = AUS }
		}

		fire_only_once = yes
		cost = 100

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_remove_austrian_influence"
			remove_ideas = ITA_austrian_influence
			reverse_add_opinion_modifier = { target = AUS modifier = KR_disapproves_of_govt }
			add_timed_idea = {
				idea = ITA_austrian_sanctions
				days = 180
			}
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					is_in_faction_with = AUS
					AND = {
						NOT = { has_idea = LOM_prussian_drill }
						has_government = social_conservative
					}
					has_idea = ITA_black_monday
					has_idea = ITA_recovering_economy
				}
			}
			modifier = {
				factor = 5
				has_idea = LOM_prussian_drill
			}
		}
	}

	PAP_declare_independence_from_SIC = {
		icon = generic_prepare_civil_war
		allowed = { tag = PAP }
		available = {
			PAP = {
				OR = {
					has_completed_focus = PAP_legionary_spirit
					has_completed_focus = PAP_palatine_guard
				}
				NOT = { has_country_flag = PAP_black_monday }
				controls_all_owned_states = yes
			}
		}
		visible = {
			is_subject_of = SIC
		}

		cost = 100
		fire_only_once = yes

		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_war = no
				has_army_manpower = { size > 50000 }
				NOT = {
					country_exists = SRI
					SIC = { has_country_flag = SIC_confed }
					SRD = { has_country_flag = SIC_confed }
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete PAP_declare_independence_from_SIC"
			add_stability = -0.10
			set_country_flag = ITA_refuse_join_@SIC
			SIC = {
				set_autonomy = { target = PAP autonomy_state = autonomy_free }
			}
			if = {
				limit = { is_in_faction = yes }
				every_country = {
					limit = {
						NOT = { tag = PAP }
						NOT = { tag = SIC }
						is_in_faction_with = PAP
					}
					add_opinion_modifier = { target = PAP modifier = KR_disapproves_of_govt }
				}
				leave_faction = yes
			}
			separate_peace_all_wars = yes
			SIC = {
				country_event = { id = papalstate.50 hours = 8 }
			}
		}
	}

	ITA_claim_libya = {
		icon = generic_form_nation

		allowed = {
			OR = {
				tag = ITA
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
			}
		}

		available = {
			OR = {
				has_subject = 448.owner
				AND = {
					can_declare_war_on = 448.owner
					NOT = { has_non_aggression_pact_with = 448.owner }
					NOT = { has_guaranteed = 448.owner }
				}
			}
		}

		visible = {
			has_country_flag = italy_irredentist_decisions_unlocked
			is_subject = no
		}

		cost = 100
		fire_only_once = yes

		ai_will_do = {
			factor = 0
			modifier = {
				add = 5
				OR = {
					tag = SRD
					has_country_flag = SIC_empire
					has_government = national_populist
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_claim_libya"
			set_country_flag = ITA_claimed_libya
			LBA = { every_core_state = { add_claim_by = ROOT } }
			TRP = { every_core_state = { add_claim_by = ROOT } }
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { has_subject = LBA }
				annex_country = {
					target = LBA
					transfer_troops = no
				}
			}
			if = {
				limit = { has_subject = TRP }
				annex_country = {
					target = TRP
					transfer_troops = no
				}
			}
			set_temp_variable = { target = ROOT }
			every_subject_country = {
				limit = {
					any_owned_state = { region = 238 }
					NOT = { tag = LBA }
					NOT = { tag = TRP }
				}
				every_owned_state = {
					limit = {
						OR = {
							is_core_of = LBA
							is_core_of = TRP
						}
					}
					transfer_state_during_war = yes
				}
			}
			every_other_country = {
				limit = {
					any_owned_state = {
						region = 238 #Tripolitania
						is_claim_or_core_of_PREV = yes
					}
					NOT = { is_subject_of = ROOT }
				}
				country_event = ita.175
				if = {
					limit = { is_subject = yes }
					overlord = { country_event = ita.175 }
				}
			}
		}
	}

	ITA_war_for_libya = {
		icon = generic_prepare_civil_war

		allowed = {
			OR = {
				tag = ITA
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
			}
		}

		available = {
			NOT = { has_non_aggression_pact_with = FROM }
			NOT = { has_guaranteed = FROM }
		}

		visible = {
			can_declare_war_on = FROM
			FROM = {
				NOT = { is_subject_of = TUR }
				NOT = { is_subject_of = EGY }
				NOT = { is_subject_of = PER }
			}
			is_subject = no
		}

		cost = 0
		days_remove = 25
		fire_only_once = yes
		war_with_target_on_remove = yes
		cancel_if_not_visible = yes

		target_root_trigger = {
			has_country_flag = ITA_claimed_libya
		}

		targets = { LBA TRP }

		target_trigger = {
			can_declare_war_on = FROM
			FROM = {
				NOT = { is_subject_of = TUR }
				NOT = { is_subject_of = EGY }
				NOT = { is_subject_of = PER }
			}
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				country_has_any_active_threat = yes
			}
			modifier = {
				factor = 0
				has_navy_size = { size < 200 type = convoy }
			}
			modifier = {
				factor = 0
				NOT = { has_tech = landing_craft }
				NOT = { has_tech = mtg_landing_craft }
			}
			modifier = {
				factor = 0
				OR = {
					FROM = { dont_start_major_faction_wars = yes }
					FROM = { default_attack_AI_trigger = yes }
				}
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ITA_war_for_libya target: [From.GetName]"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_war_for_libya target: [From.GetName]"
			add_war_support = 0.10
			setup_decision_attack_AI = yes
			FROM = { incoming_war_notification_effect = yes }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ITA_war_for_libya target: [From.GetName]"
			set_country_flag = ITA_libya_war_@FROM
			set_country_flag = ITA_war_for_libya
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}

	ITA_demand_libya = {
		icon = generic_prepare_civil_war

		allowed = {
			OR = {
				tag = ITA
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
			}
		}

		available = {
			OR = {
				448 = { is_owned_and_controlled_by = FROM }
				450 = { is_owned_and_controlled_by = FROM }
				451 = { is_owned_and_controlled_by = FROM }
				AND = {
					has_subject = LBA
					LBA = { has_capitulated = no }
				}
				AND = {
					has_subject = TRP
					TRP = { has_capitulated = no }
				}
			}
			NOT = { has_non_aggression_pact_with = FROM }
			NOT = { has_guaranteed = FROM }
		}

		visible = {
			is_subject = no
			can_declare_war_on = FROM
			FROM = {
				is_subject = no
				OR = {
					owns_state = 448
					has_subject = LBA
					has_subject = TRP
				}
			}
		}

		cost = 0
		fire_only_once = no

		target_root_trigger = {
			has_country_flag = ITA_claimed_libya
		}

		targets = { TUR EGY PER }

		target_trigger = {
			can_declare_war_on = FROM
			FROM = {
				is_subject = no
				OR = {
					owns_state = 448
					has_subject = LBA
					has_subject = TRP
				}
			}
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				country_has_any_active_threat = yes
			}
			modifier = {
				factor = 0
				has_navy_size = { size < 200 type = convoy }
			}
			modifier = {
				factor = 0
				NOT = { has_tech = landing_craft }
				NOT = { has_tech = mtg_landing_craft }
			}
			modifier = {
				factor = 0
				OR = {
					FROM = { dont_start_major_faction_wars = yes }
					FROM = { default_attack_AI_trigger = yes }
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_demand_libya target: [From.GetName]"
			FROM = {
				country_event = { id = ita.176 days = 1 }
			}
		}
	}

	LOM_join_faction = {
		icon = generic_nationalism

		allowed = { tag = LOM }

		available = {
			italy_balance_has_broken = yes
			OR = {
				has_completed_focus = LOM_place_in_the_world
				has_completed_focus = LOM_lombard_constitution
			}
			at_peace_or_same_enemies_as_FROM = yes
			FROM = {
				OR = {
					has_war = no
					has_capitulated = no
				}
			}
			if = {
				limit = {
					FROM = {
						OR = {
							tag = AUS
							tag = GER
						}
					}
				}
				NOT = { has_completed_focus = LOM_golden_ambrosia }
			}
			if = {
				limit = { FROM = { tag = BPL } }
				has_completed_focus = LOM_republican_cause
				has_global_flag = balkan_war_ended
				OR = {
					var:783.owner = { #Trentino
						OR = {
							is_ally_with = AUS
							is_ally_with = GER
						}
					}
					RUS = { has_socialist_government = yes }
				}
			}
			if = {
				limit = { FROM = { tag = RUS } }
				has_completed_focus = LOM_republican_cause
			}
		}

		visible = {
			is_in_faction = no
			is_subject = no
			has_socialist_government = no
			FROM = {
				is_faction_leader = yes
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
			}
			if = {
				limit = {
					FROM = {
						OR = {
							tag = AUS
							tag = GER
						}
					}
				}
				NOT = { has_completed_focus = LOM_golden_ambrosia }
			}
			if = {
				limit = {
					FROM = {
						OR = {
							tag = BPL
							tag = RUS
						}
					}
				}
				NOT = {
					has_completed_focus = LOM_work_with_nobility
					has_completed_focus = LOM_building_duchy
				}
			}
			NOT = {
				has_country_flag = { flag = LOM_considering_faction value > 0 }
			}
		}

		targets = { AUS GER BPL RUS }

		target_trigger = {
			FROM = {
				is_faction_leader = yes
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
			}
		}

		fire_only_once = yes

		cost = 0

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete LOM_join_faction target: [From.GetName]"
			set_country_flag = { flag = LOM_considering_faction days = 6 value = 1 }
			FROM = { ask_to_join_faction = yes }
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_country_flag = { flag = ITA_recent_peace days < 30 }
			}
			modifier = {
				factor = 0
				has_global_flag = { flag = second_weltkrieg_has_started days < 30 }
			}
			modifier = {
				factor = 0
				FROM = { tag = AUS }
				is_monarchy = yes
				country_exists = GER
			}
			modifier = {
				factor = 0
				FROM = { tag = GER }
				has_idea = ITA_austrian_influence
				NOT = { has_game_rule = { rule = ITA_forpol option = ITA_FORPOL_GER } }
			}
			modifier = {
				factor = 0
				FROM = { surrender_progress > 0.20 }
			}
			modifier = {
				factor = 0
				NOT = {
					date > 1938.1.1
					has_war = yes
				}
			}
			modifier = {
				factor = 0
				country_exists = SRI
				FROM = {
					has_war = yes
					NOT = {
						has_war_with = SRI
						has_war_with = AUS
					}
				}
			}
			modifier = {
				factor = 0
				FROM = { tag = RUS }
				SRI = {
					exists = yes
					NOT = { has_war_with = FROM }
				}
				country_exists = GER
			}
			modifier = {
				factor = 0
				OR = {
					AND = {
						FROM = { NOT = { tag = BPL } }
						has_game_rule = { rule = LOM_forpol option = LOM_FORPOL_BPL }
					}
					AND = {
						FROM = { NOT = { tag = AUS } }
						has_game_rule = { rule = LOM_forpol option = LOM_FORPOL_AUS }
					}
					AND = {
						FROM = { NOT = { tag = GER } }
						has_game_rule = { rule = LOM_forpol option = LOM_FORPOL_GER }
					}
					AND = {
						FROM = { NOT = { tag = RUS } }
						has_game_rule = { rule = LOM_forpol option = LOM_FORPOL_RUS }
					}
				}
			}
			modifier = {
				factor = 2
				FROM = { tag = AUS }
				is_monarchy = yes
				NOT = { has_idea = LOM_prussian_drill }
			}
			modifier = {
				factor = 2
				FROM = { tag = GER }
				has_idea = LOM_prussian_drill
			}
			modifier = {
				factor = 2
				FROM = { has_war_with = SRI }
			}
			modifier = {
				factor = 5
				FROM = { has_war_with = AUS }
				has_completed_focus = LOM_republican_cause
			}
		}
	}

	PAP_join_faction = {
		icon = generic_nationalism

		allowed = { tag = PAP }

		available = {
			italy_balance_has_broken = yes
			is_subject = no
			owns_state = 157
			owns_state = 764
			owns_state = 1005
			at_peace_or_same_enemies_as_FROM = yes
		}

		visible = {
			is_in_faction = no
			has_socialist_government = no
			FROM = {
				is_faction_leader = yes
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
			}
			NOT = { has_country_flag = { flag = PAP_considering_faction value > 0 } }
		}

		target_root_trigger = { is_in_faction = no }

		targets = { AUS GER ENT }

		target_trigger = {
			FROM = {
				is_faction_leader = yes
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
			}
		}

		fire_only_once = yes

		cost = 0

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete PAP_join_faction target: [From.GetName]"
			set_country_flag = { flag = PAP_considering_faction days = 6 value = 1 }
			FROM = { ask_to_join_faction = yes }
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_country_flag = { flag = ITA_recent_peace days < 30 }
			}
			modifier = {
				factor = 0
				has_global_flag = { flag = second_weltkrieg_has_started days < 30 }
			}
			modifier = {
				factor = 0
				FROM = { surrender_progress > 0.20 }
			}
			modifier = {
				factor = 0
				NOT = {
					date > 1938.1.1
					has_war = yes
				}
			}
			modifier = {
				factor = 0
				country_exists = SRI
				FROM = {
					has_war = yes
					NOT = { has_war_with = SRI }
				}
			}
			modifier = {
				factor = 2
				FROM = { has_war_with = SRI }
			}
		}
	}

	VNC_join_faction = {
		icon = generic_nationalism

		allowed = { tag = VNC }

		available = {
			italy_balance_has_broken = yes
			OR = {
				has_completed_focus = VNC_foreign
				has_completed_focus = VNC_stato_da_mar
			}
			at_peace_or_same_enemies_as_FROM = yes
			FROM = {
				OR = {
					has_war = no
					has_capitulated = no
				}
			}
		}

		visible = {
			is_in_faction = no
			is_subject = no
			has_socialist_government = no
			FROM = {
				is_faction_leader = yes
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
			}
			if = {
				limit = {
					FROM = { tag = AUS }
				}
				NOT = { has_completed_focus = VNC_stato_da_mar }
			}
			NOT = {
				has_country_flag = { flag = VNC_considering_faction value > 0 }
			}
		}

		target_root_trigger = {
			is_in_faction = no
			OR = {
				has_completed_focus = VNC_foreign
				has_completed_focus = VNC_stato_da_mar
			}
		}

		targets = { AUS GER ENT }

		target_trigger = {
			FROM = {
				is_faction_leader = yes
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
			}
		}

		fire_only_once = yes

		cost = 0

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete VNC_join_faction target: [From.GetName]"
			set_country_flag = { flag = VNC_considering_faction days = 6 value = 1 }
			FROM = { ask_to_join_faction = yes }
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_country_flag = { flag = ITA_recent_peace days < 30 }
			}
			modifier = {
				factor = 0
				has_global_flag = { flag = second_weltkrieg_has_started days < 30 }
			}
			modifier = {
				factor = 0
				FROM = { tag = AUS }
				has_authoritarian_government = yes
			}
			modifier = {
				factor = 0
				has_idea = ITA_austrian_influence
				OR = {
					AND = {
						FROM = { tag = GER }
						NOT = { has_game_rule = { rule = VNC_forpol option = VNC_FORPOL_GER } }
					}
					AND = {
						FROM = { tag = ENT }
						NOT = { has_game_rule = { rule = VNC_forpol option = VNC_FORPOL_ENT } }
					}
				}
			}
			modifier = {
				factor = 0
				FROM = { surrender_progress > 0.20 }
			}
			modifier = {
				factor = 0
				NOT = {
					date > 1938.1.1
					has_war = yes
				}
			}
			modifier = {
				factor = 0
				country_exists = SRI
				FROM = {
					has_war = yes
					NOT = {
						has_war_with = SRI
						has_war_with = AUS
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					AND = {
						NOT = { FROM = { tag = AUS } }
						has_game_rule = { rule = VNC_forpol option = VNC_FORPOL_AUS }
					}
					AND = {
						NOT = { FROM = { tag = GER } }
						has_game_rule = { rule = VNC_forpol option = VNC_FORPOL_GER }
					}
					AND = {
						NOT = { FROM = { tag = ENT } }
						has_game_rule = { rule = VNC_forpol option = VNC_FORPOL_ENT }
					}
				}
			}
			modifier = {
				factor = 2
				FROM = { tag = AUS }
				has_elected_government = yes
			}
			modifier = {
				factor = 0.5
				FROM = { tag = CAN }
				country_exists = SIC
				NOT = { SIC = { is_in_faction_with = CAN } }
				NOT = { has_game_rule = { rule = VNC_forpol option = VNC_FORPOL_ENT } }
			}
			modifier = {
				factor = 2
				FROM = { has_war_with = SRI }
			}
			modifier = {
				factor = 5
				FROM = { has_war_with = AUS }
				has_completed_focus = VNC_stato_da_mar
			}
		}
	}

	VNC_attack_austria = {
		icon = generic_prepare_civil_war
		allowed = { always = no }

		available = {
			NOT = { has_idea = ITA_austrian_influence }
			controls_all_owned_states = yes
			OR = {
				is_in_faction = no
				is_faction_leader = yes
			}
			NOT = { has_non_aggression_pact_with = FROM }
			NOT = { has_guaranteed = FROM }
		}

		cancel_trigger = {
			OR = {
				NOT = { can_declare_war_on = FROM }
				NOT = { FROM = { owns_state = 736 } } #Istria
				NOT = { 736 = { is_claimed_by = ROOT } } #Istria
				NOT = { owns_state = 759 } #Friuli
				is_subject = yes
				is_in_faction_but_not_leader = yes
				has_non_aggression_pact_with = FROM
				has_guaranteed = FROM
			}
		}

		visible = {
			can_declare_war_on = FROM
			736 = {
				is_claimed_by = ROOT
				is_owned_by = FROM
			}
			owns_state = 759
			is_subject = no
		}

		cost = 0
		days_remove = 25
		fire_only_once = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				AUS = { is_in_faction_with = GER }
			}
			modifier = {
				factor = 0
				AUS = {
					is_faction_leader = yes
					surrender_progress < 0.10
					NOT = {
						has_war_with = GER
						has_war_with = RUS
						has_war_with = HUN
						has_war_with = SER
						has_war_with = ROM
						has_war_with = POL
					}
				}
				NOT = {
					strength_ratio = { tag = AUS ratio > 0.75 }
				}
			}
			modifier = {
				factor = 5
				AUS = { has_war_with = HUN }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel VNC_attack_austria target: [From.GetName]"
			clear_decision_attack_AI = yes
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete VNC_attack_austria target: [From.GetName]"
			add_war_support = 0.10
			if = {
				limit = { gives_military_access_to = AUS }
				AUS = {
					diplomatic_relation = {
						country = ITA
						relation = military_access
						active = no
					}
				}
			}
			setup_decision_attack_AI = yes
			FROM = { incoming_war_notification_effect = yes }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove VNC_attack_austria target: [From.GetName]"
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = AUS
				type = annex_everything
			}
		}
	}

	ITA_join_reichspakt = {
		icon = generic_nationalism

		allowed = { tag = ITA }

		available = {
			italy_balance_has_broken = yes
			at_peace_or_same_enemies_as_FROM = yes
		}

		visible = {
			is_in_faction = no
			is_subject = no
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		targets = { GER }
		target_root_trigger = {
			NOT = { has_government = national_populist }
			OR = {
				NOT = { country_exists = AUS }
				AUS = { is_subject = yes }
				has_global_flag = AUS_treaty_of_budapest
			}
		}
		target_trigger = {
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		cost = 0
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_join_reichspakt target: [From.GetName]"
			FROM = { ask_to_join_faction = yes }
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_country_flag = { flag = ITA_recent_peace days < 30 }
			}
			modifier = {
				factor = 0
				has_global_flag = { flag = second_weltkrieg_has_started days < 30 }
			}
			modifier = {
				factor = 0
				FROM = { surrender_progress > 0.30 }
			}
			modifier = {
				factor = 0
				NOT = {
					date > 1938.1.1
					has_war_with = SRI
				}
			}
			modifier = {
				factor = 0
				country_exists = SRI
				FROM = {
					has_war = yes
					NOT = { has_war_with = SRI }
				}
			}
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = ITA_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = ITA_forpol option = ITA_FORPOL_GER } }
			}
			modifier = {
				factor = 2
				FROM = { has_war_with = SRI }
			}
		}
	}

	ITA_join_entente = {
		icon = generic_nationalism

		allowed = { tag = ITA }

		available = {
			italy_balance_has_broken = yes
			has_war_with = INT
			ENT = {
				has_war_with = INT
			}
			if = {
				limit = {
					country_exists = SRD
				}
				SRD = {
					has_dictatorship_government = yes
				}
			}
		}

		visible = {
			is_in_faction = no
			is_subject = no
			has_government = national_populist
			FROM = {
				is_faction_leader = yes
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
			}
			NOT = { has_country_flag = ITA_venice_will_rebel }
		}

		targets = { ENT }
		target_root_trigger = {
			has_government = national_populist
		}
		target_trigger = {
			FROM = {
				is_faction_leader = yes
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
			}
		}

		cost = 0
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_join_entente target: [From.GetName]"
			if = {
				limit = {
					country_exists = SRD
					SRD = {
						is_ally_with = ENT
					}
				}
				if = {
					limit = {
						is_monarchy = no
					}
					custom_effect_tooltip = ITA_will_offer_restoration_of_monarchy
				}
				SRD = { ask_to_join_faction = yes }
			}
			else = {
				if = {
					limit = {
						is_monarchy = no
					}
					custom_effect_tooltip = ITA_will_offer_restoration_of_monarchy_under_umberto
				}
				FROM = { ask_to_join_faction = yes }
			}
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				SRI = {
					exists = yes
					NOT = { has_war_with = FROM }
				}
			}
			modifier = {
				factor = 0
				has_country_flag = { flag = ITA_recent_peace days < 30 }
			}
			modifier = {
				factor = 0
				has_global_flag = { flag = second_weltkrieg_has_started days < 30 }
			}
			modifier = {
				factor = 0
				FROM = { surrender_progress > 0.30 }
			}
			modifier = {
				factor = 20
				FROM = { has_war_with = SRI }
			}
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = ITA_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = ITA_forpol option = ITA_FORPOL_ENT } }
			}
			modifier = {
				factor = 0
				NOT = {
					date > 1938.1.1
					has_war_with = SRI
				}
			}
		}
	}

	ITA_join_moscow_accord = {
		icon = generic_nationalism

		allowed = { tag = ITA }

		available = {
			italy_balance_has_broken = yes
			at_peace_or_same_enemies_as_FROM = yes
		}

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				OR = {
					AND = {
						has_war_with = ENT
						NOT = { FROM = { has_war_with = ENT } }
					}
					AND = {
						has_war_with = INT
						NOT = { FROM = { has_war_with = INT } }
					}
				}
			}
		}

		visible = {
			is_in_faction = no
			is_subject = no
			has_government = national_populist
			FROM = {
				is_faction_leader = yes
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
			}
			NOT = { has_country_flag = ITA_venice_will_rebel }
		}

		targets = { RUS }
		target_root_trigger = {
			has_government = national_populist
		}
		target_trigger = {
			FROM = {
				is_faction_leader = yes
				has_socialist_government = no
				NOT = { has_war_with = ROOT }
			}
		}

		cost = 0
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_join_moscow_accord target: [From.GetName]"
			FROM = { ask_to_join_faction = yes }
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				SRI = {
					exists = yes
					NOT = { has_war_with = FROM }
				}
				country_exists = GER #after Germany is dead, all bets are off
			}
			modifier = {
				factor = 0
				has_country_flag = { flag = ITA_recent_peace days < 30 }
			}
			modifier = {
				factor = 0
				has_global_flag = { flag = second_weltkrieg_has_started days < 30 }
			}
			modifier = {
				factor = 0
				FROM = { surrender_progress > 0.30 }
			}
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = ITA_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = ITA_forpol option = ITA_FORPOL_RUS } }
			}
			modifier = {
				factor = 20
				FROM = { has_war_with = SRI }
			}
		}
	}
}

ITA_resorgimento_decisions = {
	ITA_rally_supporters = {
		icon = generic_civil_support
		allowed = { tag = ITA }
		available = {
			has_capitulated = no
			SRI = {
				has_capitulated = no
				controls_state = 158
				controls_state = 162
			}
		}

		visible = {
			has_war_with = SRI
			NOT = { has_country_flag = ITA_rallied_supporters }
			SRI = {
				owns_state = 158
				owns_state = 162
			}
		}

		cancel_trigger = {
			OR = {
				has_capitulated = yes
				NOT = { has_war_with = SRI }
				NOT = {
					158 = { is_controlled_by = SRI }
					162 = { is_controlled_by = SRI }
				}
			}
		}

		fire_only_once = no
		cost = 100
		days_remove = 30
		priority = 5
		ai_will_do = { factor = 100 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ITA_rally_supporters"
			add_political_power = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ITA_rally_supporters"
			set_country_flag = ITA_rallied_supporters
			add_manpower = 30000
			add_equipment_to_stockpile = { type = infantry_equipment amount = 3000 }
			hidden_effect = {
				if = {
					limit = { has_template = "Partigiani" }
					delete_unit_template_and_units = { division_template = "Partigiani" disband = yes } #no cheating
				}
				if = {
					limit = { has_template = "Fanteria Partigiana" }
					delete_unit_template_and_units = { division_template = "Fanteria Partigiana" disband = yes } #no cheating
				}
			}
			division_template = {
				name = "Partigiani"
				division_names_group = ITA_MIL_01
				is_locked = yes
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
				}
				support = {
					recon = { x = 0 y = 0 }
				}
				template_counter = 68
			}
			division_template = {
				name = "Fanteria Partigiana"
				division_names_group = ITA_INF_01
				is_locked = yes
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
					infantry = { x = 2 y = 0 }
					infantry = { x = 2 y = 1 }
					infantry = { x = 2 y = 2 }
				}
				support = {
					recon = { x = 0 y = 0 }
				}
				template_counter = 92
			}
			158 = {
				create_unit = {
					division = "name = \"1i Partigiani Italiani\" division_template = \"Fanteria Partigiana\" start_experience_factor = 0.3"
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 11723
					owner = ITA
				}
			}
			162 = {
				create_unit = {
					division = "name = \"2i Partigiani Italiani\" division_template = \"Partigiani\" start_experience_factor = 0.3"
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 1616
					owner = ITA
				}
				create_unit = {
					division = "name = \"3i Partigiani Italiani\" division_template = \"Partigiani\" start_experience_factor = 0.3"
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 6946
					owner = ITA
				}
			}
			SRI = { country_event = ita.172 }
		}
	}

	SRI_rally_supporters = {
		icon = generic_civil_support
		allowed = { tag = SRI }
		available = {
			has_capitulated = no
			ITA = {
				has_capitulated = no
				controls_state = 159
				controls_state = 759
			}
		}

		visible = {
			has_war_with = ITA
			NOT = { has_country_flag = SRI_rallied_supporters }
			ITA = {
				owns_state = 159
				owns_state = 160
			}
		}

		cancel_trigger = {
			OR = {
				has_capitulated = yes
				NOT = { has_war_with = ITA }
				NOT = {
					159 = { is_controlled_by = ITA }
					759 = { is_controlled_by = ITA }
				}
			}
		}

		fire_only_once = no
		cost = 100
		days_remove = 30
		priority = 5

		ai_will_do = { factor = 100 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel SRI_rally_supporters"
			add_political_power = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SRI_rally_supporters"
			set_country_flag = SRI_rallied_supporters
			add_manpower = 60000
			add_equipment_to_stockpile = { type = infantry_equipment amount = 3000 }
			hidden_effect = {
				if = {
					limit = { has_template = "Partigiani" }
					delete_unit_template_and_units = { division_template = "Partigiani" disband = yes } #no cheating
				}
				if = {
					limit = { has_template = "Fanteria Partigiana" }
					delete_unit_template_and_units = { division_template = "Fanteria Partigiana" disband = yes } #no cheating
				}
			}
			division_template = {
				name = "Partigiani"
				division_names_group = SRI_GAR_01
				is_locked = yes
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
				}
				template_counter = 68
				support = {
					recon = { x = 0 y = 0 }
				}
			}
			division_template = {
				name = "Fanteria Partigiana"
				division_names_group = SRI_INF_01
				is_locked = yes
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
					infantry = { x = 2 y = 0 }
					infantry = { x = 2 y = 1 }
					infantry = { x = 2 y = 2 }
				}
				support = {
					recon = { x = 0 y = 0 }
				}
				template_counter = 92
			}
			159 = {
				create_unit = {
					division = "name = \"1i Partigiano Sindacalisti\" division_template = \"Fanteria Partigiana\" start_experience_factor = 0.3"
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 11587
					owner = SRI
				}
				create_unit = {
					division = "name = \"3i Partigiano Sindacalisti\" division_template = \"Partigiani\" start_experience_factor = 0.3"
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 11587
					owner = SRI
				}
			}
			759 = {
				create_unit = {
					division = "name = \"2i Partigiani Sindacalisti\" division_template = \"Partigiani\" start_experience_factor = 0.3"
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 6656
					owner = SRI
				}
			}
			ITA = { country_event = socitaly.126 }
		}
	}

	PAP_rally_faithful = {
		icon = generic_civil_support
		allowed = { tag = PAP }
		available = {
			has_capitulated = no
			SRI = {
				has_capitulated = no
				controls_state = 161
			}
		}

		visible = {
			has_war_with = SRI
			NOT = {
				has_country_flag = PAP_rallied_faithful
			}
			SRI = {
				owns_state = 161
				NOT = {
					has_idea = SRI_fmc_idea_1
					has_idea = SRI_fmc_idea_2
					has_idea = SRI_fmc_idea_3
				}
			}
		}

		cancel_trigger = {
			OR = {
				has_capitulated = yes
				NOT = { has_war_with = SRI }
				NOT = { 161 = { is_controlled_by = SRI } }
			}
		}

		fire_only_once = no
		cost = 50
		days_remove = 30
		priority = 5
		ai_will_do = { factor = 100 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel PAP_rally_faithful"
			add_political_power = 50
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove PAP_rally_faithful"
			set_country_flag = PAP_rallied_faithful
			add_manpower = 50000
			add_equipment_to_stockpile = { type = infantry_equipment amount = 2500 producer = PAP }
			hidden_effect = {
				if = {
					limit = { has_template = "Partigiani Cattolici" }
					delete_unit_template_and_units = { division_template = "Partigiani Cattolici" disband = yes } #no cheating
				}
				if = {
					limit = { has_template = "Fanteria Cattolica" }
					delete_unit_template_and_units = { division_template = "Fanteria Cattolica" disband = yes } #no cheating
				}
			}
			division_template = {
				name = "Partigiani Cattolici"
				division_names_group = ITA_MIL_01
				is_locked = yes
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
				}
				support = {
					recon = { x = 0 y = 0 }
				}
				template_counter = 92
			}
			division_template = {
				name = "Fanteria Cattolica"
				division_names_group = ITA_INF_01
				is_locked = yes
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
					infantry = { x = 2 y = 0 }
					infantry = { x = 2 y = 1 }
					infantry = { x = 2 y = 2 }
				}
				support = {
					recon = { x = 0 y = 0 }
				}
				template_counter = 92
			}
			161 = {
				create_unit = {
					division = "name = \"1a Fanteria Cattolica\" division_template = \"Fanteria Cattolica\" start_experience_factor = 0.3"
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 6985
					owner = PAP
				}
				create_unit = {
					division = "name = \"2i Partigiani Cattolici\" division_template = \"Partigiani Cattolici\" start_experience_factor = 0.3"
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 9924
					owner = PAP
				}
				create_unit = {
					division = "name = \"3i Partigiani Cattolici\" division_template = \"Partigiani Cattolici\" start_experience_factor = 0.3"
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 6985
					owner = PAP
				}
			}
			SRI = { country_event = papalstate.64 }
		}
	}

	SIC_never_surrender = {
		icon = generic_ignite_civil_war
		allowed = { tag = SIC }
		available = {
			surrender_progress > 0.40
		}

		visible = {
			has_war_with = SRI
			surrender_progress > 0.01
		}

		fire_only_once = yes
		cost = 0
		priority = 10

		ai_will_do = { factor = 100 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SIC_never_surrender"
			add_ideas = SIC_total_war
		}
	}

	SRI_attack_italy = {
		icon = generic_prepare_civil_war

		allowed = { tag = SRI }

		available = {
			has_completed_focus = SRI_risorgimento
		}

		visible = {
			can_declare_war_on = FROM
			is_subject = no
			FROM = {
				if = {
					limit = { tag = VNC }
					NOT = { ITA = { has_active_mission = ITA_war_with_venice1 } }
				}
			}
		}

		targets = { ITA SIC SRD PAP VNC EMI TUS LOM }

		target_trigger = {
			can_declare_war_on = FROM
			is_subject = no
		}

		cost = 0
		fire_only_once = no

		ai_will_do = {
			factor = 20
			modifier = {
				factor = 0
				country_is_in_dangerous_war = yes
			}
			modifier = {
				factor = 0
				FROM = { default_attack_AI_trigger = yes }
			}
			modifier = {
				factor = 0
				NOT = { has_global_flag = second_weltkrieg_has_started }
				FROM = {
					OR = {
						is_in_faction = yes
						AND = {
							is_subject = yes
							overlord = { is_italian_tag = no }
						}
						AND = {
							has_guarantor = yes
							any_of_scopes = {
								array = guarantor_array
								has_guaranteed = PREV
								is_italian_tag = no
							}
						}
					}
				}
			}
			modifier = {
				factor = 0
				FROM = { original_tag = SRD }
				any_neighbor_country = {
					is_italian_tag = yes
					has_capitulated = no
				}
			}
			modifier = {
				factor = 0
				NOT = { is_owner_neighbor_of = FROM }
				naval_strength_ratio = { tag = FROM ratio < 0.6 }
			}
			modifier = {
				factor = 5
				FROM = { original_tag = LOM }
			}
			modifier = {
				factor = 3
				FROM = { original_tag = VNC }
			}
			modifier = {
				factor = 3
				FROM = { original_tag = SIC }
			}
			modifier = {
				factor = 0.5
				FROM = { original_tag = PAP }
			}
			modifier = {
				factor = 0.5
				FROM = { original_tag = SRD }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRI_attack_italy target: [From.GetName]"
			add_war_support = 0.10
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
			italy_add_reunification_wars_threat = yes
		}
	}

	ITA_attack_SRI = {
		name = ITA_attack_italy
		icon = generic_prepare_civil_war

		allowed = { tag = ITA }

		available = {
			has_completed_focus = ITA_unification
		}

		visible = {
			can_declare_war_on = FROM
			is_subject = no
		}

		targets = { SRI }
		target_trigger = {
			can_declare_war_on = FROM
		}

		fire_only_once = no
		cost = 0
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				country_is_in_dangerous_war = yes
			}
			modifier = {
				factor = 0
				FROM = {
					has_civil_war = no #not fighting SIC/SRD
					default_attack_AI_trigger = yes
				}
			}
			modifier = {
				factor = 0
				NOT = { has_global_flag = second_weltkrieg_has_started }
				FROM = {
					OR = {
						is_in_faction = yes
						AND = {
							is_subject = yes
							overlord = { is_italian_tag = no }
						}
						AND = {
							has_guarantor = yes
							any_of_scopes = {
								array = guarantor_array
								has_guaranteed = PREV
								is_italian_tag = no
							}
						}
					}
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_attack_SRI target: [From.GetName]"
			add_war_support = 0.10
			if = {
				limit = { italy_balance_has_broken = no }
				custom_effect_tooltip = SRI_balance_explanation
			}
			set_country_flag = attacked_SRI_first
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
			italy_add_reunification_wars_threat = yes
		}
	}

	ITA_attack_italy = {
		icon = generic_prepare_civil_war
		allowed = { tag = ITA }

		available = {
			has_completed_focus = ITA_unification
			NOT = { country_exists = SRI }
			NOT = { has_non_aggression_pact_with = FROM }
			NOT = { has_guaranteed = FROM }
		}

		visible = {
			can_declare_war_on = FROM
			is_subject = no
			NOT = { FROM = { has_country_flag = ITA_considering_invite_@FROM } } # ROOT cannot attack FROM if it is trying to invite it
		}

		targets = { SIC SRD PAP VNC EMI TUS LOM }
		target_trigger = {
			can_declare_war_on = FROM
			NOT = { FROM = { has_country_flag = ITA_considering_invite_@FROM } } # ROOT cannot attack FROM if it is trying to invite it
		}

		fire_only_once = no
		cost = 0
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				country_is_in_dangerous_war = yes
			}
			modifier = {
				factor = 0
				FROM = { default_attack_AI_trigger = yes }
			}
			modifier = {
				factor = 0
				FROM = { dont_start_major_faction_wars = yes }
			}
			modifier = {
				factor = 0
				OR = {
					has_country_flag = { flag = ITA_currently_inviting value > 0 }	# ROOT will not attack anyone if it is currently inviting someone
					has_country_flag = ITA_considering_invite_@ROOT					# ROOT will not attack anyone if it is currently being invited
				}
			}
			modifier = {
				factor = 0
				# should be asking them to join peacefully first
				has_democratic_government = yes
				owns_state = 160 #Venice
				if = {
					limit = { SRD = { owns_state = 158 } }
					OR = {
						162 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Tuscany
						1004 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Emilia
					}
				}
				else = {
					count_triggers = {
						amount = 2
						158 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Piedmont
						1004 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Emilia
						162 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Tuscany
					}
				}
				FROM = {
					OR = {
						is_subject = no
						AND = {
							is_subject = yes
							overlord = { is_italian_tag = yes }
						}
					}
					has_socialist_government = no
					OR = {
						is_in_faction = no
						is_in_faction_with = ROOT
						is_faction_leader = no
					}
					NOT = { has_country_flag = ITA_refuse_join_@ROOT }
				}
			}
			modifier = {
				factor = 0
				NOT = { has_global_flag = second_weltkrieg_has_started }
				FROM = {
					OR = {
						is_in_faction = yes
						AND = {
							is_subject = yes
							overlord = { is_italian_tag = no }
						}
						AND = {
							has_guarantor = yes
							any_of_scopes = {
								array = guarantor_array
								has_guaranteed = PREV
								is_italian_tag = no
							}
						}
					}
				}
			}
			modifier = {
				factor = 0
				FROM = { original_tag = SRD }
				any_neighbor_country = {
					is_italian_tag = yes
					has_capitulated = no
				}
			}
			modifier = {
				factor = 0
				NOT = { is_owner_neighbor_of = FROM }
				naval_strength_ratio = { tag = FROM ratio < 0.6 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_attack_italy target: [From.GetName]"
			add_war_support = 0.10
			if = {
				limit = { italy_balance_has_broken = no }
				custom_effect_tooltip = SRI_balance_explanation
			}
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
			italy_add_reunification_wars_threat = yes
		}
	}

	ITA_invite_into_federation = {
		icon = italy_flag

		allowed = { tag = ITA }

		available = {
			is_subject = no
			owns_state = 160 #Venice
			if = {
				limit = { SRD = { owns_state = 158 } } #Piedmont
				OR = {
					owns_state = 162 #Tuscany
					owns_state = 1004 #Emilia
				}
			}
			else = {
				count_triggers = {
					amount = 2
					2 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Latium
					158 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Piedmont
					162 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Tuscany
					1004 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Emilia
				}
			}
			custom_trigger_tooltip = {
				tooltip = ITA_busy_inviting
				NOT = { has_country_flag = { flag = ITA_currently_inviting value > 0 } }
			}
			controls_all_owned_states = yes
			strength_ratio = { tag = FROM ratio > 1 }
			ic_ratio = { tag = FROM ratio > 1 }
			FROM = {
				if = {
					limit = { has_country_flag = ITA_ask_after_war_@ROOT }
					has_war = no
				}
				else = {
					controls_all_owned_states = yes
				}
				NOT = { has_wargoal_against = ROOT }
				NOT = { is_justifying_wargoal_against = ROOT }
			}
		}

		visible = {
			NOT = { country_exists = SRI }
			FROM = {
				exists = yes
				is_subject = no
				NOT = {
					has_country_flag = ITA_refuse_join_@ROOT
					has_country_flag = { flag = ITA_considering_invite_@FROM value > 0 }	# ROOT cannot invite FROM if it is doing so already
					has_war_with_italian_tag = yes
				}
			}
		}

		target_root_trigger = {
			NOT = { country_exists = SRI }
		}

		targets = { SRD SIC PAP VNC EMI TUS LOM }
		target_trigger = {
			FROM = {
				is_subject = no
				NOT = {
					has_country_flag = ITA_refuse_join_@ROOT
					has_war_with_italian_tag = yes
				}
			}
		}

		fire_only_once = no
		cost = 100

		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0.1
				NOT = { is_neighbor_of = FROM }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_invite_into_federation target: [From.GetName]"
			set_country_flag = { flag = ITA_currently_inviting days = 30 value = 1 }
			country_event = sic.109
			if = {
				limit = {
					tag = ITA
					has_government = national_populist
					is_monarchy = no
					FROM = {
						tag = SRD
					}
				}
				custom_effect_tooltip = ITA_will_offer_restoration_of_monarchy
			}
			FROM = {
				set_country_flag = { flag = ITA_considering_invite_@FROM days = 30 value = 1 }
				hidden_effect = {
					country_event = sic.110
				}
			}
		}
	}

	SRD_attack_italy = {
		icon = generic_prepare_civil_war

		allowed = { always = no }

		available = {
			NOT = { country_exists = SRI }
			NOT = { has_non_aggression_pact_with = FROM }
			NOT = { has_guaranteed = FROM }
		}

		visible = {
			can_declare_war_on = FROM
			NOT = { FROM = { has_country_flag = ITA_considering_invite_@FROM } } # ROOT will not attack anyone if it is currently inviting someone
			is_subject = no
		}

		target_trigger = {
			can_declare_war_on = FROM
			is_subject = no
		}

		cost = 0
		fire_only_once = no

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				country_is_in_dangerous_war = yes
			}
			modifier = {
				factor = 0
				FROM = { default_attack_AI_trigger = yes }
			}
			modifier = {
				factor = 0
				FROM = { dont_start_major_faction_wars = yes }
			}
			modifier = {
				factor = 0
				NOT = { has_global_flag = second_weltkrieg_has_started }
				FROM = {
					OR = {
						is_in_faction = yes
						AND = {
							is_subject = yes
							overlord = { is_italian_tag = no }
						}
						AND = {
							has_guarantor = yes
							any_of_scopes = {
								array = guarantor_array
								has_guaranteed = PREV
								is_italian_tag = no
							}
						}
					}
				}
			}
			modifier = {
				factor = 0
				FROM = { original_tag = SRD }
				any_neighbor_country = {
					is_italian_tag = yes
					has_capitulated = no
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_country_flag = { flag = ITA_currently_inviting value > 0 }	# ROOT will not attack anyone if it is currently inviting someone
					has_country_flag = ITA_considering_invite_@ROOT					# ROOT will not attack anyone if it is currently being invited
				}
			}
			modifier = {
				factor = 0
				# should be asking them to join peacefully
				has_country_flag = SIC_confed
				FROM = {
					is_subject = no
					has_socialist_government = no
					OR = {
						is_in_faction = no
						is_in_faction_with = ROOT
						is_faction_leader = no
					}
					NOT = { has_country_flag = ITA_refuse_join_@ROOT }
				}
			}
			modifier = {
				factor = 0
				has_cosmetic_tag = SRD_ITA
				owns_state = 838 #Liguria
				if = {
					limit = { ITA = { owns_state = 159 } }
					OR = {
						owns_state = 162 #Tuscany
						owns_state = 1004 #Emilia
					}
				}
				else = {
					count_triggers = {
						amount = 2
						159 = { is_owned_and_controlled_by_ROOT_or_subject = yes }
						160 = { is_owned_and_controlled_by_ROOT_or_subject = yes }
						1004 = { is_owned_and_controlled_by_ROOT_or_subject = yes }
						162 = { is_owned_and_controlled_by_ROOT_or_subject = yes }
					}
				}
				FROM = {
					is_subject = no
					has_socialist_government = no
					OR = {
						is_in_faction = no
						is_in_faction_with = ROOT
						is_faction_leader = no
					}
					NOT = { has_country_flag = ITA_refuse_join_@ROOT }
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRD_attack_italy target: [From.GetName]"
			add_war_support = 0.10
			if = {
				limit = { is_in_faction_with = FROM }
				leave_faction = yes
			}
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
			italy_add_reunification_wars_threat = yes
		}
	}

	PAP_attack_sri = {
		icon = generic_prepare_civil_war
		allowed = { always = no }

		available = {
			has_completed_focus = PAP_renewed_impetus
			NOT = { has_non_aggression_pact_with = FROM }
			NOT = { has_guaranteed = FROM }
		}

		visible = {
			has_government = national_populist
			can_declare_war_on = FROM
			is_subject = no
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				is_in_faction = yes
				is_faction_leader = no
			}
			modifier = {
				factor = 0
				country_is_in_dangerous_war = yes
			}
			modifier = {
				factor = 0
				FROM = { default_attack_AI_trigger = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete PAP_attack_sri target: [From.GetName]"
			add_war_support = 0.10
			if = {
				limit = { italy_balance_has_broken = no }
				custom_effect_tooltip = SRI_balance_explanation
			}
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
			italy_add_reunification_wars_threat = yes
		}
	}

	ITA_unite_italy = {
		icon = italy_flag
		allowed = { tag = ITA }
		available = {
			2 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Latium
			117 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Campania
			158 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Piedmont
			159 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Lombardy
			160 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Venice
			161 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Romagna
			162 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Tuscany
			OR = {
				NOT = { country_exists = SRI }
				SRI = { has_capitulated = yes }
			}
		}
		fire_only_once = yes
		cost = 0
		ai_will_do = { factor = 100 }
		priority = 100
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_unite_italy target: [From.GetName]"
			if = {
				limit = { has_government = national_populist }
				log = "KR_Event_Logging;ANI Italy UNIFIES ITALY;[GetDateText]"
			}
			else = {
				log = "KR_Event_Logging;Italian Republic/Federation UNIFIES ITALY;[GetDateText]"
			}
			FROM = { italy_break_balance = yes }
			set_country_flag = ITA_united_italia
			add_political_power = 250
			if = {
				limit = { owns_state = 2 }
				set_capital = { state = 2 remember_old_capital = no }
			}
			hidden_effect = {
				news_event = worldnews.218
				country_event = { id = ita.60 days = 5 random_days = 5 }
				SWI = { country_event = { id = swiss.211 days = 4 random_days = 8 } } #Campione
				if = {
					limit = {
						ROM = { has_country_flag = ROM_cantacuzino_in_ani }
						has_country_flag = ROM_romanian_volunteers
					}
					country_event = { id = romania.55 days = 14 } #Volunteers leave
				}
			}
		}
	}

	SRI_unite_italia = {
		icon = italy_flag
		allowed = { original_tag = SRI }
		available = {
			2 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Latium
			117 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Campania
			158 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Piedmont
			159 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Lombardy
			160 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Venice
			161 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Romagna
			162 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Tuscany
			OR = {
				NOT = { country_exists = ITA }
				ITA = { has_capitulated = yes }
			}
			OR = {
				NOT = { country_exists = SIC }
				SIC = { has_capitulated = yes }
			}
		}
		visible = {
			has_socialist_government = yes
		}
		fire_only_once = yes
		cost = 0
		ai_will_do = { factor = 100 }
		priority = 100
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRI_unite_italia target: [From.GetName]"
			if = {
				limit = { italy_balance_has_broken = no }
				log = "KR_Event_Logging;Socialist Republic of Italy, on its own UNIFIES ITALY;[GetDateText]"
			}
			else = {
				log = "KR_Event_Logging;Socialist Republic of Italy, with INT aid UNIFIES ITALY;[GetDateText]"
			}
			FROM = { italy_break_balance = yes }
			add_political_power = 250
			if = {
				limit = { owns_state = 2 }
				set_capital = { state = 2 remember_old_capital = no }
			}
			set_country_flag = SRI_italy_unified_flag
			country_event = socitaly.40
			hidden_effect = {
				set_cosmetic_tag = SRI_italy
				news_event = { id = worldnews.219 days = 1 }
				SWI = { country_event = { id = swiss.211 days = 4 random_days = 8 } } #Campione
				country_event = { id = socitaly.77 days = 30 random_days = 270 }
				country_event = { id = socitaly.22 days = 30 random_days = 60 }
				country_event = { id = socitaly.86 days = 30 random_days = 30 }
				ROM = {
					if = {
						limit = { has_country_flag = ROM_cantacuzino_in_ani }
						country_event = { id = romania.53 days = 14 } #Volunteers return
					}
				}
			}
		}
	}

	SRD_invite_into_kingdom = {
		icon = italy_flag

		allowed = { original_tag = SRD }

		available = {
			is_subject = no
			if = {
				limit = { ITA = { owns_state = 159 } } #Lombardy
				OR = {
					owns_state = 162 #Tuscany
					owns_state = 1004 #Emilia
				}
			}
			else = {
				count_triggers = {
					amount = 2
					159 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Lombardy
					160 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Venetia
					162 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Tuscany
					1004 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Emilia
				}
			}
			custom_trigger_tooltip = {
				tooltip = ITA_busy_inviting
				NOT = { has_country_flag = { flag = ITA_currently_inviting value > 0 } }
			}
			controls_all_owned_states = yes
			strength_ratio = { tag = FROM ratio > 1 }
			ic_ratio = { tag = FROM ratio > 1 }
			FROM = {
				if = {
					limit = { has_country_flag = ITA_ask_after_war_@ROOT }
					has_war = no
				}
				else = {
					controls_all_owned_states = yes
				}
				NOT = { has_wargoal_against = ROOT }
				NOT = { is_justifying_wargoal_against = ROOT }
			}
		}

		visible = {
			is_subject = no
			FROM = {
				is_subject = no
				NOT = {
					has_country_flag = ITA_refuse_join_@ROOT
					has_country_flag = { flag = ITA_considering_invite_@FROM value > 0 }	# ROOT cannot invite FROM if it is doing so already
					has_war_with_italian_tag = yes
				}
			}
		}

		cost = 100
		fire_only_once = no

		targets = { ITA SIC PAP VNC EMI TUS LOM }
		target_root_trigger = {
			OR = {
				owns_state = 158 #Piedmont
				owns_state = 838 #Liguria
			}
			NOT = { country_exists = SRI }
		}
		target_trigger = {
			is_subject = no
			FROM = {
				is_subject = no
				NOT = {
					has_country_flag = ITA_refuse_join_@ROOT
					has_country_flag = { flag = ITA_considering_invite_@FROM value > 0 }	# ROOT cannot invite FROM if it is doing so already
					has_war_with_italian_tag = yes
				}
			}
		}

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0.1
				NOT = { is_neighbor_of = FROM }
			}
			modifier = {
				factor = 0.1
				OR = {
					tag = ITA
					tag = SIC
					tag = SRD
					tag = PAP
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRD_invite_into_kingdom target: [From.GetName]"
			set_country_flag = { flag = ITA_currently_inviting days = 30 value = 1 }
			country_event = sic.109
			FROM = {
				set_country_flag = { flag = ITA_considering_invite_@FROM days = 30 value = 1 }
				hidden_effect = {
					country_event = sic.110
				}
			}
		}
	}

	SIC_declare_italian_empire = {
		icon = italy_flag

		allowed = { always = no }

		available = {
			2 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Latium
			117 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Campania
			158 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Piedmont
			159 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Lombardy
			160 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Venice
			161 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Romagna
			162 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Tuscany
			OR = {
				NOT = { country_exists = SRI }
				SRI = { has_capitulated = yes }
			}
			OR = {
				NOT = { country_exists = ITA }
				ITA = { has_capitulated = yes }
			}
		}

		fire_only_once = yes
		cost = 0
		priority = 5
		ai_will_do = {
			factor = 80
			modifier = {
				factor = 0
				any_subject_country = {
					is_ai = no
					is_italian_tag = yes
				}
				NOT = { has_game_rule = { rule = SIC_unified option = SIC_UNIFIED_EMPIRE } }
			}
			modifier = {
				factor = 0
				has_game_rule = { rule = SIC_unified option = SIC_UNIFIED_CONFED }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SIC_declare_italian_empire target: [From.GetName]"
			log = "KR_Event_Logging;Two Sicilies UNIFIES ITALY;[GetDateText]"
			FROM = { italy_break_balance = yes }
			set_country_flag = SIC_empire
			set_country_flag = italian_unifier
			hidden_effect = {
				SIC_unlock_italian_annexations = yes
				remove_targeted_decision = { target = THIS decision = SIC_form_italian_confed }
				italy_enable_integration = yes
			}
			set_cosmetic_tag = SIC_ITA
			custom_effect_tooltip = SIC_may_now_acquire_cores
			effect_tooltip = {
				every_state = {
					limit = {
						is_european_italy = yes
						owner = {
							is_italian_tag = yes
							is_subject_of = ROOT
						}
					}
					hidden_effect = { remove_claim_by = SIC }
					add_core_of = SIC
				}
				every_state = {
					limit = {
						is_european_italy = yes
						owner = {
							is_italian_tag = yes
							is_subject_of = ROOT
						}
					}
					hidden_effect = { remove_claim_by = SIC }
					add_core_of = SIC
				}
			}
			hidden_effect = {
				every_state = {
					limit = { is_european_italy = yes }
					if = {
						limit = {
							owner = {
								is_italian_tag = yes
								is_subject_of = ROOT
							}
						}
						hidden_effect = { remove_claim_by = SIC }
						add_core_of = SIC
					}
					else_if = {
						limit = { NOT = { is_core_of = SIC } }
						add_claim_by = SIC
					}
				}
			}
			every_subject_country = {
				limit = { is_italian_tag = yes }
				Italy_general_transfer_effect = yes
				ROOT = { annex_country = { target = PREV transfer_troops = yes } }
			}
			hidden_effect = {
				news_event = worldnews.221
				SWI = { country_event = { id = swiss.211 days = 4 random_days = 8 } } #Campione
				ROM = {
					if = {
						limit = { has_country_flag = ROM_cantacuzino_in_ani }
						country_event = { id = romania.53 days = 14 } #Volunteers return
					}
				}
			}
			hidden_effect = {
				activate_targeted_decision = { target = ITA decision = SIC_invite_into_empire }
				activate_targeted_decision = { target = SRD decision = SIC_invite_into_empire }
				activate_targeted_decision = { target = PAP decision = SIC_invite_into_empire }
				activate_targeted_decision = { target = VNC decision = SIC_invite_into_empire }
				activate_targeted_decision = { target = EMI decision = SIC_invite_into_empire }
				activate_targeted_decision = { target = TUS decision = SIC_invite_into_empire }
				activate_targeted_decision = { target = LOM decision = SIC_invite_into_empire }
			}
		}
	}

	SIC_invite_into_empire = {
		icon = italy_flag

		allowed = { always = no }

		available = {
			is_subject = no
			custom_trigger_tooltip = {
				tooltip = ITA_busy_inviting
				NOT = { has_country_flag = { flag = ITA_currently_inviting value > 0 } }
			}
			controls_all_owned_states = yes
			strength_ratio = { tag = FROM ratio > 1 }
			ic_ratio = { tag = FROM ratio > 1 }
			FROM = {
				if = {
					limit = { has_country_flag = ITA_ask_after_war_@ROOT }
					has_war = no
				}
				else = {
					controls_all_owned_states = yes
				}
				NOT = { has_wargoal_against = ROOT }
				NOT = { is_justifying_wargoal_against = ROOT }
			}
		}

		visible = {
			NOT = { country_exists = SRI }
			FROM = {
				exists = yes
				is_subject = no
				NOT = {
					has_country_flag = ITA_refuse_join_@ROOT
					has_country_flag = { flag = ITA_considering_invite_@FROM value > 0 }	# ROOT cannot invite FROM if it is doing so already
					has_war_with_italian_tag = yes
				}
			}
		}

		fire_only_once = no
		cost = 100

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0.1
				NOT = { is_neighbor_of = FROM }
			}
			modifier = {
				factor = 0.1
				OR = {
					tag = ITA
					tag = SIC
					tag = SRD
					tag = PAP
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SIC_invite_into_empire target: [From.GetName]"
			set_country_flag = { flag = ITA_currently_inviting days = 30 value = 1 }
			country_event = sic.109
			FROM = {
				set_country_flag = { flag = ITA_considering_invite_@FROM days = 30 value = 1 }
				hidden_effect = {
					country_event = sic.110
				}
			}
		}
	}

	SIC_form_italian_confed = {
		icon = italy_flag

		allowed = { always = no }

		available = {
			2 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Latium
			117 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Campania
			158 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Piedmont
			159 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Lombardy
			160 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Venice
			161 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Romagna
			162 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Tuscany
			OR = {
				NOT = { country_exists = SRI }
				SRI = { has_capitulated = yes }
			}
			OR = {
				NOT = { country_exists = ITA }
				ITA = { has_capitulated = yes }
			}
		}

		visible = {
			is_subject = no
		}

		fire_only_once = yes
		cost = 0
		priority = 5
		ai_will_do = {
			factor = 20
			modifier = {
				factor = 0
				has_game_rule = { rule = SIC_unified option = SIC_UNIFIED_EMPIRE }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SIC_form_italian_confed target: [From.GetName]"
			if = {
				limit = { tag = SIC }
				log = "KR_Event_Logging;Two Sicilies UNIFIES ITALY;[GetDateText]"
			}
			if = {
				limit = { tag = SRD }
				log = "KR_Event_Logging;Sardinia UNIFIES ITALY;[GetDateText]"
			}
			FROM = { italy_break_balance = yes }
			set_country_flag = SIC_confed
			set_country_flag = italian_unifier
			hidden_effect = { remove_targeted_decision = { target = THIS decision = SIC_declare_italian_empire } }
			if = {
				limit = { tag = SIC }
				every_state = {
					limit = {
						is_european_italy = yes
						NOT = {
							state = 115 #Sicily
							state = 117 #Campania
							state = 156 #Calabria
							state = 742 #Abruzzo
							state = 837 #Apulia
						}
					}
					remove_claim_by = ROOT
					clear_variable = ambition_area_@ROOT
				}
				hidden_effect = {
					SIC_unlock_italian_annexations = yes
					activate_targeted_decision = { target = ITA decision = SIC_invite_into_confed }
					activate_targeted_decision = { target = SRD decision = SIC_invite_into_confed }
					activate_targeted_decision = { target = PAP decision = SIC_invite_into_confed }
					activate_targeted_decision = { target = VNC decision = SIC_invite_into_confed }
					activate_targeted_decision = { target = EMI decision = SIC_invite_into_confed }
					activate_targeted_decision = { target = TUS decision = SIC_invite_into_confed }
					activate_targeted_decision = { target = LOM decision = SIC_invite_into_confed }
				}
			}
			else_if = {
				limit = { tag = SRD }
				every_state = {
					limit = {
						is_european_italy = yes
						NOT = {
							state = 114 #Sardinia
							state = 1003 #Aosta Valley
							state = 158 #Piedmont
							state = 838 #Liguria
							state = 762 #Nice
							state = 735 #Savoy
							state = 943 #Upper Savoy
						}
					}
					remove_claim_by = ROOT
					clear_variable = ambition_area_@ROOT
				}
				hidden_effect = {
					activate_targeted_decision = { target = ITA decision = SIC_invite_into_confed }
					activate_targeted_decision = { target = SIC decision = SIC_invite_into_confed }
					activate_targeted_decision = { target = PAP decision = SIC_invite_into_confed }
					activate_targeted_decision = { target = VNC decision = SIC_invite_into_confed }
					activate_targeted_decision = { target = EMI decision = SIC_invite_into_confed }
					activate_targeted_decision = { target = TUS decision = SIC_invite_into_confed }
					activate_targeted_decision = { target = LOM decision = SIC_invite_into_confed }
				}
			}
			hidden_effect = {
				every_subject_country = {
					limit = { is_italian_tag = yes }
					get_current_government_type = yes
					ROOT = {
						set_autonomy = {
							target = PREV
							autonomy_state = federated_state
							end_wars = no
						}
					}
					restore_previous_government_type = yes
				}
			}
			recheck_annexations_immediate = yes
			if = {
				limit = { has_subject = PAP }
				every_owned_state = {
					limit = {
						OR = {
							state = 764 #Viterbo
							state = 1005 #Umbria
							state = 157 #Marches
							state = 161 #Romagna
						}
					}
					transfer_state_to = PAP
				}
			}
			if = {
				limit = {
					tag = SRD
					owns_state = 2
					NOT = { country_exists = PAP }
				}
				country_event = annex.1100
			}

			hidden_effect = {
				save_event_target_as = uniter
				news_event = { id = worldnews.222 days = 1 }
			}
		}
	}

	SIC_invite_into_confed = {
		icon = italy_flag

		allowed = { always = no }

		available = {
			is_subject = no
			custom_trigger_tooltip = {
				tooltip = ITA_busy_inviting
				NOT = { has_country_flag = { flag = ITA_currently_inviting value > 0 } }
			}
			controls_all_owned_states = yes
			strength_ratio = { tag = FROM ratio > 1 }
			ic_ratio = { tag = FROM ratio > 1 }
			FROM = {
				if = {
					limit = { has_country_flag = ITA_ask_after_war_@ROOT }
					has_war = no
				}
				else = {
					controls_all_owned_states = yes
				}
				NOT = { has_wargoal_against = ROOT }
				NOT = { is_justifying_wargoal_against = ROOT }
			}
		}

		visible = {
			NOT = { country_exists = SRI }
			if = {
				limit = { FROM = { tag = SRD } }
				OR = {
					NOT = { owns_state = 158 }
					NOT = { owns_state = 838 }
				}
			}
			FROM = {
				exists = yes
				is_subject = no
				NOT = {
					has_country_flag = ITA_refuse_join_@ROOT
					has_country_flag = { flag = ITA_considering_invite_@FROM value > 0 }	# ROOT cannot invite FROM if it is doing so already
					has_war_with_italian_tag = yes
				}
			}
		}

		fire_only_once = no
		cost = 100

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0.1
				NOT = { is_neighbor_of = FROM }
			}
			modifier = {
				factor = 0.1
				OR = {
					tag = ITA
					tag = SIC
					tag = SRD
					tag = PAP
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SIC_invite_into_confed target: [From.GetName]"
			set_country_flag = { flag = ITA_currently_inviting days = 30 value = 1 }
			country_event = sic.109
			FROM = {
				set_country_flag = { flag = ITA_considering_invite_@FROM days = 30 value = 1 }
				hidden_effect = {
					country_event = sic.110
				}
			}
		}
	}

	SIC_offer_piedmont_to_SRD = {
		icon = generic_agreement
		allowed = { tag = SIC }

		available = {
			controls_all_owned_states = yes
			FROM = {
				if = {
					limit = { has_country_flag = ITA_ask_after_war_@ROOT }
					has_war = no
				}
				else = {
					controls_all_owned_states = yes
				}
			}
		}

		visible = {
			158 = { #Piedmont
				is_owned_by = ROOT
				is_valid_annexation_state = yes
			}
			838 = { #Liguria
				is_owned_by = ROOT
				is_valid_annexation_state = yes
			}
			FROM = {
				exists = yes
				is_subject = no
				NOT = { has_war_with = ROOT }
				NOT = { has_country_flag = ITA_refuse_join_@ROOT }
			}
		}

		target_root_trigger = {
			NOT = { has_country_flag = SIC_empire }
		}

		targets = { SRD }
		target_trigger = {
			FROM = {
				is_subject = no
				NOT = { has_war_with = ROOT }
				NOT = { has_country_flag = ITA_refuse_join_@ROOT }
			}
		}

		cost = 0
		fire_only_once = no

		ai_will_do = { factor = 200 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SIC_offer_piedmont_to_SRD target: [From.GetName]"
			158 = { temporarily_disable_annexation = yes } #Piedmont
			838 = { temporarily_disable_annexation = yes } #Liguria
			SRD = { country_event = sic.100 }
		}
	}

	VNC_attack_italy = {
		icon = generic_prepare_civil_war
		allowed = { always = no }

		available = {
			if = {
				limit = { NOT = { FROM = { original_tag = SRI } } }
				NOT = { country_exists = SRI }
				NOT = { has_non_aggression_pact_with = FROM }
				NOT = { has_guaranteed = FROM }
			}
		}

		visible = {
			can_declare_war_on = FROM
			NOT = { FROM = { has_country_flag = ITA_considering_invite_@FROM } } # ROOT will not attack anyone if it is currently inviting someone
			is_subject = no
		}

		fire_only_once = no
		cost = 0

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					has_country_flag = { flag = ITA_currently_inviting value > 0 }	# ROOT will not attack anyone if it is currently inviting someone
					has_country_flag = ITA_considering_invite_@ROOT					# ROOT will not attack anyone if it is currently being invited
				}
			}
			modifier = {
				factor = 0
				country_is_in_dangerous_war = yes
			}
			modifier = {
				factor = 0
				FROM = {
					OR = {
						NOT = { original_tag = SRI }
						has_civil_war = no #not fighting SIC/SRD
					}
					default_attack_AI_trigger = yes
				}
			}
			modifier = {
				factor = 0
				FROM = { dont_start_major_faction_wars = yes }
			}
			modifier = {
				factor = 0
				# should be asking them to join peacefully first
				if = {
					limit = { SRD = { owns_state = 158 } }
					OR = {
						owns_state = 162 #Tuscany
						owns_state = 1004 #Emilia
					}
				}
				else = {
					count_triggers = {
						amount = 2
						158 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Piedmont
						1004 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Emilia
						162 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Tuscany
					}
				}
				FROM = {
					is_subject = no
					has_socialist_government = no
					OR = {
						is_in_faction = no
						is_in_faction_with = ROOT
						is_faction_leader = no
					}
					NOT = { has_country_flag = ITA_refuse_join_@ROOT }
				}
			}
			modifier = {
				factor = 0
				# don't attack if another italian tag can negotiate
				any_other_country = {
					count_triggers = {
						amount = 2
						158 = { #Piedmont
							owner = {
								controls_state = PREV
								OR = {
									tag = PREV.PREV
									is_subject_of = PREV.PREV
								}
							}
						}
						1004 = { #Emilia
							owner = {
								controls_state = PREV
								OR = {
									tag = PREV.PREV
									is_subject_of = PREV.PREV
								}
							}
						}
						162 = { #Tuscany
							owner = {
								controls_state = PREV
								OR = {
									tag = PREV.PREV
									is_subject_of = PREV.PREV
								}
							}
						}
					}
					is_italian_tag = yes
					is_subject = no
					has_socialist_government = no
					OR = {
						is_in_faction = no
						is_in_faction_with = ROOT
						is_faction_leader = no
					}
					ROOT = { NOT = { has_country_flag = ITA_refuse_join_@PREV } }
				}
			}
			modifier = {
				factor = 0
				NOT = { has_global_flag = second_weltkrieg_has_started }
				FROM = {
					OR = {
						is_in_faction = yes
						AND = {
							is_subject = yes
							overlord = { is_italian_tag = no }
						}
						AND = {
							has_guarantor = yes
							any_of_scopes = {
								array = guarantor_array
								has_guaranteed = PREV
								is_italian_tag = no
							}
						}
					}
				}
			}
			modifier = {
				factor = 0
				FROM = { original_tag = SRD }
				any_neighbor_country = {
					is_italian_tag = yes
					has_capitulated = no
				}
			}
			modifier = {
				factor = 0
				NOT = { is_owner_neighbor_of = FROM }
				naval_strength_ratio = { tag = FROM ratio < 0.6 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete VNC_attack_italy target: [From.GetName]"
			add_war_support = 0.10
			if = {
				limit = {
					italy_balance_has_broken = no
					FROM = { tag = SRI }
				}
				custom_effect_tooltip = SRI_balance_explanation
			}
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
			italy_add_reunification_wars_threat = yes
		}
	}

	VNC_unite_italy = {
		icon = italy_flag
		allowed = { always = no }
		available = {
			2 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Latium
			117 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Campania
			158 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Piedmont
			159 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Lombardy
			160 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Venice
			161 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Romagna
			162 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Tuscany
			OR = {
				NOT = { country_exists = SRI }
				SRI = { has_capitulated = yes }
			}
		}
		fire_only_once = yes
		cost = 0
		ai_will_do = { factor = 100 }
		priority = 100
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete VNC_unite_italy target: [From.GetName]"
			#log = "KR_Event_Logging;Italian Republic/Federation UNIFIES ITALY;[GetDateText]"
			FROM = { italy_break_balance = yes }
			set_country_flag = ITA_united_italia
			set_cosmetic_tag = VNC_ITA
			add_political_power = 200
			set_capital = { state = 2 remember_old_capital = no }
			every_subject_country = {
				limit = { is_italian_tag = yes }
				Italy_general_transfer_effect = yes
				ROOT = { annex_country = { target = PREV transfer_troops = yes } }
			}
			every_state = {
				limit = { is_european_italy = yes }
				if = {
					limit = {
						owner = {
							is_italian_tag = yes
							is_subject_of = ROOT
						}
					}
					hidden_effect = { remove_claim_by = ROOT }
					add_core_of = ROOT
				}
				else_if = {
					limit = { NOT = { is_core_of = ROOT } }
					add_claim_by = ROOT
				}
			}
			hidden_effect = {
				if = {
					limit = {
						OR = {
							has_country_flag = VNC_new_republic_is_established
							has_country_flag = VNC_old_republic_is_restored
						}
					}
					news_event = ita.202
				}
				country_event = { id = ita.60 days = 5 random_days = 5 }
				SWI = { country_event = { id = swiss.211 days = 4 random_days = 8 } } #Campione
				ROM = {
					if = {
						limit = { has_country_flag = ROM_cantacuzino_in_ani }
						country_event = { id = romania.53 days = 14 } #Volunteers return
					}
				}
			}
		}
	}

	LOM_unite_italy = {
		icon = italy_flag
		allowed = { always = no }
		available = {
			2 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Latium
			117 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Campania
			158 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Piedmont
			159 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Lombardy
			160 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Venice
			161 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Romagna
			162 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Tuscany
			OR = {
				NOT = { country_exists = SRI }
				SRI = { has_capitulated = yes }
			}
		}
		fire_only_once = yes
		cost = 0
		ai_will_do = { factor = 100 }
		priority = 100
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete LOM_unite_italy target: [From.GetName]"
			#log = "KR_Event_Logging;Italian Republic/Federation UNIFIES ITALY;[GetDateText]"
			FROM = { italy_break_balance = yes }
			set_country_flag = ITA_united_italia
			if = {
				limit = { is_monarchy = yes }
				if = {
					limit = { has_completed_focus = LOM_crown_king }
					set_cosmetic_tag = LOM_ITA_kingdom
				}
				else = {
					set_cosmetic_tag = LOM_ITA_federation
				}
			}
			else = {
				set_cosmetic_tag = LOM_ITA
			}
			add_political_power = 200
			set_capital = { state = 2 remember_old_capital = no }
			every_subject_country = {
				limit = { is_italian_tag = yes }
				Italy_general_transfer_effect = yes
				ROOT = { annex_country = { target = PREV transfer_troops = yes } }
			}
			every_state = {
				limit = { is_european_italy = yes }
				if = {
					limit = {
						owner = {
							is_italian_tag = yes
							is_subject_of = ROOT
						}
					}
					hidden_effect = { remove_claim_by = ROOT }
					add_core_of = ROOT
				}
				else_if = {
					limit = { NOT = { is_core_of = ROOT } }
					add_claim_by = ROOT
				}
			}
			hidden_effect = {
				if = {
					limit = { has_completed_focus = LOM_rule_of_law }
					news_event = ita.201
				}
				country_event = { id = ita.60 days = 5 random_days = 5 }
				SWI = { country_event = { id = swiss.211 days = 4 random_days = 8 } } #Campione
				ROM = {
					if = {
						limit = { has_country_flag = ROM_cantacuzino_in_ani }
						country_event = { id = romania.53 days = 14 } #Volunteers return
					}
				}
			}
		}
	}

	PAP_unite_italy = {
		icon = italy_flag
		allowed = { always = no }
		available = {
			2 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Latium
			117 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Campania
			158 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Piedmont
			159 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Lombardy
			160 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Venice
			161 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Romagna
			162 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Tuscany
			OR = {
				NOT = { country_exists = SRI }
				SRI = { has_capitulated = yes }
			}
		}
		fire_only_once = yes
		cost = 0
		ai_will_do = { factor = 100 }
		priority = 100
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete PAP_unite_italy target: [From.GetName]"
			#log = "KR_Event_Logging;Italian Republic/Federation UNIFIES ITALY;[GetDateText]"
			FROM = { italy_break_balance = yes }
			set_country_flag = ITA_united_italia
			set_cosmetic_tag = LOM_ITA_federation
			add_political_power = 200
			every_state = {
				limit = {
					is_european_italy = yes
					NOT = { state = 2 } #Latium
				}
				if = {
					limit = {
						owner = {
							is_italian_tag = yes
							is_subject_of = ROOT
						}
					}
					hidden_effect = { remove_claim_by = ROOT }
					add_core_of = ROOT
				}
				else_if = {
					limit = { NOT = { is_core_of = ROOT } }
					add_claim_by = ROOT
				}
			}
			every_subject_country = {
				limit = { is_italian_tag = yes }
				Italy_general_transfer_effect = yes
				ROOT = { annex_country = { target = PREV transfer_troops = yes } }
			}
			hidden_effect = {
				italy_enable_integration = yes
				set_country_flag = italian_unifier
				news_event = ita.200
				country_event = { id = ita.60 days = 5 random_days = 5 }
				SWI = { country_event = { id = swiss.211 days = 4 random_days = 8 } } #Campione
				ROM = {
					if = {
						limit = { has_country_flag = ROM_cantacuzino_in_ani }
						country_event = { id = romania.53 days = 14 } #Volunteers return
					}
				}
			}
		}
	}

	VNC_invite_into_federation = {
		icon = italy_flag

		allowed = { always = no }

		available = {
			is_subject = no
			if = {
				limit = { SRD = { owns_state = 158 } } #Piedmont
				OR = {
					owns_state = 162 #Tuscany
					owns_state = 1004 #Emilia
				}
			}
			else = {
				count_triggers = {
					amount = 2
					2 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Latium
					158 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Piedmont
					162 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Tuscany
					1004 = { is_owned_and_controlled_by_ROOT_or_subject = yes } #Emilia
				}
			}
			custom_trigger_tooltip = {
				tooltip = ITA_busy_inviting
				NOT = { has_country_flag = { flag = ITA_currently_inviting value > 0 } }
			}
			controls_all_owned_states = yes
			strength_ratio = { tag = FROM ratio > 1 }
			ic_ratio = { tag = FROM ratio > 1 }
			FROM = {
				if = {
					limit = { has_country_flag = ITA_ask_after_war_@ROOT }
					has_war = no
				}
				else = {
					controls_all_owned_states = yes
				}
				NOT = { has_wargoal_against = ROOT }
				NOT = { is_justifying_wargoal_against = ROOT }
			}
		}

		visible = {
			NOT = { country_exists = SRI }
			FROM = {
				exists = yes
				is_subject = no
				NOT = {
					has_country_flag = ITA_refuse_join_@ROOT
					has_country_flag = { flag = ITA_considering_invite_@FROM value > 0 }	# ROOT cannot invite FROM if it is doing so already
					has_war_with_italian_tag = yes
				}
			}
		}

		fire_only_once = no
		cost = 100

		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0.1
				NOT = { is_neighbor_of = FROM }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete VNC_invite_into_federation target: [From.GetName]"
			set_country_flag = { flag = ITA_currently_inviting days = 30 value = 1 }
			country_event = sic.109
			FROM = {
				set_country_flag = { flag = ITA_considering_invite_@FROM days = 30 value = 1 }
				hidden_effect = {
					country_event = sic.110
				}
			}
		}
	}

	# Irridentism
	PAP_claim_donation_of_pepin = {
		icon = GFX_decision_category_patriotic

		allowed = {
			original_tag = PAP
		}

		available = {
			has_capitulated = no
			OR = {
				has_completed_focus = PAP_renewed_impetus
				157 = { #Marches
					owner = {
						OR = {
							has_war_with = ROOT
							is_subject_of = ROOT
						}
					}
				}
				161 = { #Romagna
					owner = {
						OR = {
							has_war_with = ROOT
							is_subject_of = ROOT
						}
					}
				}
				1005 = { #Umbria
					owner = {
						OR = {
							has_war_with = ROOT
							is_subject_of = ROOT
						}
					}
				}
			}
		}
		visible = {
			OR = {
				157 = { #Marches
					NOT = { is_owned_by = ROOT }
					is_claim_or_core_of_ROOT = no
				}
				161 = { #Romagna
					NOT = { is_owned_by = ROOT }
					is_claim_or_core_of_ROOT = no
				}
				1005 = { #Umbria
					NOT = { is_owned_by = ROOT }
					is_claim_or_core_of_ROOT = no
				}
			}
		}

		cost = 100
		fire_only_once = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				is_ally_with = SIC
				OR = {
					157 = { is_claimed_by = SIC } #Marches
					161 = { is_claimed_by = SIC } #Romagna
					1005 = { is_claimed_by = SIC } #Umbria
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete PAP_claim_donation_of_pepin"
			add_war_support = 0.10
			157 = { italy_add_claim_and_transfer_if_owned_by_subject = yes } #Marches
			161 = { italy_add_claim_and_transfer_if_owned_by_subject = yes } #Romagna
			1005 = { italy_add_claim_and_transfer_if_owned_by_subject = yes } #Umbria
		}
	}

	ITA_claim_ticino = {
		icon = GFX_decision_category_patriotic

		allowed = {
			OR = {
				original_tag = ITA
				original_tag = SRI
				original_tag = SIC
				original_tag = SRD
				original_tag = LOM
				original_tag = PAP
				original_tag = VNC
			}
		}

		highlight_states = {
			highlight_state_targets = { state = 761 }
		}

		available = {
			surrender_progress < 0.05
			if = {
				limit = { has_country_flag = SIC_confed }
				LOM = {
					is_subject_of = ROOT
					has_autonomy_state = federated_state
				}
			}
			else = {
				OR = {
					158 = { is_claim_or_core_of_ROOT = yes }
					159 = { is_claim_or_core_of_ROOT = yes }
				}
			}
		}

		visible = {
			is_subject = no
			761 = { italy_can_claim_irredentist_state = yes }
		}

		cost = 75
		fire_only_once = no

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				761 = { italy_ally_has_claim_on_irredentist_state = yes }
			}
			modifier = {
				factor = 0
				761 = { italy_owner_of_state_is_non_puppet_ally = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_claim_ticino"
			set_temp_variable = { SIC_confed_target = LOM }
			761 = { italy_claim_irredentist_state_effect = yes }
		}
	}

	ITA_claim_nice = {
		icon = GFX_decision_category_patriotic

		allowed = {
			OR = {
				tag = ITA
				tag = SRI
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
			}
		}

		highlight_states = {
			highlight_state_targets = { state = 762 }
		}

		available = {
			surrender_progress < 0.05
			if = {
				limit = { has_country_flag = SIC_confed }
				SRD = {
					is_subject_of = ROOT
					has_autonomy_state = federated_state
				}
			}
			else = {
				OR = {
					838 = { is_claim_or_core_of_ROOT = yes }
					158 = { is_claim_or_core_of_ROOT = yes }
				}
			}
		}
		visible = {
			is_subject = no
			762 = { italy_can_claim_irredentist_state = yes }
		}

		cost = 50
		fire_only_once = no

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				762 = { italy_ally_has_claim_on_irredentist_state = yes }
			}
			modifier = {
				factor = 0
				762 = { italy_owner_of_state_is_non_puppet_ally = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_claim_nice"
			set_temp_variable = { SIC_confed_target = SRD }
			762 = { italy_claim_irredentist_state_effect = yes }
		}
	}

	ITA_claim_savoy = {
		icon = GFX_decision_category_patriotic

		allowed = {
			OR = {
				tag = ITA
				tag = SRI
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
			}
		}

		highlight_states = {
			highlight_state_targets = { state = 735 }
		}

		available = {
			surrender_progress < 0.05
			if = {
				limit = { has_country_flag = SIC_confed }
				SRD = {
					is_subject_of = ROOT
					has_autonomy_state = federated_state
				}
			}
			else = {
				158 = { is_claim_or_core_of_ROOT = yes }
			}
		}
		visible = {
			is_subject = no
			735 = { italy_can_claim_irredentist_state = yes }
		}

		cost = 50
		fire_only_once = no

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				735 = { italy_ally_has_claim_on_irredentist_state = yes }
			}
			modifier = {
				factor = 0
				735 = { italy_owner_of_state_is_non_puppet_ally = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_claim_savoy"
			set_temp_variable = { SIC_confed_target = SRD }
			735 = { italy_claim_irredentist_state_effect = yes }
		}
	}

	ITA_claim_upper_savoy = {
		icon = GFX_decision_category_patriotic

		allowed = {
			OR = {
				tag = ITA
				tag = SRI
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
			}
		}

		highlight_states = {
			highlight_state_targets = { state = 943 }
		}

		available = {
			surrender_progress < 0.05
			if = {
				limit = { has_country_flag = SIC_confed }
				SRD = {
					is_subject_of = ROOT
					has_autonomy_state = federated_state
					735 = { is_claim_or_core_of_PREV = yes } #Savoy
				}
			}
			else = {
				735 = { is_claim_or_core_of_ROOT = yes } #Savoy
			}
		}
		visible = {
			is_subject = no
			943 = { italy_can_claim_irredentist_state = yes }
		}

		cost = 50
		fire_only_once = no

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				943 = { italy_ally_has_claim_on_irredentist_state = yes }
			}
			modifier = {
				factor = 0
				943 = { italy_owner_of_state_is_non_puppet_ally = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_claim_upper_savoy"
			set_temp_variable = { SIC_confed_target = SRD }
			943 = { italy_claim_irredentist_state_effect = yes }
		}
	}

	ITA_claim_trentino = {
		icon = GFX_decision_category_patriotic

		allowed = {
			OR = {
				tag = ITA
				tag = SRI
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
			}
		}

		highlight_states = {
			highlight_state_targets = { state = 783 }
		}

		available = {
			surrender_progress < 0.05
			if = {
				limit = { has_country_flag = SIC_confed }
				OR = {
					LOM = {
						is_subject_of = ROOT
						has_autonomy_state = federated_state
					}
					VNC = {
						is_subject_of = ROOT
						has_autonomy_state = federated_state
					}
				}
			}
			else = {
				OR = {
					159 = { is_claim_or_core_of_ROOT = yes }
					160 = { is_claim_or_core_of_ROOT = yes }
				}
			}
		}
		visible = {
			is_subject = no
			783 = { italy_can_claim_irredentist_state = yes }
		}

		cost = 25
		fire_only_once = no

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				783 = {
					NOT = { owner = { is_ally_with = AUS } }
					italy_ally_has_claim_on_irredentist_state = yes
				}
			}
			modifier = {
				factor = 0
				783 = { italy_owner_of_state_is_non_puppet_ally = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_claim_trentino"
			if = {
				limit = {
					VNC = {
						is_subject_of = ROOT
						has_autonomy_state = federated_state
					}
				}
				set_temp_variable = { SIC_confed_target = VNC }
			}
			else = {
				set_temp_variable = { SIC_confed_target = LOM }
			}
			783 = { italy_claim_irredentist_state_effect = yes }
		}
	}

	ITA_claim_southern_tyrol = {
		icon = GFX_decision_category_patriotic

		allowed = {
			OR = {
				tag = ITA
				tag = SRI
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
			}
		}

		highlight_states = {
			highlight_state_targets = { state = 39 }
		}

		available = {
			surrender_progress < 0.05
			if = {
				limit = { has_country_flag = SIC_confed }
				OR = {
					LOM = {
						is_subject_of = ROOT
						has_autonomy_state = federated_state
					}
					VNC = {
						is_subject_of = ROOT
						has_autonomy_state = federated_state
					}
				}
			}
			else = {
				783 = { is_claim_or_core_of_ROOT = yes }
			}
		}
		visible = {
			is_subject = no
			39 = { italy_can_claim_irredentist_state = yes }
		}

		cost = 100
		fire_only_once = no

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				NOT = { has_government = national_populist }
			}
			modifier = {
				factor = 0
				39 = {
					NOT = { owner = { is_ally_with = AUS } }
					italy_ally_has_claim_on_irredentist_state = yes
				}
			}
			modifier = {
				factor = 0
				39 = { italy_owner_of_state_is_non_puppet_ally = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_claim_southern_tyrol"
			if = {
				limit = {
					VNC = {
						is_subject_of = ROOT
						has_autonomy_state = federated_state
					}
				}
				set_temp_variable = { SIC_confed_target = VNC }
			}
			else = {
				set_temp_variable = { SIC_confed_target = LOM }
			}
			39 = { italy_claim_irredentist_state_effect = yes }
		}
	}

	ITA_claim_trieste = {
		icon = GFX_decision_category_patriotic

		allowed = {
			OR = {
				tag = ITA
				tag = SRI
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
			}
		}

		highlight_states = {
			highlight_state_targets = { state = 488 }
		}

		available = {
			surrender_progress < 0.05
			if = {
				limit = { has_country_flag = SIC_confed }
				VNC = {
					is_subject_of = ROOT
					has_autonomy_state = federated_state
				}
			}
			else = {
				759 = { is_claim_or_core_of_ROOT = yes }
			}
		}
		visible = {
			is_subject = no
			488 = { is_claim_or_core_of_ROOT = no }
			OR = {
				has_completed_focus = VNC_stato_da_mar
				488 = { italy_can_claim_irredentist_state = yes }
			}
		}

		cost = 50
		fire_only_once = no

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				488 = {
					NOT = { owner = { is_ally_with = AUS } }
					italy_ally_has_claim_on_irredentist_state = yes
				}
			}
			modifier = {
				factor = 0
				488 = { italy_owner_of_state_is_non_puppet_ally = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_claim_trieste"
			set_temp_variable = { SIC_confed_target = VNC }
			488 = { italy_claim_irredentist_state_effect = yes }
		}
	}

	ITA_claim_istria = {
		icon = GFX_decision_category_patriotic

		allowed = {
			OR = {
				tag = ITA
				tag = SRI
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
			}
		}

		highlight_states = {
			highlight_state_targets = { state = 736 }
		}

		available = {
			surrender_progress < 0.05
			if = {
				limit = { has_country_flag = SIC_confed }
				VNC = {
					is_subject_of = ROOT
					has_autonomy_state = federated_state
				}
			}
			else = {
				488 = { is_claim_or_core_of_ROOT = yes }
			}
		}
		visible = {
			is_subject = no
			736 = { is_claim_or_core_of_ROOT = no }
			OR = {
				has_completed_focus = VNC_stato_da_mar
				736 = { italy_can_claim_irredentist_state = yes }
			}
		}

		cost = 50
		fire_only_once = no

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				736 = {
					NOT = { owner = { is_ally_with = AUS } }
					italy_ally_has_claim_on_irredentist_state = yes
				}
			}
			modifier = {
				factor = 0
				736 = { italy_owner_of_state_is_non_puppet_ally = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_claim_istria"
			set_temp_variable = { SIC_confed_target = VNC }
			736 = { italy_claim_irredentist_state_effect = yes }
		}
	}

	ITA_claim_gorizia = {
		icon = GFX_decision_category_patriotic

		allowed = {
			OR = {
				tag = ITA
				tag = SRI
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
			}
		}

		highlight_states = {
			highlight_state_targets = { state = 683 }
		}

		available = {
			surrender_progress < 0.05
			if = {
				limit = { has_country_flag = SIC_confed }
				VNC = {
					is_subject_of = ROOT
					has_autonomy_state = federated_state
				}
			}
			else = {
				488 = { is_claim_or_core_of_ROOT = yes }
			}
		}
		visible = {
			is_subject = no
			683 = { is_claim_or_core_of_ROOT = no }
			OR = {
				has_completed_focus = VNC_stato_da_mar
				683 = { italy_can_claim_irredentist_state = yes }
			}
		}

		cost = 50
		fire_only_once = no

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				683 = {
					NOT = { owner = { is_ally_with = AUS } }
					italy_ally_has_claim_on_irredentist_state = yes
				}
			}
			modifier = {
				factor = 0
				683 = { italy_owner_of_state_is_non_puppet_ally = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_claim_gorizia"
			set_temp_variable = { SIC_confed_target = VNC }
			683 = { italy_claim_irredentist_state_effect = yes }
		}
	}

	ITA_claim_dalmatia = {
		icon = GFX_decision_category_patriotic

		allowed = {
			OR = {
				tag = ITA
				tag = SRI
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
			}
		}

		highlight_states = {
			highlight_state_targets = { state = 163 }
		}

		available = {
			surrender_progress < 0.05
			if = {
				limit = { has_country_flag = SIC_confed }
				VNC = {
					is_subject_of = ROOT
					has_autonomy_state = federated_state
				}
			}
			else = {
				OR = {
					160 = { is_claim_or_core_of_ROOT = yes }
					736 = { is_claim_or_core_of_ROOT = yes }
				}
			}
		}
		visible = {
			is_subject = no
			163 = { is_claim_or_core_of_ROOT = no }
			OR = {
				has_completed_focus = VNC_stato_da_mar
				163 = { italy_can_claim_irredentist_state = yes }
			}
		}

		cost = 100
		fire_only_once = no

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				163 = { italy_ally_has_claim_on_irredentist_state = yes }
			}
			modifier = {
				factor = 0
				163 = { italy_owner_of_state_is_non_puppet_ally = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_claim_dalmatia"
			set_temp_variable = { SIC_confed_target = VNC }
			163 = { italy_claim_irredentist_state_effect = yes }
		}
	}

	ITA_claim_cattaro = {
		icon = GFX_decision_category_patriotic

		allowed = {
			OR = {
				tag = ITA
				tag = SRI
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
			}
		}

		highlight_states = {
			highlight_state_targets = { state = 841 }
		}

		available = {
			surrender_progress < 0.05
			if = {
				limit = { has_country_flag = SIC_confed }
				VNC = {
					is_subject_of = ROOT
					has_autonomy_state = federated_state
				}
			}
			else = {
				OR = {
					160 = { is_claim_or_core_of_ROOT = yes }
					163 = { is_claim_or_core_of_ROOT = yes }
				}
			}
		}
		visible = {
			is_subject = no
			841 = { is_claim_or_core_of_ROOT = no }
			OR = {
				has_completed_focus = VNC_stato_da_mar
				841 = { italy_can_claim_irredentist_state = yes }
			}
		}

		cost = 100
		fire_only_once = no

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				841 = { italy_ally_has_claim_on_irredentist_state = yes }
			}
			modifier = {
				factor = 0
				841 = { italy_owner_of_state_is_non_puppet_ally = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_claim_cattaro"
			set_temp_variable = { SIC_confed_target = VNC }
			841 = { italy_claim_irredentist_state_effect = yes }
		}
	}

	ITA_claim_fiume = {
		icon = GFX_decision_category_patriotic

		allowed = {
			OR = {
				tag = ITA
				tag = SRI
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
			}
		}

		highlight_states = {
			highlight_state_targets = { state = 103 }
		}

		available = {
			surrender_progress < 0.05
			if = {
				limit = { has_country_flag = SIC_confed }
				VNC = {
					is_subject_of = ROOT
					has_autonomy_state = federated_state
				}
			}
			else = {
				736 = { is_claim_or_core_of_ROOT = yes }
			}
		}

		visible = {
			is_subject = no
			103 = { is_claim_or_core_of_ROOT = no }
			OR = {
				has_completed_focus = VNC_stato_da_mar
				103 = { italy_can_claim_irredentist_state = yes }
			}
		}

		cost = 50
		fire_only_once = no

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				103 = { italy_ally_has_claim_on_irredentist_state = yes }
			}
			modifier = {
				factor = 0
				103 = { italy_owner_of_state_is_non_puppet_ally = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_claim_fiume"
			set_temp_variable = { SIC_confed_target = VNC }
			103 = { italy_claim_irredentist_state_effect = yes }
		}
	}

	ITA_claim_malta = {
		icon = GFX_decision_category_patriotic

		allowed = {
			OR = {
				tag = ITA
				tag = SRI
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
			}
		}

		highlight_states = {
			highlight_state_targets = { state = 116 }
		}

		available = {
			surrender_progress < 0.05
			115 = { is_claim_or_core_of_ROOT = yes }
		}
		visible = {
			is_subject = no
			116 = { italy_can_claim_irredentist_state = yes }
		}

		cost = 75
		fire_only_once = no

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				is_in_faction_with = ENT
			}
			modifier = {
				factor = 0
				116 = { italy_ally_has_claim_on_irredentist_state = yes }
			}
			modifier = {
				factor = 0
				116 = { italy_owner_of_state_is_non_puppet_ally = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_claim_malta"
			116 = { italy_claim_irredentist_state_effect = yes }
		}
	}

	ITA_claim_corsica = {
		icon = GFX_decision_category_patriotic

		allowed = {
			OR = {
				tag = ITA
				tag = SRI
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
			}
		}

		highlight_states = {
			highlight_state_targets = { state = 1 }
		}

		available = {
			surrender_progress < 0.05
			if = {
				limit = { has_country_flag = SIC_confed }
				SRD = {
					is_subject_of = ROOT
					has_autonomy_state = federated_state
				}
			}
			else = {
				OR = {
					114 = { is_claim_or_core_of_ROOT = yes }
					838 = { is_claim_or_core_of_ROOT = yes }
				}
			}
		}
		visible = {
			is_subject = no
			1 = { italy_can_claim_irredentist_state = yes }
		}

		cost = 75
		fire_only_once = no

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				1 = { italy_ally_has_claim_on_irredentist_state = yes }
			}
			modifier = {
				factor = 0
				1 = { italy_owner_of_state_is_non_puppet_ally = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_claim_corsica"
			set_temp_variable = { SIC_confed_target = SRD }
			1 = { italy_claim_irredentist_state_effect = yes }
		}
	}

	VNC_claim_adriatic = {
		icon = GFX_decision_category_patriotic

		allowed = { always = no }

		highlight_states = { highlight_state_targets = { state = FROM } }

		available = {
			if = {
				limit = { FROM = { italy_ally_has_claim_on_irredentist_state = yes } }
				has_war = no
			}
			else = {
				has_capitulated = no
			}
		}
		visible = {
			is_subject = no
			FROM = { is_claim_or_core_of_ROOT = no }
		}
		state_target = yes

		cost = 50
		fire_only_once = no

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				FROM = { italy_ally_has_claim_on_irredentist_state = yes }
			}
			modifier = {
				factor = 0
				FROM = { italy_owner_of_state_is_non_puppet_ally = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete VNC_claim_adriatic target: [From.GetName]"
			if = {
				limit = {
					FROM = {
						state = 183
						owner = {
							original_tag = CYP
							is_subject_of = ROOT
						}
					}
				}
				FROM = {
					add_claim_by = ROOT
					owner = { ROOT = { annex_country = { target = PREV transfer_troops = yes } } }
				}
			}
			else = {
				set_temp_variable = { italy_transfer_target = ROOT }
				FROM = {
					if = {
						limit = { is_claim_or_core_of_ROOT = no }
						add_claim_by = ROOT
					}
					if = {
						limit = { owner = { is_subject_of = ROOT } }
						hidden_effect = { owner = { country_event = { id = ita.170 hours = 2 } } }
						if = {
							limit = { is_fully_controlled_by = owner }
							transfer_state_to = var:italy_transfer_target
						}
						else = {
							set_state_owner_to = var:italy_transfer_target
							set_state_province_controller = {
								controller = var:italy_transfer_target
								limit = { NOT = { has_war_with = PREV.owner } }
							}
						}
					}
					else_if = {
						limit = { NOT = { is_owned_by = ROOT } }
						if = {
							limit = {
								owner = {
									OR = {
										FROM = { is_claim_or_core_of_PREV = yes }
										any_subject_country = { FROM = { is_claim_or_core_of_PREV = yes } }
										any_allied_country = { FROM = { is_claim_or_core_of_PREV = yes } }
									}
								}
							}
							owner = { country_event = { id = ita.170 hours = 2 } }
						}
						#if owned by ally, notify all members and leave faction
					}
				}
				if = {
					limit = {
						FROM = {
							NOT = {
								owner = { is_subject_of = ROOT }
								is_owned_by = ROOT
							}
						}
						is_in_faction = yes
						any_allied_country = {
							FROM = { is_claim_or_core_of_PREV = yes }
							NOT = { is_subject_of = ROOT }
						}
					}
					every_allied_country = {
						limit = {
							NOT = { is_subject_of = ROOT }
							NOT = { owns_state = FROM }
							OR = {
								FROM = { is_claim_or_core_of_PREV = yes }
								is_faction_leader = yes
							}
						}
						country_event = { id = ita.171 hours = 2 }
					}
					leave_faction = yes
				}
			}
		}
	}

	VNC_claim_albania = {
		icon = GFX_decision_category_patriotic

		allowed = { always = no }

		highlight_states = { highlight_state_targets = { state = 44 } }

		available = {
			OR = {
				has_subject = ALB
				owns_state = 44
			}
		}
		visible = { is_subject = no }

		cost = 100
		fire_only_once = yes

		ai_will_do = { factor = 100 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete VNC_claim_albania"
			ALB = { every_core_state = { add_claim_by = ROOT } }
			if = {
				limit = { has_subject = ALB }
				annex_country = { target = ALB transfer_troops = yes }
			}
		}
	}
}

ITA_occupation_decisions = {
	ITA_erode_italian_legitimacy = {
		icon = eng_propaganda_campaigns

		visible = {
			is_subject = no
			has_war_with = FROM
			OR = {
				tag = ITA
				tag = SRI
				tag = SIC
				tag = SRD
				tag = PAP
				tag = VNC
				tag = LOM
				is_in_faction_with = ITA
				is_in_faction_with = SRI
				is_in_faction_with = SIC
				is_in_faction_with = SRD
				is_in_faction_with = PAP
				is_in_faction_with = VNC
				is_in_faction_with = LOM
			}
			FROM = {
				is_government_in_exile = yes
				has_war_with = ROOT
				has_legitimacy > 20
				is_in_faction = yes
			}
			if = {
				limit = { is_italian_tag = yes }
				FROM = {
					any_owned_state = { is_controlled_by_ROOT_or_ally = yes }
				}
			}
			else = {
				FROM = {
					any_owned_state = { is_controlled_by = ROOT }
				}
			}
		}

		fire_only_once = no
		days_remove = 30
		cost = 25

		target_root_trigger = { has_war = yes }

		targets = { ITA SRI SIC SRD PAP VNC EMI TUS LOM }

		target_trigger = {
			FROM = {
				is_government_in_exile = yes
				has_war_with = ROOT
				has_legitimacy > 20
			}
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 20
				is_italian_tag = yes
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ITA_erode_italian_legitimacy target: [From.GetName]"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ITA_erode_italian_legitimacy target: [From.GetName]"
			if = {
				limit = { is_italian_tag = yes }
				FROM = {
					add_legitimacy = -30
					add_war_support = -0.15
				}
			}
			else = {
				FROM = {
					add_legitimacy = -15
					add_war_support = -0.05
				}
			}
		}
	}
}

prospect_for_resources = {
	SIC_develop_campania_steel_mines = {
		icon = steel

		allowed = { always = no } #activated in history/general/italy_decisions

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 2
			controls_state = FROM
		}

		visible = {
			owns_state = FROM
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60
		state_target = yes

		modifier = {
			civilian_factory_use = 3
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIC_develop_campania_steel_mines target: [From.GetName]"
			FROM = { set_state_flag = campania_steel_developed }
			add_resource = {
				type = steel
				amount = 12
				state = FROM
			}
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 3
				has_political_power > 200
			}
			modifier = {
				factor = 5
				has_resources_in_country = {
					resource = steel
					amount < 1
				}
			}
		}
	}

	SIC_develop_campania_aluminium_mines = {
		icon = aluminium

		allowed = { always = no } #activated in history/general/italy_decisions

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 2
			controls_state = FROM
		}

		visible = {
			owns_state = FROM
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60
		state_target = yes

		modifier = {
			civilian_factory_use = 3
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIC_develop_campania_aluminium_mines target: [From.GetName]"
			FROM = { set_state_flag = campania_aluminium_developed }
			add_resource = {
				type = aluminium
				amount = 20
				state = FROM
			}
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 3
				has_political_power > 200
			}
			modifier = {
				factor = 5
				has_resources_in_country = {
					resource = aluminium
					amount < 1
				}
			}
		}
	}

	SRD_develop_cagliari_coal_mines = {
		icon = steel

		allowed = { always = no } #activated in history/general/italy_decisions

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 2
			controls_state = FROM
		}

		visible = {
			owns_state = FROM
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60
		state_target = yes

		modifier = {
			civilian_factory_use = 3
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SRD_develop_cagliari_coal_mines target: [From.GetName]"
			set_global_flag = sardinia_coal_mines_developed
			add_resource = {
				type = steel
				amount = 12
				state = FROM
			}
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 3
				has_political_power > 200
			}
			modifier = {
				factor = 5
				has_resources_in_country = {
					resource = steel
					amount < 1
				}
			}
		}
	}

	LOM_develop_lombardy_coal_mines = {
		icon = steel

		allowed = { always = no } #activated in history/general/italy_decisions

		available = {
			has_tech = excavation3
			num_of_civilian_factories_available_for_projects > 1
			controls_state = FROM
		}

		visible = {
			owns_state = FROM
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60
		state_target = yes

		modifier = {
			civilian_factory_use = 2
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LOM_develop_lombardy_coal_mines target: [From.GetName]"
			FROM = { set_state_flag = lombardy_coal_mines_developed }
			add_resource = {
				type = steel
				amount = 8
				state = FROM
			}
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 3
				has_political_power > 200
			}
			modifier = {
				factor = 5
				has_resources_in_country = {
					resource = steel
					amount < 1
				}
			}
		}
	}

	TUS_develop_tuscany_coal_mines = {
		icon = steel

		allowed = { always = no } #activated in history/general/italy_decisions

		available = {
			has_tech = excavation3
			num_of_civilian_factories_available_for_projects > 1
			controls_state = FROM
		}

		visible = {
			owns_state = FROM
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60
		state_target = yes

		modifier = {
			civilian_factory_use = 2
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TUS_develop_tuscany_coal_mines target: [From.GetName]"
			FROM = { set_state_flag = tuscany_coal_mines_developed }
			add_resource = {
				type = steel
				amount = 8
				state = FROM
			}
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 3
				has_political_power > 200
			}
			modifier = {
				factor = 5
				has_resources_in_country = {
					resource = steel
					amount < 1
				}
			}
		}
	}

	PAP_clear_march = {
		icon = GFX_decision_generic_agriculture
		activation = { always = no }
		available = { hidden_trigger = { always = no } }
		allowed = { always = no }
		selectable_mission = no
		days_mission_timeout = 365
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout PAP_clear_march"
			hidden_effect = {
				set_country_flag = PAP_pontine_marshes_cleared
				remove_targeted_decision = { target = THIS decision = PAP_clear_march_quicker }
			}
			country_event = papalstate.6
			event_option_tooltip = papalstate.6.a
		}
	}

	PAP_clear_march_quicker = {
		icon = GFX_decision_generic_agriculture
		allowed = { always = no }
		fire_only_once = yes
		cost = 50
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete PAP_clear_march_quicker"
			add_days_mission_timeout = {
				mission = PAP_clear_march
				days = -180
			}
		}
	}
}

FRA_internationale_category = {
	INT_invite_SRI = {
		icon = generic_political_discourse

		available = {
			italy_balance_has_broken = yes
			set_temp_variable = { target = ROOT }
			OR = {
				has_global_flag = second_weltkrieg_has_started
				FROM = { at_peace_or_same_enemies_as_ROOT = yes }
			}
		}

		visible = {
			is_faction_leader = yes
			has_socialist_government = yes
			FROM = {
				has_socialist_government = yes
				is_in_faction = no
				is_subject = no
				has_capitulated = no
				NOT = { has_country_flag = SRI_refused_intl_membership }
			}
		}

		targets = { SRI }
		target_root_trigger = { is_faction_leader = yes }
		target_trigger = {
			FROM = {
				has_socialist_government = yes
				is_in_faction = no
				is_subject = no
				has_capitulated = no
				NOT = { has_country_flag = SRI_refused_intl_membership }
			}
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				SRI = { has_country_flag = { flag = ITA_recent_peace days < 30 } }
			}
			modifier = {
				factor = 0
				has_global_flag = { flag = second_weltkrieg_has_started days < 30 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete INT_invite_SRI target: [From.GetName]"
			FROM = {
				italy_break_balance = yes
				country_event = socitaly.128
			}
		}
	}
}

SRI_balance_of_power_category = {
	SRI_abuse_the_presidency_bop_decision = {
		icon = generic_political_address
		custom_cost_trigger = {
			has_stability > 0.05
		}
		custom_cost_text = stability5
		allowed = { always = no }
		days_re_enable = 180
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRI_abuse_the_presidency_bop_decision"
			hidden_effect = {
				add_stability = -0.05
			}
			add_power_balance_value = {
				id = SRI_power_balance
				value = 0.15
			}
		}
		ai_will_do = {
			factor = 0
			modifier = {
				add = 100
				OR = {
					AND = {
						OR = {
							has_game_rule = { rule = SRI_path option = SRI_PATH_SALVEMINI_RADSOC }
							has_game_rule = { rule = SRI_path option = SRI_PATH_LUSSU_RADSOC }
						}
						is_power_balance_in_range = { id = SRI_power_balance range < SRI_radsoc_side }
					}
					AND = {
						OR = {
							has_game_rule = { rule = SRI_path option = SRI_PATH_DE_AMBRIS_TOTALIST }
							has_game_rule = { rule = SRI_path option = SRI_PATH_MUSSOLINI_TOTALIST }
							has_game_rule = { rule = SRI_path option = SRI_PATH_TOGLIATTI_TOTALIST }
						}
						is_power_balance_in_range = { id = SRI_power_balance range < SRI_bop_totalist_in_control_side }
					}
				}
			}
		}
	}
	SRI_launch_strike_bop_decision = {
		icon = generic_political_rally
		custom_cost_trigger = {
			has_war_support > 0.10
		}
		custom_cost_text = war_support10
		allowed = { always = no }
		days_re_enable = 180
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRI_launch_strike_bop_decision"
			hidden_effect = {
				add_war_support = -0.10
			}
			add_power_balance_value = {
				id = SRI_power_balance
				value = -0.15
			}
		}
		ai_will_do = {
			factor = 0
			modifier = {
				add = 100
				OR = {
					AND = {
						OR = {
							has_game_rule = { rule = SRI_path option = SRI_PATH_SALVEMINI_RADSOC }
							has_game_rule = { rule = SRI_path option = SRI_PATH_LUSSU_RADSOC }
						}
						is_power_balance_in_range = { id = SRI_power_balance range > SRI_radsoc_side }
					}
					AND = {
						OR = {
							has_game_rule = { rule = SRI_path option = SRI_PATH_VITTORIO_SYNDIE }
							has_game_rule = { rule = SRI_path option = SRI_PATH_MESCHI_SYNDIE }
							has_game_rule = { rule = SRI_path option = SRI_PATH_NENNI_SYNDIE }
						}
						is_power_balance_in_range = { id = SRI_power_balance range > SRI_bop_syndie_in_control_side }
					}
				}
			}
		}
	}
	SRI_let_blackshirts_loose_bop_decision = {
		icon = eng_blackshirt_march
		custom_cost_text = SRI_CP_30_PP_10
		allowed = { always = no }
		ai_hint_pp_cost = 10
		custom_cost_trigger = {
			command_power > 29.99
			has_political_power > 9.99
		}
		available = {
			hidden_trigger = {
				NOT = {
					has_country_flag = doing_bonus_decision
				}
			}
		}
		days_remove = 180
		modifier = {
			stability_weekly = -0.001
			power_balance_weekly = 0.01
			weekly_manpower = 100
			army_core_defence_factor = 0.05
			army_core_attack_factor = 0.05
			army_org_regain = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRI_let_blackshirts_loose_bop_decision"
			set_country_flag = doing_bonus_decision
			hidden_effect = {
				add_command_power = -30
				add_political_power = -10
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SRI_let_blackshirts_loose_bop_decision"
			clr_country_flag = doing_bonus_decision
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SRI_path option = SRI_PATH_VITTORIO_SYNDIE }
					has_game_rule = { rule = SRI_path option = SRI_PATH_MESCHI_SYNDIE }
					has_game_rule = { rule = SRI_path option = SRI_PATH_NENNI_SYNDIE }
					AND = {
						OR = {
							has_game_rule = { rule = SRI_path option = SRI_PATH_SALVEMINI_RADSOC }
							has_game_rule = { rule = SRI_path option = SRI_PATH_LUSSU_RADSOC }
						}
						is_power_balance_in_range = { id = SRI_power_balance range > SRI_bop_syndie_in_control_side }
					}
				}
			}
		}
	}
	SRI_negotiate_with_factory_cooperatives = {
		cost = 20
		icon = eng_trade_unions_support
		allowed = { always = no }
		days_remove = 180
		available = {
			hidden_trigger = {
				NOT = {
					has_country_flag = doing_bonus_decision
				}
			}
		}
		modifier = {
			power_balance_weekly = -0.01
			war_support_weekly = -0.001
			production_factory_max_efficiency_factor = 0.1
			consumer_goods_factor = -0.15
			industrial_capacity_factory = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRI_negotiate_with_factory_cooperatives"
			set_country_flag = doing_bonus_decision
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SRI_negotiate_with_factory_cooperatives"
			clr_country_flag = doing_bonus_decision
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SRI_path option = SRI_PATH_DE_AMBRIS_TOTALIST }
					has_game_rule = { rule = SRI_path option = SRI_PATH_MUSSOLINI_TOTALIST }
					has_game_rule = { rule = SRI_path option = SRI_PATH_TOGLIATTI_TOTALIST }
					AND = {
						OR = {
							has_game_rule = { rule = SRI_path option = SRI_PATH_SALVEMINI_RADSOC }
							has_game_rule = { rule = SRI_path option = SRI_PATH_LUSSU_RADSOC }
						}
						is_power_balance_in_range = { id = SRI_power_balance range < SRI_bop_totalist_in_control_side }
					}
				}
			}
		}
	}
}

crisis = {
	SRI_massive_protests_mission = {
		icon = generic_political_rally

		allowed = { always = no }

		available = {
			focus_progress = { focus = SRI_leggi_fascistissime progress > 0 }
		}

		cancel_trigger = {
			if = {
				limit = { is_ai = yes }
				OR = {
					NOT = { has_government = totalist }
					has_game_rule = { rule = SRI_path option = SRI_PATH_DE_AMBRIS_TOTALIST }
					has_game_rule = { rule = SRI_path option = SRI_PATH_MUSSOLINI_TOTALIST }
					has_game_rule = { rule = SRI_path option = SRI_PATH_TOGLIATTI_TOTALIST }
				}
			}
			else = {
				NOT = { has_government = totalist }
			}
		}

		is_good = no
		fire_only_once = yes
		days_mission_timeout = 70

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout SRI_massive_protests_mission"
			country_event = socitaly.45
		}
	}
	SRI_chetnik_operations = {
		icon = generic_military

		allowed = { always = no }

		available = {
			hidden_trigger = { always = no }
		}

		cancel_trigger = {
			hidden_trigger = {
				NOT = {
					has_idea = SRI_fmc_idea_1
					has_idea = SRI_fmc_idea_2
					has_idea = SRI_fmc_idea_3
				}
			}
		}

		is_good = no
		fixed_random_seed = no
		days_mission_timeout = 30

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout SRI_chetnik_operations"
			activate_mission = SRI_chetnik_operations
			random_list = {
				10 = {
					modifier = {
						add = 10
						has_war = yes
					}
					modifier = {
						add = 10
						has_country_flag = { flag = SRI_fmc_attacks value > 1 }
					}
					modifier = {
						add = 10
						has_country_flag = { flag = SRI_fmc_attacks value > 2 }
					}
					modifier = {
						add = 10
						has_country_flag = { flag = SRI_fmc_attacks value > 3 }
					}
					modifier = {
						add = 10
						has_country_flag = { flag = SRI_fmc_attacks value > 4 }
					}
					modifier = {
						add = 10
						has_country_flag = { flag = SRI_fmc_attacks value > 5 }
					}
					modifier = {
						add = 10
						has_country_flag = { flag = SRI_fmc_attacks value > 6 }
					}
					modifier = {
						add = 10
						has_country_flag = { flag = SRI_fmc_attacks value > 7 }
					}
					modifier = {
						add = 10
						has_country_flag = { flag = SRI_fmc_attacks value > 8 }
					}
					if = {
						limit = {
							has_idea = SRI_fmc_idea_1
						}
						country_event = socitaly.29
					}
					if = {
						limit = {
							has_idea = SRI_fmc_idea_2
						}
						SRI_enrico_caviglia = {
							add_temp_unit_leader_role = yes
							unit_leader_event = socitaly.30
						}
					}
				}
				90 = {
					modifier = {
						add = -10
						has_war = yes
					}
					modifier = {
						add = -10
						has_country_flag = { flag = SRI_fmc_attacks value > 1 }
					}
					modifier = {
						add = -10
						has_country_flag = { flag = SRI_fmc_attacks value > 2 }
					}
					modifier = {
						add = -10
						has_country_flag = { flag = SRI_fmc_attacks value > 3 }
					}
					modifier = {
						add = -10
						has_country_flag = { flag = SRI_fmc_attacks value > 4 }
					}
					modifier = {
						add = -10
						has_country_flag = { flag = SRI_fmc_attacks value > 5 }
					}
					modifier = {
						add = -10
						has_country_flag = { flag = SRI_fmc_attacks value > 6 }
					}
					modifier = {
						add = -10
						has_country_flag = { flag = SRI_fmc_attacks value > 7 }
					}
					modifier = {
						add = -10
						has_country_flag = { flag = SRI_fmc_attacks value > 8 }
					}
					country_event = socitaly.23
					custom_effect_tooltip = SRI_expand_police_operations_tt
					modify_country_flag = { flag = SRI_fmc_attacks value = 1 }
				}
			}
		}
	}
	SRI_chetniks_on_the_move = {
		icon = generic_military

		allowed = { always = no }

		cancel_trigger = {
			hidden_trigger = {
				NOT = {
					has_idea = SRI_fmc_idea_1
					has_idea = SRI_fmc_idea_2
					has_idea = SRI_fmc_idea_3
				}
			}
		}

		cost = 50
		days_mission_timeout = 45
		days_remove = SRI_chetniks_on_the_move_days?0
		selectable_mission = yes
		is_good = no

		ai_will_do = { factor = 100 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRI_chetniks_on_the_move"
			hidden_effect = {
				set_variable = { SRI_chetniks_on_the_move_days = days_mission_timeout@SRI_chetniks_on_the_move }
				activate_mission = SRI_chetniks_on_the_move
			}
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout SRI_chetniks_on_the_move"
			activate_mission = SRI_chetniks_on_the_move
			custom_effect_tooltip = SRI_expand_police_operations_opposite_tt
			modify_country_flag = { flag = SRI_fmc_attacks value = 1 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SRI_chetniks_on_the_move"
			activate_mission = SRI_chetniks_on_the_move
		}
	}
	SRI_leave_an_opening_dec = {
		icon = generic_military

		allowed = { always = no }
		custom_cost_trigger = {
			has_stability > 0.10
		}
		custom_cost_text = stability10
		days_re_enable = 30
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRI_leave_an_opening_dec"
			hidden_effect = {
				add_stability = -0.10
			}
			add_days_mission_timeout = {
				mission = SRI_chetnik_operations
				days = -15
			}
		}
		ai_will_do = { factor = 100 }
	}
	SRI_expand_police_operations = {
		icon = generic_military

		allowed = { always = no }

		ai_hint_pp_cost = 20
		custom_cost_text = CP_80_PP_20
		custom_cost_trigger = {
			command_power > 79.99
			has_political_power > 19.99
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SRI_expand_police_operations"
			hidden_effect = {
				add_command_power = -80
				add_political_power = -20
			}
			custom_effect_tooltip = SRI_expand_police_operations_tt
			modify_country_flag = { flag = SRI_fmc_attacks value = 1 }
		}
		days_re_enable = 30
		ai_will_do = { factor = 100 }
	}
}
