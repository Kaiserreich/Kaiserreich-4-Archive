########################################################################################################
# Russia MIOs   																					   #
########################################################################################################
# First attempted rework by Rylock and Alpinia														   #
########################################################################################################
# Second rework by Matoro, Katie, Frill Shark, Kano, Daru, Deliberus, Purple Jinjo, Gideones and DDago #
########################################################################################################

# Tank MIOs
  # Putilovets
  # OKMO
  # UZTM
  # TSTZ
  # CHTZ
# Ship MIOs
  # BZ
  # AV
  # AS
  # Dalzavod
# Plane MIOs
  # OSOAVIA
  # Duks
  # TSAGI
  # Gamayun
  # Skorost
  # Sokol
# Material Equipment MIOs
  # TOZ
  # VPOZ
  # IMZ
  # Obukhov
  # BMZ
  # AMO
  # AMO (non NSB)
  # NAZ
  # NAZ (non LaR)
  # LAZ

#########################
### MIO Mini-Document ###
#########################
# Looking around the Russian MIO content file are we? Perhaps you are looking to solve/report a bug? Maybe you want to learn from my work? Well whatever the case, considering how big this file is compared to other MIO country organisation files and how
# complex the code can seem I deicded to write down a sort of "Mini-Document" that can be read to quickly and effeciently understand just how the Russian MIO system works instead of plowing through thousands of lines of code (though feel free to do so if you wish).
# I would also reccomend for you to read chronologically as I might only explain a mechanic once and then just reference it in other sections later.
#
# One other thing to mention is that the scripted effect `RUS_setup_custom_russian_MIOs` is used to setup all the internal MIO variables for RUS, RSA and FER which will be used to display loc. Anywho on towards the MIOs...
#
##################
### Putilovets ###
##################
# A fairly standard and simple MIO compared to all the others that will be covered later.
# Only 2 things to note here:
#
# 1) Has 2 "final" traits in the center (Improved Kirov Works/Improved Putilovets)
# "Improved Putilovets" trait is always present when the game loads, with the "Improved Kirov Works" trait staying invisible until the industries have been renamed from the SocRus focus 'RUS_nationalise' industries. Once that occurs, "Improved Putilovets"
# is set to be invisible.
#
# 2) Trait "Improved Dozer Equipment" is only visible if the player owns NSB DLC (as dozer blade can only be changed inside the tank designer which the NSB DLC adds).
#
############
### OKMO ###
############
# A somewhat fairly complex MIO OKMO, though not too much of a hastle.
# It contain 2 seperate trait trees that are unlocked with either "Frontline Design Reporters" or "Politically Connected Designers":
#
# 1) PP trait tree - This is the one that you can see when viewing it at the game start and once unlocked, whenever you unlock a trait, it will grant the receiving country PP in exchange through the 'on_complete' effect.
#
# 2) Army XP trait tree - This tree stays hidden until the "Frontline Design Reporters" trait is chosen. Here, 2 variables are set called `okmo_kr_xp_requirement` (the variable that is used in the `available` triggers to prevent taking the trait
# until the receiving country has the minimal amount of XP) and `okmo_kr_xp_cost` (which deducts the amount of XP needed to take the chosen trait). These 2 variables consequently increase or decrease every time a trait is unlocked.
#
# Just as with Putilovets, OKMO has the final trait "Improved OKMO" (for both PP and Army XP trees) change depending on SocRus focus being taken (Red Russia has OKMO's background turn red).
#
############
### UZTM ###
############
# As with the previous Putilovets MIO, the 2 traits "Additional Space for Fuel Drums" and "Improved Dozers" are only visible with the NSB DLC.
#
# Now onto the complex "Invite Allied Talent" trait. The 2 traits that you see when loading up the game (uztm_upgrade_1_2 and uztm_upgrade_1_3) only have a simple tooltip displaying the effects. The actual production traits are invisible.
# When either `uztm_upgrade_1_2` or `uztm_upgrade_1_3` are unlocked, they are set to be invisible (using the uztm_production_bonus_selected flag) and the selection process begins using the `RUS_upgrade_uztm` scripted effect.
#
# There, the number of allies and subjects of the receiving country is added up (using the `uztm_allies_number` and `uztm_subjects_number` variables) to a maximum of 10. Once it's summed up, the corresponding trait is unlocked back in the UZTM trait tree
# depending on what initial trait the player/AI chose (to prioritise eff cap or eff gain) and makes it visible with the `uztm_allies_and_puppets_no` variable and `uztm_production_bonus_selected` flag.
#
############
### TSTZ ###
############
# Here TsTZ has 2 different sets of buffs for every production bonus at the bottom. The ones visible at the start being the `tstz_upgrade_2_x_reset_y` traits that grant normal bonuses and the `tstz_upgrade_2_x_reset_y_double` traits that grant double the bonus.
#
# The "resettable" traits simply have 10 coppies of the same trait that are made visible once the one before it is unlocked.
# The "This trait can be reset X more times" is controlled by the `tstz_(bonus)_counter` variables that is set from the scripted effect `RUS_setup_custom_russian_MIOs`.
#
##########
### AV ###
##########
# Oh boy, the first really complex MIO here we go. So first things first, the tooltip display which is controlled through `RUS_av_decaying_funds_bonus_tt`.
#
# The "Starting Funds Bonus", "Weekly Decay", "Number of decaying funds bonus granted" and "Total amount of Funds bonus granted" numbers that appear on the screen are all controlled by variables similar to TsTZ from the previous example.
# These variables can either increase or decrease when a trait is unlocked through the `on_complete` or the `on_add`/`on_remove` when activating/deactivating policies on_action. Pretty straight forward.
#
# The AV list is controlled through the `RUS_AV_Notification_List` string which is comprised of a series of single-trigger scripted loc with the `av_(MIO)_research_speed` variable displaying the value of the decaying funds bonus (not the overall funds bonus value).
# Whenever an MIO is granted a decaying funds bonus through the `RUS_execute_AV` it also sets the MIO flag `RUS_AV_decaying_funds_bonus` and variable `RUS_AV_Recent_Funds_Bonus_Added`.
# The single-trigger scripted loc can then "trigger" and properly display itself in the `RUS_AV_Notification_List` to present which MIO has the decaying funds bonus active and at what percentage.
#
# As for how the MIO functions, that is handled by 3 scripted effects: `RUS_Update_Decaying_Funds_Bonus`, `RUS_execute_AV` and `RUS_AV_set_random_decaying_funds_bonus`.
#
# `RUS_Update_Decaying_Funds_Bonus` is triggered on a weekly basis (in on_weekly_RUS) and is the one that changes the funds bonus for every MIO that has the "Decaying Funds Bonus" active. Depending on the upgrades unlocked in the trait tree or the MIO
# policies, it deducts the required funds bonus from the MIO and changes the flag value with it. If the flag value is at a certain funds value relative to the amount needed to be detucted then the "Decaying Funds Bonus" is removed altogether.
#
# `RUS_execute_AV` is the scripted effect that applies the "Decaying Funds Bonus" to a set number of random MIOs depending on trait upgrades and MIO policies. This effect is available in all traits of the AV tree and the decision unlocked through
# the final trait "Improved AV".
#
# `RUS_AV_set_random_decaying_funds_bonus` displays the correct tooltip to the player about how many funds bonuses are going to be given out (assuming there are still enough MIOs without a currently active decaying Funds bonus).
#
################
### Dalzavod ###
################
# Back to the simple MIOs again, Dalzavod only has the Naval Mine decisions. Once unlocked through the central trait tree, it will either unlock additional decisions or grant more mines being added through the decisions (controlled by variable
# `RUS_dalzavod_mines_number` and `RUS_dalzavod_total_mines_launched`). Very simple stuff here.
#
###############
### Gamayun ###
###############
# Another very complex MIO to conver. The display tooltip works similar to AV with the variables set from `RUS_setup_custom_russian_MIOs`.
#
# There are 2 things that controls how the building effects work: event russia.1002 and scripted effect `RUS_Gamayun_Factories`.
#
# The event russia.1002 controls how often the `RUS_Gamayun_Factories` is continually fired depending on the traits/policies unlocked.
#
# `RUS_Gamayun_Factories` on the other hand builds a randomly chosen factory instantly in a random state, damages it in a specific range depending on upgrades and finally sets a state flag to prevent factories being spawned in the same place too often.
#
############
### Duks ###
############
# Very basic MIO that only has a custom MIO tree.
#
###############
### Skorost ###
###############
# Another very basic MIO that has a custom MIO tree.
#
#############
### Sokol ###
#############
# This is a very interesting MIO. The MIO might seem like it is just 1 copy however, under the hood there are 3 copies:
#
# 1) RUS_sokol - The basic copy that is visible at game start
# 2) RUS_sokol_production - The second copy that is able to research production and industry tech
# 3) RUS_sokol_construction - The third copy that is able to research construction and excavation tech
#
# Once either of the first traits in `RUS_sokol` is unlocked, `RUS_sokol` becomes invisible and either `RUS_sokol_production` or `RUS_sokol_construction` becomes visible with that first trait already unlocked.
#
# After, that `RUS_Update_Sokol` will be triggered on a weekly basis that then alters the "Funds Bonus" and "Assign Team Cost" from their maximums and minimums depending on the technology that is being researched.
#
###########
### TOZ ###
###########
# Once any of the "medal" traits have been unlocked, the decision 'RUS_TOZ_Medals' will become available where the scripted effect `RUS_TOZ_Hand_Out_Medals` grants the actual medals to random divisions. As medals cannot be augmented/changed on the fly
# (i.e. they only have 1 state when the game loads) this means that there are (as of writing this) 8 medals in the 'KR_medals.txt' file that are used in the `RUS_TOZ_Hand_Out_Medals` script. These are handed out to random divisions based on the traits
# unlocked in the TOZ MIO trait tree.
#
###########
### IMZ ###
###########
# Another very basic MIO that has a custom MIO tree for the production bonuses.
#
###############
### Obukhov ###
###############
# While this MIO is classified as an 'XP MIO' (generates one of the 3 main XP types) and will be covered in the 'XP MIOs' section, Obukhov also doubles as a production MIO with the 4 bottom traits. Every production bonus has 4 different traits (lvl4, 3, 2 and 1)
# with lvl4 being visible at game start and the other 3 being invisible. If the production trait is taken before the other ones then it will stay visible, while the other lvl 4 traits become invisible and their lvl 3 traits become visible instead
# (presenting how the effects are halving even if it's smoke and mirrors).
#
#######################
### AMO/AMO Non-LaR ###
#######################
# Just as with the trait exclusive DLCs, there are 2 copies of AMO based on whether the player has the DLC NSB or not (as the trait `amo_upgrade_1_3` gives the additonal effect of Fuel Capacity). With the CIC mechanic, some basic variables are used to
# calculate the final CIC bonus:
#
# 1) `RUS_amo_cic_base` - Minimum CIC given
# 2) `RUS_amo_cic_trait_sum`- Bonus CIC given based on traits unlocked and policy
# 3) `RUS_amo_cic_size_multiplier` - Multiplier for CIC based on MIO size
#
# Finally the `CIC_bonus` and `total_campaign_CIC` variables control the loc and are increased/decreased depending on which traits/policies are applied to the AMO MIO.
#
###############
### NAZ/LAZ ###
###############
# Very simple MIOs as with IMZ, Duks and other MIOs before but, I'm grouping them together as they share the same mechanic of giving each other funds when they finish researching something. This is used through the simple `on_tech_research_completed`
# effect. The reason why NAZ fires an event to give the effect whilst, LAZ only has the effect is because, of the way that the game engine reads the files (bottom to top) so sometimes it will try to target the MIO that needs that effect however, will not
# find it and not trigger the effect (firing an event gets around this problem).
#
# Additionally, just as with AMO before, NAZ has 2 copies visible to the player depending on whether they have the LaR DLC active (for the armoured cars)
#
################################################
### R&D MIOs (CHTZ, AS, TSAGI, VPOZ and BMZ) ###
################################################
# And so we come to the most complex MIOs called "R&D MIOs" as they are able to stack research speed. The display tooltip works the same way that AV and OSOAVIA, fairly standard now so feel free to look there as to how it works.
#
# The way that research speed is gained, is checked on a weekly basis (on_weekly_RUS) in the `RUS_Update_MIO_Research_Speeds` scripted effect. As noted in the R&D tooltip, research speed can only be gained when the MIO is assigned as a manufacturer
# and is gaining at least 9 funds per week (controlled by the `weekly_funds_requirement` variable). Here, 2 variables are set called `(MIO)_Previous_Week_Funds` and `(MIO)_Current_Week_Funds` which are then compared to make sure that they exceed
# the required amount of weekly funds (usually 9 at the time of writing).
#
# For the R&D check, it sees if the weekly funds exceeds the required amount based on upgrades (`Funds_Difference` variable) and if the MIO is currently being used as a manufacturer (MIO_X_assigned_manufacturer_number). Why not use
# `is_mio_assigned_to_task` trigger? Because, that trigger checks if the MIO is assigned to either RESEARCH or MANUFACTURER. For R&D MIOs we only want to check if they are assigned as a manufacturer.
#
# Once it has passed that check, it can then add on the required research speed so long as it doesn't exceed the cap (based on trait unlocks and MIO policy). If the MIO has already reached its cap and cannot add anymore then it will fire a
# scripted GUI notification informing the player of it so that the player doesn't have to constantly check every minute to see if the MIO has indeed reached the research speed cap.
#
#########################################
### XP MIOs (BZ, OSOAVIA and Obukhov) ###
#########################################
# The display tooltip works the same way that the R&D MIOs work, you know the drill by now. However, the way that these XP MIOs actually give XP is through hidden_ideas (see the hidden ideas section in RUS_ideas file).
#
# Subsequently, when the weekly scripted effect fires (RUS_Update_MIO_XP_Gains), it checks to see if the hidden ideas should either be added or removed (based on if the manufacturer exceeds the funds requirement akin to R&D MIOs or is currently
# researching any technology) for each of the currently used XP MIOs.
#
#################################
### Naval MIO "Dalzavod" Idea ###
#################################
# This idea is built up by first passing through the `RUS_upgrade_dalzavod_idea_check` scripted effect where if the check succeeds then the actual "Dalzavod" idea starts to gradually build up in the 'RUS_upgrade_dalzavod_idea' scripted effect.
#
###########
### END ###
###########
# And that is all there is to it. If you have any other problems or questions regarding how these MIOs function then feel free to message me on the Kaiserreich Discord or privately DM me (@deliberus). Have an interesting time looking through the file :)

#################
### Tank MIOs ###
#################
RUS_putilovets_organisation = {
	name = putilovets_non_socrus
	icon = GFX_idea_putilovets
	allowed = {
		is_russian_tag = yes
	}
	available = {
		FROM = {
			owns_state = 195 #Petrograd
		}
	}

	equipment_type = {
		armor
	}

	research_categories = {
		mio_cat_tech_all_armor_and_modules
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = RUS_putilovets_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = putilovets_upgrade_1
		name = putilovets_upgrade_1
		icon = GFX_generic_mio_trait_icon_armor_value

		mutually_exclusive = { putilovets_upgrade_2 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			armor_value = 0.1
		}
	}

	trait = {
		token = putilovets_upgrade_2
		name = putilovets_upgrade_2
		icon = GFX_generic_mio_trait_icon_armor_value

		mutually_exclusive = { putilovets_upgrade_1 }

		position = { x = 3 y = 0 }

		equipment_bonus = {
			armor_value = 0.2
			maximum_speed = -0.1
		}
	}

	trait = {
		token = putilovets_upgrade_3
		name = putilovets_upgrade_3
		icon = GFX_generic_mio_trait_icon_hardness

		mutually_exclusive = { putilovets_upgrade_4 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			hardness = 0.2
			reliability = -0.1
		}
	}

	trait = {
		token = putilovets_upgrade_4
		name = putilovets_upgrade_4
		icon = GFX_generic_mio_trait_icon_hardness

		mutually_exclusive = { putilovets_upgrade_3 }

		position = { x = 7 y = 0 }

		equipment_bonus = {
			hardness = 0.1
		}
	}

	trait = {
		token = putilovets_upgrade_1_1
		name = putilovets_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_armor_value

		any_parent = { putilovets_upgrade_1 putilovets_upgrade_2 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			armor_value = 0.05
		}
	}

	trait = {
		token = putilovets_upgrade_dozer
		name = putilovets_upgrade_dozer
		icon = GFX_generic_mio_trait_icon_entrenchment

		visible = {
			has_dlc_nsb = yes
		}

		position = { x = 4 y = 1 }

		equipment_bonus = {
			entrenchment = 0.5
		}
	}

	trait = {
		token = putilovets_upgrade_1_2
		name = putilovets_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_hardness

		any_parent = { putilovets_upgrade_3 putilovets_upgrade_4 }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			hardness = 0.05
		}
	}

	trait = {
		token = putilovets_upgrade_2_1
		name = putilovets_upgrade_2_1
		icon = GFX_icon_putilovets_MIO

		visible = {
			FROM = {
				NOT = {
					has_country_flag = RUS_rename_industries
				}
			}
		}

		special_trait_background = yes

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_completed_focus = RUS_urban_housing_projects }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = { has_completed_focus = FER_return_to_kremlin }
			}
			else_if = {
				limit = { FROM = { original_tag = RSA } }
				FROM = { has_completed_focus = RUS_secret_weapons_development }
			}
		}

		all_parents = { putilovets_upgrade_1_1 putilovets_upgrade_1_2 putilovets_upgrade_3_1 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = putilovets_upgrade_2_1_soc_rus
		name = putilovets_upgrade_2_1_soc_rus
		icon = GFX_icon_kirov_works_MIO

		visible = {
			FROM = {
				has_country_flag = RUS_rename_industries
			}
		}

		special_trait_background = yes

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_completed_focus = RUS_urban_housing_projects }
			}
		}

		all_parents = { putilovets_upgrade_1_1 putilovets_upgrade_1_2 putilovets_upgrade_3_1 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = putilovets_upgrade_3_1
		name = putilovets_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_hard_attack

		any_parent = { putilovets_upgrade_4_1 putilovets_upgrade_4_2 }

		position = { x = 4 y = 3 }

		equipment_bonus = {
			hard_attack = 0.05
			ap_attack = 0.05
		}
	}

	trait = {
		token = putilovets_upgrade_4_1
		name = putilovets_upgrade_4_1
		icon = GFX_generic_mio_trait_icon_hard_attack

		mutually_exclusive = { putilovets_upgrade_4_2 }

		position = { x = 3 y = 4 }

		equipment_bonus = {
			hard_attack = 0.05
			ap_attack = 0.05
		}
	}

	trait = {
		token = putilovets_upgrade_4_2
		name = putilovets_upgrade_4_2
		icon = GFX_generic_mio_trait_icon_hard_attack

		mutually_exclusive = { putilovets_upgrade_4_1 }

		position = { x = 5 y = 4 }

		equipment_bonus = {
			hard_attack = 0.1
			ap_attack = 0.1
			build_cost_ic = 0.1
		}
	}
}
RUS_okmo_kr_organisation = {
	name = okmo_kr
	icon = GFX_idea_okmo_kr
	allowed = {
		is_russian_tag = yes
	}
	available = {
		if = {
			limit = { FROM = { original_tag = RUS } }
			FROM = { has_completed_focus = RUS_motorisation }
		}
		else_if = {
			limit = { FROM = { original_tag = FER } }
			FROM = {
				OR = {
					has_completed_focus = FER_masters_over_siberia
					has_completed_focus = FER_return_to_kremlin
				}
			}
		}
		else_if = {
			limit = { FROM = { original_tag = RSA } }
			FROM = { has_completed_focus = RUS_secret_weapons_development }
		}
	}

	equipment_type = {
		armor
	}

	research_categories = {
		mio_cat_tech_all_armor_and_modules
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_okmo_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = okmo_kr_upgrade_1
		name = okmo_kr_upgrade_1
		icon = GFX_generic_mio_trait_icon_defense

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_stats_for_xp } } }
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		position = { x = 0 y = 0 }

		equipment_bonus = {
			defense = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_2
		name = okmo_kr_upgrade_2
		icon = GFX_generic_mio_trait_icon_hard_attack

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_stats_for_xp } } }
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			hard_attack = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_3
		name = okmo_kr_upgrade_3
		icon = GFX_generic_mio_trait_icon_reliability

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_stats_for_xp } } }
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		position = { x = 8 y = 0 }

		equipment_bonus = {
			reliability = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_4
		name = okmo_kr_upgrade_4
		icon = GFX_generic_mio_trait_icon_hardness

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_stats_for_xp } } }
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		position = { x = 0 y = 4 }

		equipment_bonus = {
			hardness = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_5
		name = okmo_kr_upgrade_5
		icon = GFX_generic_mio_trait_icon_maximum_speed

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_stats_for_xp } } }
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		position = { x = 4 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_6
		name = okmo_kr_upgrade_6
		icon = GFX_generic_mio_trait_icon_breakthrough

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_stats_for_xp } } }
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		position = { x = 8 y = 4 }

		equipment_bonus = {
			breakthrough = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_7
		name = okmo_kr_upgrade_7
		icon = GFX_icon_okmo_MIO

		special_trait_background = yes

		visible = {
			FROM = {
				NOT = { has_country_flag = okmo_kr_stats_for_xp }
				NOT = { has_country_flag = RUS_rename_industries }
			}
		}
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		all_parents = { okmo_kr_upgrade_1 okmo_kr_upgrade_2 okmo_kr_upgrade_3 okmo_kr_upgrade_4 okmo_kr_upgrade_5 okmo_kr_upgrade_6 okmo_kr_upgrade_10 okmo_kr_upgrade_11 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			soft_attack = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_7_soc_rus
		name = okmo_kr_upgrade_7
		icon = GFX_icon_okmo_soc_rus_MIO

		special_trait_background = yes

		visible = {
			FROM = {
				NOT = { has_country_flag = okmo_kr_stats_for_xp }
				has_country_flag = RUS_rename_industries
			}
		}
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		all_parents = { okmo_kr_upgrade_1 okmo_kr_upgrade_2 okmo_kr_upgrade_3 okmo_kr_upgrade_4 okmo_kr_upgrade_5 okmo_kr_upgrade_6 okmo_kr_upgrade_10 okmo_kr_upgrade_11 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			soft_attack = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_8
		name = okmo_kr_upgrade_8
		icon = GFX_KR_generic_mio_trait_icon_upgrade

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_bonus_chosen } } }

		position = { x = 2 y = 1 }

		on_complete = {
			custom_effect_tooltip = okmo_kr_stats_for_xp_on_traits_tt
			FROM = { set_country_flag = okmo_kr_stats_for_xp }
			FROM = { set_country_flag = okmo_kr_bonus_chosen }
			FROM = {
				set_variable = {
					var = okmo_kr_xp_requirement
					value = 10
				}
				set_variable = {
					var = okmo_kr_xp_cost
					value = -10
				}
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_9
		name = okmo_kr_upgrade_9
		icon = GFX_KR_generic_mio_trait_icon_political_power

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_bonus_chosen } } }

		position = { x = 6 y = 1 }

		on_complete = {
			custom_effect_tooltip = okmo_kr_pp_on_traits_tt
			FROM = { set_country_flag = okmo_kr_bonus_chosen }
		}
	}

	trait = {
		token = okmo_kr_upgrade_10
		name = okmo_kr_upgrade_10
		icon = GFX_generic_mio_trait_icon_ap_attack

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_stats_for_xp } } }
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			ap_attack = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_11
		name = okmo_kr_upgrade_11
		icon = GFX_generic_mio_trait_icon_armor_value

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_stats_for_xp } } }
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		position = { x = 8 y = 2 }

		equipment_bonus = {
			armor_value = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_1_xp
		name = okmo_kr_upgrade_1
		icon = GFX_generic_mio_trait_icon_defense

		visible = { FROM = { has_country_flag = okmo_kr_stats_for_xp } }
		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		position = { x = 0 y = 0 }

		equipment_bonus = {
			defense = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = {
					var = okmo_kr_xp_requirement
					value = 5
				}
				subtract_from_variable = {
					var = okmo_kr_xp_cost
					value = 5
				}
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_2_xp
		name = okmo_kr_upgrade_2
		icon = GFX_generic_mio_trait_icon_hard_attack

		visible = { FROM = { has_country_flag = okmo_kr_stats_for_xp } }
		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		position = { x = 4 y = 0 }

		equipment_bonus = {
			hard_attack = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = {
					var = okmo_kr_xp_requirement
					value = 5
				}
				subtract_from_variable = {
					var = okmo_kr_xp_cost
					value = 5
				}
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_3_xp
		name = okmo_kr_upgrade_3
		icon = GFX_generic_mio_trait_icon_reliability

		visible = { FROM = { has_country_flag = okmo_kr_stats_for_xp } }
		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		position = { x = 8 y = 0 }

		equipment_bonus = {
			reliability = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = {
					var = okmo_kr_xp_requirement
					value = 5
				}
				subtract_from_variable = {
					var = okmo_kr_xp_cost
					value = 5
				}
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_4_xp
		name = okmo_kr_upgrade_4
		icon = GFX_generic_mio_trait_icon_hardness

		visible = { FROM = { has_country_flag = okmo_kr_stats_for_xp } }
		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			hardness = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = {
					var = okmo_kr_xp_requirement
					value = 5
				}
				subtract_from_variable = {
					var = okmo_kr_xp_cost
					value = 5
				}
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_5_xp
		name = okmo_kr_upgrade_5
		icon = GFX_generic_mio_trait_icon_maximum_speed

		visible = { FROM = { has_country_flag = okmo_kr_stats_for_xp } }
		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = {
					var = okmo_kr_xp_requirement
					value = 5
				}
				subtract_from_variable = {
					var = okmo_kr_xp_cost
					value = 5
				}
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_6_xp
		name = okmo_kr_upgrade_6
		icon = GFX_generic_mio_trait_icon_breakthrough

		visible = { FROM = { has_country_flag = okmo_kr_stats_for_xp } }
		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		position = { x = 8 y = 4 }

		equipment_bonus = {
			breakthrough = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = {
					var = okmo_kr_xp_requirement
					value = 5
				}
				subtract_from_variable = {
					var = okmo_kr_xp_cost
					value = 5
				}
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_7_xp
		name = okmo_kr_upgrade_7
		icon = GFX_icon_okmo_MIO

		special_trait_background = yes

		visible = {
			FROM = {
				has_country_flag = okmo_kr_stats_for_xp
				NOT = { has_country_flag = RUS_rename_industries }
			}
		}

		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		all_parents = { okmo_kr_upgrade_1_xp okmo_kr_upgrade_2_xp okmo_kr_upgrade_3_xp okmo_kr_upgrade_4_xp okmo_kr_upgrade_5_xp okmo_kr_upgrade_6_xp okmo_kr_upgrade_10_xp okmo_kr_upgrade_11_xp }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			soft_attack = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = {
					var = okmo_kr_xp_requirement
					value = 5
				}
				subtract_from_variable = {
					var = okmo_kr_xp_cost
					value = 5
				}
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_7_xp_soc_rus
		name = okmo_kr_upgrade_7
		icon = GFX_icon_okmo_soc_rus_MIO

		special_trait_background = yes

		visible = {
			FROM = {
				has_country_flag = okmo_kr_stats_for_xp
				has_country_flag = RUS_rename_industries
			}
		}

		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		all_parents = { okmo_kr_upgrade_1_xp okmo_kr_upgrade_2_xp okmo_kr_upgrade_3_xp okmo_kr_upgrade_4_xp okmo_kr_upgrade_5_xp okmo_kr_upgrade_6_xp okmo_kr_upgrade_10_xp okmo_kr_upgrade_11_xp }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			soft_attack = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = {
					var = okmo_kr_xp_requirement
					value = 5
				}
				subtract_from_variable = {
					var = okmo_kr_xp_cost
					value = 5
				}
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_10_xp
		name = okmo_kr_upgrade_10
		icon = GFX_generic_mio_trait_icon_ap_attack

		visible = { FROM = { has_country_flag = okmo_kr_stats_for_xp } }
		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		position = { x = 0 y = 2 }

		equipment_bonus = {
			ap_attack = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = {
					var = okmo_kr_xp_requirement
					value = 5
				}
				subtract_from_variable = {
					var = okmo_kr_xp_cost
					value = 5
				}
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_11_xp
		name = okmo_kr_upgrade_11
		icon = GFX_generic_mio_trait_icon_armor_value

		visible = { FROM = { has_country_flag = okmo_kr_stats_for_xp } }
		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		position = { x = 8 y = 2 }

		equipment_bonus = {
			armor_value = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = {
					var = okmo_kr_xp_requirement
					value = 5
				}
				subtract_from_variable = {
					var = okmo_kr_xp_cost
					value = 5
				}
			}
		}
	}
}
RUS_uztm_organisation = {
	name = uztm
	icon = GFX_idea_uztm
	available = {
		if = {
			limit = { FROM = { original_tag = RUS } }
			FROM = {
				owns_state = 653 #Ekaterinburg
				has_country_flag = unlock_uztm
			}
		}
		else_if = {
			limit = { FROM = { original_tag = FER } }
			FROM = {
				owns_state = 653 #Ekaterinburg
				custom_trigger_tooltip = { tooltip = unlock_uztm_FER }
				hidden_trigger = { has_country_flag = unlock_uztm }
			}
		}
		else_if = {
			limit = { FROM = { original_tag = RSA } }
			FROM = {
				owns_state = 653 #Ekaterinburg
				custom_trigger_tooltip = { tooltip = unlock_uztm_RSA }
				hidden_trigger = { has_country_flag = unlock_uztm }
			}
		}
	}
	allowed = {
		is_russian_tag = yes
	}

	equipment_type = {
		light_tank_artillery_chassis
		medium_tank_artillery_chassis
		heavy_tank_artillery_chassis
		light_tank_destroyer_chassis
		medium_tank_destroyer_chassis
		heavy_tank_destroyer_chassis
		light_tank_aa_chassis
		medium_tank_aa_chassis
		heavy_tank_aa_chassis
	}

	research_categories = {
		mio_cat_tech_all_armor_and_modules
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_uztm_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_0
		name = uztm_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_0
				is_mio_trait_completed = uztm_upgrade_eff_gro_0
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_0 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0
			production_efficiency_gain_factor = 0
			production_resource_need_factor = 0
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_0
		name = uztm_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_0
				is_mio_trait_completed = uztm_upgrade_eff_gro_0
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_0 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0
			production_efficiency_gain_factor = 0
			production_resource_need_factor = 0
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_1
		name = uztm_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_1
				is_mio_trait_completed = uztm_upgrade_eff_gro_1
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_1 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.02
			production_efficiency_gain_factor = 0.02
			production_resource_need_factor = 0.02
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_1
		name = uztm_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_1
				is_mio_trait_completed = uztm_upgrade_eff_gro_1
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_1 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
			production_efficiency_gain_factor = 0.04
			production_resource_need_factor = 0.02
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_2
		name = uztm_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_2
				is_mio_trait_completed = uztm_upgrade_eff_gro_2
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_2 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.04
			production_resource_need_factor = 0.04
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_2
		name = uztm_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_2
				is_mio_trait_completed = uztm_upgrade_eff_gro_2
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_2 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.02
			production_efficiency_gain_factor = 0.08
			production_resource_need_factor = 0.04
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_3
		name = uztm_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_3
				is_mio_trait_completed = uztm_upgrade_eff_gro_3
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_3 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.06
			production_efficiency_gain_factor = 0.06
			production_resource_need_factor = 0.06
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_3
		name = uztm_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_3
				is_mio_trait_completed = uztm_upgrade_eff_gro_3
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_3 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.03
			production_efficiency_gain_factor = 0.12
			production_resource_need_factor = 0.06
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_4
		name = uztm_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_4
				is_mio_trait_completed = uztm_upgrade_eff_gro_4
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_4 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.08
			production_resource_need_factor = 0.08
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_4
		name = uztm_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_4
				is_mio_trait_completed = uztm_upgrade_eff_gro_4
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_4 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.16
			production_resource_need_factor = 0.08
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_5
		name = uztm_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_5
				is_mio_trait_completed = uztm_upgrade_eff_gro_5
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_5 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.1
			production_efficiency_gain_factor = 0.1
			production_resource_need_factor = 0.1
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_5
		name = uztm_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_5
				is_mio_trait_completed = uztm_upgrade_eff_gro_5
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_5 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.20
			production_resource_need_factor = 0.1
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_6
		name = uztm_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_6
				is_mio_trait_completed = uztm_upgrade_eff_gro_6
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_6 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.12
			production_resource_need_factor = 0.12
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_6
		name = uztm_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_6
				is_mio_trait_completed = uztm_upgrade_eff_gro_6
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_6 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.06
			production_efficiency_gain_factor = 0.24
			production_resource_need_factor = 0.12
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_7
		name = uztm_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_7
				is_mio_trait_completed = uztm_upgrade_eff_gro_7
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_7 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.14
			production_efficiency_gain_factor = 0.14
			production_resource_need_factor = 0.14
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_7
		name = uztm_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_7
				is_mio_trait_completed = uztm_upgrade_eff_gro_7
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_7 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.07
			production_efficiency_gain_factor = 0.28
			production_resource_need_factor = 0.14
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_8
		name = uztm_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_8
				is_mio_trait_completed = uztm_upgrade_eff_gro_8
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_8 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.16
			production_resource_need_factor = 0.16
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_8
		name = uztm_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_8
				is_mio_trait_completed = uztm_upgrade_eff_gro_8
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_8 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.32
			production_resource_need_factor = 0.16
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_9
		name = uztm_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_9
				is_mio_trait_completed = uztm_upgrade_eff_gro_9
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_9 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.18
			production_efficiency_gain_factor = 0.18
			production_resource_need_factor = 0.18
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_9
		name = uztm_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_9
				is_mio_trait_completed = uztm_upgrade_eff_gro_9
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_9 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.09
			production_efficiency_gain_factor = 0.36
			production_resource_need_factor = 0.18
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_10
		name = uztm_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_10
				is_mio_trait_completed = uztm_upgrade_eff_gro_10
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_10 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.2
			production_resource_need_factor = 0.2
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_10
		name = uztm_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = { has_country_flag = uztm_production_bonus_selected }
			OR = {
				is_mio_trait_completed = uztm_upgrade_eff_cap_10
				is_mio_trait_completed = uztm_upgrade_eff_gro_10
			}
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_10 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.1
			production_efficiency_gain_factor = 0.4
			production_resource_need_factor = 0.2
		}
	}

	trait = {
		token = uztm_upgrade_1
		name = uztm_upgrade_1
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 0 y = 0 }

		mutually_exclusive = { uztm_upgrade_2 }

		equipment_bonus = {
			reliability = 0.15
		}
	}

	trait = {
		token = uztm_upgrade_2
		name = uztm_upgrade_2
		icon = GFX_generic_mio_trait_icon_hardness

		position = { x = 2 y = 0 }

		mutually_exclusive = { uztm_upgrade_1 }

		equipment_bonus = {
			hardness = 0.15
		}
	}

	trait = {
		token = uztm_upgrade_3_nsb
		name = uztm_upgrade_3_nsb
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		visible = {
			has_dlc_nsb = yes
		}

		position = { x = 3 y = 0 }

		mutually_exclusive = { uztm_upgrade_4_nsb }

		equipment_bonus = {
			fuel_capacity = 2.0
		}
	}

	trait = {
		token = uztm_upgrade_4_nsb
		name = uztm_upgrade_4_nsb
		icon = GFX_generic_mio_trait_icon_entrenchment

		visible = {
			has_dlc_nsb = yes
		}

		position = { x = 5 y = 0 }

		mutually_exclusive = { uztm_upgrade_3_nsb }

		equipment_bonus = {
			entrenchment = 1.0
		}
	}

	trait = {
		token = uztm_upgrade_3
		name = uztm_upgrade_3
		icon = GFX_generic_mio_trait_icon_breakthrough

		visible = {
			has_dlc_nsb = no
		}

		position = { x = 3 y = 0 }

		mutually_exclusive = { uztm_upgrade_4 }

		equipment_bonus = {
			breakthrough = 0.15
		}
	}

	trait = {
		token = uztm_upgrade_4
		name = uztm_upgrade_4
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		visible = {
			has_dlc_nsb = no
		}

		position = { x = 5 y = 0 }

		mutually_exclusive = { uztm_upgrade_3 }

		equipment_bonus = {
			fuel_consumption = -0.5
		}
	}

	trait = {
		token = uztm_upgrade_5
		name = uztm_upgrade_5
		icon = GFX_generic_mio_trait_icon_armor_value

		position = { x = 6 y = 0 }

		mutually_exclusive = { uztm_upgrade_6 }

		equipment_bonus = {
			armor_value = 0.15
		}
	}

	trait = {
		token = uztm_upgrade_6
		name = uztm_upgrade_6
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		position = { x = 8 y = 0 }

		mutually_exclusive = { uztm_upgrade_5 }

		equipment_bonus = {
			fuel_consumption = -0.5
		}
	}

	trait = {
		token = uztm_upgrade_1_1
		name = uztm_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { uztm_upgrade_1 uztm_upgrade_2 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			soft_attack = 0.07
			defense = 0.07
		}
	}

	trait = {
		token = uztm_upgrade_1_2
		name = uztm_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = { FROM = { NOT = { has_country_flag = uztm_production_bonus_selected } } }

		mutually_exclusive = { uztm_upgrade_1_3 }

		any_parent = { uztm_upgrade_1 uztm_upgrade_2 }
		any_parent = { uztm_upgrade_5 uztm_upgrade_6 }

		position = { x = 3 y = 2 }

		on_complete = {
			custom_effect_tooltip = uztm_upgrade_based_on_allies_and_puppets_eff_cap_tt
			FROM = { set_country_flag = uztm_prio_eff_cap }
			set_temp_variable = {
				var = uztm_allies_number
				value = 0
			}
			for_each_loop = {
				array = FROM.allies
				add_to_temp_variable = {
					var = uztm_allies_number
					value = 1
				}
			}
			set_temp_variable = {
				var = uztm_subjects_number
				value = FROM.num_subjects
			}
			set_temp_variable = {
				var = uztm_allies_and_puppets_no
				value = 0
			}
			add_to_temp_variable = {
				var = uztm_allies_and_puppets_no
				value = uztm_subjects_number
			}
			add_to_temp_variable = {
				var = uztm_allies_and_puppets_no
				value = uztm_allies_number
			}
			clamp_temp_variable = {
				var = uztm_allies_and_puppets_no
				max = 10
			}
			RUS_upgrade_uztm = yes
			FROM = { set_country_flag = uztm_production_bonus_selected }
			set_temp_variable = { uztm_eff_cap = uztm_allies_and_puppets_no }
			multiply_temp_variable = { uztm_eff_cap = 2 }
			set_temp_variable = { uztm_eff_gain = uztm_allies_and_puppets_no }
			multiply_temp_variable = { uztm_eff_gain = 2 }
			set_temp_variable = { uztm_resource = uztm_allies_and_puppets_no }
			multiply_temp_variable = { uztm_resource = 2 }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = uztm_upgrade_will_get
		}
	}

	trait = {
		token = uztm_upgrade_1_3
		name = uztm_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = { FROM = { NOT = { has_country_flag = uztm_production_bonus_selected } } }

		mutually_exclusive = { uztm_upgrade_1_2 }

		any_parent = { uztm_upgrade_1 uztm_upgrade_2 }
		any_parent = { uztm_upgrade_5 uztm_upgrade_6 }

		position = { x = 5 y = 2 }

		on_complete = {
			custom_effect_tooltip = uztm_upgrade_based_on_allies_and_puppets_eff_gro_tt
			FROM = { set_country_flag = uztm_prio_eff_gro }
			set_temp_variable = {
				var = uztm_allies_number
				value = 0
			}
			for_each_loop = {
				array = FROM.allies
				add_to_temp_variable = {
					var = uztm_allies_number
					value = 1
				}
			}
			set_temp_variable = {
				var = uztm_subjects_number
				value = FROM.num_subjects
			}
			set_temp_variable = {
				var = uztm_allies_and_puppets_no
				value = 0
			}
			add_to_temp_variable = {
				var = uztm_allies_and_puppets_no
				value = uztm_subjects_number
			}
			add_to_temp_variable = {
				var = uztm_allies_and_puppets_no
				value = uztm_allies_number
			}
			clamp_temp_variable = {
				var = uztm_allies_and_puppets_no
				max = 10
			}
			RUS_upgrade_uztm = yes
			FROM = { set_country_flag = uztm_production_bonus_selected }
			set_temp_variable = { uztm_eff_cap = uztm_allies_and_puppets_no }
			set_temp_variable = { uztm_eff_gain = uztm_allies_and_puppets_no }
			multiply_temp_variable = { uztm_eff_gain = 4 }
			set_temp_variable = { uztm_resource = uztm_allies_and_puppets_no }
			multiply_temp_variable = { uztm_resource = 2 }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = uztm_upgrade_will_get
		}
	}

	trait = {
		token = uztm_upgrade_1_4
		name = uztm_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		any_parent = { uztm_upgrade_5 uztm_upgrade_6 }

		position = { x = 7 y = 2 }

		limit_to_equipment_type = {
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		equipment_bonus = {
			air_attack = 0.1
		}
	}

	trait = {
		token = uztm_upgrade_2_1
		name = uztm_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { uztm_upgrade_1_1 }

		position = { x = 2 y = 3 }

		equipment_bonus = {
			soft_attack = 0.08
			defense = 0.08
		}
	}

	trait = {
		token = uztm_upgrade_2_2
		name = uztm_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_hard_attack

		any_parent = { uztm_upgrade_3 uztm_upgrade_4 uztm_upgrade_3_nsb uztm_upgrade_4_nsb }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			hard_attack = 0.07
			ap_attack = 0.07
		}
	}

	trait = {
		token = uztm_upgrade_2_3
		name = uztm_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		all_parents = { uztm_upgrade_1_4 }

		position = { x = 6 y = 3 }

		limit_to_equipment_type = {
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		equipment_bonus = {
			air_attack = 0.1
		}
	}

	trait = {
		token = uztm_upgrade_3_1
		name = uztm_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_ap_attack

		all_parents = { uztm_upgrade_2_2 }

		position = { x = 4 y = 4 }

		equipment_bonus = {
			hard_attack = 0.08
			ap_attack = 0.08
		}
	}
}
RUS_tstz_organisation = {
	name = tstz
	icon = GFX_idea_tstz
	allowed = {
		is_russian_tag = yes
	}
	available = {
		if = {
			limit = { FROM = { original_tag = RUS } }
			FROM = {
				has_country_flag = unlock_tstz
				owns_state = 217 #Tsaritsyn
			}
		}
		else_if = {
			limit = { FROM = { original_tag = FER } }
			FROM = {
				hidden_trigger = { has_country_flag = unlock_tstz }
				custom_trigger_tooltip = { tooltip = unlock_tstz_FER }
				owns_state = 217 #Tsaritsyn
			}
		}
		else_if = {
			limit = { FROM = { original_tag = RSA } }
			FROM = {
				hidden_trigger = { has_country_flag = unlock_tstz }
				custom_trigger_tooltip = { tooltip = unlock_tstz_RSA }
				owns_state = 217 #Tsaritsyn
			}
		}
	}

	equipment_type = {
		armor
	}

	research_categories = {
		mio_cat_tech_all_armor_and_modules
	}

	ai_will_do = { base = 100 }

	initial_trait = {
		name = RUS_tstz_mio_desc

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.25
		}
	}

	trait = {
		token = tstz_upgrade_1
		name = tstz_upgrade_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		mutually_exclusive = { tstz_upgrade_2 }

		position = { x = 1 y = 0 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.22
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_cap_tt
		}
	}

	trait = {
		token = tstz_upgrade_2
		name = tstz_upgrade_2
		icon = GFX_generic_mio_department_icon_facilities

		mutually_exclusive = { tstz_upgrade_1 }

		position = { x = 2 y = 0 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.245
		}
	}

	trait = {
		token = tstz_upgrade_3
		name = tstz_upgrade_3
		icon = GFX_generic_mio_department_icon_facilities

		mutually_exclusive = { tstz_upgrade_4 }

		position = { x = 6 y = 0 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.245
		}
	}

	trait = {
		token = tstz_upgrade_4
		name = tstz_upgrade_4
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		mutually_exclusive = { tstz_upgrade_3 }

		position = { x = 7 y = 0 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.22
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_gro_tt
		}
	}

	trait = {
		token = tstz_upgrade_1_1
		name = tstz_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { tstz_upgrade_1 tstz_upgrade_2 }

		mutually_exclusive = { tstz_upgrade_1_2 }

		position = { x = 2 y = 2 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.22
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_con_tt
		}
	}

	trait = {
		token = tstz_upgrade_1_2
		name = tstz_upgrade_1_2
		icon = GFX_generic_mio_department_icon_facilities

		any_parent = { tstz_upgrade_1 tstz_upgrade_2 }

		mutually_exclusive = { tstz_upgrade_1_1 }

		position = { x = 3 y = 2 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.245
		}
	}

	trait = {
		token = tstz_upgrade_1_3
		name = tstz_upgrade_1_3
		icon = GFX_generic_mio_department_icon_facilities

		any_parent = { tstz_upgrade_3 tstz_upgrade_4 }

		mutually_exclusive = { tstz_upgrade_1_4 }

		position = { x = 5 y = 2 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.245
		}
	}

	trait = {
		token = tstz_upgrade_1_4
		name = tstz_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { tstz_upgrade_3 tstz_upgrade_4 }

		mutually_exclusive = { tstz_upgrade_1_3 }

		position = { x = 6 y = 2 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.22
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_res_tt
		}
	}

	trait = {
		token = tstz_upgrade_2_5
		name = tstz_upgrade_2_5
		icon = GFX_icon_tstz_MIO

		special_trait_background = yes

		any_parent = { tstz_upgrade_1_1 tstz_upgrade_1_2 }
		any_parent = { tstz_upgrade_1_3 tstz_upgrade_1_4 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_10
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		available = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_5
				}
			}
		}

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_10
					}
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_9
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_9
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_10
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_8
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_8
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_9
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_7
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_7
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_8
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_6
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_6
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_7
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_5
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_5
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_6
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_4
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_4
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_5
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_3
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_3
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_4
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_2
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_2
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_3
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_1
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_1
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_2
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_10_double
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		available = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_5
				}
			}
		}

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_10_double
					}
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_9_double
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_9_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_10_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_8_double
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_8_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_9_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_7_double
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_7_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_8_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_6_double
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_6_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_7_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_5_double
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_5_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_6_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_4_double
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_4_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_5_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_3_double
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_3_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_4_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_2_double
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_2_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_3_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_cap_tt
			subtract_from_variable = { tstz_eff_cap_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_1_double
		name = tstz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_1_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_2_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_10
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_5
				}
			}
		}

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_10
					}
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_9
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_9
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_10
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_8
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_8
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_9
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_7
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_7
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_8
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_6
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_6
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_7
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_5
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_5
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_6
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_4
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_4
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_5
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_3
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_3
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_4
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_2
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_2
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_3
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_1
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_1
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_2
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_10_double
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_5
				}
			}
		}

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_10_double
					}
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_9_double
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_9_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_10_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_8_double
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_8_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_9_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_7_double
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_7_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_8_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_6_double
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_6_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_7_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_5_double
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_5_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_6_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_4_double
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_4_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_5_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_3_double
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_3_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_4_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_2_double
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_2_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_3_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_eff_gro_tt
			subtract_from_variable = { tstz_eff_gro_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_1_double
		name = tstz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_1_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_2_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_10
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		available = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_5
				}
			}
		}

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_10
					}
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_9
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_9
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_10
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_8
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_8
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_9
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_7
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_7
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_8
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_6
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_6
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_7
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_5
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_5
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_6
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_4
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_4
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_5
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_3
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_3
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_4
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_2
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_2
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_3
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_1
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_1
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_2
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_10_double
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		available = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_5
				}
			}
		}

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_10_double
					}
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_9_double
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_9_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_10_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_8_double
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_8_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_9_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_7_double
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_7_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_8_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_6_double
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_6_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_7_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_5_double
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_5_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_6_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_4_double
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_4_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_5_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_3_double
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_3_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_4_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_2_double
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_2_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_3_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_conversion_tt
			subtract_from_variable = { tstz_conversion_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_1_double
		name = tstz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_1_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_2_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_10
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		available = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_5
				}
			}
		}

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_10
					}
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_9
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_9
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_10
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_8
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_8
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_9
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_7
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_7
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_8
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_6
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_6
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_7
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_5
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_5
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_6
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_4
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_4
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_5
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_3
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_3
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_4
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_2
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_2
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_3
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_1
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_1
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_2
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_10_double
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		available = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_5
				}
			}
		}

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_10_double
					}
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_9_double
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_9_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_10_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_8_double
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_8_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_9_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_7_double
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_7_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_8_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_6_double
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_6_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_7_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_5_double
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_5_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_6_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_4_double
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_4_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_5_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_3_double
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_3_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_4_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_2_double
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_2_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_3_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			custom_effect_tooltip = tstz_upgrade_resetable_resources_tt
			subtract_from_variable = { tstz_resources_counter = 1 }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_1_double
		name = tstz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_1_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_2_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}
	}
}
RUS_chtz_organisation = {
	name = chtz
	icon = GFX_idea_chtz
	allowed = {
		is_russian_tag = yes
	}
	available = {
		if = {
			limit = { FROM = { original_tag = RUS } }
			FROM = {
				has_country_flag = unlock_chtz
				owns_state = 572 #Chelyabinsk
			}
		}
		else_if = {
			limit = { FROM = { original_tag = FER } }
			FROM = {
				hidden_trigger = { has_country_flag = unlock_chtz }
				custom_trigger_tooltip = { tooltip = unlock_chtz_FER }
				owns_state = 572 #Chelyabinsk
			}
		}
		else_if = {
			limit = { FROM = { original_tag = RSA } }
			FROM = {
				hidden_trigger = { has_country_flag = unlock_chtz }
				custom_trigger_tooltip = { tooltip = unlock_chtz_RSA }
				owns_state = 572 #Chelyabinsk
			}
		}
	}

	equipment_type = {
		armor
	}

	research_categories = {
		mio_cat_tech_all_armor_and_modules
	}

	on_industrial_manufacturer_assigned = {
		FROM = {
			if = {
				limit = { NOT = { has_variable = MIO_CHTZ_assigned_manufacturer_number } }
				set_variable = {
					var = MIO_CHTZ_assigned_manufacturer_number
					value = 1
				}
			}
			else = {
				add_to_variable = { MIO_CHTZ_assigned_manufacturer_number = 1 }
			}
		}
		custom_effect_tooltip = RUS_MIO_Research_Gain_tt
		custom_effect_tooltip = tooltip_white_line
	}

	on_industrial_manufacturer_unassigned = {
		FROM = {
			subtract_from_variable = { MIO_CHTZ_assigned_manufacturer_number = 1 }
		}
	}

	on_tech_research_completed = {
		if = {
			limit = { NOT = { has_mio_flag = RUS_disable_research_speed_loss } }
			hidden_effect = {
				FROM = {
					mio:RUS_chtz_organisation = {
						set_mio_research_bonus = 0
					}
					clr_country_flag = RUS_CHTZ_RS_Notification
				}
			}
			custom_effect_tooltip = RUS_manufacturer_research_reset_tt
			custom_effect_tooltip = tooltip_white_line
		}
	}

	on_tech_research_cancelled = {
		hidden_effect = {
			FROM = {
				mio:RUS_chtz_organisation = {
					set_mio_research_bonus = 0
				}
				clr_country_flag = RUS_CHTZ_RS_Notification
			}
		}
		custom_effect_tooltip = RUS_manufacturer_research_reset_tt
		custom_effect_tooltip = tooltip_white_line
	}

	ai_will_do = { base = 1000 }

	initial_trait = {
		name = RUS_chtz_mio_desc
	}

	trait = {
		token = chtz_upgrade_1
		name = chtz_upgrade_1
		icon = GFX_generic_mio_trait_icon_breakthrough

		position = { x = 0 y = 0 }

		mutually_exclusive = { chtz_upgrade_2 }

		equipment_bonus = {
			breakthrough = -0.07
			build_cost_ic = -0.02
		}

		on_complete = {
			add_mio_research_bonus = 0.19
			add_to_variable = { total_campaign_xp = 19 }
		}
	}

	trait = {
		token = chtz_upgrade_2
		name = chtz_upgrade_2
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		position = { x = 1 y = 0 }

		mutually_exclusive = { chtz_upgrade_1 chtz_upgrade_3 }

		on_complete = {
			custom_effect_tooltip = RUS_manufacturer_trait_research_cap_chtz_tt
			add_to_variable = { max_research_speed = 0.25 }
			add_to_variable = { max_research_speed_loc = 25 }
		}
	}

	trait = {
		token = chtz_upgrade_3
		name = chtz_upgrade_3
		icon = GFX_generic_mio_trait_icon_soft_attack

		position = { x = 2 y = 0 }

		mutually_exclusive = { chtz_upgrade_2 }

		equipment_bonus = {
			soft_attack = -0.07
			build_cost_ic = -0.02
		}

		on_complete = {
			add_mio_research_bonus = 0.13
			add_to_variable = { total_campaign_xp = 13 }
		}
	}

	trait = {
		token = chtz_upgrade_4
		name = chtz_upgrade_4
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x = 6 y = 0 }

		mutually_exclusive = { chtz_upgrade_5 }

		equipment_bonus = {
			maximum_speed = -0.07
			build_cost_ic = -0.02
		}

		on_complete = {
			add_mio_research_bonus = 0.16
			add_to_variable = { total_campaign_xp = 16 }
		}
	}

	trait = {
		token = chtz_upgrade_5
		name = chtz_upgrade_5
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		position = { x = 7 y = 0 }

		mutually_exclusive = { chtz_upgrade_4 chtz_upgrade_6 }

		on_complete = {
			custom_effect_tooltip = RUS_manufacturer_trait_research_cap_chtz_tt
			add_to_variable = { max_research_speed = 0.25 }
			add_to_variable = { max_research_speed_loc = 25 }
		}
	}

	trait = {
		token = chtz_upgrade_6
		name = chtz_upgrade_6
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		position = { x = 8 y = 0 }

		mutually_exclusive = { chtz_upgrade_5 }

		equipment_bonus = {
			fuel_consumption = 0.35
			build_cost_ic = -0.02
		}

		on_complete = {
			add_mio_research_bonus = 0.11
			add_to_variable = { total_campaign_xp = 11 }
		}
	}

	trait = {
		token = chtz_upgrade_1_1
		name = chtz_upgrade_1_1
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			FROM = {
				owns_state = 572
			}
		}

		position = { x = 3 y = 1 }

		mutually_exclusive = { chtz_upgrade_1_2 }

		on_complete = {
			FROM = {
				572 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			add_mio_research_bonus = -0.04
			add_to_variable = { total_campaign_xp = -4 }
		}
	}

	trait = {
		token = chtz_upgrade_1_2
		name = chtz_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 1 }

		mutually_exclusive = { chtz_upgrade_1_1 chtz_upgrade_1_3 }

		equipment_bonus = {
			build_cost_ic = -0.02
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 3
		}

		on_complete = {
			custom_effect_tooltip = RUS_manufacturer_research_no_reset_tt
			set_mio_flag = RUS_disable_research_speed_loss
		}
	}

	trait = {
		token = chtz_upgrade_1_3
		name = chtz_upgrade_1_3
		icon = GFX_KR_generic_mio_trait_icon_design_cost

		position = { x = 5 y = 1 }

		mutually_exclusive = { chtz_upgrade_1_2 }

		organization_modifier = {
			military_industrial_organization_design_team_change_cost = -1.0
		}

		on_complete = {
			add_mio_research_bonus = 0.06
			add_to_variable = { total_campaign_xp = 6 }
		}
	}

	trait = {
		token = chtz_upgrade_2_1
		name = chtz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_hard_attack

		position = { x = 1 y = 2 }

		any_parent = { chtz_upgrade_1 chtz_upgrade_2 chtz_upgrade_3 }

		equipment_bonus = {
			hard_attack = -0.07
			build_cost_ic = -0.02
		}
	}

	trait = {
		token = chtz_upgrade_2_2
		name = chtz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_ap_attack

		position = { x = 7 y = 2 }

		any_parent = { chtz_upgrade_4 chtz_upgrade_5 chtz_upgrade_6 }

		equipment_bonus = {
			ap_attack = -0.07
			build_cost_ic = -0.02
		}
	}

	trait = {
		token = chtz_upgrade_3_1
		name = chtz_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_hardness

		position = { x = 3 y = 3 }

		all_parents = { chtz_upgrade_2_1 }
		any_parent = { chtz_upgrade_1_1 chtz_upgrade_1_2 chtz_upgrade_1_3 }

		equipment_bonus = {
			hardness = -0.07
			build_cost_ic = -0.02
		}
	}

	trait = {
		token = chtz_upgrade_3_2
		name = chtz_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_armor_value

		position = { x = 5 y = 3 }

		all_parents = { chtz_upgrade_2_2 }
		any_parent = { chtz_upgrade_1_1 chtz_upgrade_1_2 chtz_upgrade_1_3 }

		equipment_bonus = {
			armor_value = -0.07
			build_cost_ic = -0.02
		}
	}

	trait = {
		token = chtz_upgrade_4_1
		name = chtz_upgrade_4_1
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = {
				NOT = {
					has_country_flag = improve_chtz
				}
			}
			NOT = { is_mio_trait_completed = chtz_upgrade_4_1 }
		}

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_country_flag = improve_chtz }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = {
					hidden_trigger = { has_country_flag = improve_chtz }
					custom_trigger_tooltip = { tooltip = improve_chtz_FER }
				}
			}
			else_if = {
				limit = { FROM = { original_tag = RSA } }
				FROM = {
					hidden_trigger = { has_country_flag = improve_chtz }
					custom_trigger_tooltip = { tooltip = improve_chtz_RSA }
				}
			}
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		on_complete = {
			set_temp_variable = { current_research_bonus = research_bonus }
			set_temp_variable = { chtz_name = THIS }
			if = {
				limit = {
					check_variable = { research_bonus < 0.1 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 0 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.09 }
					check_variable = { research_bonus < 0.2 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 1 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.19 }
					check_variable = { research_bonus < 0.3 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 2 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.29 }
					check_variable = { research_bonus < 0.4 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 3 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.39 }
					check_variable = { research_bonus < 0.5 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 4 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.49 }
					check_variable = { research_bonus < 0.6 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 5 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.59 }
					check_variable = { research_bonus < 0.7 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 6 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.69 }
					check_variable = { research_bonus < 0.8 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 7 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.79 }
					check_variable = { research_bonus < 0.9 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 8 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.89 }
					check_variable = { research_bonus < 1.0 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 9 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.99 }
					check_variable = { research_bonus < 1.1 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 10 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 1.09 }
					check_variable = { research_bonus < 1.2 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 11 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 1.19 }
					check_variable = { research_bonus < 1.3 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 12 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 1.29 }
					check_variable = { research_bonus < 1.4 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 13 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 1.39 }
					check_variable = { research_bonus < 1.5 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 14 }
			}
			multiply_temp_variable = { current_research_bonus = 100 }
			custom_effect_tooltip = RUS_chtz_scaling_tt
			RUS_unlock_chtz_trait = yes
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd
		name = chtz_upgrade_4_1_tankograd
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = {
				has_country_flag = improve_chtz
			}
			NOT = { is_mio_trait_completed = chtz_upgrade_4_1_tankograd }
		}

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_country_flag = improve_chtz }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = {
					hidden_trigger = { has_country_flag = improve_chtz }
					custom_trigger_tooltip = { tooltip = improve_chtz_FER }
				}
			}
			else_if = {
				limit = { FROM = { original_tag = RSA } }
				FROM = {
					hidden_trigger = { has_country_flag = improve_chtz }
					custom_trigger_tooltip = { tooltip = improve_chtz_RSA }
				}
			}
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		on_complete = {
			set_temp_variable = { current_research_bonus = research_bonus }
			set_temp_variable = { chtz_name = THIS }
			if = {
				limit = {
					check_variable = { research_bonus < 0.1 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 0 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.09 }
					check_variable = { research_bonus < 0.2 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 1 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.19 }
					check_variable = { research_bonus < 0.3 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 2 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.29 }
					check_variable = { research_bonus < 0.4 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 3 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.39 }
					check_variable = { research_bonus < 0.5 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 4 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.49 }
					check_variable = { research_bonus < 0.6 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 5 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.59 }
					check_variable = { research_bonus < 0.7 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 6 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.69 }
					check_variable = { research_bonus < 0.8 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 7 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.79 }
					check_variable = { research_bonus < 0.9 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 8 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.89 }
					check_variable = { research_bonus < 1.0 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 9 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.99 }
					check_variable = { research_bonus < 1.1 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 10 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 1.09 }
					check_variable = { research_bonus < 1.2 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 11 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 1.19 }
					check_variable = { research_bonus < 1.3 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 12 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 1.29 }
					check_variable = { research_bonus < 1.4 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 13 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 1.39 }
					check_variable = { research_bonus < 1.5 }
				}
				set_temp_variable = { build_cost_ic_to_gain = 14 }
			}
			multiply_temp_variable = { current_research_bonus = 100 }
			custom_effect_tooltip = RUS_chtz_scaling_tt
			RUS_unlock_chtz_trait = yes
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_0
		name = chtz_upgrade_4_1_tankograd
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = {
				has_country_flag = improve_chtz
			}
			is_mio_trait_completed = chtz_upgrade_4_1_tankograd_0
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = 0
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_1
		name = chtz_upgrade_4_1_tankograd
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = {
				has_country_flag = improve_chtz
			}
			is_mio_trait_completed = chtz_upgrade_4_1_tankograd_1
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.01
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_2
		name = chtz_upgrade_4_1_tankograd
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = {
				has_country_flag = improve_chtz
			}
			is_mio_trait_completed = chtz_upgrade_4_1_tankograd_2
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.02
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_3
		name = chtz_upgrade_4_1_tankograd
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = {
				has_country_flag = improve_chtz
			}
			is_mio_trait_completed = chtz_upgrade_4_1_tankograd_3
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.03
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_4
		name = chtz_upgrade_4_1_tankograd
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = {
				has_country_flag = improve_chtz
			}
			is_mio_trait_completed = chtz_upgrade_4_1_tankograd_4
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.04
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_5
		name = chtz_upgrade_4_1_tankograd
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = {
				has_country_flag = improve_chtz
			}
			is_mio_trait_completed = chtz_upgrade_4_1_tankograd_5
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_6
		name = chtz_upgrade_4_1_tankograd
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = {
				has_country_flag = improve_chtz
			}
			is_mio_trait_completed = chtz_upgrade_4_1_tankograd_6
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.06
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_7
		name = chtz_upgrade_4_1_tankograd
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = {
				has_country_flag = improve_chtz
			}
			is_mio_trait_completed = chtz_upgrade_4_1_tankograd_7
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.07
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_8
		name = chtz_upgrade_4_1_tankograd
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = {
				has_country_flag = improve_chtz
			}
			is_mio_trait_completed = chtz_upgrade_4_1_tankograd_8
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.08
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_9
		name = chtz_upgrade_4_1_tankograd
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = {
				has_country_flag = improve_chtz
			}
			is_mio_trait_completed = chtz_upgrade_4_1_tankograd_9
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.09
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_10
		name = chtz_upgrade_4_1_tankograd
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = {
				has_country_flag = improve_chtz
			}
			is_mio_trait_completed = chtz_upgrade_4_1_tankograd_10
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.10
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_11
		name = chtz_upgrade_4_1_tankograd
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = {
				has_country_flag = improve_chtz
			}
			is_mio_trait_completed = chtz_upgrade_4_1_tankograd_11
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.11
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_12
		name = chtz_upgrade_4_1_tankograd
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = {
				has_country_flag = improve_chtz
			}
			is_mio_trait_completed = chtz_upgrade_4_1_tankograd_11
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.12
		}
	}
}

#################
### Ship MIOs ###
#################
RUS_bz_organisation = {
	name = bz
	icon = GFX_idea_bz
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 195 } } #Petrograd

	equipment_type = {
		mio_cat_eq_all_battleship
		mio_cat_eq_all_carrier
	}

	research_categories = {
		mio_cat_tech_all_capital_ship_and_modules
		mio_cat_tech_all_carrier_and_modules
		tp_tech
	}

	on_design_team_assigned_to_tech = {
		if = {
			limit = { FROM = { NOT = { has_variable = BZ_Research_Number } } }
			FROM = {
				set_variable = {
					var = BZ_Research_Number
					value = 1
				}
			}
		}
		else = {
			FROM = {
				add_to_variable = {
					var = BZ_Research_Number
					value = 1
				}
			}
		}
	}

	on_tech_research_cancelled = {
		FROM = {
			subtract_from_variable = {
				var = BZ_Research_Number
				value = 1
			}
		}
	}

	on_tech_research_completed = {
		FROM = {
			subtract_from_variable = {
				var = BZ_Research_Number
				value = 1
			}
		}
	}

	on_industrial_manufacturer_assigned = {
		custom_effect_tooltip = RUS_MIO_XP_Gain_tt
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_bz_mio_desc
	}

	trait = {
		token = bz_upgrade_1
		name = bz_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 0 y = 0 }

		mutually_exclusive = { bz_upgrade_2 }

		limit_to_equipment_type = { ship_hull_heavy }

		equipment_bonus = {
			naval_torpedo_enemy_critical_chance_factor = -0.1
		}

		on_complete = {
			multiply_variable = { weekly_funds_requirement = 0.33 }
			multiply_variable = { weekly_funds_requirement_loc = 0.33 }
			FROM = {
				custom_effect_tooltip = RUS_manufacturer_trait_navy_xp_min_funds_bz_tt
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = tooltip_white_line
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 1 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = bz_upgrade_2
		name = bz_upgrade_2
		icon = GFX_generic_mio_trait_icon_naval_torpedo_hit_chance_factor

		position = { x = 2 y = 0 }

		mutually_exclusive = { bz_upgrade_1 }

		limit_to_equipment_type = { ship_hull_heavy }

		equipment_bonus = {
			naval_torpedo_enemy_critical_chance_factor = -0.2
			build_cost_ic = 0.1
		}

		on_complete = {
			add_to_variable = { total_campaign_xp = 30 }
			FROM = {
				navy_experience = 30
				custom_effect_tooltip = tooltip_white_line
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 1 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = bz_upgrade_3
		name = bz_upgrade_3
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		position = { x = 4 y = 0 }

		equipment_bonus = {
			anti_air_attack = 0.1
		}

		on_complete = {
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 1 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = bz_upgrade_4
		name = bz_upgrade_4
		icon = GFX_generic_mio_department_icon_ship_carrier_utility

		position = { x = 6 y = 0 }

		mutually_exclusive = { bz_upgrade_5 }

		limit_to_equipment_type = { ship_hull_carrier }

		equipment_bonus = {
			carrier_size = 2
		}

		on_complete = {
			add_to_variable = { total_campaign_xp = 50 }
			FROM = {
				navy_experience = 50
				custom_effect_tooltip = tooltip_white_line
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 1 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = bz_upgrade_5
		name = bz_upgrade_5
		icon = GFX_KR_generic_mio_trait_icon_navy_xp

		position = { x = 8 y = 0 }

		mutually_exclusive = { bz_upgrade_4 }

		limit_to_equipment_type = { ship_hull_carrier }

		equipment_bonus = {
			build_cost_ic = -0.15
		}

		on_complete = {
			multiply_variable = { xp_gain_loc = 1.5 }
			FROM = {
				custom_effect_tooltip = RUS_manufacturer_trait_navy_xp_bz_tt
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = tooltip_white_line
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 1 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = bz_upgrade_1_1
		name = bz_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_batteries_hit_chance

		any_parent = { bz_upgrade_1 bz_upgrade_2 }

		position = { x = 1 y = 1 }

		limit_to_equipment_type = { ship_hull_heavy }

		equipment_bonus = {
			naval_light_gun_hit_chance_factor = 0.1
			naval_heavy_gun_hit_chance_factor = 0.1
		}
	}

	trait = {
		token = bz_upgrade_1_2
		name = bz_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_naval_speed

		all_parents = { bz_upgrade_3 }

		position = { x = 3 y = 1 }

		mutually_exclusive = { bz_upgrade_1_3 }

		equipment_bonus = {
			naval_speed = 0.05
		}
	}

	trait = {
		token = bz_upgrade_1_3
		name = bz_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_naval_speed

		all_parents = { bz_upgrade_3 }

		position = { x = 5 y = 1 }

		mutually_exclusive = { bz_upgrade_1_2 }

		equipment_bonus = {
			build_cost_ic = 0.05
			naval_speed = 0.1
		}
	}

	trait = {
		token = bz_upgrade_1_4
		name = bz_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { bz_upgrade_4 bz_upgrade_5 }

		position = { x = 7 y = 1 }

		limit_to_equipment_type = { ship_hull_carrier }

		equipment_bonus = {
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = bz_upgrade_2_1
		name = bz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { bz_upgrade_1_1 }

		position = { x = 1 y = 2 }

		limit_to_equipment_type = { ship_hull_heavy }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = bz_upgrade_2_2
		name = bz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_armor_value

		any_parent = { bz_upgrade_1_2 bz_upgrade_1_3 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			armor_value = 0.1
			naval_torpedo_damage_reduction_factor = 0.25
		}
	}

	trait = {
		token = bz_upgrade_2_3
		name = bz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { bz_upgrade_1_4 }

		position = { x = 7 y = 2 }

		limit_to_equipment_type = { ship_hull_carrier }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = bz_upgrade_3_1
		name = bz_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { bz_upgrade_2_1 }

		position = { x = 0 y = 3 }

		mutually_exclusive = { bz_upgrade_3_2 }

		limit_to_equipment_type = { ship_hull_heavy }

		equipment_bonus = {
			max_strength = 0.1
		}
	}

	trait = {
		token = bz_upgrade_3_2
		name = bz_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { bz_upgrade_2_1 }

		position = { x = 2 y = 3 }

		mutually_exclusive = { bz_upgrade_3_1 }

		limit_to_equipment_type = { ship_hull_heavy }

		equipment_bonus = {
			max_strength = 0.2
		}

		production_bonus = {
			production_resource_need_factor = 0.4
		}
	}

	trait = {
		token = bz_upgrade_3_3
		name = bz_upgrade_3_3
		icon = GFX_generic_mio_department_icon_ship_capital_ship_utility

		all_parents = { bz_upgrade_2_2 }

		position = { x = 3 y = 3 }

		mutually_exclusive = { bz_upgrade_3_4 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.25
		}
	}

	trait = {
		token = bz_upgrade_3_4
		name = bz_upgrade_3_4
		icon = GFX_generic_mio_trait_icon_naval_range

		all_parents = { bz_upgrade_2_2 }

		position = { x = 5 y = 3 }

		mutually_exclusive = { bz_upgrade_3_3 }

		equipment_bonus = {
			naval_range = 0.2
		}
	}

	trait = {
		token = bz_upgrade_3_5
		name = bz_upgrade_3_5
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { bz_upgrade_2_3 }

		position = { x = 6 y = 3 }

		limit_to_equipment_type = { ship_hull_carrier }

		mutually_exclusive = { bz_upgrade_3_6 }

		equipment_bonus = {
			max_strength = 0.1
		}
	}

	trait = {
		token = bz_upgrade_3_6
		name = bz_upgrade_3_6
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { bz_upgrade_2_3 }

		position = { x = 8 y = 3 }

		limit_to_equipment_type = { ship_hull_carrier }

		mutually_exclusive = { bz_upgrade_3_5 }

		equipment_bonus = {
			max_strength = 0.2
		}

		production_bonus = {
			production_resource_need_factor = 0.4
		}
	}

	trait = {
		token = bz_upgrade_4_1
		name = bz_upgrade_4_1
		icon = GFX_icon_bz_MIO

		special_trait_background = yes

		any_parent = { bz_upgrade_3_1 bz_upgrade_3_2 }
		any_parent = { bz_upgrade_3_3 bz_upgrade_3_4 }
		any_parent = { bz_upgrade_3_5 bz_upgrade_3_6 }

		available = {
			if = {
				limit = {
					FROM = {
						OR = {
							original_tag = RUS
							original_tag = RSA
						}
					}
				}
				FROM = { has_completed_focus = RUS_petrograd_dockyards }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = { has_completed_focus = FER_return_to_kremlin }
			}
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}
}
RUS_av_organisation = {
	name = av
	icon = GFX_idea_av
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 195 } } #Petrograd

	equipment_type = {
		mio_cat_eq_all_destroyer
		mio_cat_eq_all_cruiser
	}

	research_categories = {
		mio_cat_tech_all_destroyer_and_modules
		mio_cat_tech_all_cruiser_and_modules
		tp_tech
	}

	ai_will_do = { base = 1000 }

	initial_trait = {
		name = RUS_av_mio_desc
	}

	on_industrial_manufacturer_assigned = {
		custom_effect_tooltip = RUS_av_decaying_funds_bonus_tt
	}

	trait = {
		token = av_upgrade_1
		name = av_upgrade_1
		icon = GFX_generic_mio_trait_icon_naval_speed

		position = { x = 0 y = 0 }

		mutually_exclusive = { av_upgrade_2 }

		equipment_bonus = {
			naval_speed = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 2 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = av_upgrade_2
		name = av_upgrade_2
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 2 y = 0 }

		mutually_exclusive = { av_upgrade_1 }

		on_complete = {
			subtract_from_variable = { Weekly_funds_decay = 0.01 }
			subtract_from_variable = { Weekly_funds_decay_loc = 1 }
			custom_effect_tooltip = RUS_av_reduce_decaying_funds_bonus_tt
			custom_effect_tooltip = tooltip_white_line
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 2 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = av_upgrade_3
		name = av_upgrade_3
		icon = GFX_generic_mio_trait_icon_surface_detection

		position = { x = 6 y = 0 }

		mutually_exclusive = { av_upgrade_4 }

		equipment_bonus = {
			surface_detection = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 2 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = av_upgrade_4
		name = av_upgrade_4
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 8 y = 0 }

		mutually_exclusive = { av_upgrade_3 }

		on_complete = {
			add_to_variable = { Funds_Bonus = 0.50 }
			add_to_variable = { Funds_Bonus_loc = 50 }
			custom_effect_tooltip = RUS_av_max_decaying_funds_bonus_tt
			custom_effect_tooltip = tooltip_white_line
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 2 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = av_upgrade_1_1
		name = av_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_batteries_hit_chance

		any_parent = { av_upgrade_1 av_upgrade_2 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			naval_light_gun_hit_chance_factor = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
		}
	}

	trait = {
		token = av_upgrade_1_3
		name = av_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_naval_torpedo_hit_chance_factor

		any_parent = { av_upgrade_3 av_upgrade_4 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			naval_torpedo_hit_chance_factor = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
		}
	}

	trait = {
		token = av_upgrade_2_1
		name = av_upgrade_2_1
		icon = GFX_icon_av_MIO

		special_trait_background = yes

		all_parents = { av_upgrade_1_1 av_upgrade_1_3 av_upgrade_4_2 }

		available = {
			if = {
				limit = {
					FROM = {
						OR = {
							original_tag = RUS
							original_tag = RSA
						}
					}
				}
				FROM = { has_completed_focus = RUS_petrograd_dockyards }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = { has_completed_focus = FER_return_to_kremlin }
			}
		}

		position = { x = 4 y = 2 }

		equipment_bonus = {
			lg_attack = 0.1
			hg_attack = 0.1
			torpedo_attack = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = { unlock_decision_tooltip = { decision = RUS_AV_Repeatable_Random_Funds show_effect_tooltip = yes } }
			hidden_effect = { FROM = { activate_targeted_decision = { decision = RUS_AV_Repeatable_Random_Funds target = FROM } } }
		}
	}

	trait = {
		token = av_upgrade_3_1
		name = av_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_sub_detection

		position = { x = 0 y = 3 }

		mutually_exclusive = { av_upgrade_3_2 }

		equipment_bonus = {
			sub_detection = 0.1
			sub_attack = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 2 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = av_upgrade_3_2
		name = av_upgrade_3_2
		icon = GFX_generic_mio_department_icon_facilities

		position = { x = 2 y = 3 }

		mutually_exclusive = { av_upgrade_3_1 }

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
			RUS_AV_set_random_decaying_funds_bonus = yes
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 2 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = av_upgrade_3_3
		name = av_upgrade_3_3
		icon = GFX_generic_mio_trait_icon_max_strength

		position = { x = 6 y = 3 }

		mutually_exclusive = { av_upgrade_3_4 }

		equipment_bonus = {
			max_strength = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 2 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = av_upgrade_3_4
		name = av_upgrade_3_4
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 8 y = 3 }

		mutually_exclusive = { av_upgrade_3_3 }

		on_complete = {
			add_to_variable = { Number_of_funds_decay_granted = 1 }
			custom_effect_tooltip = RUS_AV_double_whammy_tt
			custom_effect_tooltip = tooltip_white_line
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 2 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = av_upgrade_4_1
		name = av_upgrade_4_1
		icon = GFX_generic_mio_trait_icon_lg_attack

		any_parent = { av_upgrade_3_1 av_upgrade_3_2 }

		position = { x = 2 y = 4 }

		equipment_bonus = {
			lg_armor_piercing = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
		}
	}

	trait = {
		token = av_upgrade_4_2
		name = av_upgrade_4_2
		icon = GFX_generic_mio_trait_icon_naval_range

		all_parents = { av_upgrade_4_1 av_upgrade_4_3 }

		position = { x = 4 y = 4 }

		equipment_bonus = {
			naval_range = 0.1
			naval_weather_penalty_factor = -0.25
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
		}
	}

	trait = {
		token = av_upgrade_4_3
		name = av_upgrade_4_3
		icon = GFX_generic_mio_trait_icon_hg_attack

		any_parent = { av_upgrade_3_3 av_upgrade_3_4 }

		position = { x = 6 y = 4 }

		equipment_bonus = {
			hg_armor_piercing = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
		}
	}
}
RUS_as_organisation = {
	name = as
	icon = GFX_idea_as
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 218 } } #Rostov

	equipment_type = {
		mio_cat_eq_all_carrier
		mio_cat_eq_all_battleship
		mio_cat_eq_all_cruiser
		mio_cat_eq_all_destroyer
		submarine
		convoy_1
	}

	research_categories = {
		mio_cat_tech_all_carrier_and_modules
		mio_cat_tech_all_capital_ship_and_modules
		mio_cat_tech_all_destroyer_and_modules
		mio_cat_tech_all_cruiser_and_modules
		mio_cat_tech_all_submarine_and_modules
		tp_tech
	}

	on_industrial_manufacturer_assigned = {
		FROM = {
			if = {
				limit = { NOT = { has_variable = MIO_AS_assigned_manufacturer_number } }
				set_variable = {
					var = MIO_AS_assigned_manufacturer_number
					value = 1
				}
			}
			else = {
				add_to_variable = { MIO_AS_assigned_manufacturer_number = 1 }
			}
		}
		custom_effect_tooltip = RUS_MIO_Research_Gain_tt
		custom_effect_tooltip = tooltip_white_line
	}

	on_industrial_manufacturer_unassigned = {
		FROM = {
			subtract_from_variable = { MIO_AS_assigned_manufacturer_number = 1 }
		}
	}

	on_tech_research_completed = {
		if = {
			limit = { NOT = { has_mio_flag = RUS_disable_research_speed_loss } }
			hidden_effect = {
				FROM = {
					mio:RUS_as_organisation = {
						set_mio_research_bonus = 0
					}
					clr_country_flag = RUS_AS_RS_Notification
				}
			}
			custom_effect_tooltip = RUS_manufacturer_research_reset_tt
			custom_effect_tooltip = tooltip_white_line
		}
	}

	on_tech_research_cancelled = {
		hidden_effect = {
			FROM = {
				mio:RUS_as_organisation = {
					set_mio_research_bonus = 0
				}
				clr_country_flag = RUS_AS_RS_Notification
			}
		}
		custom_effect_tooltip = RUS_manufacturer_research_reset_tt
		custom_effect_tooltip = tooltip_white_line
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_as_mio_desc
	}

	trait = {
		token = as_upgrade_1
		name = as_upgrade_1
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 1 y = 0 }

		mutually_exclusive = { as_upgrade_2 }

		equipment_bonus = {
			naval_range = -0.1
		}

		production_bonus = {
			production_cost_factor = -0.05
		}

		on_complete = {
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 3 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = as_upgrade_2
		name = as_upgrade_2
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 3 y = 0 }

		mutually_exclusive = { as_upgrade_1 }

		equipment_bonus = {
			naval_range = -0.25
		}

		production_bonus = {
			production_cost_factor = -0.1
		}

		on_complete = {
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 3 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = as_upgrade_3
		name = as_upgrade_3
		icon = GFX_generic_mio_trait_icon_production_capacity

		position = { x = 5 y = 0 }

		mutually_exclusive = { as_upgrade_4 }

		production_bonus = {
			production_capacity_factor = 0.1
		}

		on_complete = {
			add_mio_research_bonus = 0.04
			add_to_variable = { total_campaign_xp = 4 }
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 3 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = as_upgrade_4
		name = as_upgrade_4
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 7 y = 0 }

		mutually_exclusive = { as_upgrade_3 }

		on_complete = {
			custom_effect_tooltip = RUS_manufacturer_trait_research_min_funds_as_tt
			custom_effect_tooltip = tooltip_white_line
			multiply_variable = { weekly_funds_requirement = 0.33 }
			multiply_variable = { weekly_funds_requirement_loc = 0.33 }
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 3 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = as_upgrade_1_1
		name = as_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_production_capacity

		any_parent = { as_upgrade_1 as_upgrade_2 }

		position = { x = 0 y = 1 }

		mutually_exclusive = { as_upgrade_1_2 }

		production_bonus = {
			production_capacity_factor = 0.1
		}

		on_complete = {
			add_mio_research_bonus = 0.20
			add_to_variable = { total_campaign_xp = 20 }
		}
	}

	trait = {
		token = as_upgrade_1_2
		name = as_upgrade_1_2
		icon = GFX_KR_generic_mio_trait_icon_research_bonus

		any_parent = { as_upgrade_1 as_upgrade_2 }

		position = { x = 2 y = 1 }

		mutually_exclusive = { as_upgrade_1_1 }

		on_complete = {
			custom_effect_tooltip = RUS_manufacturer_trait_research_gain_as_tt
			add_to_variable = { weekly_research_speed_gain = 0.03 }
			add_to_variable = { weekly_research_speed_gain_loc = 3 }
		}
	}

	trait = {
		token = as_upgrade_1_3
		name = as_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_naval_speed

		any_parent = { as_upgrade_1 as_upgrade_2 as_upgrade_3 as_upgrade_4 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}

	trait = {
		token = as_upgrade_1_4
		name = as_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_production_capacity

		any_parent = { as_upgrade_3 as_upgrade_4 }

		position = { x = 6 y = 1 }

		mutually_exclusive = { as_upgrade_1_5 }

		production_bonus = {
			production_capacity_factor = 0.1
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 3
		}

		on_complete = {
			add_mio_research_bonus = 0.07
			add_to_variable = { total_campaign_xp = 7 }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = RUS_manufacturer_research_no_reset_tt
			set_mio_flag = RUS_disable_research_speed_loss
		}
	}

	trait = {
		token = as_upgrade_1_5
		name = as_upgrade_1_5
		icon = GFX_KR_generic_mio_trait_icon_research_bonus

		any_parent = { as_upgrade_3 as_upgrade_4 }

		position = { x = 8 y = 1 }

		mutually_exclusive = { as_upgrade_1_4 }

		on_complete = {
			custom_effect_tooltip = RUS_manufacturer_trait_research_cap_as_tt
			add_to_variable = { max_research_speed = 0.5 }
			add_to_variable = { max_research_speed_loc = 50 }
		}
	}

	trait = {
		token = as_upgrade_2_1
		name = as_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		any_parent = { as_upgrade_1_1 as_upgrade_1_2 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			fuel_consumption = -0.35
		}
	}

	trait = {
		token = as_upgrade_2_2
		name = as_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { as_upgrade_1_3 }

		position = { x = 3 y = 2 }

		mutually_exclusive = { as_upgrade_2_3 }

		production_bonus = {
			production_resource_need_factor = -0.2
		}
	}

	trait = {
		token = as_upgrade_2_3
		name = as_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { as_upgrade_1_3 }

		position = { x = 5 y = 2 }

		mutually_exclusive = { as_upgrade_2_2 }

		equipment_bonus = {
			armor_value = -0.1
		}

		production_bonus = {
			production_resource_need_factor = -0.4
		}
	}

	trait = {
		token = as_upgrade_2_4
		name = as_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { as_upgrade_1_4 as_upgrade_1_5 }

		position = { x = 7 y = 2 }

		equipment_bonus = {
			reliability = 0.15
		}
	}

	trait = {
		token = as_upgrade_3_1
		name = as_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_surface_visibility

		all_parents = { as_upgrade_2_1 as_upgrade_2_4 }
		any_parent = { as_upgrade_2_2 as_upgrade_2_3 }

		position = { x = 4 y = 3 }

		equipment_bonus = {
			surface_visibility = -0.1
			sub_visibility = -0.1
		}
	}

	trait = {
		token = as_upgrade_4_1
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		available = {
			if = {
				limit = {
					FROM = {
						OR = {
							original_tag = RUS
							original_tag = RSA
						}
					}
				}
				FROM = { has_completed_focus = RUS_yekaterinas_legacy }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = { has_completed_focus = FER_return_to_kremlin }
			}
		}

		visible = { NOT = { is_mio_trait_completed = as_upgrade_4_1 } }

		position = { x = 4 y = 4 }

		on_complete = {
			set_temp_variable = { current_research_bonus = research_bonus }
			multiply_temp_variable = { current_research_bonus = 100 }
			if = {
				limit = {
					check_variable = { research_bonus < 0.1 }
				}
				set_temp_variable = { as_bonus_to_gain = 0 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.09 }
					check_variable = { research_bonus < 0.2 }
				}
				set_temp_variable = { as_bonus_to_gain = 1 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.19 }
					check_variable = { research_bonus < 0.3 }
				}
				set_temp_variable = { as_bonus_to_gain = 2 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.29 }
					check_variable = { research_bonus < 0.4 }
				}
				set_temp_variable = { as_bonus_to_gain = 3 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.39 }
					check_variable = { research_bonus < 0.5 }
				}
				set_temp_variable = { as_bonus_to_gain = 4 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.49 }
					check_variable = { research_bonus < 0.6 }
				}
				set_temp_variable = { as_bonus_to_gain = 5 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.59 }
					check_variable = { research_bonus < 0.7 }
				}
				set_temp_variable = { as_bonus_to_gain = 6 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.69 }
					check_variable = { research_bonus < 0.8 }
				}
				set_temp_variable = { as_bonus_to_gain = 7 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.79 }
					check_variable = { research_bonus < 0.9 }
				}
				set_temp_variable = { as_bonus_to_gain = 8 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.89 }
					check_variable = { research_bonus < 1.0 }
				}
				set_temp_variable = { as_bonus_to_gain = 9 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.99 }
					check_variable = { research_bonus < 1.1 }
				}
				set_temp_variable = { as_bonus_to_gain = 10 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 1.09 }
					check_variable = { research_bonus < 1.2 }
				}
				set_temp_variable = { as_bonus_to_gain = 11 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 1.19 }
					check_variable = { research_bonus < 1.3 }
				}
				set_temp_variable = { as_bonus_to_gain = 12 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 1.29 }
					check_variable = { research_bonus < 1.4 }
				}
				set_temp_variable = { as_bonus_to_gain = 13 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 1.39 }
					check_variable = { research_bonus < 1.5 }
				}
				set_temp_variable = { as_bonus_to_gain = 14 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 1.49 }
					check_variable = { research_bonus < 1.6 }
				}
				set_temp_variable = { as_bonus_to_gain = 15 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 1.59 }
					check_variable = { research_bonus < 1.7 }
				}
				set_temp_variable = { as_bonus_to_gain = 16 }
			}
			custom_effect_tooltip = RUS_as_scaling_tt
			RUS_unlock_as_trait = yes
		}
	}

	trait = {
		token = as_upgrade_4_1_0
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_0 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = 0
		}
	}

	trait = {
		token = as_upgrade_4_1_1
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_1 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.01
		}
	}

	trait = {
		token = as_upgrade_4_1_2
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_2 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = as_upgrade_4_1_3
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_3 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = as_upgrade_4_1_4
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_4 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = as_upgrade_4_1_5
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_5 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.05
		}
	}

	trait = {
		token = as_upgrade_4_1_6
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_6 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.06
		}
	}

	trait = {
		token = as_upgrade_4_1_7
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_7 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.07
		}
	}

	trait = {
		token = as_upgrade_4_1_8
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_8 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.08
		}
	}

	trait = {
		token = as_upgrade_4_1_9
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_9 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.09
		}
	}

	trait = {
		token = as_upgrade_4_1_10
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_10 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.10
		}
	}

	trait = {
		token = as_upgrade_4_1_11
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_11 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.11
		}
	}

	trait = {
		token = as_upgrade_4_1_12
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_12 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.12
		}
	}

	trait = {
		token = as_upgrade_4_1_13
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_13 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.13
		}
	}

	trait = {
		token = as_upgrade_4_1_14
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_14 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.14
		}
	}

	trait = {
		token = as_upgrade_4_1_15
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_15 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.15
		}
	}

	trait = {
		token = as_upgrade_4_1_16
		name = as_upgrade_4_1
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_16 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.16
		}
	}
}
RUS_dalzavod_organisation = {
	name = dalzavod
	icon = GFX_idea_dalzavod
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 408 } } #Vladivostok

	equipment_type = {
		ship_hull_submarine
		convoy_1
	}

	research_categories = {
		mio_cat_tech_all_submarine_and_modules
		tp_tech
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_dalzavod_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = dalzavod_upgrade_1
		name = dalzavod_upgrade_1
		icon = GFX_generic_mio_trait_icon_torpedo_attack

		position = { x = 0 y = 0 }

		mutually_exclusive = { dalzavod_upgrade_2 }

		limit_to_equipment_type = { ship_hull_submarine }

		equipment_bonus = {
			torpedo_attack = 0.2
		}

		on_complete = {
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 4 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = dalzavod_upgrade_2
		name = dalzavod_upgrade_2
		icon = GFX_generic_mio_trait_icon_sub_visibility

		position = { x = 2 y = 0 }

		mutually_exclusive = { dalzavod_upgrade_1 }

		limit_to_equipment_type = { ship_hull_submarine }

		equipment_bonus = {
			sub_visibility = -0.1
		}

		on_complete = {
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 4 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = dalzavod_upgrade_3
		name = dalzavod_upgrade_3
		icon = GFX_generic_mio_trait_icon_mines

		position = { x = 4 y = 0 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.25
		}

		equipment_bonus = {
			naval_weather_penalty_factor = -0.2
		}

		on_complete = {
			FROM = {
				activate_targeted_decision = { decision = RUS_dalzavod_mining_baltic_sea target = FROM }
				set_variable = {
					var = RUS_dalzavod_mines_number
					value = 100
				}
			}
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 4 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = dalzavod_upgrade_4
		name = dalzavod_upgrade_4
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 6 y = 0 }

		mutually_exclusive = { dalzavod_upgrade_5 }

		limit_to_equipment_type = { convoy_1 }

		equipment_bonus = {
			build_cost_ic = -0.1
		}

		on_complete = {
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 4 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = dalzavod_upgrade_5
		name = dalzavod_upgrade_5
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		position = { x = 8 y = 0 }

		mutually_exclusive = { dalzavod_upgrade_4 }

		limit_to_equipment_type = { convoy_1 }

		equipment_bonus = {
			anti_air_attack = 1.0
		}

		on_complete = {
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 4 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = dalzavod_upgrade_1_1
		name = dalzavod_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_sub_visibility

		any_parent = { dalzavod_upgrade_1 dalzavod_upgrade_2 }

		position = { x = 1 y = 1 }

		limit_to_equipment_type = { ship_hull_submarine }

		equipment_bonus = {
			sub_visibility = -0.1
		}
	}

	trait = {
		token = dalzavod_upgrade_1_2
		name = dalzavod_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_mines

		all_parents = { dalzavod_upgrade_3 }

		position = { x = 3 y = 1 }

		mutually_exclusive = { dalzavod_upgrade_1_3 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.2
		}

		on_complete = {
			custom_effect_tooltip = RUS_dalzavod_increase_mines_tt
			FROM = {
				add_to_variable = {
					var = RUS_dalzavod_mines_number
					value = 50
				}
			}
			custom_effect_tooltip = tooltip_white_line
		}
	}

	trait = {
		token = dalzavod_upgrade_1_3
		name = dalzavod_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_mines

		all_parents = { dalzavod_upgrade_3 }

		position = { x = 5 y = 1 }

		mutually_exclusive = { dalzavod_upgrade_1_2 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.2
		}

		on_complete = {
			FROM = {
				activate_targeted_decision = { decision = RUS_dalzavod_mining_black_sea target = FROM }
			}
			custom_effect_tooltip = tooltip_white_line
		}
	}

	trait = {
		token = dalzavod_upgrade_1_4
		name = dalzavod_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_surface_visibility

		any_parent = { dalzavod_upgrade_4 dalzavod_upgrade_5 }

		position = { x = 7 y = 1 }

		limit_to_equipment_type = { convoy_1 }

		equipment_bonus = {
			surface_visibility = -0.5
		}
	}

	trait = {
		token = dalzavod_upgrade_2_1
		name = dalzavod_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_mines

		any_parent = { dalzavod_upgrade_1_2 dalzavod_upgrade_1_3 }

		position = { x = 3 y = 2 }

		mutually_exclusive = { dalzavod_upgrade_2_2 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.2
		}

		on_complete = {
			custom_effect_tooltip = RUS_dalzavod_increase_mines_tt
			FROM = {
				add_to_variable = {
					var = RUS_dalzavod_mines_number
					value = 50
				}
			}
			custom_effect_tooltip = tooltip_white_line
		}
	}

	trait = {
		token = dalzavod_upgrade_2_2
		name = dalzavod_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_mines

		any_parent = { dalzavod_upgrade_1_2 dalzavod_upgrade_1_3 }

		position = { x = 5 y = 2 }

		mutually_exclusive = { dalzavod_upgrade_2_1 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.2
		}

		on_complete = {
			FROM = {
				activate_targeted_decision = { decision = RUS_dalzavod_mining_far_east target = FROM }
			}
			custom_effect_tooltip = tooltip_white_line
		}
	}

	trait = {
		token = dalzavod_upgrade_3_1
		name = dalzavod_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { dalzavod_upgrade_1_1 }

		position = { x = 2 y = 3 }

		limit_to_equipment_type = { ship_hull_submarine }

		equipment_bonus = {
			max_strength = 0.2
		}
	}

	trait = {
		token = dalzavod_upgrade_3_2
		name = dalzavod_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_mines

		any_parent = { dalzavod_upgrade_2_1 dalzavod_upgrade_2_2 }

		position = { x = 3 y = 3 }

		mutually_exclusive = { dalzavod_upgrade_3_3 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.2
		}

		on_complete = {
			custom_effect_tooltip = RUS_dalzavod_increase_mines_tt
			FROM = {
				add_to_variable = {
					var = RUS_dalzavod_mines_number
					value = 50
				}
			}
			custom_effect_tooltip = tooltip_white_line
		}
	}

	trait = {
		token = dalzavod_upgrade_3_3
		name = dalzavod_upgrade_3_3
		icon = GFX_generic_mio_trait_icon_mines

		any_parent = { dalzavod_upgrade_2_1 dalzavod_upgrade_2_2 }

		position = { x = 5 y = 3 }

		mutually_exclusive = { dalzavod_upgrade_3_2 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.2
		}

		on_complete = {
			FROM = {
				activate_targeted_decision = { decision = RUS_dalzavod_mining_barents target = FROM }
			}
			custom_effect_tooltip = tooltip_white_line
		}
	}

	trait = {
		token = dalzavod_upgrade_3_4
		name = dalzavod_upgrade_3_4
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { dalzavod_upgrade_1_4 }

		position = { x = 6 y = 3 }

		limit_to_equipment_type = { convoy_1 }

		equipment_bonus = {
			max_strength = 0.2
		}
	}

	trait = {
		token = dalzavod_upgrade_4_1
		name = dalzavod_upgrade_4_1
		icon = GFX_icon_dalzavod_MIO

		special_trait_background = yes

		all_parents = { dalzavod_upgrade_3_1 dalzavod_upgrade_3_4 }
		any_parent = { dalzavod_upgrade_3_2 dalzavod_upgrade_3_3 }

		available = {
			if = {
				limit = {
					FROM = {
						OR = {
							original_tag = RUS
							original_tag = RSA
						}
					}
				}
				FROM = { has_completed_focus = RUS_eastern_shores }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = {
					OR = {
						has_completed_focus = FER_masters_over_siberia
						has_completed_focus = FER_return_to_kremlin
					}
				}
			}
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			naval_speed = 0.2
		}
	}
}

##################
### Plane MIOs ###
##################
RUS_gamayun_organisation = {
	name = gamayun_non_socrus
	icon = GFX_idea_gamayun
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 249 } } #Kazan

	equipment_type = {
		small_plane_naval_bomber_airframe
		medium_plane_airframe
		large_plane_maritime_patrol_plane_airframe
		cv_small_plane_naval_bomber_airframe
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_naval_bomber_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	on_tech_research_completed = {
		FROM = {
			if = {
				limit = { has_character = RUS_igor_sikorsky }
				if = {
					limit = { RUS_igor_sikorsky = { is_hired_as_advisor = yes } }
					set_temp_variable = { ideology_change_var = 2 }
					change_ruling_party_popularity = yes
				}
			}
		}
	}

	on_industrial_manufacturer_assigned = {
		if = {
			limit = {
				RUS_has_gamayun_upgrade_3 = yes
			}
			custom_effect_tooltip = RUS_gamayun_random_factories_tt
		}
		else = {
			custom_effect_tooltip = RUS_gamayun_random_factories_required_tt
		}
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_gamayun_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = gamayun_upgrade_1
		name = gamayun_upgrade_1
		icon = GFX_generic_mio_trait_icon_sub_detection

		all_parents = { gamayun_upgrade_3 }

		position = { x = 1 y = 0 }

		mutually_exclusive = { gamayun_upgrade_2 }

		equipment_bonus = {
			sub_detection = 0.2
			surface_detection = 0.1
		}
	}

	trait = {
		token = gamayun_upgrade_2
		name = gamayun_upgrade_2
		icon = GFX_generic_mio_trait_icon_surface_detection

		all_parents = { gamayun_upgrade_3 }

		position = { x = 2 y = 0 }

		mutually_exclusive = { gamayun_upgrade_1 }

		equipment_bonus = {
			sub_detection = 0.1
			surface_detection = 0.2
		}
	}

	trait = {
		token = gamayun_upgrade_3
		name = gamayun_upgrade_3
		icon = GFX_icon_gamayun_investment

		position = { x = 4 y = 0 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.25
		}

		on_complete = {
			hidden_effect = {
				FROM = { set_variable = { RUS_Gamayun_Civ_Chance = 33 } }
				FROM = { set_variable = { RUS_Gamayun_Mil_Chance = 33 } }
				FROM = { set_variable = { RUS_Gamayun_Dockyard_Chance = 33 } }
				FROM = {
					country_event = { id = russia.1002 days = 4 }
				}
			}
			custom_effect_tooltip = RUS_gamayun_upgrade_3_tt
			custom_effect_tooltip = tooltip_white_line
			FROM = { RUS_unlock_gamayun_policies = yes } # `unlock_mio_policy_tooltip` doesn't work in the MIO scope for some reason
		}
	}

	trait = {
		token = gamayun_upgrade_4
		name = gamayun_upgrade_4
		icon = GFX_generic_mio_trait_icon_air_range

		all_parents = { gamayun_upgrade_3 }

		position = { x = 6 y = 0 }

		mutually_exclusive = { gamayun_upgrade_5 }

		equipment_bonus = {
			air_range = 0.15
		}
	}

	trait = {
		token = gamayun_upgrade_5
		name = gamayun_upgrade_5
		icon = GFX_generic_mio_trait_icon_air_range

		all_parents = { gamayun_upgrade_3 }

		position = { x = 7 y = 0 }

		mutually_exclusive = { gamayun_upgrade_4 }

		equipment_bonus = {
			air_range = 0.3
			fuel_consumption = 0.25
		}
	}

	trait = {
		token = gamayun_upgrade_1_1
		name = gamayun_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_naval_strike_targetting

		any_parent = { gamayun_upgrade_1 gamayun_upgrade_2 }

		position = { x = 0 y = 1 }

		mutually_exclusive = { gamayun_upgrade_1_2 }

		equipment_bonus = {
			naval_strike_targetting = 0.1
		}
	}

	trait = {
		token = gamayun_upgrade_1_2
		name = gamayun_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_naval_strike_targetting

		any_parent = { gamayun_upgrade_1 gamayun_upgrade_2 }

		position = { x = 1 y = 1 }

		mutually_exclusive = { gamayun_upgrade_1_1 }

		equipment_bonus = {
			naval_strike_targetting = 0.15
			build_cost_ic = 0.05
		}
	}

	trait = {
		token = gamayun_upgrade_1_3
		name = gamayun_upgrade_1_3
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { gamayun_upgrade_3 }

		position = { x = 3 y = 1 }

		mutually_exclusive = { gamayun_upgrade_1_4 }

		on_complete = {
			add_to_variable = { Min_Progress_loc = 20 }
			add_to_variable = { Max_Progress_loc = 20 }
			custom_effect_tooltip = gamayun_upgrade_1_3_tt
		}
	}

	trait = {
		token = gamayun_upgrade_1_4
		name = gamayun_upgrade_1_4
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { gamayun_upgrade_3 }

		position = { x = 5 y = 1 }

		mutually_exclusive = { gamayun_upgrade_1_3 }

		on_complete = {
			subtract_from_variable = { Min_Days_loc = 50 }
			subtract_from_variable = { Max_Days_loc = 50 }
			custom_effect_tooltip = gamayun_upgrade_1_4_tt
		}
	}

	trait = {
		token = gamayun_upgrade_1_5
		name = gamayun_upgrade_1_5
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { gamayun_upgrade_4 gamayun_upgrade_5 }

		position = { x = 7 y = 1 }

		mutually_exclusive = { gamayun_upgrade_1_6 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = gamayun_upgrade_1_6
		name = gamayun_upgrade_1_6
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { gamayun_upgrade_4 gamayun_upgrade_5 }

		position = { x = 8 y = 1 }

		mutually_exclusive = { gamayun_upgrade_1_5 }

		equipment_bonus = {
			maximum_speed = 0.15
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.2
		}
	}

	trait = {
		token = gamayun_upgrade_2_1
		name = gamayun_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { gamayun_upgrade_1_1 gamayun_upgrade_1_2 }

		position = { x = 0 y = 3 }

		mutually_exclusive = { gamayun_upgrade_2_2 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = gamayun_upgrade_2_2
		name = gamayun_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { gamayun_upgrade_1_1 gamayun_upgrade_1_2 }

		position = { x = 1 y = 3 }

		mutually_exclusive = { gamayun_upgrade_2_1 }

		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = gamayun_upgrade_2_3
		name = gamayun_upgrade_2_3
		icon = GFX_icon_gamayun_civ_chance

		any_parent = { gamayun_upgrade_1_3 gamayun_upgrade_1_4 }

		position = { x = 2 y = 2 }

		mutually_exclusive = { gamayun_upgrade_2_4 gamayun_upgrade_2_5 }

		on_complete = {
			add_to_variable = { Civ_chance_loc = 27 }
			subtract_from_variable = { Mil_chance_loc = 13 }
			subtract_from_variable = { Dockyard_chance_loc = 13 }
			FROM = {
				add_to_variable = {
					var = RUS_Gamayun_Civ_Chance
					value = 66
				}
			}
			custom_effect_tooltip = gamayun_upgrade_2_3_tt
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = gamayun_upgrade_2_3_exclusive_tt
		}
	}

	trait = {
		token = gamayun_upgrade_2_4
		name = gamayun_upgrade_2_4
		icon = GFX_icon_gamayun_mil_chance

		any_parent = { gamayun_upgrade_1_3 gamayun_upgrade_1_4 }

		position = { x = 4 y = 2 }

		mutually_exclusive = { gamayun_upgrade_2_3 gamayun_upgrade_2_5 }

		on_complete = {
			add_to_variable = { Mil_chance_loc = 27 }
			subtract_from_variable = { Civ_chance_loc = 13 }
			subtract_from_variable = { Dockyard_chance_loc = 13 }
			FROM = {
				add_to_variable = {
					var = RUS_Gamayun_Mil_Chance
					value = 66
				}
			}
			custom_effect_tooltip = gamayun_upgrade_2_4_tt
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = gamayun_upgrade_2_4_exclusive_tt
		}
	}

	trait = {
		token = gamayun_upgrade_2_5
		name = gamayun_upgrade_2_5
		icon = GFX_icon_gamayun_dockyard_chance

		any_parent = { gamayun_upgrade_1_3 gamayun_upgrade_1_4 }

		position = { x = 6 y = 2 }

		mutually_exclusive = { gamayun_upgrade_2_3 gamayun_upgrade_2_4 }

		on_complete = {
			add_to_variable = { Dockyard_chance_loc = 27 }
			subtract_from_variable = { Mil_chance_loc = 13 }
			subtract_from_variable = { Civ_chance_loc = 13 }
			FROM = {
				add_to_variable = {
					var = RUS_Gamayun_Dockyard_Chance
					value = 66
				}
			}
			custom_effect_tooltip = gamayun_upgrade_2_5_tt
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = gamayun_upgrade_2_5_exclusive_tt
		}
	}

	trait = {
		token = gamayun_upgrade_2_6
		name = gamayun_upgrade_2_6
		icon = GFX_generic_mio_trait_icon_naval_strike_attack

		any_parent = { gamayun_upgrade_1_5 gamayun_upgrade_1_6 }

		position = { x = 7 y = 3 }

		mutually_exclusive = { gamayun_upgrade_2_7 }

		equipment_bonus = {
			naval_strike_attack = 0.1
		}
	}

	trait = {
		token = gamayun_upgrade_2_7
		name = gamayun_upgrade_2_7
		icon = GFX_generic_mio_trait_icon_naval_strike_attack

		any_parent = { gamayun_upgrade_1_5 gamayun_upgrade_1_6 }

		position = { x = 8 y = 3 }

		mutually_exclusive = { gamayun_upgrade_2_6 }

		equipment_bonus = {
			naval_strike_attack = 0.15
			build_cost_ic = 0.05
		}
	}

	trait = {
		token = gamayun_upgrade_3_1
		name = gamayun_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_mines

		visible = {
			has_dlc_mtg = yes
			has_dlc_bba = yes
		}

		position = { x = 3 y = 3 }

		mutually_exclusive = { gamayun_upgrade_3_2 }

		equipment_bonus = {
			mines_planting = 0.2
			mines_sweeping = 0.1
		}
	}

	trait = {
		token = gamayun_upgrade_3_2
		name = gamayun_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_mines

		visible = {
			has_dlc_mtg = yes
			has_dlc_bba = yes
		}

		position = { x = 5 y = 3 }

		mutually_exclusive = { gamayun_upgrade_3_1 }

		equipment_bonus = {
			mines_planting = 0.1
			mines_sweeping = 0.2
		}
	}

	trait = {
		token = gamayun_upgrade_4_1
		name = gamayun_upgrade_4_1
		icon = GFX_icon_gamayun_MIO

		visible = {
			FROM = {
				NOT = { has_country_flag = RUS_rename_industries }
			}
		}

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_completed_focus = RUS_enter_hundred }
			}
		}

		any_parent = { gamayun_upgrade_2_1 gamayun_upgrade_2_2 }
		any_parent = { gamayun_upgrade_2_3 gamayun_upgrade_2_4 gamayun_upgrade_2_5 }
		any_parent = { gamayun_upgrade_2_6 gamayun_upgrade_2_7 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		equipment_bonus = {
			defense = 0.15
		}
	}

	trait = {
		token = gamayun_upgrade_4_1_soc_rus
		name = gamayun_upgrade_4_1_soc_rus
		icon = GFX_icon_gamayun_MIO

		visible = {
			FROM = {
				has_country_flag = RUS_rename_industries
			}
		}

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_completed_focus = RUS_enter_hundred }
			}
		}

		any_parent = { gamayun_upgrade_2_1 gamayun_upgrade_2_2 }
		any_parent = { gamayun_upgrade_2_3 gamayun_upgrade_2_4 gamayun_upgrade_2_5 }
		any_parent = { gamayun_upgrade_2_6 gamayun_upgrade_2_7 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		equipment_bonus = {
			defense = 0.15
		}
	}
}
RUS_duks_organisation = {
	name = duks
	icon = GFX_idea_duks
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 219 } } #Moscow

	equipment_type = {
		small_plane_airframe
		medium_plane_fighter_airframe
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_medium_aircraft_and_modules
		jet_technology
		plane_modules_tech
	}

	on_tech_research_completed = {
		FROM = {
			if = {
				limit = { has_character = RUS_igor_sikorsky }
				if = {
					limit = { RUS_igor_sikorsky = { is_hired_as_advisor = yes } }
					set_temp_variable = { ideology_change_var = 2 }
					change_ruling_party_popularity = yes
				}
			}
		}
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_duks_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = duks_upgrade_1
		name = duks_upgrade_1
		icon = GFX_generic_mio_trait_icon_air_superiority

		position = { x = 0 y = 0 }

		mutually_exclusive = { duks_upgrade_2 }

		equipment_bonus = {
			air_superiority = 0.05
		}
	}

	trait = {
		token = duks_upgrade_2
		name = duks_upgrade_2
		icon = GFX_generic_mio_trait_icon_air_range

		position = { x = 1 y = 0 }

		mutually_exclusive = { duks_upgrade_1 }

		equipment_bonus = {
			air_range = 0.1
		}
	}

	trait = {
		token = duks_upgrade_3
		name = duks_upgrade_3
		icon = GFX_generic_mio_trait_icon_air_attack

		position = { x = 7 y = 0 }

		mutually_exclusive = { duks_upgrade_4 }

		equipment_bonus = {
			air_attack = 0.05
		}
	}

	trait = {
		token = duks_upgrade_4
		name = duks_upgrade_4
		icon = GFX_generic_mio_trait_icon_air_defence

		position = { x = 8 y = 0 }

		mutually_exclusive = { duks_upgrade_3 }

		equipment_bonus = {
			air_defence = 0.05
		}
	}

	trait = {
		token = duks_upgrade_1_1
		name = duks_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_air_superiority

		any_parent = { duks_upgrade_1 duks_upgrade_2 }

		position = { x = 2 y = 1 }

		mutually_exclusive = { duks_upgrade_1_2 }

		equipment_bonus = {
			air_superiority = 0.1
			air_range = 0.05
		}
	}

	trait = {
		token = duks_upgrade_1_2
		name = duks_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_air_range

		any_parent = { duks_upgrade_1 duks_upgrade_2 }

		position = { x = 3 y = 1 }

		mutually_exclusive = { duks_upgrade_1_1 }

		equipment_bonus = {
			air_superiority = 0.05
			air_range = 0.1
		}
	}

	trait = {
		token = duks_upgrade_1_3
		name = duks_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_air_attack

		any_parent = { duks_upgrade_3 duks_upgrade_4 }

		position = { x = 5 y = 1 }

		mutually_exclusive = { duks_upgrade_1_4 }

		equipment_bonus = {
			air_attack = 0.1
			air_defence = 0.05
		}
	}

	trait = {
		token = duks_upgrade_1_4
		name = duks_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_air_defence

		any_parent = { duks_upgrade_3 duks_upgrade_4 }

		position = { x = 6 y = 1 }

		mutually_exclusive = { duks_upgrade_1_3 }

		equipment_bonus = {
			air_attack = 0.05
			air_defence = 0.1
		}
	}

	trait = {
		token = duks_upgrade_2_1
		name = duks_upgrade_2_1
		icon = GFX_icon_duks_MIO

		special_trait_background = yes

		available = {
			if = {
				limit = {
					FROM = {
						OR = {
							original_tag = RUS
							original_tag = RSA
						}
					}
				}
				FROM = { has_completed_focus = RUS_polikarpov_fighters }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = { has_completed_focus = FER_return_to_kremlin }
			}
		}

		any_parent = { duks_upgrade_1_1 duks_upgrade_1_2 }
		any_parent = { duks_upgrade_1_3 duks_upgrade_1_4 }
		any_parent = { duks_upgrade_3_1 duks_upgrade_3_2 }
		any_parent = { duks_upgrade_3_3 duks_upgrade_3_4 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			air_superiority = 0.05
			air_agility = 0.05
			air_attack = 0.05
			air_defence = 0.05
		}
	}

	trait = {
		token = duks_upgrade_3_1
		name = duks_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_air_agility

		any_parent = { duks_upgrade_4_1 duks_upgrade_4_2 }

		position = { x = 2 y = 3 }

		mutually_exclusive = { duks_upgrade_3_2 }

		equipment_bonus = {
			air_agility = 0.1
			air_range = 0.05
		}
	}

	trait = {
		token = duks_upgrade_3_2
		name = duks_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_air_range

		any_parent = { duks_upgrade_4_1 duks_upgrade_4_2 }

		position = { x = 3 y = 3 }

		mutually_exclusive = { duks_upgrade_3_1 }

		equipment_bonus = {
			air_agility = 0.05
			air_range = 0.1
		}
	}

	trait = {
		token = duks_upgrade_3_3
		name = duks_upgrade_3_3
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { duks_upgrade_4_3 duks_upgrade_4_4 }

		position = { x = 5 y = 3 }

		mutually_exclusive = { duks_upgrade_3_4 }

		equipment_bonus = {
			reliability = 0.1
			maximum_speed = 0.05
		}
	}

	trait = {
		token = duks_upgrade_3_4
		name = duks_upgrade_3_4
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { duks_upgrade_4_3 duks_upgrade_4_4 }

		position = { x = 6 y = 3 }

		mutually_exclusive = { duks_upgrade_3_3 }

		equipment_bonus = {
			reliability = 0.05
			maximum_speed = 0.1
		}
	}

	trait = {
		token = duks_upgrade_4_1
		name = duks_upgrade_4_1
		icon = GFX_generic_mio_trait_icon_air_agility

		position = { x = 0 y = 4 }

		mutually_exclusive = { duks_upgrade_4_2 }

		equipment_bonus = {
			air_agility = 0.05
		}
	}

	trait = {
		token = duks_upgrade_4_2
		name = duks_upgrade_4_2
		icon = GFX_generic_mio_trait_icon_air_range

		position = { x = 1 y = 4 }

		mutually_exclusive = { duks_upgrade_4_1 }

		equipment_bonus = {
			air_range = 0.1
		}
	}

	trait = {
		token = duks_upgrade_4_3
		name = duks_upgrade_4_3
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 7 y = 4 }

		mutually_exclusive = { duks_upgrade_4_4 }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = duks_upgrade_4_4
		name = duks_upgrade_4_4
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x = 8 y = 4 }

		mutually_exclusive = { duks_upgrade_4_3 }

		equipment_bonus = {
			maximum_speed = 0.05
		}
	}
}
RUS_tsagi_organisation = {
	name = tsagi
	icon = GFX_idea_tsagi
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 219 } } #Moscow

	equipment_type = {
		medium_plane_airframe
		large_plane_airframe
		guided_missile_equipment
	}

	research_categories = {
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		jet_technology
		plane_modules_tech
	}

	on_industrial_manufacturer_assigned = {
		FROM = {
			if = {
				limit = { NOT = { has_variable = MIO_TSAGI_assigned_manufacturer_number } }
				set_variable = {
					var = MIO_TSAGI_assigned_manufacturer_number
					value = 1
				}
			}
			else = {
				add_to_variable = { MIO_TSAGI_assigned_manufacturer_number = 1 }
			}
		}
		custom_effect_tooltip = RUS_MIO_Research_Gain_tt
		custom_effect_tooltip = tooltip_white_line
	}

	on_industrial_manufacturer_unassigned = {
		FROM = {
			subtract_from_variable = { MIO_TSAGI_assigned_manufacturer_number = 1 }
		}
	}

	on_tech_research_completed = {
		if = {
			limit = { NOT = { has_mio_flag = RUS_disable_research_speed_loss } }
			hidden_effect = {
				FROM = {
					mio:RUS_tsagi_organisation = {
						set_mio_research_bonus = 0
					}
					clr_country_flag = RUS_TSAGI_RS_Notification
				}
			}
			custom_effect_tooltip = RUS_manufacturer_research_reset_tt
			custom_effect_tooltip = tooltip_white_line
		}
		FROM = {
			if = {
				limit = { has_character = RUS_igor_sikorsky }
				if = {
					limit = { RUS_igor_sikorsky = { is_hired_as_advisor = yes } }
					set_temp_variable = { ideology_change_var = 2 }
					change_ruling_party_popularity = yes
				}
			}
		}
	}

	on_tech_research_cancelled = {
		hidden_effect = {
			FROM = {
				mio:RUS_tsagi_organisation = {
					set_mio_research_bonus = 0
				}
				clr_country_flag = RUS_TSAGI_RS_Notification
			}
		}
		custom_effect_tooltip = RUS_manufacturer_research_reset_tt
		custom_effect_tooltip = tooltip_white_line
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_tsagi_mio_desc
	}

	trait = {
		token = tsagi_upgrade_1
		name = tsagi_upgrade_1
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 3 y = 0 }

		mutually_exclusive = { tsagi_upgrade_2 }

		on_complete = {
			add_mio_research_bonus = 0.11
			add_to_variable = { total_campaign_xp = 11 }
			custom_effect_tooltip = tooltip_white_line
			FROM = { add_ideas = RUS_tsagi_1 }
		}
	}

	trait = {
		token = tsagi_upgrade_2
		name = tsagi_upgrade_2
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		position = { x = 5 y = 0 }

		mutually_exclusive = { tsagi_upgrade_1 }

		on_complete = {
			custom_effect_tooltip = RUS_manufacturer_trait_research_gain_tsagi_tt
			add_to_variable = { weekly_research_speed_gain = 0.01 }
			add_to_variable = { weekly_research_speed_gain_loc = 1 }
		}
	}

	trait = {
		token = tsagi_upgrade_1_1
		name = tsagi_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_strategic_attack

		position = { x = 0 y = 1 }

		mutually_exclusive = { tsagi_upgrade_1_2 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_bombing = 0.1
		}

		on_complete = {
			add_mio_research_bonus = 0.09
			add_to_variable = { total_campaign_xp = 9 }
		}
	}

	trait = {
		token = tsagi_upgrade_1_2
		name = tsagi_upgrade_1_2
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		position = { x = 2 y = 1 }

		mutually_exclusive = { tsagi_upgrade_1_1 }

		on_complete = {
			custom_effect_tooltip = RUS_manufacturer_trait_research_gain_tsagi_tt
			add_to_variable = { weekly_research_speed_gain = 0.01 }
			add_to_variable = { weekly_research_speed_gain_loc = 1 }
		}
	}

	trait = {
		token = tsagi_upgrade_1_3
		name = tsagi_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_air_range

		any_parent = { tsagi_upgrade_1 tsagi_upgrade_2 }

		position = { x = 4 y = 1 }

		on_complete = {
			if = {
				limit = {
					FROM = {
						has_idea = RUS_tsagi_1
					}
				}
				FROM = {
					swap_ideas = {
						remove_idea = RUS_tsagi_1
						add_idea = RUS_tsagi_2
					}
				}
			}
			else = {
				FROM = { add_ideas = RUS_tsagi_4 }
			}
		}
	}

	trait = {
		token = tsagi_upgrade_1_4
		name = tsagi_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 6 y = 1 }

		mutually_exclusive = { tsagi_upgrade_1_5 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 3
		}

		on_complete = {
			add_mio_research_bonus = 0.09
			add_to_variable = { total_campaign_xp = 9 }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = RUS_manufacturer_research_no_reset_tt
			set_mio_flag = RUS_disable_research_speed_loss
		}
	}

	trait = {
		token = tsagi_upgrade_1_5
		name = tsagi_upgrade_1_5
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		position = { x = 8 y = 1 }

		mutually_exclusive = { tsagi_upgrade_1_4 }

		on_complete = {
			custom_effect_tooltip = RUS_manufacturer_trait_research_gain_tsagi_tt
			add_to_variable = { weekly_research_speed_gain = 0.01 }
			add_to_variable = { weekly_research_speed_gain_loc = 1 }
		}
	}

	trait = {
		token = tsagi_upgrade_2_1
		name = tsagi_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_strategic_attack

		any_parent = { tsagi_upgrade_1_1 tsagi_upgrade_1_2 }

		position = { x = 1 y = 2 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_bombing = 0.1
		}
	}

	trait = {
		token = tsagi_upgrade_2_2
		name = tsagi_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_strategic_attack

		all_parents = { tsagi_upgrade_1_3 }

		position = { x = 4 y = 2 }

		on_complete = {
			if = {
				limit = {
					FROM = {
						has_idea = RUS_tsagi_2
					}
				}
				FROM = {
					swap_ideas = {
						remove_idea = RUS_tsagi_2
						add_idea = RUS_tsagi_3
					}
				}
			}
			else = {
				FROM = {
					swap_ideas = {
						remove_idea = RUS_tsagi_4
						add_idea = RUS_tsagi_5
					}
				}
			}
		}
	}

	trait = {
		token = tsagi_upgrade_2_3
		name = tsagi_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { tsagi_upgrade_1_4 tsagi_upgrade_1_5 }

		position = { x = 7 y = 2 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = tsagi_upgrade_3_1
		name = tsagi_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_air_range

		all_parents = { tsagi_upgrade_2_1 }

		position = { x = 0 y = 3 }

		mutually_exclusive = { tsagi_upgrade_3_2 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_range = 0.1
		}
	}

	trait = {
		token = tsagi_upgrade_3_2
		name = tsagi_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_air_range

		all_parents = { tsagi_upgrade_2_1 }

		position = { x = 2 y = 3 }

		mutually_exclusive = { tsagi_upgrade_3_1 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_range = 0.2
			fuel_consumption = 0.25
		}
	}

	trait = {
		token = tsagi_upgrade_3_3
		name = tsagi_upgrade_3_3
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		all_parents = { tsagi_upgrade_2_1 }

		position = { x = 3 y = 3 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			fuel_consumption = -0.1
		}
	}

	trait = {
		token = tsagi_upgrade_3_4
		name = tsagi_upgrade_3_4
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { tsagi_upgrade_2_3 }

		position = { x = 5 y = 3 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = tsagi_upgrade_3_5
		name = tsagi_upgrade_3_5
		icon = GFX_generic_mio_trait_icon_air_defence

		all_parents = { tsagi_upgrade_2_3 }

		position = { x = 6 y = 3 }

		mutually_exclusive = { tsagi_upgrade_3_6 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_defence = 0.1
			reliability = -0.15
		}
	}

	trait = {
		token = tsagi_upgrade_3_6
		name = tsagi_upgrade_3_6
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { tsagi_upgrade_2_3 }

		position = { x = 8 y = 3 }

		mutually_exclusive = { tsagi_upgrade_3_5 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_defence = -0.1
			reliability = 0.15
		}
	}

	trait = {
		token = tsagi_upgrade_4_1
		name = tsagi_upgrade_4_1
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		available = {
			if = {
				limit = {
					FROM = {
						OR = {
							original_tag = RUS
							original_tag = RSA
						}
					}
				}
				FROM = { has_completed_focus = RUS_project_m }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = { has_completed_focus = FER_return_to_kremlin }
			}
		}

		visible = { NOT = { is_mio_trait_completed = tsagi_upgrade_4_1 } }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		on_complete = {
			set_temp_variable = { current_research_bonus = research_bonus }
			multiply_temp_variable = { current_research_bonus = 100 }
			if = {
				limit = {
					check_variable = { research_bonus < 0.1 }
				}
				set_temp_variable = { tsagi_bonus_to_gain = 0 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.09 }
					check_variable = { research_bonus < 0.2 }
				}
				set_temp_variable = { tsagi_bonus_to_gain = 1 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.19 }
					check_variable = { research_bonus < 0.3 }
				}
				set_temp_variable = { tsagi_bonus_to_gain = 2 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.29 }
					check_variable = { research_bonus < 0.4 }
				}
				set_temp_variable = { tsagi_bonus_to_gain = 3 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.39 }
					check_variable = { research_bonus < 0.5 }
				}
				set_temp_variable = { tsagi_bonus_to_gain = 4 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.49 }
					check_variable = { research_bonus < 0.6 }
				}
				set_temp_variable = { tsagi_bonus_to_gain = 5 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.59 }
					check_variable = { research_bonus < 0.7 }
				}
				set_temp_variable = { tsagi_bonus_to_gain = 6 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.69 }
					check_variable = { research_bonus < 0.8 }
				}
				set_temp_variable = { tsagi_bonus_to_gain = 7 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.79 }
					check_variable = { research_bonus < 0.9 }
				}
				set_temp_variable = { tsagi_bonus_to_gain = 8 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.89 }
					check_variable = { research_bonus < 1.0 }
				}
				set_temp_variable = { tsagi_bonus_to_gain = 9 }
			}
			else_if = {
				limit = {
					check_variable = { research_bonus > 0.99 }
					check_variable = { research_bonus < 1.1 }
				}
				set_temp_variable = { tsagi_bonus_to_gain = 10 }
			}
			custom_effect_tooltip = RUS_tsagi_scaling_tt
			RUS_unlock_tsagi_trait = yes
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_0
		name = tsagi_upgrade_4_1
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_0 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_agility = 0
			maximum_speed = 0
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_1
		name = tsagi_upgrade_4_1
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_1 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_agility = 0.01
			maximum_speed = 0.01
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_2
		name = tsagi_upgrade_4_1
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_2 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_agility = 0.02
			maximum_speed = 0.02
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_3
		name = tsagi_upgrade_4_1
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_3 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_agility = 0.03
			maximum_speed = 0.03
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_4
		name = tsagi_upgrade_4_1
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_4 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_agility = 0.04
			maximum_speed = 0.04
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_5
		name = tsagi_upgrade_4_1
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_5 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_agility = 0.05
			maximum_speed = 0.05
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_6
		name = tsagi_upgrade_4_1
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_6 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_agility = 0.06
			maximum_speed = 0.06
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_7
		name = tsagi_upgrade_4_1
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_7 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_agility = 0.07
			maximum_speed = 0.07
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_8
		name = tsagi_upgrade_4_1
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_8 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_agility = 0.08
			maximum_speed = 0.08
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_9
		name = tsagi_upgrade_4_1
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_9 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_agility = 0.09
			maximum_speed = 0.09
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_10
		name = tsagi_upgrade_4_1
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_10 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
		}

		equipment_bonus = {
			air_agility = 0.1
			maximum_speed = 0.1
		}
	}
}
RUS_osoavia_organisation = {
	name = osoavia
	icon = GFX_idea_osoavia
	allowed = {
		is_russian_tag = yes
	}
	available = {
		FROM = {
			owns_any_state_of = {
				219 #Moscow
				566 #Irkutsk
			}
		}
	}

	equipment_type = {
		small_plane_cas_airframe
		medium_plane_airframe
		cv_small_plane_cas_airframe
	}

	research_categories = {
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	on_design_team_assigned_to_tech = {
		if = {
			limit = { FROM = { NOT = { has_variable = OSOAVIA_Research_Number } } }
			FROM = {
				set_variable = {
					var = OSOAVIA_Research_Number
					value = 1
				}
			}
		}
		else = {
			FROM = {
				add_to_variable = {
					var = OSOAVIA_Research_Number
					value = 1
				}
			}
		}
	}

	on_tech_research_cancelled = {
		FROM = {
			subtract_from_variable = {
				var = OSOAVIA_Research_Number
				value = 1
			}
		}
	}

	on_tech_research_completed = {
		FROM = {
			subtract_from_variable = {
				var = OSOAVIA_Research_Number
				value = 1
			}
		}
		FROM = {
			if = {
				limit = { has_character = RUS_igor_sikorsky }
				if = {
					limit = { RUS_igor_sikorsky = { is_hired_as_advisor = yes } }
					set_temp_variable = { ideology_change_var = 2 }
					change_ruling_party_popularity = yes
				}
			}
		}
	}

	on_industrial_manufacturer_assigned = {
		custom_effect_tooltip = RUS_MIO_XP_Gain_tt
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = RUS_osoavia_mio_desc
	}

	trait = {
		token = osoavia_upgrade_1
		name = osoavia_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_air_xp

		position = { x = 0 y = 0 }

		mutually_exclusive = { osoavia_upgrade_2 }

		on_complete = {
			multiply_variable = { xp_gain_loc = 1.5 }
			custom_effect_tooltip = RUS_manufacturer_trait_air_xp_osoavia_tt
		}
	}

	trait = {
		token = osoavia_upgrade_2
		name = osoavia_upgrade_2
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		position = { x = 2 y = 0 }

		mutually_exclusive = { osoavia_upgrade_1 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}

		on_complete = {
			add_to_variable = { total_campaign_xp = 70 }
			FROM = {
				air_experience = 70
			}
		}
	}

	trait = {
		token = osoavia_upgrade_3
		name = osoavia_upgrade_3
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 6 y = 0 }

		mutually_exclusive = { osoavia_upgrade_4 }

		on_complete = {
			multiply_variable = { weekly_funds_requirement = 0.33 }
			multiply_variable = { weekly_funds_requirement_loc = 0.33 }
			custom_effect_tooltip = RUS_manufacturer_trait_air_xp_min_funds_osoavia_tt
		}
	}

	trait = {
		token = osoavia_upgrade_4
		name = osoavia_upgrade_4
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 8 y = 0 }

		mutually_exclusive = { osoavia_upgrade_3 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			add_to_variable = { total_campaign_xp = 25 }
			FROM = {
				air_experience = 25
			}
		}
	}

	trait = {
		token = osoavia_upgrade_1_1
		name = osoavia_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		any_parent = { osoavia_upgrade_1 osoavia_upgrade_2 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}

	trait = {
		token = osoavia_upgrade_1_2
		name = osoavia_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_air_range

		position = { x = 3 y = 1 }

		mutually_exclusive = { osoavia_upgrade_1_3 }

		equipment_bonus = {
			air_range = 0.15
		}
	}

	trait = {
		token = osoavia_upgrade_1_3
		name = osoavia_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_air_agility

		position = { x = 5 y = 1 }

		mutually_exclusive = { osoavia_upgrade_1_2 }

		equipment_bonus = {
			air_agility = 0.1
		}
	}

	trait = {
		token = osoavia_upgrade_1_4
		name = osoavia_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { osoavia_upgrade_3 osoavia_upgrade_4 }

		position = { x = 7 y = 1 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = osoavia_upgrade_2_1
		name = osoavia_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { osoavia_upgrade_1_1 }
		any_parent = { osoavia_upgrade_1_2 osoavia_upgrade_1_3 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			maximum_speed = 0.05
			air_range = 0.05
		}
	}

	trait = {
		token = osoavia_upgrade_2_2
		name = osoavia_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { osoavia_upgrade_1_2 osoavia_upgrade_1_3 }
		all_parents = { osoavia_upgrade_1_4 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			reliability = 0.05
			air_agility = 0.05
		}
	}

	trait = {
		token = osoavia_upgrade_3_1
		name = osoavia_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { osoavia_upgrade_2_1 osoavia_upgrade_2_2 }

		position = { x = 3 y = 3 }

		mutually_exclusive = { osoavia_upgrade_3_2 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = osoavia_upgrade_3_2
		name = osoavia_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { osoavia_upgrade_2_1 osoavia_upgrade_2_2 }

		position = { x = 5 y = 3 }

		mutually_exclusive = { osoavia_upgrade_3_1 }

		equipment_bonus = {
			reliability = 0.15
		}
	}

	trait = {
		token = osoavia_upgrade_4_1
		name = osoavia_upgrade_4_1
		icon = GFX_icon_osoavia_MIO

		available = {
			if = {
				limit = {
					FROM = {
						OR = {
							original_tag = RUS
							original_tag = RSA
						}
					}
				}
				FROM = { has_completed_focus = RUS_the_flying_tank }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = { has_completed_focus = FER_return_to_kremlin }
			}
		}

		special_trait_background = yes

		any_parent = { osoavia_upgrade_3_1 osoavia_upgrade_3_2 }

		position = { x = 4 y = 4 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}
}
RUS_skorost_organisation = {
	name = skorost_non_socrus
	icon = GFX_idea_skorost
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 219 } } #Moscow

	equipment_type = {
		small_plane_airframe
		medium_plane_airframe
		large_plane_airframe
		cv_small_plane_airframe
		transport_plane_equipment
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	on_tech_research_completed = {
		FROM = {
			if = {
				limit = { has_character = RUS_igor_sikorsky }
				if = {
					limit = { RUS_igor_sikorsky = { is_hired_as_advisor = yes } }
					set_temp_variable = { ideology_change_var = 2 }
					change_ruling_party_popularity = yes
				}
			}
		}
	}

	ai_will_do = { base = 1000 }

	initial_trait = {
		name = RUS_skorost_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = skorost_upgrade_1
		name = skorost_upgrade_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		position = { x = 0 y = 0 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = skorost_upgrade_2
		name = skorost_upgrade_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { skorost_upgrade_1 }

		position = { x = 3 y = 0 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = skorost_upgrade_3
		name = skorost_upgrade_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { skorost_upgrade_4 }

		position = { x = 5 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = skorost_upgrade_4
		name = skorost_upgrade_4
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		position = { x = 8 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = skorost_upgrade_1_1
		name = skorost_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { skorost_upgrade_1 }

		position = { x = 0 y = 1 }

		mutually_exclusive = { skorost_upgrade_1_2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = skorost_upgrade_1_2
		name = skorost_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { skorost_upgrade_1 }

		position = { x = 2 y = 1 }

		mutually_exclusive = { skorost_upgrade_1_1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = -0.20
		}
	}

	trait = {
		token = skorost_upgrade_1_3
		name = skorost_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { skorost_upgrade_4 }

		position = { x = 6 y = 1 }

		mutually_exclusive = { skorost_upgrade_1_4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.2
			production_efficiency_cap_factor = -0.05
		}
	}

	trait = {
		token = skorost_upgrade_1_4
		name = skorost_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { skorost_upgrade_4 }

		position = { x = 8 y = 1 }

		mutually_exclusive = { skorost_upgrade_1_3 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = skorost_upgrade_2_1
		name = skorost_upgrade_2_1
		icon = GFX_icon_skorost_MIO

		visible = {
			FROM = {
				NOT = {
					has_country_flag = RUS_rename_industries
				}
			}
		}

		available = {
			if = {
				limit = {
					FROM = {
						OR = {
							original_tag = RUS
							original_tag = RSA
						}
					}
				}
				FROM = { has_completed_focus = RUS_over_the_northern_skies }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = { has_completed_focus = FER_return_to_kremlin }
			}
		}

		special_trait_background = yes

		all_parents = { skorost_upgrade_2 }
		all_parents = { skorost_upgrade_3 }
		any_parent = { skorost_upgrade_1_1 skorost_upgrade_1_2 }
		any_parent = { skorost_upgrade_1_3 skorost_upgrade_1_4 }
		any_parent = { skorost_upgrade_3_1 skorost_upgrade_3_2 }
		any_parent = { skorost_upgrade_3_3 skorost_upgrade_3_4 }
		all_parents = { skorost_upgrade_4_2 }
		all_parents = { skorost_upgrade_4_3 }

		position = { x = 4 y = 2 }

		production_bonus = {
			production_capacity_factor = 0.2
		}
	}

	trait = {
		token = skorost_upgrade_2_1_soc_rus
		name = skorost_upgrade_2_1_soc_rus
		icon = GFX_icon_skorost_MIO

		visible = {
			FROM = {
				has_country_flag = RUS_rename_industries
			}
		}

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = {
					has_completed_focus = RUS_over_the_northern_skies
				}
			}
		}

		special_trait_background = yes

		all_parents = { skorost_upgrade_2 }
		all_parents = { skorost_upgrade_3 }
		any_parent = { skorost_upgrade_1_1 skorost_upgrade_1_2 }
		any_parent = { skorost_upgrade_1_3 skorost_upgrade_1_4 }
		any_parent = { skorost_upgrade_3_1 skorost_upgrade_3_2 }
		any_parent = { skorost_upgrade_3_3 skorost_upgrade_3_4 }
		all_parents = { skorost_upgrade_4_2 }
		all_parents = { skorost_upgrade_4_3 }

		position = { x = 4 y = 2 }

		production_bonus = {
			production_capacity_factor = 0.2
		}
	}

	trait = {
		token = skorost_upgrade_3_1
		name = skorost_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { skorost_upgrade_4_1 }

		position = { x = 0 y = 3 }

		mutually_exclusive = { skorost_upgrade_3_2 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = skorost_upgrade_3_2
		name = skorost_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { skorost_upgrade_4_1 }

		position = { x = 2 y = 3 }

		mutually_exclusive = { skorost_upgrade_3_1 }

		production_bonus = {
			production_resource_need_factor = -0.2
			production_conversion_speed_factor = -0.4
		}
	}

	trait = {
		token = skorost_upgrade_3_3
		name = skorost_upgrade_3_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		all_parents = { skorost_upgrade_4_4 }

		position = { x = 6 y = 3 }

		mutually_exclusive = { skorost_upgrade_3_4 }

		production_bonus = {
			production_conversion_speed_factor = 0.4
			production_resource_need_factor = 0.2
		}
	}

	trait = {
		token = skorost_upgrade_3_4
		name = skorost_upgrade_3_4
		icon = GFX_generic_mio_trait_icon_conversion_speed

		all_parents = { skorost_upgrade_4_4 }

		position = { x = 8 y = 3 }

		mutually_exclusive = { skorost_upgrade_3_3 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = skorost_upgrade_4_1
		name = skorost_upgrade_4_1
		icon = GFX_generic_mio_trait_icon_resources

		position = { x = 0 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = skorost_upgrade_4_2
		name = skorost_upgrade_4_2
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { skorost_upgrade_4_1 }

		position = { x = 3 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = skorost_upgrade_4_3
		name = skorost_upgrade_4_3
		icon = GFX_generic_mio_trait_icon_conversion_speed

		all_parents = { skorost_upgrade_4_4 }

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = skorost_upgrade_4_4
		name = skorost_upgrade_4_4
		icon = GFX_generic_mio_trait_icon_conversion_speed

		position = { x = 8 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}
}
RUS_sokol_organisation = {
	name = sokol
	icon = GFX_idea_sokol
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 252 } } #Nizhny Novgorod

	visible = {
		FROM = {
			RUS_has_sokol_upgrade_1_or_2 = no
		}
	}

	equipment_type = {
		small_plane_airframe
		cv_small_plane_airframe
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = RUS_sokol_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	on_design_team_assigned_to_tech = {
		custom_effect_tooltip = RUS_sokol_trait_req
	}

	on_tech_research_completed = {
		FROM = {
			if = {
				limit = { has_character = RUS_igor_sikorsky }
				if = {
					limit = { RUS_igor_sikorsky = { is_hired_as_advisor = yes } }
					set_temp_variable = { ideology_change_var = 2 }
					change_ruling_party_popularity = yes
				}
			}
		}
	}

	trait = {
		token = sokol_upgrade_1
		name = sokol_upgrade_1
		icon = GFX_icon_sokol_construction_MIO

		position = { x = 3 y = 0 }

		mutually_exclusive = { sokol_upgrade_2 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.25
		}

		on_complete = {
			custom_effect_tooltip = RUS_sokol_construction_research_cat_tt
			hidden_effect = {
				RUS_complete_sokol_upgrade_1 = yes
			}
		}
	}

	trait = {
		token = sokol_upgrade_2
		name = sokol_upgrade_2
		icon = GFX_icon_sokol_production_MIO

		position = { x = 5 y = 0 }

		mutually_exclusive = { sokol_upgrade_1 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.25
		}

		on_complete = {
			custom_effect_tooltip = RUS_sokol_production_research_cat_tt
			hidden_effect = {
				RUS_complete_sokol_upgrade_2 = yes
			}
		}
	}

	trait = {
		token = sokol_upgrade_1_1
		name = sokol_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { sokol_upgrade_1 sokol_upgrade_2 }

		position = { x = 3 y = 1 }

		mutually_exclusive = { sokol_upgrade_1_2 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_1_2
		name = sokol_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { sokol_upgrade_1 sokol_upgrade_2 }

		position = { x = 5 y = 1 }

		mutually_exclusive = { sokol_upgrade_1_1 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		production_bonus = {
			production_resource_need_factor = 0.10
		}
	}

	trait = {
		token = sokol_upgrade_2_1
		name = sokol_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 0 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_2 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_2_2
		name = sokol_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_air_superiority

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 2 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_1 }

		equipment_bonus = {
			air_superiority = -0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_2_3
		name = sokol_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 3 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_4 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_2_4
		name = sokol_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 5 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_3 }

		equipment_bonus = {
			build_cost_ic = -0.05
			air_ground_attack = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_2_5
		name = sokol_upgrade_2_5
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 6 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_6 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_2_6
		name = sokol_upgrade_2_6
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 8 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_5 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.20
		}
	}

	trait = {
		token = sokol_upgrade_3_1
		name = sokol_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { sokol_upgrade_2_1 sokol_upgrade_2_2 }

		position = { x = 1 y = 3 }

		equipment_bonus = {
			reliability = -0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_3_2
		name = sokol_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		any_parent = { sokol_upgrade_2_1 sokol_upgrade_2_2 }

		position = { x = 2 y = 3 }

		equipment_bonus = {
			fuel_consumption = 0.1
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_3_3
		name = sokol_upgrade_3_3
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { sokol_upgrade_2_3 sokol_upgrade_2_4 }

		position = { x = 4 y = 3 }

		equipment_bonus = {
			maximum_speed = -0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_3_4
		name = sokol_upgrade_3_4
		icon = GFX_generic_mio_trait_icon_air_range

		any_parent = { sokol_upgrade_2_5 sokol_upgrade_2_6 }

		position = { x = 6 y = 3 }

		equipment_bonus = {
			air_range = -0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_3_5
		name = sokol_upgrade_3_5
		icon = GFX_generic_mio_trait_icon_air_attack

		any_parent = { sokol_upgrade_2_5 sokol_upgrade_2_6 }

		position = { x = 7 y = 3 }

		equipment_bonus = {
			air_attack = -0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_4_1
		name = sokol_upgrade_4_1
		icon = GFX_generic_mio_trait_icon_air_defence

		all_parents = { sokol_upgrade_3_1 sokol_upgrade_3_2 sokol_upgrade_3_3 }

		position = { x = 3 y = 4 }

		equipment_bonus = {
			air_defence = 0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_4_2
		name = sokol_upgrade_4_2
		icon = GFX_generic_mio_trait_icon_air_agility

		all_parents = { sokol_upgrade_3_3 sokol_upgrade_3_4 sokol_upgrade_3_5 }

		position = { x = 5 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
			air_agility = 0.05
		}
	}
}
RUS_sokol_construction_organisation = {
	name = sokol
	icon = GFX_idea_sokol
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 252 } } #Nizhny Novgorod

	visible = {
		FROM = {
			mio:RUS_sokol_organisation = {
				is_mio_trait_completed = sokol_upgrade_1
			}
		}
	}

	equipment_type = {
		small_plane_airframe
		cv_small_plane_airframe
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		construction_tech
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = RUS_sokol_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	on_design_team_assigned_to_tech = {
		custom_effect_tooltip = RUS_sokol_construction_research_cat_tt
		if = {
			limit = { FROM = { NOT = { has_country_flag = Sokol_Research } } }
			FROM = { set_country_flag = Sokol_Research }
		}
		if = {
			limit = { FROM = { NOT = { has_variable = Sokol_Research_Number } } }
			FROM = {
				set_variable = {
					var = Sokol_Research_Number
					value = 1
				}
			}
		}
		else = {
			FROM = {
				add_to_variable = {
					var = Sokol_Research_Number
					value = 1
				}
			}
		}
	}

	on_tech_research_cancelled = {
		if = {
			limit = { FROM = { check_variable = { Sokol_Research_Number = 1 } } }
			FROM = { clr_country_flag = Sokol_Research }
		}
		FROM = {
			subtract_from_variable = {
				var = Sokol_Research_Number
				value = 1
			}
		}
	}

	on_tech_research_completed = {
		if = {
			limit = { FROM = { check_variable = { Sokol_Research_Number = 1 } } }
			FROM = { clr_country_flag = Sokol_Research }
		}
		FROM = {
			subtract_from_variable = {
				var = Sokol_Research_Number
				value = 1
			}
		}
		FROM = {
			if = {
				limit = { has_character = RUS_igor_sikorsky }
				if = {
					limit = { RUS_igor_sikorsky = { is_hired_as_advisor = yes } }
					set_temp_variable = { ideology_change_var = 2 }
					change_ruling_party_popularity = yes
				}
			}
		}
	}

	trait = {
		token = sokol_upgrade_1
		name = sokol_upgrade_1
		icon = GFX_icon_sokol_construction_MIO

		position = { x = 3 y = 0 }

		mutually_exclusive = { sokol_upgrade_2 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.25
		}

		on_complete = {
			custom_effect_tooltip = RUS_sokol_construction_research_cat_tt
		}
	}

	trait = {
		token = sokol_upgrade_2
		name = sokol_upgrade_2
		icon = GFX_icon_sokol_production_MIO

		position = { x = 5 y = 0 }

		mutually_exclusive = { sokol_upgrade_1 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.25
		}

		on_complete = {
			custom_effect_tooltip = RUS_sokol_production_research_cat_tt
		}
	}

	trait = {
		token = sokol_upgrade_1_1
		name = sokol_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { sokol_upgrade_1 sokol_upgrade_2 }

		position = { x = 3 y = 1 }

		mutually_exclusive = { sokol_upgrade_1_2 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_1_2
		name = sokol_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { sokol_upgrade_1 sokol_upgrade_2 }

		position = { x = 5 y = 1 }

		mutually_exclusive = { sokol_upgrade_1_1 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		production_bonus = {
			production_resource_need_factor = 0.10
		}
	}

	trait = {
		token = sokol_upgrade_2_1
		name = sokol_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 0 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_2 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_2_2
		name = sokol_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_air_superiority

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 2 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_1 }

		equipment_bonus = {
			air_superiority = -0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_2_3
		name = sokol_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 3 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_4 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_2_4
		name = sokol_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 5 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_3 }

		equipment_bonus = {
			build_cost_ic = -0.05
			air_ground_attack = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_2_5
		name = sokol_upgrade_2_5
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 6 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_6 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_2_6
		name = sokol_upgrade_2_6
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 8 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_5 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.20
		}
	}

	trait = {
		token = sokol_upgrade_3_1
		name = sokol_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { sokol_upgrade_2_1 sokol_upgrade_2_2 }

		position = { x = 1 y = 3 }

		equipment_bonus = {
			reliability = -0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_3_2
		name = sokol_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		any_parent = { sokol_upgrade_2_1 sokol_upgrade_2_2 }

		position = { x = 2 y = 3 }

		equipment_bonus = {
			fuel_consumption = 0.1
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_3_3
		name = sokol_upgrade_3_3
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { sokol_upgrade_2_3 sokol_upgrade_2_4 }

		position = { x = 4 y = 3 }

		equipment_bonus = {
			maximum_speed = -0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_3_4
		name = sokol_upgrade_3_4
		icon = GFX_generic_mio_trait_icon_air_range

		any_parent = { sokol_upgrade_2_5 sokol_upgrade_2_6 }

		position = { x = 6 y = 3 }

		equipment_bonus = {
			air_range = -0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_3_5
		name = sokol_upgrade_3_5
		icon = GFX_generic_mio_trait_icon_air_attack

		any_parent = { sokol_upgrade_2_5 sokol_upgrade_2_6 }

		position = { x = 7 y = 3 }

		equipment_bonus = {
			air_attack = -0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_4_1
		name = sokol_upgrade_4_1
		icon = GFX_generic_mio_trait_icon_air_defence

		all_parents = { sokol_upgrade_3_1 sokol_upgrade_3_2 sokol_upgrade_3_3 }

		position = { x = 3 y = 4 }

		equipment_bonus = {
			air_defence = 0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_4_2
		name = sokol_upgrade_4_2
		icon = GFX_generic_mio_trait_icon_air_agility

		all_parents = { sokol_upgrade_3_3 sokol_upgrade_3_4 sokol_upgrade_3_5 }

		position = { x = 5 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
			air_agility = 0.05
		}
	}
}
RUS_sokol_production_organisation = {
	name = sokol
	icon = GFX_idea_sokol
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 252 } } #Nizhny Novgorod

	visible = {
		FROM = {
			mio:RUS_sokol_organisation = {
				is_mio_trait_completed = sokol_upgrade_2
			}
		}
	}

	equipment_type = {
		small_plane_airframe
		cv_small_plane_airframe
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		cat_production
		concentrated_industry_category
		dispersed_industry_category
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = RUS_sokol_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	on_design_team_assigned_to_tech = {
		custom_effect_tooltip = RUS_sokol_production_research_cat_tt
		if = {
			limit = { FROM = { NOT = { has_country_flag = Sokol_Research } } }
			FROM = { set_country_flag = Sokol_Research }
		}
		if = {
			limit = { FROM = { NOT = { has_variable = Sokol_Research_Number } } }
			FROM = {
				set_variable = {
					var = Sokol_Research_Number
					value = 1
				}
			}
		}
		else = {
			FROM = {
				add_to_variable = {
					var = Sokol_Research_Number
					value = 1
				}
			}
		}
	}

	on_tech_research_cancelled = {
		if = {
			limit = { FROM = { check_variable = { Sokol_Research_Number = 1 } } }
			FROM = { clr_country_flag = Sokol_Research }
		}
		FROM = {
			subtract_from_variable = {
				var = Sokol_Research_Number
				value = 1
			}
		}
	}

	on_tech_research_completed = {
		if = {
			limit = { FROM = { check_variable = { Sokol_Research_Number = 1 } } }
			FROM = { clr_country_flag = Sokol_Research }
		}
		FROM = {
			subtract_from_variable = {
				var = Sokol_Research_Number
				value = 1
			}
		}
		FROM = {
			if = {
				limit = { has_character = RUS_igor_sikorsky }
				if = {
					limit = { RUS_igor_sikorsky = { is_hired_as_advisor = yes } }
					set_temp_variable = { ideology_change_var = 2 }
					change_ruling_party_popularity = yes
				}
			}
		}
	}

	trait = {
		token = sokol_upgrade_1
		name = sokol_upgrade_1
		icon = GFX_icon_sokol_construction_MIO

		position = { x = 3 y = 0 }

		mutually_exclusive = { sokol_upgrade_2 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.25
		}

		on_complete = {
			custom_effect_tooltip = RUS_sokol_construction_research_cat_tt
		}
	}

	trait = {
		token = sokol_upgrade_2
		name = sokol_upgrade_2
		icon = GFX_icon_sokol_production_MIO

		position = { x = 5 y = 0 }

		mutually_exclusive = { sokol_upgrade_1 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.25
		}

		on_complete = {
			custom_effect_tooltip = RUS_sokol_production_research_cat_tt
		}
	}

	trait = {
		token = sokol_upgrade_1_1
		name = sokol_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { sokol_upgrade_1 sokol_upgrade_2 }

		position = { x = 3 y = 1 }

		mutually_exclusive = { sokol_upgrade_1_2 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_1_2
		name = sokol_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { sokol_upgrade_1 sokol_upgrade_2 }

		position = { x = 5 y = 1 }

		mutually_exclusive = { sokol_upgrade_1_1 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		production_bonus = {
			production_resource_need_factor = 0.10
		}
	}

	trait = {
		token = sokol_upgrade_2_1
		name = sokol_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 0 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_2 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_2_2
		name = sokol_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_air_superiority

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 2 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_1 }

		equipment_bonus = {
			air_superiority = -0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_2_3
		name = sokol_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 3 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_4 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_2_4
		name = sokol_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 5 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_3 }

		equipment_bonus = {
			build_cost_ic = -0.05
			air_ground_attack = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_2_5
		name = sokol_upgrade_2_5
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 6 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_6 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_2_6
		name = sokol_upgrade_2_6
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 8 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_5 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.20
		}
	}

	trait = {
		token = sokol_upgrade_3_1
		name = sokol_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { sokol_upgrade_2_1 sokol_upgrade_2_2 }

		position = { x = 1 y = 3 }

		equipment_bonus = {
			reliability = -0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_3_2
		name = sokol_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		any_parent = { sokol_upgrade_2_1 sokol_upgrade_2_2 }

		position = { x = 2 y = 3 }

		equipment_bonus = {
			fuel_consumption = 0.1
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_3_3
		name = sokol_upgrade_3_3
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { sokol_upgrade_2_3 sokol_upgrade_2_4 }

		position = { x = 4 y = 3 }

		equipment_bonus = {
			maximum_speed = -0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_3_4
		name = sokol_upgrade_3_4
		icon = GFX_generic_mio_trait_icon_air_range

		any_parent = { sokol_upgrade_2_5 sokol_upgrade_2_6 }

		position = { x = 6 y = 3 }

		equipment_bonus = {
			air_range = -0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_3_5
		name = sokol_upgrade_3_5
		icon = GFX_generic_mio_trait_icon_air_attack

		any_parent = { sokol_upgrade_2_5 sokol_upgrade_2_6 }

		position = { x = 7 y = 3 }

		equipment_bonus = {
			air_attack = -0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_4_1
		name = sokol_upgrade_4_1
		icon = GFX_generic_mio_trait_icon_air_defence

		all_parents = { sokol_upgrade_3_1 sokol_upgrade_3_2 sokol_upgrade_3_3 }

		position = { x = 3 y = 4 }

		equipment_bonus = {
			air_defence = 0.05
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = sokol_upgrade_4_2
		name = sokol_upgrade_4_2
		icon = GFX_generic_mio_trait_icon_air_agility

		all_parents = { sokol_upgrade_3_3 sokol_upgrade_3_4 sokol_upgrade_3_5 }

		position = { x = 5 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
			air_agility = 0.05
		}
	}
}
###############################
### Materiel Equipment MIOs ###
###############################
RUS_toz_organisation = {
	name = toz
	icon = GFX_idea_toz
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 223 } } #Tula

	equipment_type = {
		infantry_equipment
	}

	research_categories = {
		infantry_weapons
		night_vision
		cat_special_forces_generic
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_toz_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = toz_upgrade_1
		name = toz_upgrade_1
		icon = GFX_generic_mio_trait_icon_soft_attack

		position = { x = 0 y = 0 }

		mutually_exclusive = { toz_upgrade_2 }

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = toz_upgrade_2
		name = toz_upgrade_2
		icon = GFX_idea_toz_medal_MIO

		position = { x = 1 y = 0 }

		mutually_exclusive = { toz_upgrade_1 }

		on_complete = {
			if = {
				limit = { NOT = { has_mio_flag = TOZ_Medal_Decision_Taken } }
				FROM = { unlock_decision_tooltip = { decision = RUS_TOZ_Medals show_effect_tooltip = yes } }
				custom_effect_tooltip = RUS_TOZ_Medal_cost_tt
				custom_effect_tooltip = tooltip_white_line
				RUS_unlock_TOZ_medal_decision = yes
				set_mio_flag = TOZ_Medal_Decision_Taken
			}
			custom_effect_tooltip = toz_upgrade_2_tt
		}
	}

	trait = {
		token = toz_upgrade_3
		name = toz_upgrade_3
		icon = GFX_generic_mio_trait_icon_defense

		position = { x = 7 y = 0 }

		mutually_exclusive = { toz_upgrade_4 }

		equipment_bonus = {
			defense = 0.05
		}
	}

	trait = {
		token = toz_upgrade_4
		name = toz_upgrade_4
		icon = GFX_idea_toz_medal_MIO

		position = { x = 8 y = 0 }

		mutually_exclusive = { toz_upgrade_3 }

		on_complete = {
			if = {
				limit = { NOT = { has_mio_flag = TOZ_Medal_Decision_Taken } }
				FROM = { unlock_decision_tooltip = { decision = RUS_TOZ_Medals show_effect_tooltip = yes } }
				custom_effect_tooltip = RUS_TOZ_Medal_cost_tt
				custom_effect_tooltip = tooltip_white_line
				RUS_unlock_TOZ_medal_decision = yes
				set_mio_flag = TOZ_Medal_Decision_Taken
			}
			custom_effect_tooltip = toz_upgrade_4_tt
		}
	}

	trait = {
		token = toz_upgrade_1_1
		name = toz_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { toz_upgrade_1 toz_upgrade_2 }

		position = { x = 1 y = 1 }

		mutually_exclusive = { toz_upgrade_1_2 }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = toz_upgrade_1_2
		name = toz_upgrade_1_2
		icon = GFX_idea_toz_medal_MIO

		any_parent = { toz_upgrade_1 toz_upgrade_2 }

		position = { x = 2 y = 1 }

		mutually_exclusive = { toz_upgrade_1_1 }

		on_complete = {
			if = {
				limit = { NOT = { has_mio_flag = TOZ_Medal_Decision_Taken } }
				FROM = { unlock_decision_tooltip = { decision = RUS_TOZ_Medals show_effect_tooltip = yes } }
				custom_effect_tooltip = RUS_TOZ_Medal_cost_tt
				custom_effect_tooltip = tooltip_white_line
				RUS_unlock_TOZ_medal_decision = yes
				set_mio_flag = TOZ_Medal_Decision_Taken
			}
			custom_effect_tooltip = toz_upgrade_1_2_tt
		}
	}

	trait = {
		token = toz_upgrade_1_3
		name = toz_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { toz_upgrade_1 toz_upgrade_2 }
		any_parent = { toz_upgrade_3 toz_upgrade_4 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			breakthrough = 0.05
		}
	}

	trait = {
		token = toz_upgrade_1_4
		name = toz_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { toz_upgrade_3 toz_upgrade_4 }

		position = { x = 6 y = 1 }

		mutually_exclusive = { toz_upgrade_1_5 }

		equipment_bonus = {
			breakthrough = 0.05
		}
	}

	trait = {
		token = toz_upgrade_1_5
		name = toz_upgrade_1_5
		icon = GFX_idea_toz_medal_MIO

		any_parent = { toz_upgrade_3 toz_upgrade_4 }

		position = { x = 7 y = 1 }

		mutually_exclusive = { toz_upgrade_1_4 }

		on_complete = {
			if = {
				limit = { NOT = { has_mio_flag = TOZ_Medal_Decision_Taken } }
				FROM = { unlock_decision_tooltip = { decision = RUS_TOZ_Medals show_effect_tooltip = yes } }
				custom_effect_tooltip = RUS_TOZ_Medal_cost_tt
				custom_effect_tooltip = tooltip_white_line
				RUS_unlock_TOZ_medal_decision = yes
				set_mio_flag = TOZ_Medal_Decision_Taken
			}
			custom_effect_tooltip = toz_upgrade_1_5_tt
		}
	}

	trait = {
		token = toz_upgrade_2_1
		name = toz_upgrade_2_1
		icon = GFX_KR_generic_mio_trait_icon_funds

		any_parent = { toz_upgrade_1_1 toz_upgrade_1_2 }

		position = { x = 1 y = 3 }

		mutually_exclusive = { toz_upgrade_2_2 toz_upgrade_2_3 }

		equipment_bonus = {
			soft_attack = 0.01
			defense = 0.01
		}

		on_complete = {
			custom_effect_tooltip = toz_upgrade_2_1_tt
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = toz_upgrade_2_1_exclusive_tt
			FROM = {
				set_variable = { TOZ_Required_Funds = 400 }
			}
		}
	}

	trait = {
		token = toz_upgrade_2_2
		name = toz_upgrade_2_2
		icon = GFX_KR_generic_mio_trait_icon_funds

		any_parent = { toz_upgrade_1_1 toz_upgrade_1_2 }

		position = { x = 2 y = 3 }

		mutually_exclusive = { toz_upgrade_2_1 toz_upgrade_2_3 }

		equipment_bonus = {
			soft_attack = 0.03
			defense = 0.03
			build_cost_ic = 0.075
		}

		on_complete = {
			custom_effect_tooltip = toz_upgrade_2_2_tt
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = toz_upgrade_2_2_exclusive_tt
			FROM = {
				set_variable = { TOZ_Required_Funds = 300 }
			}
		}
	}

	trait = {
		token = toz_upgrade_2_3
		name = toz_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_funds

		any_parent = { toz_upgrade_1_1 toz_upgrade_1_2 }

		position = { x = 3 y = 3 }

		mutually_exclusive = { toz_upgrade_2_1 toz_upgrade_2_2 }

		equipment_bonus = {
			soft_attack = 0.05
			defense = 0.05
			build_cost_ic = 0.15
		}

		on_complete = {
			custom_effect_tooltip = toz_upgrade_2_3_tt
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = toz_upgrade_2_3_exclusive_tt
			FROM = {
				set_variable = { TOZ_Required_Funds = 200 }
			}
		}
	}

	trait = {
		token = toz_upgrade_2_4
		name = toz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { toz_upgrade_1_3 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = toz_upgrade_2_5
		name = toz_upgrade_2_5
		icon = GFX_KR_generic_mio_trait_icon_manpower

		any_parent = { toz_upgrade_1_4 toz_upgrade_1_5 }

		position = { x = 5 y = 3 }

		mutually_exclusive = { toz_upgrade_2_6 toz_upgrade_2_7 }

		equipment_bonus = {
			breakthrough = 0.01
			reliability = 0.01
		}

		on_complete = {
			custom_effect_tooltip = toz_upgrade_2_5_tt
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = toz_upgrade_2_5_exclusive_tt
			FROM = {
				add_to_variable = {
					var = TOZ_Divisions
					value = 2
				}
			}
		}
	}

	trait = {
		token = toz_upgrade_2_6
		name = toz_upgrade_2_6
		icon = GFX_KR_generic_mio_trait_icon_manpower

		any_parent = { toz_upgrade_1_4 toz_upgrade_1_5 }

		position = { x = 6 y = 3 }

		mutually_exclusive = { toz_upgrade_2_5 toz_upgrade_2_7 }

		equipment_bonus = {
			breakthrough = 0.03
			reliability = 0.03
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.25
		}

		on_complete = {
			custom_effect_tooltip = toz_upgrade_2_6_tt
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = toz_upgrade_2_6_exclusive_tt
			FROM = {
				add_to_variable = {
					var = TOZ_Divisions
					value = 4
				}
			}
		}
	}

	trait = {
		token = toz_upgrade_2_7
		name = toz_upgrade_2_7
		icon = GFX_KR_generic_mio_trait_icon_manpower

		any_parent = { toz_upgrade_1_4 toz_upgrade_1_5 }

		position = { x = 7 y = 3 }

		mutually_exclusive = { toz_upgrade_2_5 toz_upgrade_2_6 }

		equipment_bonus = {
			breakthrough = 0.05
			reliability = 0.05
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.5
		}

		on_complete = {
			custom_effect_tooltip = toz_upgrade_2_7_tt
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = toz_upgrade_2_7_exclusive_tt
			FROM = {
				add_to_variable = {
					var = TOZ_Divisions
					value = 6
				}
			}
		}
	}

	trait = {
		token = toz_upgrade_3_1
		name = toz_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_soft_attack

		all_parents = { toz_upgrade_2_4 }

		position = { x = 4 y = 3 }

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = toz_upgrade_4_1
		name = toz_upgrade_4_1
		icon = GFX_icon_toz_MIO

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_country_flag = improve_toz }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = {
					hidden_trigger = { has_country_flag = improve_toz }
					custom_trigger_tooltip = { tooltip = improve_toz_FER }
				}
			}
			else_if = {
				limit = { FROM = { original_tag = RSA } }
				FROM = {
					hidden_trigger = { has_country_flag = improve_toz }
					custom_trigger_tooltip = { tooltip = improve_toz_RSA }
				}
			}
		}

		special_trait_background = yes

		any_parent = { toz_upgrade_2_1 toz_upgrade_2_2 toz_upgrade_2_3 }
		all_parents = { toz_upgrade_3_1 }
		any_parent = { toz_upgrade_2_5 toz_upgrade_2_6 toz_upgrade_2_7 }

		position = { x = 4 y = 4 }

		equipment_bonus = {
			defense = 0.05
			breakthrough = 0.05
			reliability = 0.05
		}
	}
}
RUS_vpoz_organisation = {
	name = vpoz
	icon = GFX_idea_vpoz
	allowed = {
		is_russian_tag = yes
	}
	available = {
		if = {
			limit = { FROM = { original_tag = RUS } }
			FROM = {
				has_completed_focus = RUS_military_production
				owns_state = 249 #Kazan
			}
		}
		else_if = {
			limit = { FROM = { original_tag = FER } }
			FROM = {
				OR = {
					has_completed_focus = FER_masters_over_siberia
					has_completed_focus = FER_return_to_kremlin
				}
				owns_state = 249 #Kazan
			}
		}
		else_if = {
			limit = { FROM = { original_tag = RSA } }
			FROM = {
				has_completed_focus = RUS_secret_weapons_development
				owns_state = 249 #Kazan
			}
		}
	}

	equipment_type = {
		infantry_equipment
		support_equipment
	}

	research_categories = {
		infantry_weapons
		support_tech
		battlefield_support_tree
		cat_battlefield_support
		night_vision
		cat_special_forces_generic
	}

	on_industrial_manufacturer_assigned = {
		FROM = {
			if = {
				limit = { NOT = { has_variable = MIO_VPOZ_assigned_manufacturer_number } }
				set_variable = {
					var = MIO_VPOZ_assigned_manufacturer_number
					value = 1
				}
			}
			else = {
				add_to_variable = { MIO_VPOZ_assigned_manufacturer_number = 1 }
			}
		}
		custom_effect_tooltip = RUS_MIO_Research_Gain_tt
		custom_effect_tooltip = tooltip_white_line
	}

	on_industrial_manufacturer_unassigned = {
		FROM = {
			subtract_from_variable = { MIO_VPOZ_assigned_manufacturer_number = 1 }
		}
	}

	on_tech_research_completed = {
		if = {
			limit = { NOT = { has_mio_flag = RUS_disable_research_speed_loss } }
			hidden_effect = {
				FROM = {
					mio:RUS_vpoz_organisation = {
						set_mio_research_bonus = 0
					}
					clr_country_flag = RUS_VPOZ_RS_Notification
				}
			}
			custom_effect_tooltip = RUS_manufacturer_research_reset_tt
			custom_effect_tooltip = tooltip_white_line
		}
	}

	on_tech_research_cancelled = {
		hidden_effect = {
			FROM = {
				mio:RUS_vpoz_organisation = {
					set_mio_research_bonus = 0
				}
				clr_country_flag = RUS_VPOZ_RS_Notification
			}
		}
		custom_effect_tooltip = RUS_manufacturer_research_reset_tt
		custom_effect_tooltip = tooltip_white_line
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = RUS_vpoz_mio_desc
	}

	trait = {
		token = vpoz_upgrade_1
		name = vpoz_upgrade_1
		icon = GFX_generic_mio_trait_icon_maximum_speed

		mutually_exclusive = { vpoz_upgrade_2 }

		position = { x = 0 y = 0 }

		limit_to_equipment_type = { infantry_equipment }

		equipment_bonus = {
			maximum_speed = 0.25
		}
	}

	trait = {
		token = vpoz_upgrade_2
		name = vpoz_upgrade_2
		icon = GFX_generic_mio_trait_icon_hard_attack

		mutually_exclusive = { vpoz_upgrade_1 }

		position = { x = 2 y = 0 }

		limit_to_equipment_type = { infantry_equipment }

		equipment_bonus = {
			hard_attack = 1.0
			ap_attack = 1.0
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 1
		}

		on_complete = {
			custom_effect_tooltip = RUS_manufacturer_research_no_reset_tt
			set_mio_flag = RUS_disable_research_speed_loss
		}
	}

	trait = {
		token = vpoz_upgrade_4
		name = vpoz_upgrade_4
		icon = GFX_generic_mio_trait_icon_reliability

		mutually_exclusive = { vpoz_upgrade_5 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = vpoz_upgrade_5
		name = vpoz_upgrade_5
		icon = GFX_generic_mio_trait_icon_defense

		mutually_exclusive = { vpoz_upgrade_4 }

		position = { x = 8 y = 0 }

		limit_to_equipment_type = { infantry_equipment }

		equipment_bonus = {
			defense = 0.05
		}
	}

	trait = {
		token = vpoz_upgrade_1_1
		name = vpoz_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x = 0 y = 2 }

		any_parent = { vpoz_upgrade_1 vpoz_upgrade_2 }

		limit_to_equipment_type = { infantry_equipment }

		equipment_bonus = {
			maximum_speed = 0.25
		}
	}

	trait = {
		token = vpoz_upgrade_1_2
		name = vpoz_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_hard_attack

		mutually_exclusive = { vpoz_upgrade_1_3 }

		position = { x = 2 y = 2 }

		any_parent = { vpoz_upgrade_1 vpoz_upgrade_2 }

		limit_to_equipment_type = { infantry_equipment }

		equipment_bonus = {
			hard_attack = 1.0
			ap_attack = 1.0
		}

		on_complete = {
			add_mio_research_bonus = 0.14
			add_to_variable = { total_campaign_xp = 14 }
		}
	}

	trait = {
		token = vpoz_upgrade_1_3
		name = vpoz_upgrade_1_3
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		mutually_exclusive = { vpoz_upgrade_1_2 vpoz_upgrade_1_4 }

		position = { x = 4 y = 2 }

		on_complete = {
			set_temp_variable = { max_research_speed_to_add = research_bonus }
			multiply_temp_variable = { max_research_speed_to_add = 100 }
			custom_effect_tooltip = RUS_manufacturer_trait_research_cap_vpoz_tt
			add_to_variable = { max_research_speed_loc = max_research_speed_to_add }
			divide_temp_variable = { max_research_speed_to_add = 100 }
			add_to_variable = { max_research_speed = max_research_speed_to_add }
		}
	}

	trait = {
		token = vpoz_upgrade_1_4
		name = vpoz_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_soft_attack

		mutually_exclusive = { vpoz_upgrade_1_3 }

		position = { x = 6 y = 2 }

		any_parent = { vpoz_upgrade_4 vpoz_upgrade_5 }

		limit_to_equipment_type = { infantry_equipment }

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			add_mio_research_bonus = 0.08
			add_to_variable = { total_campaign_xp = 8 }
		}
	}

	trait = {
		token = vpoz_upgrade_2_1
		name = vpoz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 2 y = 4 }

		all_parents = { vpoz_upgrade_1_1 }
		any_parent = { vpoz_upgrade_1_2 vpoz_upgrade_1_3 vpoz_upgrade_1_4 }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = vpoz_upgrade_2_2
		name = vpoz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 6 y = 4 }

		all_parents = { vpoz_upgrade_1_1 }
		any_parent = { vpoz_upgrade_1_2 vpoz_upgrade_1_3 vpoz_upgrade_1_4 }

		equipment_bonus = {
			reliability = 0.05
		}
	}
}
RUS_imz_organisation = {
	name = imz
	icon = GFX_idea_imz
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 399 } } #Izhevsk

	equipment_type = {
		infantry_equipment
		support_equipment
	}

	research_categories = {
		infantry_weapons
		support_tech
		battlefield_support_tree
		cat_battlefield_support
		night_vision
		cat_special_forces_generic
	}

	ai_will_do = { base = 1000 }

	initial_trait = {
		name = RUS_imz_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = imz_upgrade_1
		name = imz_upgrade_1
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		position = { x = 1 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = imz_upgrade_2
		name = imz_upgrade_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		position = { x = 3 y = 1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = imz_upgrade_3
		name = imz_upgrade_3
		icon = GFX_generic_mio_trait_icon_resources

		position = { x = 5 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.05
		}
	}

	trait = {
		token = imz_upgrade_4
		name = imz_upgrade_4
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 7 y = 0 }

		production_bonus = {
			production_cost_factor = -0.025
		}
	}

	trait = {
		token = imz_upgrade_1_1
		name = imz_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		position = { x = 0 y = 2 }

		mutually_exclusive = { imz_upgrade_1_2 }

		all_parents = { imz_upgrade_1 imz_upgrade_2 }

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = imz_upgrade_1_2
		name = imz_upgrade_1_2
		icon = GFX_KR_generic_mio_trait_icon_production_output

		position = { x = 2 y = 2 }

		mutually_exclusive = { imz_upgrade_1_1 imz_upgrade_1_3 }

		all_parents = { imz_upgrade_1 imz_upgrade_2 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
			production_efficiency_cap_factor = 0.05
			production_resource_need_factor = -0.1
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 2.0
		}
	}

	trait = {
		token = imz_upgrade_1_3
		name = imz_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_resources

		position = { x = 4 y = 2 }

		all_parents = { imz_upgrade_3 imz_upgrade_2 }

		mutually_exclusive = { imz_upgrade_1_2 imz_upgrade_1_4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
			production_resource_need_factor = -0.05
		}
	}

	trait = {
		token = imz_upgrade_1_4
		name = imz_upgrade_1_4
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		position = { x = 6 y = 2 }

		mutually_exclusive = { imz_upgrade_1_3 imz_upgrade_1_5 }

		all_parents = { imz_upgrade_3 imz_upgrade_4 }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.15
		}
		production_bonus = {
			production_resource_need_factor = -0.3
		}
	}

	trait = {
		token = imz_upgrade_1_5
		name = imz_upgrade_1_5
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 8 y = 2 }

		mutually_exclusive = { imz_upgrade_1_4 }

		all_parents = { imz_upgrade_3 imz_upgrade_4 }

		production_bonus = {
			production_cost_factor = -0.025
		}
	}

	trait = {
		token = imz_upgrade_2_1
		name = imz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		position = { x = 3 y = 3 }

		any_parent = { imz_upgrade_1_1 imz_upgrade_1_2 imz_upgrade_1_3 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = imz_upgrade_2_2
		name = imz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 5 y = 3 }

		any_parent = { imz_upgrade_1_5 imz_upgrade_1_4 imz_upgrade_1_3 }

		production_bonus = {
			production_resource_need_factor = -0.05
			production_cost_factor = -0.025
		}
	}

	trait = {
		token = imz_upgrade_3_1
		name = imz_upgrade_3_1
		icon = GFX_icon_imz_MIO

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { imz_upgrade_2_1 imz_upgrade_2_2 }

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_country_flag = improve_imz }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = {
					hidden_trigger = { has_country_flag = improve_imz }
					custom_trigger_tooltip = { tooltip = improve_imz_FER }
				}
			}
			else_if = {
				limit = { FROM = { original_tag = RSA } }
				FROM = {
					hidden_trigger = { has_country_flag = improve_imz }
					custom_trigger_tooltip = { tooltip = improve_imz_RSA }
				}
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
			production_efficiency_cap_factor = 0.025
			production_resource_need_factor = -0.05
			production_cost_factor = -0.025
		}
	}
}
RUS_obukhov_organisation = {
	name = obukhov_non_socrus
	icon = GFX_idea_obukhov
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 195 } } #Petrograd

	equipment_type = {
		artillery_equipment
		anti_tank_equipment
		anti_air_equipment
	}

	research_categories = {
		mio_cat_all_artillery_equipment
		mio_cat_tech_all_destroyer_and_modules
		mio_cat_tech_all_cruiser_and_modules
		mio_cat_tech_all_armor_and_modules
	}

	on_industrial_manufacturer_assigned = {
		if = { #Check if the trait to give army xp is unlocked
			limit = { RUS_has_obukhov_upgrade_5_or_6 = yes }
			custom_effect_tooltip = RUS_MIO_XP_Gain_tt
		}
		else = {
			custom_effect_tooltip = RUS_obukhov_army_xp_trigger
		}
	}

	on_design_team_assigned_to_tech = {
		if = {
			limit = { FROM = { NOT = { has_variable = Obukhov_Research_Number } } }
			FROM = {
				set_variable = {
					var = Obukhov_Research_Number
					value = 1
				}
			}
		}
		else = {
			FROM = {
				add_to_variable = {
					var = Obukhov_Research_Number
					value = 1
				}
			}
		}
	}

	on_tech_research_cancelled = {
		FROM = {
			subtract_from_variable = {
				var = Obukhov_Research_Number
				value = 1
			}
		}
	}

	on_tech_research_completed = {
		FROM = {
			subtract_from_variable = {
				var = Obukhov_Research_Number
				value = 1
			}
		}
	}

	ai_will_do = { base = 1000 }

	initial_trait = {
		name = RUS_obukhov_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = obukhov_upgrade_1
		name = obukhov_upgrade_1
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		position = { x = 0 y = 0 }

		limit_to_equipment_type = { anti_air_equipment }

		mutually_exclusive = { obukhov_upgrade_2 obukhov_upgrade_3 }

		equipment_bonus = {
			air_attack = 0.07
			soft_attack = 1.0
			defense = 1.0
			build_cost_ic = 0.1
		}

		on_complete = {
			custom_effect_tooltip = obukhov_upgrade_1_exclusive_tt
		}
	}

	trait = {
		token = obukhov_upgrade_2
		name = obukhov_upgrade_2
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		position = { x = 2 y = 0 }

		limit_to_equipment_type = { anti_air_equipment }

		mutually_exclusive = { obukhov_upgrade_1 obukhov_upgrade_3 }

		equipment_bonus = {
			air_attack = 0.15
			build_cost_ic = -0.1
		}

		on_complete = {
			custom_effect_tooltip = obukhov_upgrade_2_exclusive_tt
		}
	}

	trait = {
		token = obukhov_upgrade_3
		name = obukhov_upgrade_3
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		position = { x = 4 y = 0 }

		limit_to_equipment_type = { anti_air_equipment }

		mutually_exclusive = { obukhov_upgrade_1 obukhov_upgrade_2 }

		equipment_bonus = {
			air_attack = 0.07
			hard_attack = 1.0
			ap_attack = 0.1
			build_cost_ic = 0.1
		}

		on_complete = {
			custom_effect_tooltip = obukhov_upgrade_3_exclusive_tt
		}
	}

	trait = {
		token = obukhov_upgrade_5
		name = obukhov_upgrade_5
		icon = GFX_KR_generic_mio_trait_icon_army_xp

		ai_will_do = { base = 1000 }

		special_trait_background = yes

		position = { x = 5 y = 0 }

		limit_to_equipment_type = { artillery_equipment }

		mutually_exclusive = { obukhov_upgrade_6 }

		equipment_bonus = {
			reliability = 0.05
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.25
		}

		on_complete = {
			custom_effect_tooltip = RUS_MIO_XP_Gain_tt
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				RUS_unlock_obukhov_policies = yes # `unlock_mio_policy_tooltip` doesn't work in the MIO scope for some reason
			}
			hidden_effect = {
				if = {
					limit = {
						FROM = {
							mio:RUS_obukhov_organisation = {
								is_mio_assigned_to_task = yes
							}
						}
					}
					FROM = { add_ideas = RUS_obukhov_army_xp }
				}
			}
		}
	}

	trait = {
		token = obukhov_upgrade_6
		name = obukhov_upgrade_6
		icon = GFX_KR_generic_mio_trait_icon_army_xp

		ai_will_do = { base = 1000 }

		special_trait_background = yes

		position = { x = 7 y = 0 }

		limit_to_equipment_type = { artillery_equipment }

		mutually_exclusive = { obukhov_upgrade_5 }

		equipment_bonus = {
			defense = 0.05
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.25
		}

		on_complete = {
			custom_effect_tooltip = RUS_MIO_XP_Gain_tt
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				RUS_unlock_obukhov_policies = yes # `unlock_mio_policy_tooltip` doesn't work in the MIO scope for some reason
			}
			hidden_effect = {
				if = {
					limit = {
						FROM = {
							mio:RUS_obukhov_organisation = {
								is_mio_assigned_to_task = yes
							}
						}
					}
					FROM = { add_ideas = RUS_obukhov_army_xp }
				}
			}
		}
	}

	trait = {
		token = obukhov_upgrade_7
		name = obukhov_upgrade_7
		icon = GFX_KR_generic_mio_trait_icon_army_xp

		position = { x = 8 y = 0 }

		limit_to_equipment_type = { anti_tank_equipment }

		mutually_exclusive = { obukhov_upgrade_8 }

		equipment_bonus = {
			reliability = 0.15
			soft_attack = 1.0
			defense = 1.0
		}

		on_complete = {
			multiply_variable = { xp_gain_loc = 1.5 }
			custom_effect_tooltip = RUS_manufacturer_trait_army_xp_obukhov_tt
		}
	}

	trait = {
		token = obukhov_upgrade_8
		name = obukhov_upgrade_8
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 9 y = 0 }

		limit_to_equipment_type = { anti_tank_equipment }

		mutually_exclusive = { obukhov_upgrade_7 }

		equipment_bonus = {
			hard_attack = 0.05
			ap_attack = 0.1
		}

		on_complete = {
			multiply_variable = { weekly_funds_requirement = 0.33 }
			multiply_variable = { weekly_funds_requirement_loc = 0.33 }
			custom_effect_tooltip = RUS_manufacturer_trait_army_xp_min_funds_obukhov_tt
			custom_effect_tooltip = tooltip_white_line
			FROM = { army_experience = 50 }
			add_to_variable = { total_campaign_xp = 50 }
		}
	}

	trait = {
		token = obukhov_upgrade_1_1
		name = obukhov_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { obukhov_upgrade_1 obukhov_upgrade_2 obukhov_upgrade_3 }

		position = { x = 1 y = 1 }

		limit_to_equipment_type = { anti_air_equipment }

		mutually_exclusive = { obukhov_upgrade_1_2 }

		equipment_bonus = {
			reliability = 0.15
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.3
		}
	}

	trait = {
		token = obukhov_upgrade_1_2
		name = obukhov_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { obukhov_upgrade_1 obukhov_upgrade_2 obukhov_upgrade_3 }

		position = { x = 3 y = 1 }

		limit_to_equipment_type = { anti_air_equipment }

		mutually_exclusive = { obukhov_upgrade_1_1 }

		equipment_bonus = {
			reliability = 0.15
		}

		production_bonus = {
			production_resource_need_factor = 0.5
		}
	}

	trait = {
		token = obukhov_upgrade_1_4
		name = obukhov_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_defense

		any_parent = { obukhov_upgrade_5 obukhov_upgrade_6 }

		position = { x = 5 y = 1 }

		limit_to_equipment_type = { artillery_equipment }

		mutually_exclusive = { obukhov_upgrade_1_5 }

		equipment_bonus = {
			defense = 0.05
		}
	}

	trait = {
		token = obukhov_upgrade_1_5
		name = obukhov_upgrade_1_5
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { obukhov_upgrade_5 obukhov_upgrade_6 }

		position = { x = 7 y = 1 }

		limit_to_equipment_type = { artillery_equipment }

		mutually_exclusive = { obukhov_upgrade_1_4 }

		equipment_bonus = {
			breakthrough = 0.05
		}
	}

	trait = {
		token = obukhov_upgrade_1_6
		name = obukhov_upgrade_1_6
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		any_parent = { obukhov_upgrade_7 obukhov_upgrade_8 }

		available = {
			FROM = {
				owns_state = 214
			}
		}

		position = { x = 8 y = 1 }

		mutually_exclusive = { obukhov_upgrade_1_7 }

		on_complete = {
			FROM = {
				214 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	trait = {
		token = obukhov_upgrade_1_7
		name = obukhov_upgrade_1_7
		icon = GFX_generic_mio_trait_icon_hard_attack

		any_parent = { obukhov_upgrade_7 obukhov_upgrade_8 }

		position = { x = 9 y = 1 }

		limit_to_equipment_type = { anti_tank_equipment }

		mutually_exclusive = { obukhov_upgrade_1_6 }

		equipment_bonus = {
			hard_attack = 0.05
		}
	}

	trait = {
		token = obukhov_upgrade_2_1
		name = obukhov_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		any_parent = { obukhov_upgrade_1_1 obukhov_upgrade_1_2 }

		position = { x = 1 y = 2 }

		limit_to_equipment_type = { anti_air_equipment }

		mutually_exclusive = { obukhov_upgrade_2_2 }

		production_bonus = {
			production_efficiency_cap_factor = -0.1
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.2
		}
	}

	trait = {
		token = obukhov_upgrade_2_2
		name = obukhov_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		any_parent = { obukhov_upgrade_1_1 obukhov_upgrade_1_2 }

		position = { x = 3 y = 2 }

		limit_to_equipment_type = { anti_air_equipment }

		mutually_exclusive = { obukhov_upgrade_2_1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = obukhov_upgrade_2_4
		name = obukhov_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { obukhov_upgrade_1_4 obukhov_upgrade_1_5 }

		position = { x = 5 y = 2 }

		limit_to_equipment_type = { artillery_equipment }

		mutually_exclusive = { obukhov_upgrade_2_5 }

		equipment_bonus = {
			breakthrough = 0.05
		}
	}

	trait = {
		token = obukhov_upgrade_2_5
		name = obukhov_upgrade_2_5
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		any_parent = { obukhov_upgrade_1_4 obukhov_upgrade_1_5 }

		position = { x = 7 y = 2 }

		mutually_exclusive = { obukhov_upgrade_2_4 }

		on_complete = {
			FROM = {
				214 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	trait = {
		token = obukhov_upgrade_2_6
		name = obukhov_upgrade_2_6
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { obukhov_upgrade_1_6 obukhov_upgrade_1_7 }

		position = { x = 8 y = 2 }

		limit_to_equipment_type = { anti_tank_equipment }

		mutually_exclusive = { obukhov_upgrade_2_7 }

		equipment_bonus = {
			build_cost_ic = -0.1
		}

		production_bonus = {
			production_efficiency_cap_factor = -0.05
		}
	}

	trait = {
		token = obukhov_upgrade_2_7
		name = obukhov_upgrade_2_7
		icon = GFX_generic_mio_trait_icon_ap_attack

		any_parent = { obukhov_upgrade_1_6 obukhov_upgrade_1_7 }

		position = { x = 9 y = 2 }

		limit_to_equipment_type = { anti_tank_equipment }

		mutually_exclusive = { obukhov_upgrade_2_6 }

		equipment_bonus = {
			hard_attack = 0.1
			ap_attack = 0.15
		}

		production_bonus = {
			production_resource_need_factor = 0.5
		}
	}

	trait = {
		token = obukhov_upgrade_3_1_lvl4
		name = obukhov_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_1_lvl4 = yes
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.1
		}

		on_complete = {
			RUS_obukhov_eff_cap_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_1_lvl3
		name = obukhov_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_1_lvl3 = yes
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}

		on_complete = {
			RUS_obukhov_eff_cap_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_1_lvl2
		name = obukhov_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_1_lvl2 = yes
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}

		on_complete = {
			RUS_obukhov_eff_cap_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_1_lvl1
		name = obukhov_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_1_lvl1 = yes
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.0125
		}
	}

	trait = {
		token = obukhov_upgrade_3_2_lvl4
		name = obukhov_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_2_lvl4 = yes
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.4
		}

		on_complete = {
			RUS_obukhov_eff_gro_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_2_lvl3
		name = obukhov_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_2_lvl3 = yes
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.2
		}

		on_complete = {
			RUS_obukhov_eff_gro_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_2_lvl2
		name = obukhov_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_2_lvl2 = yes
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}

		on_complete = {
			RUS_obukhov_eff_gro_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_2_lvl1
		name = obukhov_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_2_lvl1 = yes
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = obukhov_upgrade_3_3_lvl4
		name = obukhov_upgrade_3_3
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_3_lvl4 = yes
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.4
		}

		on_complete = {
			RUS_obukhov_resource_need_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_3_lvl3
		name = obukhov_upgrade_3_3
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_3_lvl3 = yes
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.2
		}

		on_complete = {
			RUS_obukhov_resource_need_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_3_lvl2
		name = obukhov_upgrade_3_3
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_3_lvl2 = yes
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}

		on_complete = {
			RUS_obukhov_resource_need_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_3_lvl1
		name = obukhov_upgrade_3_3
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_3_lvl1 = yes
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.05
		}
	}

	trait = {
		token = obukhov_upgrade_3_4_lvl4
		name = obukhov_upgrade_3_4
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_4_lvl4 = yes
		}

		position = { x = 9 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 1.0
		}

		on_complete = {
			RUS_obukhov_conversion_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_4_lvl3
		name = obukhov_upgrade_3_4
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_4_lvl3 = yes
		}

		position = { x = 9 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.5
		}

		on_complete = {
			RUS_obukhov_conversion_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_4_lvl2
		name = obukhov_upgrade_3_4
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_4_lvl2 = yes
		}

		position = { x = 9 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.25
		}

		on_complete = {
			RUS_obukhov_conversion_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_4_lvl1
		name = obukhov_upgrade_3_4
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_4_lvl1 = yes
		}

		position = { x = 9 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.12
		}
	}
}
RUS_bmz_organisation = {
	name = bmz
	icon = GFX_idea_bmz
	allowed = {
		is_russian_tag = yes
	}
	available = {
		FROM = {
			owns_state = 224 #Bryansk
		}
	}

	on_industrial_manufacturer_assigned = {
		FROM = {
			if = {
				limit = { NOT = { has_variable = MIO_BMZ_assigned_manufacturer_number } }
				set_variable = {
					var = MIO_BMZ_assigned_manufacturer_number
					value = 1
				}
			}
			else = {
				add_to_variable = { MIO_BMZ_assigned_manufacturer_number = 1 }
			}
		}
		custom_effect_tooltip = RUS_MIO_Research_Gain_tt
		custom_effect_tooltip = tooltip_white_line
	}

	on_industrial_manufacturer_unassigned = {
		FROM = {
			subtract_from_variable = { MIO_BMZ_assigned_manufacturer_number = 1 }
		}
	}

	on_tech_research_completed = {
		if = {
			limit = { NOT = { has_mio_flag = RUS_disable_research_speed_loss } }
			hidden_effect = {
				FROM = {
					mio:RUS_bmz_organisation = {
						set_mio_research_bonus = 0
					}
					clr_country_flag = RUS_BMZ_RS_Notification
				}
			}
			custom_effect_tooltip = RUS_manufacturer_research_reset_tt
			custom_effect_tooltip = tooltip_white_line
		}
	}

	on_tech_research_cancelled = {
		hidden_effect = {
			FROM = {
				mio:RUS_bmz_organisation = {
					set_mio_research_bonus = 0
				}
				clr_country_flag = RUS_BMZ_RS_Notification
			}
		}
		custom_effect_tooltip = RUS_manufacturer_research_reset_tt
		custom_effect_tooltip = tooltip_white_line
	}

	equipment_type = {
		artillery_equipment
		rocket_artillery_equipment
		railway_gun_equipment
		train_equipment
	}

	research_categories = {
		mio_cat_all_artillery_equipment
		train_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = RUS_bmz_mio_desc
	}

	trait = {
		token = bmz_upgrade_1
		name = bmz_upgrade_1
		icon = GFX_generic_mio_trait_icon_breakthrough

		position = { x = 3 y = 0 }

		limit_to_equipment_type = {
			artillery_equipment
			rocket_artillery_equipment
		}

		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = bmz_upgrade_2
		name = bmz_upgrade_2
		icon = GFX_KR_generic_mio_trait_icon_railway

		available = {
			FROM = {
				owns_state = 215
			}
		}

		position = { x = 5 y = 0 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}

		on_complete = {
			FROM = {
				build_railway = {
					level = 1
					start_province = 3189
					target_province = 9119
				}
				custom_effect_tooltip = tooltip_white_line
				215 = {
					add_building_construction = {
						type = supply_node
						level = 1
						instant_build = yes
						province = 9119
					}
				}
			}
		}
	}

	trait = {
		token = bmz_upgrade_1_1
		name = bmz_upgrade_1_1
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		position = { x = 0 y = 1 }

		mutually_exclusive = { bmz_upgrade_1_2 }

		production_bonus = {
			production_resource_need_factor = -0.5
		}

		on_complete = {
			set_temp_variable = { current_research_bonus = research_bonus }
			multiply_temp_variable = { current_research_bonus = 100 }
			set_temp_variable = { weekly_research_speed_to_add = current_research_bonus }
			multiply_temp_variable = { weekly_research_speed_to_add = 0.04 }
			custom_effect_tooltip = RUS_manufacturer_trait_research_gain_bmz_tt
			add_to_variable = { weekly_research_speed_gain_loc = weekly_research_speed_to_add }
			divide_temp_variable = { weekly_research_speed_to_add = 100 }
			add_to_variable = { weekly_research_speed_gain = weekly_research_speed_to_add }
		}
	}

	trait = {
		token = bmz_upgrade_1_2
		name = bmz_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 2 y = 1 }

		mutually_exclusive = { bmz_upgrade_1_1 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 1
		}

		on_complete = {
			add_mio_research_bonus = 0.17
			add_to_variable = { total_campaign_xp = 17 }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = RUS_manufacturer_research_no_reset_tt
			set_mio_flag = RUS_disable_research_speed_loss
		}
	}

	trait = {
		token = bmz_upgrade_1_3
		name = bmz_upgrade_1_3
		icon = GFX_KR_generic_mio_trait_icon_supply

		available = {
			FROM = {
				owns_state = 1006
			}
		}

		position = { x = 4 y = 1 }

		any_parent = { bmz_upgrade_1 bmz_upgrade_2 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}

		on_complete = {
			FROM = {
				1006 = {
					add_building_construction = {
						type = supply_node
						level = 1
						instant_build = yes
						province = 9691
					}
				}
			}
		}
	}

	trait = {
		token = bmz_upgrade_1_4
		name = bmz_upgrade_1_4
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		position = { x = 6 y = 1 }

		mutually_exclusive = { bmz_upgrade_1_5 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}

		on_complete = {
			custom_effect_tooltip = RUS_manufacturer_trait_research_cap_bmz_tt
			add_to_variable = { max_research_speed = 0.25 }
			add_to_variable = { max_research_speed_loc = 25 }
		}
	}

	trait = {
		token = bmz_upgrade_1_5
		name = bmz_upgrade_1_5
		icon = GFX_generic_mio_trait_icon_soft_attack

		position = { x = 8 y = 1 }

		mutually_exclusive = { bmz_upgrade_1_4 }

		limit_to_equipment_type = {
			artillery_equipment
			rocket_artillery_equipment
		}

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			add_mio_research_bonus = 0.12
			add_to_variable = { total_campaign_xp = 12 }
		}
	}

	trait = {
		token = bmz_upgrade_2_1
		name = bmz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_breakthrough

		position = { x = 1 y = 2 }

		any_parent = { bmz_upgrade_1_1 bmz_upgrade_1_2 }

		limit_to_equipment_type = {
			artillery_equipment
			rocket_artillery_equipment
		}

		equipment_bonus = {
			breakthrough = 0.05
		}
	}

	trait = {
		token = bmz_upgrade_2_2
		name = bmz_upgrade_2_2
		icon = GFX_generic_mio_department_icon_tank_general_spg

		position = { x = 3 y = 2 }

		all_parents = { bmz_upgrade_1_3 }

		limit_to_equipment_type = {
			railway_gun_equipment
		}

		equipment_bonus = {
			railway_gun_attack = 0.1
			maximum_speed = 0.1
		}
	}

	trait = {
		token = bmz_upgrade_2_3
		name = bmz_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_railway_gun

		available = {
			FROM = {
				owns_state = 224
				has_tech = railway_gun
			}
		}

		position = { x = 5 y = 2 }

		all_parents = { bmz_upgrade_1_3 }

		on_complete = {
			FROM = {
				create_railway_gun = {
					name = "Misha"
					equipment = railway_gun_equipment_1
					location = 3335
				}
				create_railway_gun = {
					name = "Masha"
					equipment = railway_gun_equipment_1
					location = 3335
				}
			}
		}
	}

	trait = {
		token = bmz_upgrade_2_4
		name = bmz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 7 y = 2 }

		any_parent = { bmz_upgrade_1_4 bmz_upgrade_1_5 }

		limit_to_equipment_type = {
			artillery_equipment
			rocket_artillery_equipment
		}

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = bmz_upgrade_3_1
		name = bmz_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_soft_attack

		position = { x = 4 y = 3 }

		all_parents = { bmz_upgrade_2_2 bmz_upgrade_2_3 }

		limit_to_equipment_type = {
			artillery_equipment
			rocket_artillery_equipment
		}

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = bmz_upgrade_4_1
		name = bmz_upgrade_4_1
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 2 y = 4 }

		all_parents = { bmz_upgrade_2_1 bmz_upgrade_2_2 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = bmz_upgrade_4_2
		name = bmz_upgrade_4_2
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 6 y = 4 }

		all_parents = { bmz_upgrade_2_3 bmz_upgrade_2_4 }

		limit_to_equipment_type = {
			artillery_equipment
			rocket_artillery_equipment
		}

		equipment_bonus = {
			reliability = 0.05
		}
	}
}

RUS_amo_organisation = { ### For those with AAT and LaR ###
	name = amo_non_socrus
	icon = GFX_idea_amo
	allowed = {
		is_russian_tag = yes
	}
	available = {
		FROM = {
			owns_state = 219 #Moscow
		}
	}

	on_tech_research_completed = {
		set_temp_variable = {
			var = RUS_amo_cic_base
			value = 3000
		}
		set_temp_variable = {
			var = RUS_amo_cic_trait_sum
			value = 500
		}
		set_temp_variable = {
			var = RUS_amo_cic_size_multiplier
			value = size
		}
		if = {
			limit = {
				RUS_has_amo_upgrade_1_2 = yes
			}
			add_to_temp_variable = {
				var = RUS_amo_cic_trait_sum
				value = 250
			}
		}
		if = {
			limit = {
				RUS_has_amo_upgrade_1_4 = yes
			}
			add_to_temp_variable = {
				var = RUS_amo_cic_trait_sum
				value = 250
			}
		}
		if = {
			limit = {
				RUS_has_amo_policy = yes
			}
			add_to_temp_variable = {
				var = RUS_amo_cic_trait_sum
				value = 250
			}
		}
		multiply_temp_variable = {
			var = RUS_amo_cic_trait_sum
			value = RUS_amo_cic_size_multiplier
		}
		add_to_temp_variable = {
			var = RUS_amo_cic_trait_sum
			value = RUS_amo_cic_base
		}
		FROM = { add_cic = RUS_amo_cic_trait_sum }
		add_to_variable = { total_campaign_CIC = RUS_amo_cic_trait_sum }
		custom_effect_tooltip = RUS_amo_research_cic_tt
	}

	visible = {
		has_dlc_nsb = yes
	}

	equipment_type = {
		motorized_equipment
		mechanized_equipment
		armor
	}

	research_categories = {
		mio_cat_tech_all_motorized_mechanized
		mio_cat_tech_all_armor_and_modules
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_amo_mio_desc
	}

	trait = {
		token = amo_upgrade_1
		name = amo_upgrade_1
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 1 y = 0 }

		limit_to_equipment_type = { motorized_equipment }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = amo_upgrade_2
		name = amo_upgrade_2
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 4 y = 0 }

		limit_to_equipment_type = {
			armor
		}

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = amo_upgrade_3
		name = amo_upgrade_3
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 7 y = 0 }

		limit_to_equipment_type = { mechanized_equipment }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = amo_upgrade_1_1
		name = amo_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x = -1 y = 2 }
		relative_position_id = amo_upgrade_1

		limit_to_equipment_type = { motorized_equipment }

		any_parent = { amo_upgrade_1 amo_upgrade_2 }

		mutually_exclusive = { amo_upgrade_1_2 }

		equipment_bonus = {
			maximum_speed = 0.2
			fuel_consumption = 0.1
		}

		production_bonus = {
			production_resource_need_factor = 0.1
		}

		on_complete = {
			FROM = { add_ideas = RUS_amo_cic_1 }
		}
	}

	trait = {
		token = amo_upgrade_1_2
		name = amo_upgrade_1_2
		icon = GFX_KR_generic_mio_trait_icon_cic

		position = { x = 0 y = 2 }
		relative_position_id = amo_upgrade_1

		any_parent = { amo_upgrade_1 amo_upgrade_2 }

		mutually_exclusive = { amo_upgrade_1_1 }

		limit_to_equipment_type = { motorized_equipment }

		equipment_bonus = {
			maximum_speed = 0.05
		}

		on_complete = {
			custom_effect_tooltip = RUS_amo_trait_cic_tt
			add_to_variable = { CIC_bonus = 250 }
		}
	}

	trait = {
		token = amo_upgrade_1_3
		name = amo_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { amo_upgrade_2 }

		position = { x = -1 y = 2 }
		relative_position_id = amo_upgrade_2

		mutually_exclusive = { amo_upgrade_1_3.5 }

		limit_to_equipment_type = { armor }

		equipment_bonus = {
			maximum_speed = 0.05
			fuel_capacity = 1.0
		}
	}

	trait = {
		token = amo_upgrade_1_3.5
		name = amo_upgrade_1_3.5
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { amo_upgrade_2 }

		position = { x = 1 y = 2 }
		relative_position_id = amo_upgrade_2

		mutually_exclusive = { amo_upgrade_1_3 }

		limit_to_equipment_type = { armor }

		equipment_bonus = {
			maximum_speed = 0.2
			fuel_consumption = 0.1
		}

		production_bonus = {
			production_resource_need_factor = 0.1
		}
	}

	trait = {
		token = amo_upgrade_1_4
		name = amo_upgrade_1_4
		icon = GFX_KR_generic_mio_trait_icon_cic

		position = { x = 0 y = 2 }
		relative_position_id = amo_upgrade_3

		any_parent = { amo_upgrade_2 amo_upgrade_3 }

		mutually_exclusive = { amo_upgrade_1_5 }

		limit_to_equipment_type = { mechanized_equipment }

		equipment_bonus = {
			maximum_speed = 0.05
		}

		on_complete = {
			custom_effect_tooltip = RUS_amo_trait_cic_tt
			add_to_variable = { CIC_bonus = 250 }
		}
	}

	trait = {
		token = amo_upgrade_1_5
		name = amo_upgrade_1_5
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x = 1 y = 2 }
		relative_position_id = amo_upgrade_3

		limit_to_equipment_type = { mechanized_equipment }

		any_parent = { amo_upgrade_2 amo_upgrade_3 }

		mutually_exclusive = { amo_upgrade_1_4 }

		equipment_bonus = {
			maximum_speed = 0.2
			fuel_consumption = 0.1
		}

		production_bonus = {
			production_resource_need_factor = 0.1
		}

		on_complete = {
			FROM = { add_ideas = RUS_amo_cic_2 }
		}
	}

	trait = {
		token = amo_upgrade_2_1
		name = amo_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		position = { x = 0 y = 1 }
		relative_position_id = amo_upgrade_1_3

		any_parent = { amo_upgrade_1_1 amo_upgrade_1_2 }
		any_parent = { amo_upgrade_1_3 amo_upgrade_1_3.5 }

		limit_to_equipment_type = { armor }

		equipment_bonus = {
			fuel_capacity = 1.0
		}
	}

	trait = {
		token = amo_upgrade_2_2
		name = amo_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 2 y = 1 }
		relative_position_id = amo_upgrade_1_3

		any_parent = { amo_upgrade_1_3 amo_upgrade_1_3.5 }
		any_parent = { amo_upgrade_1_4 amo_upgrade_1_5 }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = amo_upgrade_3_1
		name = amo_upgrade_3_1
		icon = GFX_icon_amo_MIO

		visible = {
			FROM = {
				NOT = {
					has_country_flag = RUS_rename_industries
				}
			}
		}

		special_trait_background = yes

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_country_flag = improve_amo }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = {
					hidden_trigger = { has_country_flag = improve_amo }
					custom_trigger_tooltip = { tooltip = improve_amo_FER }
				}
			}
			else_if = {
				limit = { FROM = { original_tag = RSA } }
				FROM = {
					hidden_trigger = { has_country_flag = improve_amo }
					custom_trigger_tooltip = { tooltip = improve_amo_RSA }
				}
			}
		}

		position = { x = 1 y = 2 }
		relative_position_id = amo_upgrade_1_3

		all_parents = { amo_upgrade_2_1 amo_upgrade_2_2 }

		equipment_bonus = {
			reliability = 0.1
			maximum_speed = 0.1
		}
	}

	trait = {
		token = amo_upgrade_3_1_soc_rus
		name = amo_upgrade_3_1_soc_rus
		icon = GFX_icon_amo_MIO

		visible = {
			FROM = {
				has_country_flag = RUS_rename_industries
			}
		}

		special_trait_background = yes

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_country_flag = improve_amo }
			}
		}

		position = { x = 1 y = 2 }
		relative_position_id = amo_upgrade_1_3

		all_parents = { amo_upgrade_2_1 amo_upgrade_2_2 }

		equipment_bonus = {
			reliability = 0.1
			maximum_speed = 0.1
		}
	}
}
RUS_amo_organisation_non_nsb = { ### For those with AAT but not NSB ###
	name = amo_non_socrus
	icon = GFX_idea_amo
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 219 } } #Moscow

	visible = {
		has_dlc_nsb = no
	}

	on_tech_research_completed = {
		set_temp_variable = {
			var = RUS_amo_cic_base
			value = 3000
		}
		set_temp_variable = {
			var = RUS_amo_cic_trait_sum
			value = 500
		}
		set_temp_variable = {
			var = RUS_amo_cic_size_multiplier
			value = size
		}
		if = {
			limit = {
				RUS_has_amo_upgrade_1_2_non_nsb = yes
			}
			add_to_temp_variable = {
				var = RUS_amo_cic_trait_sum
				value = 250
			}
		}
		if = {
			limit = {
				RUS_has_amo_upgrade_1_4_non_nsb = yes
			}
			add_to_temp_variable = {
				var = RUS_amo_cic_trait_sum
				value = 250
			}
		}
		if = {
			limit = {
				RUS_has_amo_policy = yes
			}
			add_to_temp_variable = {
				var = RUS_amo_cic_trait_sum
				value = 250
			}
		}
		multiply_temp_variable = {
			var = RUS_amo_cic_trait_sum
			value = RUS_amo_cic_size_multiplier
		}
		add_to_temp_variable = {
			var = RUS_amo_cic_trait_sum
			value = RUS_amo_cic_base
		}
		FROM = { add_cic = RUS_amo_cic_trait_sum }
		add_to_variable = { total_campaign_CIC = RUS_amo_cic_trait_sum }
		custom_effect_tooltip = RUS_amo_research_cic_tt
	}

	equipment_type = {
		motorized_equipment
		mechanized_equipment
		armor
	}

	research_categories = {
		mio_cat_tech_all_motorized_mechanized
		mio_cat_tech_all_armor_and_modules
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_amo_mio_desc
	}

	trait = {
		token = amo_upgrade_1
		name = amo_upgrade_1
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 1 y = 0 }

		limit_to_equipment_type = { motorized_equipment }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = amo_upgrade_2
		name = amo_upgrade_2
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 4 y = 0 }

		limit_to_equipment_type = {
			armor
		}

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = amo_upgrade_3
		name = amo_upgrade_3
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 7 y = 0 }

		limit_to_equipment_type = { mechanized_equipment }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = amo_upgrade_1_1
		name = amo_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x = -1 y = 2 }
		relative_position_id = amo_upgrade_1

		limit_to_equipment_type = { motorized_equipment }

		any_parent = { amo_upgrade_1 amo_upgrade_2 }

		mutually_exclusive = { amo_upgrade_1_2 }

		equipment_bonus = {
			maximum_speed = 0.2
			fuel_consumption = 0.2
		}

		production_bonus = {
			production_resource_need_factor = 0.2
		}
	}

	trait = {
		token = amo_upgrade_1_2
		name = amo_upgrade_1_2
		icon = GFX_KR_generic_mio_trait_icon_cic

		position = { x = 0 y = 2 }
		relative_position_id = amo_upgrade_1

		any_parent = { amo_upgrade_1 amo_upgrade_2 }

		mutually_exclusive = { amo_upgrade_1_1 }

		limit_to_equipment_type = { motorized_equipment }

		equipment_bonus = {
			maximum_speed = 0.05
		}

		on_complete = {
			custom_effect_tooltip = RUS_amo_trait_cic_tt
			add_to_variable = { CIC_bonus = 250 }
		}
	}

	trait = {
		token = amo_upgrade_1_3
		name = amo_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { amo_upgrade_2 }

		position = { x = -1 y = 2 }
		relative_position_id = amo_upgrade_2

		mutually_exclusive = { amo_upgrade_1_3.5 }

		limit_to_equipment_type = { armor }

		equipment_bonus = {
			maximum_speed = 0.05
			fuel_capacity = 1.0
		}
	}

	trait = {
		token = amo_upgrade_1_3.5
		name = amo_upgrade_1_3.5
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { amo_upgrade_2 }

		position = { x = 1 y = 2 }
		relative_position_id = amo_upgrade_2

		mutually_exclusive = { amo_upgrade_1_3 }

		limit_to_equipment_type = { armor }

		equipment_bonus = {
			maximum_speed = 0.2
			fuel_consumption = 0.2
		}

		production_bonus = {
			production_resource_need_factor = 0.3
		}
	}

	trait = {
		token = amo_upgrade_1_4
		name = amo_upgrade_1_4
		icon = GFX_KR_generic_mio_trait_icon_cic

		position = { x = 0 y = 2 }
		relative_position_id = amo_upgrade_3

		any_parent = { amo_upgrade_2 amo_upgrade_3 }

		mutually_exclusive = { amo_upgrade_1_5 }

		limit_to_equipment_type = { mechanized_equipment }

		equipment_bonus = {
			maximum_speed = 0.05
		}

		on_complete = {
			custom_effect_tooltip = RUS_amo_trait_cic_tt
			add_to_variable = { CIC_bonus = 250 }
		}
	}

	trait = {
		token = amo_upgrade_1_5
		name = amo_upgrade_1_5
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x = 1 y = 2 }
		relative_position_id = amo_upgrade_3

		limit_to_equipment_type = { mechanized_equipment }

		any_parent = { amo_upgrade_2 amo_upgrade_3 }

		mutually_exclusive = { amo_upgrade_1_4 }

		equipment_bonus = {
			maximum_speed = 0.2
			fuel_consumption = 0.2
		}

		production_bonus = {
			production_resource_need_factor = 0.2
		}
	}

	trait = {
		token = amo_upgrade_2_1
		name = amo_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		position = { x = 0 y = 1 }
		relative_position_id = amo_upgrade_1_3

		any_parent = { amo_upgrade_1_1 amo_upgrade_1_2 }
		any_parent = { amo_upgrade_1_3 amo_upgrade_1_3.5 }

		limit_to_equipment_type = { armor }

		equipment_bonus = {
			fuel_capacity = 1.0
		}
	}

	trait = {
		token = amo_upgrade_2_2
		name = amo_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 2 y = 1 }
		relative_position_id = amo_upgrade_1_3

		any_parent = { amo_upgrade_1_3 amo_upgrade_1_3.5 }
		any_parent = { amo_upgrade_1_4 amo_upgrade_1_5 }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = amo_upgrade_3_1
		name = amo_upgrade_3_1
		icon = GFX_icon_amo_MIO

		visible = {
			NOT = {
				FROM = { has_country_flag = RUS_rename_industries }
			}
		}

		special_trait_background = yes

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_country_flag = improve_amo }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = {
					hidden_trigger = { has_country_flag = improve_amo }
					custom_trigger_tooltip = { tooltip = improve_amo_FER }
				}
			}
			else_if = {
				limit = { FROM = { original_tag = RSA } }
				FROM = {
					hidden_trigger = { has_country_flag = improve_amo }
					custom_trigger_tooltip = { tooltip = improve_amo_RSA }
				}
			}
		}

		position = { x = 1 y = 2 }
		relative_position_id = amo_upgrade_1_3

		all_parents = { amo_upgrade_2_1 amo_upgrade_2_2 }

		equipment_bonus = {
			reliability = 0.1
			maximum_speed = 0.1
		}
	}

	trait = {
		token = amo_upgrade_3_1_soc_rus
		name = amo_upgrade_3_1_soc_rus
		icon = GFX_icon_amo_MIO

		visible = {
			FROM = {
				has_country_flag = RUS_rename_industries
			}
		}

		special_trait_background = yes

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_country_flag = improve_amo }
			}
		}

		position = { x = 1 y = 2 }
		relative_position_id = amo_upgrade_1_3

		all_parents = { amo_upgrade_2_1 amo_upgrade_2_2 }

		equipment_bonus = {
			reliability = 0.1
			maximum_speed = 0.1
		}
	}
}
RUS_naz_organisation = { ### For those with AAT but, not LaR
	name = naz_non_socrus
	icon = GFX_idea_naz
	allowed = {
		is_russian_tag = yes
	}
	visible = {
		has_dlc_lar = no
	}
	available = { FROM = { owns_state = 252 } } #Nizhny Novgorod

	equipment_type = {
		motorized_equipment
		mechanized_equipment
		motorized_rocket_equipment
		light_tank_artillery_chassis
		medium_tank_artillery_chassis
		heavy_tank_artillery_chassis
		light_tank_destroyer_chassis
		medium_tank_destroyer_chassis
		heavy_tank_destroyer_chassis
		light_tank_aa_chassis
		medium_tank_aa_chassis
		heavy_tank_aa_chassis
	}

	research_categories = {
		mio_cat_tech_all_motorized_mechanized
		mio_cat_tech_all_armor_and_modules
	}

	on_tech_research_completed = {
		if = {
			limit = { FROM = { has_country_flag = naz_research_funds_gain } }
			hidden_effect = {
				FROM = {
					country_event = { id = russia.1001 days = 1 }
				}
			}
			custom_effect_tooltip = naz_research_funds_share_tt
		}
		else = {
			custom_effect_tooltip = naz_research_funds_gain_trigger_tt
		}
	}

	ai_will_do = { base = 1000 }

	initial_trait = {
		name = RUS_naz_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = naz_upgrade_1
		name = naz_upgrade_1
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 0 y = 0 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
		}

		production_bonus = {
			production_cost_factor = -0.025
		}
	}

	trait = {
		token = naz_upgrade_2
		name = naz_upgrade_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		position = { x = 3 y = 0 }

		mutually_exclusive = { naz_upgrade_3 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = naz_upgrade_3
		name = naz_upgrade_3
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		position = { x = 5 y = 0 }

		mutually_exclusive = { naz_upgrade_2 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = naz_upgrade_4
		name = naz_upgrade_4
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 8 y = 0 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_cost_factor = -0.025
		}
	}

	trait = {
		token = naz_upgrade_1_1
		name = naz_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { naz_upgrade_1 }
		any_parent = { naz_upgrade_2 naz_upgrade_3 }

		position = { x = 2 y = 1 }

		mutually_exclusive = { naz_upgrade_1_2 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
		}

		production_bonus = {
			production_resource_need_factor = -0.15
		}
	}

	trait = {
		token = naz_upgrade_1_2
		name = naz_upgrade_1_2
		icon = GFX_KR_generic_mio_trait_icon_funds

		any_parent = { naz_upgrade_2 naz_upgrade_3 }

		available = {
			FROM = {
				owns_state = 248
			}
		}

		position = { x = 4 y = 1 }

		mutually_exclusive = { naz_upgrade_1_1 naz_upgrade_1_3 }

		on_complete = {
			custom_effect_tooltip = naz_research_funds_share_tt
			FROM = { set_country_flag = naz_research_funds_gain }
			FROM = {
				248 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	trait = {
		token = naz_upgrade_1_3
		name = naz_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { naz_upgrade_4 }
		any_parent = { naz_upgrade_2 naz_upgrade_3 }

		position = { x = 6 y = 1 }

		mutually_exclusive = { naz_upgrade_1_2 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_resource_need_factor = -0.15
		}
	}

	trait = {
		token = naz_upgrade_2_1
		name = naz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { naz_upgrade_1 }

		position = { x = 0 y = 2 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = naz_upgrade_2_2
		name = naz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { naz_upgrade_1_1 naz_upgrade_1_2 naz_upgrade_1_3 }

		position = { x = 3 y = 2 }

		mutually_exclusive = { naz_upgrade_2_3 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = naz_upgrade_2_3
		name = naz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { naz_upgrade_1_1 naz_upgrade_1_2 naz_upgrade_1_3 }

		position = { x = 5 y = 2 }

		mutually_exclusive = { naz_upgrade_2_2 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = naz_upgrade_2_4
		name = naz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { naz_upgrade_4 }

		position = { x = 8 y = 2 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = naz_upgrade_3_1
		name = naz_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { naz_upgrade_2_1 }
		any_parent = { naz_upgrade_2_2 naz_upgrade_2_3 }

		position = { x = 2 y = 3 }

		mutually_exclusive = { naz_upgrade_3_2 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = naz_upgrade_3_2
		name = naz_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { naz_upgrade_2_2 naz_upgrade_2_3 }

		position = { x = 4 y = 3 }

		mutually_exclusive = { naz_upgrade_3_1 naz_upgrade_3_3 }

		production_bonus = {
			production_conversion_speed_factor = 0.8
		}
	}

	trait = {
		token = naz_upgrade_3_3
		name = naz_upgrade_3_3
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { naz_upgrade_2_4 }
		any_parent = { naz_upgrade_2_2 naz_upgrade_2_3 }

		position = { x = 6 y = 3 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		mutually_exclusive = { naz_upgrade_3_2 }

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = naz_upgrade_4_1
		name = naz_upgrade_4_1
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { naz_upgrade_2_1 }

		position = { x = 0 y = 4 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
		}

		production_bonus = {
			production_resource_need_factor = -0.15
		}
	}

	trait = {
		token = naz_upgrade_4_2
		name = naz_upgrade_4_2
		icon = GFX_icon_naz_MIO

		visible = {
			FROM = {
				NOT = {
					has_country_flag = RUS_rename_industries
				}
			}
		}

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_completed_focus = RUS_nizhegorodsky_avtomobilny_focus }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = { has_completed_focus = FER_return_to_kremlin }
			}
			else_if = {
				limit = { FROM = { original_tag = RSA } }
				FROM = { has_completed_focus = RUS_secret_weapons_development }
			}
		}

		any_parent = { naz_upgrade_3_1 naz_upgrade_3_2 naz_upgrade_3_3 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
			production_cost_factor = -0.05
		}
	}

	trait = {
		token = naz_upgrade_4_2_soc_rus
		name = naz_upgrade_4_2_soc_rus
		icon = GFX_icon_naz_MIO

		visible = {
			FROM = {
				has_country_flag = RUS_rename_industries
			}
		}

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_completed_focus = RUS_nizhegorodsky_avtomobilny_focus }
			}
		}

		any_parent = { naz_upgrade_3_1 naz_upgrade_3_2 naz_upgrade_3_3 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
			production_cost_factor = -0.05
		}
	}

	trait = {
		token = naz_upgrade_4_3
		name = naz_upgrade_4_3
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { naz_upgrade_2_4 }

		position = { x = 8 y = 4 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_resource_need_factor = -0.15
		}
	}
}

RUS_naz_organisation_lar = { ### For those with AAT and LaR
	name = naz
	icon = GFX_idea_naz
	allowed = {
		is_russian_tag = yes
	}
	visible = {
		has_dlc_lar = yes
	}
	available = { FROM = { owns_state = 252 } } #Nizhny Novgorod

	equipment_type = {
		motorized_equipment
		mechanized_equipment
		motorized_rocket_equipment
		light_tank_artillery_chassis
		medium_tank_artillery_chassis
		heavy_tank_artillery_chassis
		light_tank_destroyer_chassis
		medium_tank_destroyer_chassis
		heavy_tank_destroyer_chassis
		light_tank_aa_chassis
		medium_tank_aa_chassis
		heavy_tank_aa_chassis
		armored_car_equipment
	}

	research_categories = {
		mio_cat_tech_all_motorized_mechanized
		mio_cat_tech_all_armor_and_modules
	}

	on_tech_research_completed = {
		if = {
			limit = { FROM = { has_country_flag = naz_research_funds_gain } }
			hidden_effect = {
				FROM = {
					country_event = { id = russia.1001 days = 1 }
				}
			}
			custom_effect_tooltip = naz_research_funds_share_tt
		}
		else = {
			custom_effect_tooltip = naz_research_funds_gain_trigger_tt
		}
	}

	ai_will_do = { base = 1000 }

	initial_trait = {
		name = RUS_naz_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = naz_upgrade_1
		name = naz_upgrade_1
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 0 y = 0 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
			armored_car_equipment
		}

		production_bonus = {
			production_cost_factor = -0.025
		}
	}

	trait = {
		token = naz_upgrade_2
		name = naz_upgrade_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		position = { x = 3 y = 0 }

		mutually_exclusive = { naz_upgrade_3 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
			armored_car_equipment
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = naz_upgrade_3
		name = naz_upgrade_3
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		position = { x = 5 y = 0 }

		mutually_exclusive = { naz_upgrade_2 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = naz_upgrade_4
		name = naz_upgrade_4
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 8 y = 0 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_cost_factor = -0.025
		}
	}

	trait = {
		token = naz_upgrade_1_1
		name = naz_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { naz_upgrade_1 }
		any_parent = { naz_upgrade_2 naz_upgrade_3 }

		position = { x = 2 y = 1 }

		mutually_exclusive = { naz_upgrade_1_2 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
			armored_car_equipment
		}

		production_bonus = {
			production_resource_need_factor = -0.15
		}
	}

	trait = {
		token = naz_upgrade_1_2
		name = naz_upgrade_1_2
		icon = GFX_KR_generic_mio_trait_icon_funds

		any_parent = { naz_upgrade_2 naz_upgrade_3 }

		available = {
			FROM = {
				owns_state = 248
			}
		}

		position = { x = 4 y = 1 }

		mutually_exclusive = { naz_upgrade_1_1 naz_upgrade_1_3 }

		on_complete = {
			custom_effect_tooltip = naz_research_funds_share_tt
			FROM = { set_country_flag = naz_research_funds_gain }
			FROM = {
				248 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	trait = {
		token = naz_upgrade_1_3
		name = naz_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { naz_upgrade_4 }
		any_parent = { naz_upgrade_2 naz_upgrade_3 }

		position = { x = 6 y = 1 }

		mutually_exclusive = { naz_upgrade_1_2 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_resource_need_factor = -0.15
		}
	}

	trait = {
		token = naz_upgrade_2_1
		name = naz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { naz_upgrade_1 }

		position = { x = 0 y = 2 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
			armored_car_equipment
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = naz_upgrade_2_2
		name = naz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { naz_upgrade_1_1 naz_upgrade_1_2 naz_upgrade_1_3 }

		position = { x = 3 y = 2 }

		mutually_exclusive = { naz_upgrade_2_3 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
			armored_car_equipment
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = naz_upgrade_2_3
		name = naz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { naz_upgrade_1_1 naz_upgrade_1_2 naz_upgrade_1_3 }

		position = { x = 5 y = 2 }

		mutually_exclusive = { naz_upgrade_2_2 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = naz_upgrade_2_4
		name = naz_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { naz_upgrade_4 }

		position = { x = 8 y = 2 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = naz_upgrade_3_1
		name = naz_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { naz_upgrade_2_1 }
		any_parent = { naz_upgrade_2_2 naz_upgrade_2_3 }

		position = { x = 2 y = 3 }

		mutually_exclusive = { naz_upgrade_3_2 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
			armored_car_equipment
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = naz_upgrade_3_2
		name = naz_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { naz_upgrade_2_2 naz_upgrade_2_3 }

		position = { x = 4 y = 3 }

		mutually_exclusive = { naz_upgrade_3_1 naz_upgrade_3_3 }

		production_bonus = {
			production_conversion_speed_factor = 0.8
		}
	}

	trait = {
		token = naz_upgrade_3_3
		name = naz_upgrade_3_3
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { naz_upgrade_2_4 }
		any_parent = { naz_upgrade_2_2 naz_upgrade_2_3 }

		position = { x = 6 y = 3 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		mutually_exclusive = { naz_upgrade_3_2 }

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = naz_upgrade_4_1
		name = naz_upgrade_4_1
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { naz_upgrade_2_1 }

		position = { x = 0 y = 4 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
			armored_car_equipment
		}

		production_bonus = {
			production_resource_need_factor = -0.15
		}
	}

	trait = {
		token = naz_upgrade_4_2
		name = naz_upgrade_4_2
		icon = GFX_icon_naz_MIO

		visible = {
			FROM = {
				NOT = {
					has_country_flag = RUS_rename_industries
				}
			}
		}

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_completed_focus = RUS_nizhegorodsky_avtomobilny_focus }
			}
			else_if = {
				limit = { FROM = { original_tag = FER } }
				FROM = { has_completed_focus = FER_return_to_kremlin }
			}
			else_if = {
				limit = { FROM = { original_tag = RSA } }
				FROM = { has_completed_focus = RUS_secret_weapons_development }
			}
		}

		any_parent = { naz_upgrade_3_1 naz_upgrade_3_2 naz_upgrade_3_3 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
			production_cost_factor = -0.05
		}
	}

	trait = {
		token = naz_upgrade_4_2_soc_rus
		name = naz_upgrade_4_2_soc_rus
		icon = GFX_icon_naz_MIO

		visible = {
			FROM = {
				has_country_flag = RUS_rename_industries
			}
		}

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_completed_focus = RUS_nizhegorodsky_avtomobilny_focus }
			}
		}

		any_parent = { naz_upgrade_3_1 naz_upgrade_3_2 naz_upgrade_3_3 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
			production_cost_factor = -0.05
		}
	}

	trait = {
		token = naz_upgrade_4_3
		name = naz_upgrade_4_3
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { naz_upgrade_2_4 }

		position = { x = 8 y = 4 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_resource_need_factor = -0.15
		}
	}
}

RUS_laz_organisation = {
	name = laz_non_socrus
	icon = GFX_idea_laz
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 248 } } #Yaroslav

	equipment_type = {
		motorized_equipment
		mechanized_equipment
		motorized_rocket_equipment
	}

	research_categories = {
		mio_cat_tech_all_motorized_mechanized
	}

	on_tech_research_completed = {
		if = {
			limit = { FROM = { has_country_flag = laz_research_funds_gain } }
			FROM = {
				mio:RUS_naz_organisation = {
					add_mio_funds = 1000
				}
				mio:RUS_naz_organisation_lar = {
					add_mio_funds = 1000
				}
			}
			custom_effect_tooltip = laz_research_funds_share_tt
		}
		else = {
			custom_effect_tooltip = laz_research_funds_gain_trigger_tt
		}
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_laz_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = laz_upgrade_1
		name = laz_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 3 y = 0 }

		mutually_exclusive = { laz_upgrade_2 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
		}

		equipment_bonus = {
			fuel_consumption = -0.1
		}

		on_complete = {
			custom_effect_tooltip = laz_research_funds_share_tt
			FROM = { set_country_flag = laz_research_funds_gain }
		}
	}

	trait = {
		token = laz_upgrade_2
		name = laz_upgrade_2
		icon = GFX_KR_generic_mio_trait_icon_political_power

		position = { x = 5 y = 0 }

		mutually_exclusive = { laz_upgrade_1 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
		}

		equipment_bonus = {
			fuel_consumption = -0.1
		}

		on_complete = {
			FROM = {
				add_political_power = 75
			}
		}
	}

	trait = {
		token = laz_upgrade_1_1
		name = laz_upgrade_1_1
		icon = GFX_KR_generic_mio_trait_icon_stability

		any_parent = { laz_upgrade_1 laz_upgrade_2 }

		position = { x = 3 y = 1 }

		mutually_exclusive = { laz_upgrade_1_2 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			FROM = {
				add_stability = 0.05
				if = {
					limit = {
						FROM = {
							has_idea = RUS_popular_anger
						}
					}
					set_temp_variable = { RUS_anger_change = -1 }
					if = {
						limit = { check_variable = { RUS_popular_anger = 1 } }
						custom_effect_tooltip = RUS_decrease_pop_anger
						custom_effect_tooltip = tooltip_white_line
						custom_effect_tooltip = RUS_pop_anger_no_effect
					}
					RUS_change_popular_anger = yes
				}
				if = {
					limit = {
						FROM = {
							has_idea = RUS_right_anger
						}
					}
					set_temp_variable = { RUS_anger_change = -1 }
					if = {
						limit = { check_variable = { RUS_right_anger = 1 } }
						custom_effect_tooltip = RUS_decrease_right_anger
						custom_effect_tooltip = tooltip_white_line
						custom_effect_tooltip = RUS_right_anger_no_effect
					}
					RUS_change_right_anger = yes
				}
				if = {
					limit = {
						FROM = {
							has_idea = RUS_left_anger
						}
					}
					set_temp_variable = { RUS_anger_change = -1 }
					if = {
						limit = { check_variable = { RUS_left_anger = 1 } }
						custom_effect_tooltip = RUS_decrease_left_anger
						custom_effect_tooltip = tooltip_white_line
						custom_effect_tooltip = RUS_left_anger_no_effect
					}
					RUS_change_left_anger = yes
				}
			}
		}
	}

	trait = {
		token = laz_upgrade_1_2
		name = laz_upgrade_1_2
		icon = GFX_KR_generic_mio_trait_icon_war_support

		any_parent = { laz_upgrade_1 laz_upgrade_2 }

		position = { x = 5 y = 1 }

		mutually_exclusive = { laz_upgrade_1_1 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			FROM = {
				add_war_support = 0.05
				set_temp_variable = { RUS_anger_change = -1 }
				if = {
					limit = {
						OR = {
							has_idea = RUS_military_anger
							has_idea = RUS_military_anger_dem
						}
						check_variable = { RUS_military_anger = 1 }
					}
					custom_effect_tooltip = RUS_decrease_mil_anger
					custom_effect_tooltip = tooltip_white_line
					custom_effect_tooltip = RUS_mil_anger_no_effect
				}
				RUS_change_military_anger = yes
			}
		}
	}

	trait = {
		token = laz_upgrade_2_1
		name = laz_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_hardness

		any_parent = { laz_upgrade_1 laz_upgrade_2 }

		position = { x = 0 y = 2 }

		mutually_exclusive = { laz_upgrade_2_2 laz_upgrade_2_3 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
		}

		equipment_bonus = {
			hardness = 0.1
			maximum_speed = -0.1
		}

		on_complete = {
			custom_effect_tooltip = RUS_laz_upgrade_2_1_tt
		}
	}

	trait = {
		token = laz_upgrade_2_2
		name = laz_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_hardness

		any_parent = { laz_upgrade_1 laz_upgrade_2 }

		position = { x = 1 y = 2 }

		mutually_exclusive = { laz_upgrade_2_1 laz_upgrade_2_3 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
		}

		equipment_bonus = {
			hardness = 0.2
			maximum_speed = -0.1
		}

		production_bonus = {
			production_resource_need_factor = 0.25
		}

		on_complete = {
			custom_effect_tooltip = RUS_laz_upgrade_2_2_tt
		}
	}

	trait = {
		token = laz_upgrade_2_3
		name = laz_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_hardness

		any_parent = { laz_upgrade_1 laz_upgrade_2 }

		position = { x = 2 y = 2 }

		mutually_exclusive = { laz_upgrade_2_1 laz_upgrade_2_2 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
		}

		equipment_bonus = {
			hardness = 0.3
			build_cost_ic = 0.1
			maximum_speed = -0.1
		}

		production_bonus = {
			production_resource_need_factor = 0.25
		}

		on_complete = {
			custom_effect_tooltip = RUS_laz_upgrade_2_3_tt
		}
	}

	trait = {
		token = laz_upgrade_2_4
		name = laz_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_assign_cost

		any_parent = { laz_upgrade_1_1 laz_upgrade_1_2 }

		mutually_exclusive = { laz_upgrade_2_5 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			reliability = 0.1
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.5
		}
	}

	trait = {
		token = laz_upgrade_2_5
		name = laz_upgrade_2_5
		icon = GFX_KR_generic_mio_trait_icon_design_cost

		any_parent = { laz_upgrade_1_1 laz_upgrade_1_2 }

		mutually_exclusive = { laz_upgrade_2_4 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			reliability = 0.1
		}

		organization_modifier = {
			military_industrial_organization_design_team_change_cost = -0.5
		}
	}

	trait = {
		token = laz_upgrade_2_6
		name = laz_upgrade_2_6
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { laz_upgrade_1 laz_upgrade_2 }

		position = { x = 6 y = 2 }

		mutually_exclusive = { laz_upgrade_2_7 laz_upgrade_2_8 }

		limit_to_equipment_type = {
			motorized_rocket_equipment
		}

		equipment_bonus = {
			soft_attack = 0.05
			maximum_speed = -0.1
		}

		on_complete = {
			custom_effect_tooltip = RUS_laz_upgrade_2_6_tt
		}
	}

	trait = {
		token = laz_upgrade_2_7
		name = laz_upgrade_2_7
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { laz_upgrade_1 laz_upgrade_2 }

		position = { x = 7 y = 2 }

		mutually_exclusive = { laz_upgrade_2_6 laz_upgrade_2_8 }

		limit_to_equipment_type = {
			motorized_rocket_equipment
		}

		equipment_bonus = {
			soft_attack = 0.1
			maximum_speed = -0.1
		}

		production_bonus = {
			production_resource_need_factor = 0.25
		}

		on_complete = {
			custom_effect_tooltip = RUS_laz_upgrade_2_7_tt
		}
	}

	trait = {
		token = laz_upgrade_2_8
		name = laz_upgrade_2_8
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { laz_upgrade_1 laz_upgrade_2 }

		position = { x = 8 y = 2 }

		mutually_exclusive = { laz_upgrade_2_6 laz_upgrade_2_7 }

		limit_to_equipment_type = {
			motorized_rocket_equipment
		}

		equipment_bonus = {
			soft_attack = 0.15
			build_cost_ic = 0.1
			maximum_speed = -0.1
		}

		production_bonus = {
			production_resource_need_factor = 0.25
		}

		on_complete = {
			custom_effect_tooltip = RUS_laz_upgrade_2_8_tt
		}
	}

	trait = {
		token = laz_upgrade_3_1
		name = laz_upgrade_3_1
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { laz_upgrade_2_1 laz_upgrade_2_2 laz_upgrade_2_3 }
		any_parent = { laz_upgrade_2_4 laz_upgrade_2_5 }

		mutually_exclusive = { laz_upgrade_3_2 }

		position = { x = 1 y = 3 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
		}

		equipment_bonus = {
			breakthrough = 0.25
			maximum_speed = -0.1
		}
	}

	trait = {
		token = laz_upgrade_3_2
		name = laz_upgrade_3_2
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { laz_upgrade_2_1 laz_upgrade_2_2 laz_upgrade_2_3 }
		any_parent = { laz_upgrade_2_4 laz_upgrade_2_5 }

		mutually_exclusive = { laz_upgrade_3_1 }

		position = { x = 2 y = 3 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
		}

		equipment_bonus = {
			breakthrough = 0.25
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.3
		}
	}

	trait = {
		token = laz_upgrade_3_3
		name = laz_upgrade_3_3
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		any_parent = { laz_upgrade_2_4 laz_upgrade_2_5 }

		available = {
			FROM = {
				owns_state = 248
			}
		}

		mutually_exclusive = { laz_upgrade_3_4 }

		position = { x = 3 y = 3 }

		on_complete = {
			FROM = {
				248 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	trait = {
		token = laz_upgrade_3_4
		name = laz_upgrade_3_4
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		any_parent = { laz_upgrade_2_4 laz_upgrade_2_5 }

		available = {
			FROM = {
				owns_state = 248
			}
		}

		mutually_exclusive = { laz_upgrade_3_3 }

		position = { x = 5 y = 3 }

		on_complete = {
			FROM = {
				248 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	trait = {
		token = laz_upgrade_3_5
		name = laz_upgrade_3_5
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { laz_upgrade_2_4 laz_upgrade_2_5 }
		any_parent = { laz_upgrade_2_6 laz_upgrade_2_7 laz_upgrade_2_8 }

		mutually_exclusive = { laz_upgrade_3_6 }

		position = { x = 6 y = 3 }

		limit_to_equipment_type = {
			motorized_rocket_equipment
		}

		equipment_bonus = {
			breakthrough = 0.25
			maximum_speed = -0.1
		}
	}

	trait = {
		token = laz_upgrade_3_6
		name = laz_upgrade_3_6
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { laz_upgrade_2_4 laz_upgrade_2_5 }
		any_parent = { laz_upgrade_2_6 laz_upgrade_2_7 laz_upgrade_2_8 }

		mutually_exclusive = { laz_upgrade_3_5 }

		position = { x = 7 y = 3 }

		limit_to_equipment_type = {
			motorized_rocket_equipment
		}

		equipment_bonus = {
			breakthrough = 0.25
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.3
		}
	}

	trait = {
		token = laz_upgrade_4_1
		name = laz_upgrade_4_1
		icon = GFX_KR_generic_mio_trait_icon_land_doctrine

		available = {
			FROM = {
				has_completed_focus = RUS_update_equipment
			}
		}

		any_parent = { laz_upgrade_3_1 laz_upgrade_3_2 laz_upgrade_3_3 laz_upgrade_3_4 }

		mutually_exclusive = { laz_upgrade_4_2 }

		position = { x = 3 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.2
		}

		on_complete = {
			RUS_add_laz_upgrade_4_1 = yes
		}
	}

	trait = {
		token = laz_upgrade_4_2
		name = laz_upgrade_4_2
		icon = GFX_KR_generic_mio_trait_icon_research_bonus

		available = {
			FROM = {
				has_completed_focus = RUS_update_equipment
			}
		}

		any_parent = { laz_upgrade_3_3 laz_upgrade_3_4 laz_upgrade_3_5 laz_upgrade_3_6 }

		mutually_exclusive = { laz_upgrade_4_1 }

		position = { x = 5 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.2
		}

		on_complete = {
			FROM = {
				add_tech_bonus = {
					name = laz_upgrade_4_2
					bonus = 3.0
					uses = 1
					category = cat_mechanized_equipment
				}
			}
		}
	}
}
