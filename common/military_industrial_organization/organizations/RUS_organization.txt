####################################################################################################
# Russia MIOs   																				   #
####################################################################################################
# First attempted rework by Rylock and Alpinia													   #
####################################################################################################
# Second rework by Matoro, Katie, Frill Shark, Kano, Daru, Deliberus, marimari, Gideones and DDago #
####################################################################################################
# Optimisations of MIO code by SuperGreenBeans										   			   #
####################################################################################################

# Tank MIOs
  # Putilovets
  # OKMO
  # UZTM
  # TSTZ
  # CHTZ
# Ship MIOs
  # BZ
  # AV
  # AS
  # Dalzavod
# Plane MIOs
  # OSOAVIA
  # Duks
  # TSAGI
  # Gamayun
  # Skorost
  # Sokol
# Material Equipment MIOs
  # TOZ
  # VPOZ
  # IMZ
  # Obukhov
  # BMZ
  # AMO
  # NAZ
  # LAZ

##################################################
### MIO Mini-Document - Last Updated July 2025 ###
##################################################
# Looking around the Russian MIO content file are we? Perhaps you are looking to solve/report a bug? Maybe you want to learn from my work? Well whatever the case, considering how big this file is compared to other MIO country organisation files and how
# complex the code can seem I decided to write down a sort of "Mini-Document" that can be read to quickly and effeciently understand just how the Russian MIO system works instead of plowing through thousands of lines of code (though feel free to do so if you wish).
# I would also reccomend for you to read chronologically as I might only explain a mechanic once and then just reference it in other sections later.
#
# One other thing to mention is that the scripted effect `RUS_setup_custom_russian_MIOs` is used to setup all the internal MIO variables for RUS, RSA and FER which will be used to display loc. Anywho on towards the MIOs...
#
##################
### Putilovets ###
##################
# A fairly standard and simple MIO compared to all the others that will be covered later.
# Only 2 things to note here:
#
# 1) Has 2 "final" traits in the center (Improved Kirov Works/Improved Putilovets)
# "Improved Putilovets" trait is always present when the game loads, with the "Improved Kirov Works" trait staying invisible until the industries have been renamed from the SocRus focus 'RUS_nationalise' industries. Once that occurs, "Improved Putilovets"
# is set to be invisible.
#
# 2) Trait "Improved Dozer Equipment" is only visible if the player owns NSB DLC (as dozer blade can only be changed inside the tank designer which the NSB DLC adds).
#
############
### OKMO ###
############
# A somewhat fairly complex MIO OKMO, though not too much of a hastle.
# It contain 2 separate trait trees that are unlocked with either "Frontline Design Reporters" or "Politically Connected Designers":
#
# 1) PP trait tree - This is the one that you can see when viewing it at the game start and once unlocked, whenever you unlock a trait, it will grant the receiving country PP in exchange through the 'on_complete' effect.
#
# 2) Army XP trait tree - This tree stays hidden until the "Frontline Design Reporters" trait is chosen. Here, 2 variables are set called `okmo_kr_xp_requirement` (the variable that is used in the `available` triggers to prevent taking the trait
# until the receiving country has the minimal amount of XP) and `okmo_kr_xp_cost` (which deducts the amount of XP needed to take the chosen trait). These 2 variables consequently increase or decrease every time a trait is unlocked.
#
# Just as with Putilovets, OKMO has the final trait "Improved OKMO" (for both PP and Army XP trees) change depending on SocRus focus being taken (Red Russia has OKMO's background turn red).
#
############
### UZTM ###
############
# As with the previous Putilovets MIO, the 2 traits "Additional Space for Fuel Drums" and "Improved Dozers" are only visible with the NSB DLC.
#
# Now onto the complex "Invite Allied Talent" trait. The 2 traits that you see when loading up the game (uztm_upgrade_1_2 and uztm_upgrade_1_3) only have a simple tooltip displaying the effects. The actual production traits are invisible.
# When either `uztm_upgrade_1_2` or `uztm_upgrade_1_3` are unlocked, they are set to be invisible (by setting the uztm_upgrade_level variable) and the selection process begins using the `RUS_upgrade_uztm` scripted effect.
#
# There, the number of allies and subjects of the receiving country is added up (using the uztm_allies_and_puppets_no variable) to a maximum of 10. Once it's summed up, the corresponding trait is unlocked back in the UZTM trait tree
# depending on what initial trait the player/AI chose (to prioritise eff cap or eff gain) and makes it visible with the `uztm_upgrade_level` variable.
#
############
### TSTZ ###
############
# Here TsTZ has 2 different sets of buffs for every production bonus at the bottom. The ones visible at the start being the `tstz_upgrade_2_x_reset_y` traits that grant normal bonuses and the `tstz_upgrade_2_x_reset_y_double` traits that grant double the bonus.
#
# The "resettable" traits simply have 10 copies of the same trait that are made visible once the one before it is unlocked.
# The "This trait can be reset X more times" is controlled by the `tstz_(bonus)_counter` variables that is set from the scripted effect `RUS_setup_custom_russian_MIOs`.
# THe tooltip used for all the `tstz_(bonus)_counter` variable effects is the `RUS_tstz_trait_reset_num_times` variable tooltip that exploits the $LEFT$ property to display the value of the variable before the variable effect is executed.
#
##########
### AV ###
##########
# Oh boy, the first really complex MIO here we go. So first things first, the tooltip display which is controlled through `RUS_av_decaying_funds_bonus_tt`.
#
# The "Starting Funds Bonus", "Weekly Decay", "Number of decaying funds bonus granted" and "Total amount of Funds bonus granted" numbers that appear on the screen are all controlled by variables similar to TsTZ from the previous example.
# These variables can either increase or decrease when a trait is unlocked through the `on_complete` or the `on_add`/`on_remove` when activating/deactivating policies on_action. Pretty straight forward.
#
# The AV list is controlled through a recursive, yes recursive, scripted effect `RUS_show_decaying_funds_bonuses` which prints out the values of two arrays, one comprising of the MIO names and other of their respective decaying funds bonuses.
# MIOs with the RUS_decaying_funds_bonus variable are dislayed in this recursive list, with said variable displaying the decaying funds bonus (not the overall funds bonus value). Every time the RUS_decaying_funds_bonus is updated, the two arrays are reset to ensure the index order is maintained.
# Whenever an MIO is granted a decaying funds bonus through the `RUS_execute_AV` it sets the `RUS_decaying_funds_bonus` variable.
#
# As for how the MIO functions, that is handled by 3 scripted effects: `RUS_Update_Decaying_Funds_Bonus`, `RUS_execute_AV` and `RUS_AV_set_random_decaying_funds_bonus`.
#
# `RUS_Update_Decaying_Funds_Bonus` is triggered on a weekly basis (in on_weekly_RUS) and is the one that changes the funds bonus for every MIO that has the "Decaying Funds Bonus" active. Depending on the upgrades unlocked in the trait tree or the MIO
# policies, it deducts the required funds bonus from the MIO and changes the `RUS_decaying_funds_bonus` variable value with it. If the variable value is at a certain funds value relative to the amount needed to be deducted then the "Decaying Funds Bonus" is removed altogether.
#
# `RUS_execute_AV` is the scripted effect that applies the "Decaying Funds Bonus" to a set number of random MIOs depending on trait upgrades and MIO policies. This effect is available in all traits of the AV tree and the decision unlocked through
# the final trait "Improved AV".
#
# `RUS_AV_set_random_decaying_funds_bonus` displays the correct tooltip to the player about how many funds bonuses are going to be given out (assuming there are still enough MIOs without a currently active decaying Funds bonus).
#
################
### Dalzavod ###
################
# Back to the simple MIOs again, Dalzavod only has the Naval Mine decisions. Once unlocked through the central trait tree, it will either unlock additional decisions or grant more mines being added through the decisions (controlled by variable
# `RUS_dalzavod_mines_number` and `RUS_dalzavod_total_mines_launched`). Very simple stuff here.
#
###############
### Gamayun ###
###############
# Another very complex MIO to conver. The display tooltip works similar to AV with the variables set from `RUS_setup_custom_russian_MIOs`
# alongside the recursive scripted localisation `RUS_Show_Gamayun_Notification_List`
# The three arrays used for the recursive localisation have oldest factory construction erased (if present) and the latest gets added to the first index 0
#
# There are 2 things that controls how the building effects work: event russia_events.1002 and scripted effect `RUS_Gamayun_Factories`.
#
# The event russia_events.1002 controls how often the `RUS_Gamayun_Factories` is continually fired depending on the traits/policies unlocked.
#
# `RUS_Gamayun_Factories` on the other hand builds a randomly chosen factory instantly in a random state, damages it in a specific range depending on upgrades and finally sets a state flag to prevent factories being spawned in the same place too often.
#
############
### Duks ###
############
# Very basic MIO that only has a custom MIO tree.
#
###############
### Skorost ###
###############
# Another very basic MIO that has a custom MIO tree.
#
#############
### Sokol ###
#############
# This is a very interesting MIO. The MIO might seem like it is just 1 copy however, under the hood there are 3 copies:
#
# 1) RUS_sokol - The basic copy that is visible at game start
# 2) RUS_sokol_production - The second copy that is able to research production and industry tech
# 3) RUS_sokol_construction - The third copy that is able to research construction and excavation tech
#
# Once either of the first traits in `RUS_sokol` is unlocked, `RUS_sokol` becomes invisible and either `RUS_sokol_production` or `RUS_sokol_construction` becomes visible with that first trait already unlocked.
#
# After, that `RUS_Update_Sokol` will be triggered on a weekly basis that then alters the "Funds Bonus" and "Assign Team Cost" from their maximums and minimums depending on the technology that is being researched.
#
###########
### TOZ ###
###########
# Once any of the "medal" traits have been unlocked, the decision 'RUS_TOZ_Medals' will become available where the scripted effect `RUS_TOZ_Hand_Out_Medals` grants the actual medals to random divisions. As medals cannot be augmented/changed on the fly
# (i.e. they only have 1 state when the game loads) this means that there are (as of writing this) 8 medals in the 'KR_medals.txt' file that are used in the `RUS_TOZ_Hand_Out_Medals` script. These are handed out to random divisions based on the traits
# unlocked in the TOZ MIO trait tree.
#
###########
### IMZ ###
###########
# Another very basic MIO that has a custom MIO tree for the production bonuses.
#
###############
### Obukhov ###
###############
# While this MIO is classified as an 'XP MIO' (generates one of the 3 main XP types) and will be covered in the 'XP MIOs' section, Obukhov also doubles as a production MIO with the 4 bottom traits. Every production bonus has 4 different traits (lvl4, 3, 2 and 1)
# with lvl4 being visible at game start and the other 3 being invisible. If the production trait is taken before the other ones then it will stay visible, while the other lvl 4 traits become invisible and their lvl 3 traits become visible instead
# (presenting how the effects are halving even if it's smoke and mirrors).
#
###########
### AMO ###
###########
# Note: AMO used to have two versions - one without the DLC NSB and one with it. These have since been combined into a single one.
# With the NSB DLC, the traits `amo_upgrade_1_3` and `amo_upgrade_2_1` give the additonal effect of Fuel Capacity. With the CIC mechanic, some basic variables are used to
# calculate the final CIC bonus:
# Add_cic formula: (RUS_amo_cic_bonus * size) + @RUS_amo_cic_base
# 1) `@RUS_amo_cic_base` - Minimum CIC given (this is a constant not a var)
# 2) `RUS_amo_cic_bonus`- Bonus CIC given based on traits unlocked and policy. Starts at 500, can be increased by affected by trait amo_upgrade_1_2, trait amo_upgrade_1_4, and policy RUS_mio_policy_expand_weapon_deals
# 3) `size` - Multiplier for CIC based on MIO size
#
# Finally the `RUS_amo_cic_bonus` and `RUS_amo_total_campaign_cic` variables control the loc and are increased/decreased depending on which traits/policies are applied to the AMO MIO.
#
###############
### NAZ/LAZ ###
###############
# Very simple MIOs as with IMZ, Duks and other MIOs before but, I'm grouping them together as they share the same mechanic of giving each other funds when they finish researching something. This is used through the simple `on_tech_research_completed`
# effect. The reason why NAZ fires an event to give the effect whilst, LAZ only has the effect is because, of the way that the game engine reads the files (bottom to top) so sometimes it will try to target the MIO that needs that effect however, will not
# find it and not trigger the effect (firing an event gets around this problem).
#
# NAZ used to have two copies for those without the LaR DLC. Only difference being that the LaR version allowed assigning armoured cars to production and research.
#
################################################
### R&D MIOs (CHTZ, AS, TSAGI, VPOZ and BMZ) ###
################################################
# And so we come to the most complex MIOs called "R&D MIOs" as they are able to stack research speed. The display tooltip works the same way that AV and OSOAVIA, fairly standard now so feel free to look there as to how it works.
#
# The way that research speed is gained, is checked on a weekly basis (on_weekly_RUS) in the `RUS_Update_MIO_Research_Speeds` scripted effect. As noted in the R&D tooltip, research speed can only be gained when the MIO is assigned as a manufacturer
# and is gaining at least 9 funds per week (controlled by the `weekly_funds_requirement` variable). Here, 2 variables are set called `(MIO)_Previous_Week_Funds` and `(MIO)_Current_Week_Funds` which are then compared to make sure that they exceed
# the required amount of weekly funds (usually 9 at the time of writing).
#
# For the R&D check, it sees if the weekly funds exceeds the required amount based on upgrades, (`weekly_funds_gained` variable) and if the MIO is currently being used as a manufacturer (RUS_mio_assigned_manufacturer_num). Why not use
# `is_mio_assigned_to_task` trigger? Because, that trigger checks if the MIO is assigned to either RESEARCH or MANUFACTURER. For R&D MIOs we only want to check if they are assigned as a manufacturer.
#
# Once it has passed that check, it can then add on the required research speed so long as it doesn't exceed the cap (based on trait unlocks and MIO policy). If the MIO has already reached its cap and cannot add anymore then it will fire a
# scripted GUI notification informing the player of it so that the player doesn't have to constantly check every minute to see if the MIO has indeed reached the research speed cap.
#
#########################################
### XP MIOs (BZ, OSOAVIA and Obukhov) ###
#########################################
# The display tooltip works the same way that the R&D MIOs work, you know the drill by now. However, the way that these XP MIOs actually give XP is through hidden_ideas (see the hidden ideas section in RUS_ideas file).
#
# Subsequently, when the weekly scripted effect fires (RUS_Update_MIO_XP_Gains), it checks to see if the hidden ideas should either be added or removed (based on if the manufacturer exceeds the funds requirement akin to R&D MIOs or is currently
# researching any technology) for each of the currently used XP MIOs.
#
#################################
### Naval MIO "Dalzavod" Idea ###
#################################
# This idea is built up by first passing through the `RUS_upgrade_dalzavod_idea_check` scripted effect where if the check succeeds then the actual "Dalzavod" idea starts to gradually build up in the 'RUS_upgrade_dalzavod_idea' scripted effect.
#
###########
### END ###
###########
# And that is all there is to it. If you have any other problems or questions regarding how these MIOs function then feel free to message me on the Kaiserreich Discord or privately DM me (@deliberus). Have an interesting time looking through the file :)

#################
### Tank MIOs ###
#################
RUS_putilovets_organisation = {
	name = putilovets_non_socrus
	icon = GFX_idea_putilovets
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 195 } } #Petrograd

	equipment_type = {
		armor
	}

	research_categories = {
		mio_cat_tech_all_armor_and_modules
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = RUS_putilovets_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = putilovets_upgrade_1
		name = KR_MIO_Trait_bvt_armour
		icon = GFX_generic_mio_trait_icon_armor_value

		mutually_exclusive = { putilovets_upgrade_2 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			armor_value = 0.1
		}
	}

	trait = {
		token = putilovets_upgrade_2
		name = KR_MIO_Trait_double_layered_armour
		icon = GFX_generic_mio_trait_icon_armor_value

		mutually_exclusive = { putilovets_upgrade_1 }

		position = { x = 3 y = 0 }

		equipment_bonus = {
			armor_value = 0.2
			maximum_speed = -0.1
		}
	}

	trait = {
		token = putilovets_upgrade_3
		name = KR_MIO_Trait_weight_centered_turret_design
		icon = GFX_generic_mio_trait_icon_hardness

		mutually_exclusive = { putilovets_upgrade_4 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			hardness = 0.2
			reliability = -0.1
		}
	}

	trait = {
		token = putilovets_upgrade_4
		name = KR_MIO_Trait_composite_armour
		icon = GFX_generic_mio_trait_icon_hardness

		mutually_exclusive = { putilovets_upgrade_3 }

		position = { x = 7 y = 0 }

		equipment_bonus = {
			hardness = 0.1
		}
	}

	trait = {
		token = putilovets_upgrade_1_1
		name = KR_MIO_Trait_gurdier_alloys
		icon = GFX_generic_mio_trait_icon_armor_value

		any_parent = { putilovets_upgrade_1 putilovets_upgrade_2 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			armor_value = 0.05
		}
	}

	trait = {
		token = putilovets_upgrade_dozer
		name = KR_MIO_Trait_improved_dozer_equipment
		icon = GFX_generic_mio_trait_icon_entrenchment

		visible = {
			has_dlc_nsb = yes
		}

		position = { x = 4 y = 1 }

		equipment_bonus = {
			entrenchment = 0.5
		}
	}

	trait = {
		token = putilovets_upgrade_1_2
		name = KR_MIO_Trait_side_skurts
		icon = GFX_generic_mio_trait_icon_hardness

		any_parent = { putilovets_upgrade_3 putilovets_upgrade_4 }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			hardness = 0.05
		}
	}

	trait = {
		token = putilovets_upgrade_2_1
		name = KR_MIO_Trait_improved_putilovets
		icon = GFX_icon_putilovets_MIO

		visible = {
			FROM = { NOT = { has_country_flag = RUS_rename_industries } }
		}

		special_trait_background = yes

		available = {
			FROM = {
				if = {
					limit = { original_tag = RUS }
					has_completed_focus = RUS_urban_housing_projects
				}
				else_if = {
					limit = { original_tag = FER }
					has_completed_focus = FER_return_to_kremlin
				}
				else = {
					has_completed_focus = RUS_secret_weapons_development
				}
			}
		}

		all_parents = { putilovets_upgrade_1_1 putilovets_upgrade_1_2 putilovets_upgrade_3_1 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = putilovets_upgrade_2_1_soc_rus
		name = KR_MIO_Trait_improved_kirovsky_zavod
		icon = GFX_icon_kirov_works_MIO

		visible = {
			FROM = { has_country_flag = RUS_rename_industries }
		}

		special_trait_background = yes

		available = {
			FROM = { has_completed_focus = RUS_urban_housing_projects }
		}

		all_parents = { putilovets_upgrade_1_1 putilovets_upgrade_1_2 putilovets_upgrade_3_1 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = putilovets_upgrade_3_1
		name = KR_MIO_Trait_telescopic_sights
		icon = GFX_generic_mio_trait_icon_hard_attack

		any_parent = { putilovets_upgrade_4_1 putilovets_upgrade_4_2 }

		position = { x = 4 y = 3 }

		equipment_bonus = {
			hard_attack = 0.05
			ap_attack = 0.05
		}
	}

	trait = {
		token = putilovets_upgrade_4_1
		name = KR_MIO_Trait_increased_muzzle_velocity
		icon = GFX_generic_mio_trait_icon_hard_attack

		mutually_exclusive = { putilovets_upgrade_4_2 }

		position = { x = 3 y = 4 }

		equipment_bonus = {
			hard_attack = 0.05
			ap_attack = 0.05
		}
	}

	trait = {
		token = putilovets_upgrade_4_2
		name = KR_MIO_Trait_wedge_breechblocks
		icon = GFX_generic_mio_trait_icon_hard_attack

		mutually_exclusive = { putilovets_upgrade_4_1 }

		position = { x = 5 y = 4 }

		equipment_bonus = {
			hard_attack = 0.1
			ap_attack = 0.1
			build_cost_ic = 0.1
		}
	}
}
RUS_okmo_kr_organisation = {
	name = okmo_kr
	icon = GFX_idea_okmo_kr
	allowed = {
		is_russian_tag = yes
	}
	available = {
		FROM = {
			if = {
				limit = { original_tag = RUS }
				has_completed_focus = RUS_motorisation
			}
			else_if = {
				limit = { original_tag = FER }
				has_completed_focus = FER_masters_over_siberia
			}
			else = {
				has_completed_focus = RUS_secret_weapons_development
			}
		}
	}

	equipment_type = {
		armor
	}

	research_categories = {
		mio_cat_tech_all_armor_and_modules
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_okmo_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = okmo_kr_upgrade_1
		name = KR_MIO_Trait_inner_ridged_cannon
		icon = GFX_generic_mio_trait_icon_defense

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_stats_for_xp } } }
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		position = { x = 0 y = 0 }

		equipment_bonus = {
			defense = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_2
		name = KR_MIO_Trait_experimental_apds_ammunition
		icon = GFX_generic_mio_trait_icon_hard_attack

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_stats_for_xp } } }
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			hard_attack = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_3
		name = KR_MIO_Trait_reinforced_tracks
		icon = GFX_generic_mio_trait_icon_reliability

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_stats_for_xp } } }
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		position = { x = 8 y = 0 }

		equipment_bonus = {
			reliability = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_4
		name = KR_MIO_Trait_mine_resistant_underside
		icon = GFX_generic_mio_trait_icon_hardness

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_stats_for_xp } } }
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		position = { x = 0 y = 4 }

		equipment_bonus = {
			hardness = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_5
		name = KR_MIO_Trait_suspension_improvements
		icon = GFX_generic_mio_trait_icon_maximum_speed

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_stats_for_xp } } }
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		position = { x = 4 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_6
		name = KR_MIO_Trait_extensively_detailed_crew_manuals
		icon = GFX_generic_mio_trait_icon_breakthrough

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_stats_for_xp } } }
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		position = { x = 8 y = 4 }

		equipment_bonus = {
			breakthrough = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_7
		name = KR_MIO_Trait_improved_okmo
		icon = GFX_icon_okmo_MIO

		special_trait_background = yes

		visible = {
			FROM = {
				NOT = { has_country_flag = okmo_kr_stats_for_xp }
				NOT = { has_country_flag = RUS_rename_industries }
			}
		}
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		all_parents = { okmo_kr_upgrade_1 okmo_kr_upgrade_2 okmo_kr_upgrade_3 okmo_kr_upgrade_4 okmo_kr_upgrade_5 okmo_kr_upgrade_6 okmo_kr_upgrade_10 okmo_kr_upgrade_11 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			soft_attack = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_7_soc_rus
		name = KR_MIO_Trait_improved_okmo
		icon = GFX_icon_okmo_soc_rus_MIO

		special_trait_background = yes

		visible = {
			FROM = {
				NOT = { has_country_flag = okmo_kr_stats_for_xp }
				has_country_flag = RUS_rename_industries
			}
		}
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		all_parents = { okmo_kr_upgrade_1 okmo_kr_upgrade_2 okmo_kr_upgrade_3 okmo_kr_upgrade_4 okmo_kr_upgrade_5 okmo_kr_upgrade_6 okmo_kr_upgrade_10 okmo_kr_upgrade_11 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			soft_attack = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_8
		name = KR_MIO_Trait_frontline_design_reporters
		icon = GFX_KR_generic_mio_trait_icon_upgrade

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_bonus_chosen } } }

		position = { x = 2 y = 1 }

		on_complete = {
			custom_effect_tooltip = okmo_kr_stats_for_xp_on_traits_tt
			FROM = {
				set_country_flag = okmo_kr_stats_for_xp
				set_country_flag = okmo_kr_bonus_chosen
				set_variable = { okmo_kr_xp_requirement = 10 }
				set_variable = { okmo_kr_xp_cost = -10 }
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_9
		name = KR_MIO_Trait_politically_connected_designers
		icon = GFX_KR_generic_mio_trait_icon_political_power

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_bonus_chosen } } }

		position = { x = 6 y = 1 }

		on_complete = {
			custom_effect_tooltip = okmo_kr_pp_on_traits_tt
			FROM = { set_country_flag = okmo_kr_bonus_chosen }
		}
	}

	trait = {
		token = okmo_kr_upgrade_10
		name = KR_MIO_Trait_collaborate_with_the_ona
		icon = GFX_generic_mio_trait_icon_ap_attack

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_stats_for_xp } } }
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			ap_attack = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_11
		name = KR_MIO_Trait_bst_armour
		icon = GFX_generic_mio_trait_icon_armor_value

		visible = { FROM = { NOT = { has_country_flag = okmo_kr_stats_for_xp } } }
		available = { FROM = { has_country_flag = okmo_kr_bonus_chosen } }

		position = { x = 8 y = 2 }

		equipment_bonus = {
			armor_value = 0.075
		}

		on_complete = {
			FROM = { add_political_power = 25 }
		}
	}

	trait = {
		token = okmo_kr_upgrade_1_xp
		name = KR_MIO_Trait_inner_ridged_cannon
		icon = GFX_generic_mio_trait_icon_defense

		visible = { FROM = { has_country_flag = okmo_kr_stats_for_xp } }
		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		position = { x = 0 y = 0 }

		equipment_bonus = {
			defense = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = { okmo_kr_xp_requirement = 5 }
				subtract_from_variable = { okmo_kr_xp_cost = 5 }
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_2_xp
		name = KR_MIO_Trait_experimental_apds_ammunition
		icon = GFX_generic_mio_trait_icon_hard_attack

		visible = { FROM = { has_country_flag = okmo_kr_stats_for_xp } }
		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		position = { x = 4 y = 0 }

		equipment_bonus = {
			hard_attack = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = { okmo_kr_xp_requirement = 5 }
				subtract_from_variable = { okmo_kr_xp_cost = 5 }
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_3_xp
		name = KR_MIO_Trait_reinforced_tracks
		icon = GFX_generic_mio_trait_icon_reliability

		visible = { FROM = { has_country_flag = okmo_kr_stats_for_xp } }
		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		position = { x = 8 y = 0 }

		equipment_bonus = {
			reliability = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = { okmo_kr_xp_requirement = 5 }
				subtract_from_variable = { okmo_kr_xp_cost = 5 }
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_4_xp
		name = KR_MIO_Trait_mine_resistant_underside
		icon = GFX_generic_mio_trait_icon_hardness

		visible = { FROM = { has_country_flag = okmo_kr_stats_for_xp } }
		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			hardness = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = { okmo_kr_xp_requirement = 5 }
				subtract_from_variable = { okmo_kr_xp_cost = 5 }
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_5_xp
		name = KR_MIO_Trait_suspension_improvements
		icon = GFX_generic_mio_trait_icon_maximum_speed

		visible = { FROM = { has_country_flag = okmo_kr_stats_for_xp } }
		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = { okmo_kr_xp_requirement = 5 }
				subtract_from_variable = { okmo_kr_xp_cost = 5 }
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_6_xp
		name = KR_MIO_Trait_extensively_detailed_crew_manuals
		icon = GFX_generic_mio_trait_icon_breakthrough

		visible = { FROM = { has_country_flag = okmo_kr_stats_for_xp } }
		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		position = { x = 8 y = 4 }

		equipment_bonus = {
			breakthrough = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = { okmo_kr_xp_requirement = 5 }
				subtract_from_variable = { okmo_kr_xp_cost = 5 }
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_7_xp
		name = KR_MIO_Trait_improved_okmo
		icon = GFX_icon_okmo_MIO

		special_trait_background = yes

		visible = {
			FROM = {
				has_country_flag = okmo_kr_stats_for_xp
				NOT = { has_country_flag = RUS_rename_industries }
			}
		}

		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		all_parents = { okmo_kr_upgrade_1_xp okmo_kr_upgrade_2_xp okmo_kr_upgrade_3_xp okmo_kr_upgrade_4_xp okmo_kr_upgrade_5_xp okmo_kr_upgrade_6_xp okmo_kr_upgrade_10_xp okmo_kr_upgrade_11_xp }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			soft_attack = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = { okmo_kr_xp_requirement = 5 }
				subtract_from_variable = { okmo_kr_xp_cost = 5 }
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_7_xp_soc_rus
		name = KR_MIO_Trait_improved_okmo
		icon = GFX_icon_okmo_soc_rus_MIO

		special_trait_background = yes

		visible = {
			FROM = {
				has_country_flag = okmo_kr_stats_for_xp
				has_country_flag = RUS_rename_industries
			}
		}

		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		all_parents = { okmo_kr_upgrade_1_xp okmo_kr_upgrade_2_xp okmo_kr_upgrade_3_xp okmo_kr_upgrade_4_xp okmo_kr_upgrade_5_xp okmo_kr_upgrade_6_xp okmo_kr_upgrade_10_xp okmo_kr_upgrade_11_xp }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			soft_attack = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = { okmo_kr_xp_requirement = 5 }
				subtract_from_variable = { okmo_kr_xp_cost = 5 }
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_10_xp
		name = KR_MIO_Trait_collaborate_with_the_ona
		icon = GFX_generic_mio_trait_icon_ap_attack

		visible = { FROM = { has_country_flag = okmo_kr_stats_for_xp } }
		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		position = { x = 0 y = 2 }

		equipment_bonus = {
			ap_attack = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = { okmo_kr_xp_requirement = 5 }
				subtract_from_variable = { okmo_kr_xp_cost = 5 }
			}
		}
	}

	trait = {
		token = okmo_kr_upgrade_11_xp
		name = KR_MIO_Trait_bst_armour
		icon = GFX_generic_mio_trait_icon_armor_value

		visible = { FROM = { has_country_flag = okmo_kr_stats_for_xp } }
		available = {
			FROM = {
				has_country_flag = okmo_kr_bonus_chosen
				has_army_experience > okmo_kr_xp_requirement
			}
		}

		position = { x = 8 y = 2 }

		equipment_bonus = {
			armor_value = 0.15
		}

		on_complete = {
			FROM = {
				army_experience = okmo_kr_xp_cost
				add_to_variable = { okmo_kr_xp_requirement = 5 }
				subtract_from_variable = { okmo_kr_xp_cost = 5 }
			}
		}
	}
}
RUS_uztm_organisation = {
	name = uztm
	icon = GFX_idea_uztm
	available = {
		FROM = {
			owns_state = 653 #Ekaterinburg
			custom_override_tooltip = {
				tooltip = {
					localization_key = has_completed_decision_in_focus
					DECISION = RUS_uralmash
					FOCUS = "[RUS_UnlockMIOFocusTrigger]"
				}
				has_country_flag = unlock_uztm
			}
		}
	}
	allowed = {
		is_russian_tag = yes
	}

	equipment_type = {
		light_tank_artillery_chassis
		medium_tank_artillery_chassis
		heavy_tank_artillery_chassis
		light_tank_destroyer_chassis
		medium_tank_destroyer_chassis
		heavy_tank_destroyer_chassis
		light_tank_aa_chassis
		medium_tank_aa_chassis
		heavy_tank_aa_chassis
	}

	research_categories = {
		mio_cat_tech_all_armor_and_modules
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_uztm_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_0
		name = KR_MIO_Trait_joint_allied_research_department
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			has_variable = uztm_upgrade_level
			check_variable = { uztm_upgrade_level = 0 }
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_0 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0
			production_efficiency_gain_factor = 0
			production_resource_need_factor = 0
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_0
		name = KR_MIO_Trait_joint_allied_production_department
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			has_variable = uztm_upgrade_level
			check_variable = { uztm_upgrade_level = 0 }
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_0 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0
			production_efficiency_gain_factor = 0
			production_resource_need_factor = 0
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_1
		name = KR_MIO_Trait_joint_allied_research_department
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			check_variable = { uztm_upgrade_level = 1 }
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_1 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.02
			production_efficiency_gain_factor = 0.02
			production_resource_need_factor = 0.02
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_1
		name = KR_MIO_Trait_joint_allied_production_department
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			check_variable = { uztm_upgrade_level = 1 }
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_1 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
			production_efficiency_gain_factor = 0.04
			production_resource_need_factor = 0.02
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_2
		name = KR_MIO_Trait_joint_allied_research_department
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			check_variable = { uztm_upgrade_level = 2 }
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_2 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.04
			production_resource_need_factor = 0.04
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_2
		name = KR_MIO_Trait_joint_allied_production_department
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			check_variable = { uztm_upgrade_level = 2 }
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_2 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.02
			production_efficiency_gain_factor = 0.08
			production_resource_need_factor = 0.04
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_3
		name = KR_MIO_Trait_joint_allied_research_department
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			check_variable = { uztm_upgrade_level = 3 }
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_3 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.06
			production_efficiency_gain_factor = 0.06
			production_resource_need_factor = 0.06
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_3
		name = KR_MIO_Trait_joint_allied_production_department
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			check_variable = { uztm_upgrade_level = 3 }
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_3 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.03
			production_efficiency_gain_factor = 0.12
			production_resource_need_factor = 0.06
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_4
		name = KR_MIO_Trait_joint_allied_research_department
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			check_variable = { uztm_upgrade_level = 4 }
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_4 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.08
			production_resource_need_factor = 0.08
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_4
		name = KR_MIO_Trait_joint_allied_production_department
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			check_variable = { uztm_upgrade_level = 4 }
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_4 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.16
			production_resource_need_factor = 0.08
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_5
		name = KR_MIO_Trait_joint_allied_research_department
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			check_variable = { uztm_upgrade_level = 5 }
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_5 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.1
			production_efficiency_gain_factor = 0.1
			production_resource_need_factor = 0.1
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_5
		name = KR_MIO_Trait_joint_allied_production_department
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			check_variable = { uztm_upgrade_level = 5 }
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_5 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.20
			production_resource_need_factor = 0.1
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_6
		name = KR_MIO_Trait_joint_allied_research_department
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			check_variable = { uztm_upgrade_level = 6 }
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_6 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.12
			production_resource_need_factor = 0.12
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_6
		name = KR_MIO_Trait_joint_allied_production_department
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			check_variable = { uztm_upgrade_level = 6 }
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_6 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.06
			production_efficiency_gain_factor = 0.24
			production_resource_need_factor = 0.12
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_7
		name = KR_MIO_Trait_joint_allied_research_department
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			check_variable = { uztm_upgrade_level = 7 }
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_7 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.14
			production_efficiency_gain_factor = 0.14
			production_resource_need_factor = 0.14
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_7
		name = KR_MIO_Trait_joint_allied_production_department
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			check_variable = { uztm_upgrade_level = 7 }
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_7 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.07
			production_efficiency_gain_factor = 0.28
			production_resource_need_factor = 0.14
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_8
		name = KR_MIO_Trait_joint_allied_research_department
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			check_variable = { uztm_upgrade_level = 8 }
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_8 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.16
			production_resource_need_factor = 0.16
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_8
		name = KR_MIO_Trait_joint_allied_production_department
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			check_variable = { uztm_upgrade_level = 8 }
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_8 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.32
			production_resource_need_factor = 0.16
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_9
		name = KR_MIO_Trait_joint_allied_research_department
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			check_variable = { uztm_upgrade_level = 9 }
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_9 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.18
			production_efficiency_gain_factor = 0.18
			production_resource_need_factor = 0.18
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_9
		name = KR_MIO_Trait_joint_allied_production_department
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			check_variable = { uztm_upgrade_level = 9 }
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_9 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.09
			production_efficiency_gain_factor = 0.36
			production_resource_need_factor = 0.18
		}
	}

	trait = {
		token = uztm_upgrade_eff_cap_10
		name = KR_MIO_Trait_joint_allied_research_department
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			check_variable = { uztm_upgrade_level = 10 }
		}

		mutually_exclusive = { uztm_upgrade_eff_gro_10 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.2
			production_resource_need_factor = 0.2
		}
	}

	trait = {
		token = uztm_upgrade_eff_gro_10
		name = KR_MIO_Trait_joint_allied_production_department
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			check_variable = { uztm_upgrade_level = 10 }
		}

		mutually_exclusive = { uztm_upgrade_eff_cap_10 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.1
			production_efficiency_gain_factor = 0.4
			production_resource_need_factor = 0.2
		}
	}

	trait = {
		token = uztm_upgrade_1
		name = KR_MIO_Trait_spare_on_board_parts
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 0 y = 0 }

		mutually_exclusive = { uztm_upgrade_2 }

		equipment_bonus = {
			reliability = 0.15
		}
	}

	trait = {
		token = uztm_upgrade_2
		name = KR_MIO_Trait_eliminate_small_arms_weak_spots
		icon = GFX_generic_mio_trait_icon_hardness

		position = { x = 2 y = 0 }

		mutually_exclusive = { uztm_upgrade_1 }

		equipment_bonus = {
			hardness = 0.15
		}
	}

	trait = {
		token = uztm_upgrade_3_nsb
		name = KR_MIO_Trait_additional_space_for_fuel_drums
		icon = GFX_KR_generic_mio_trait_icon_fuel_drum

		visible = {
			has_dlc_nsb = yes
		}

		position = { x = 3 y = 0 }

		mutually_exclusive = { uztm_upgrade_4_nsb }

		equipment_bonus = {
			fuel_capacity = 2.0
		}
	}

	trait = {
		token = uztm_upgrade_4_nsb
		name = KR_MIO_Trait_improved_dozer_equipment
		icon = GFX_generic_mio_trait_icon_entrenchment

		visible = {
			has_dlc_nsb = yes
		}

		position = { x = 5 y = 0 }

		mutually_exclusive = { uztm_upgrade_3_nsb }

		equipment_bonus = {
			entrenchment = 1.0
		}
	}

	trait = {
		token = uztm_upgrade_3
		name = KR_MIO_Trait_refined_gearbox
		icon = GFX_generic_mio_trait_icon_breakthrough

		visible = {
			has_dlc_nsb = no
		}

		position = { x = 3 y = 0 }

		mutually_exclusive = { uztm_upgrade_4 }

		equipment_bonus = {
			breakthrough = 0.15
		}
	}

	trait = {
		token = uztm_upgrade_4
		name = KR_MIO_Trait_increased_internal_ammunition_capacity
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		visible = {
			has_dlc_nsb = no
		}

		position = { x = 5 y = 0 }

		mutually_exclusive = { uztm_upgrade_3 }

		equipment_bonus = {
			fuel_consumption = -0.5
		}
	}

	trait = {
		token = uztm_upgrade_5
		name = KR_MIO_Trait_thicker_armour_plating
		icon = GFX_generic_mio_trait_icon_armor_value

		position = { x = 6 y = 0 }

		mutually_exclusive = { uztm_upgrade_6 }

		equipment_bonus = {
			armor_value = 0.15
		}
	}

	trait = {
		token = uztm_upgrade_6
		name = KR_MIO_Trait_fuel_efficient_engines
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		position = { x = 8 y = 0 }

		mutually_exclusive = { uztm_upgrade_5 }

		equipment_bonus = {
			fuel_consumption = -0.5
		}
	}

	trait = {
		token = uztm_upgrade_1_1
		name = KR_MIO_Trait_experimental_hei_ammunition
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { uztm_upgrade_1 uztm_upgrade_2 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			soft_attack = 0.07
			defense = 0.07
		}
	}

	trait = {
		token = uztm_upgrade_1_2
		name = KR_MIO_Trait_joint_allied_research_department
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = { NOT = { has_variable = uztm_upgrade_level } }

		mutually_exclusive = { uztm_upgrade_1_3 }

		any_parent = { uztm_upgrade_1 uztm_upgrade_2 }
		any_parent = { uztm_upgrade_5 uztm_upgrade_6 }

		position = { x = 3 y = 2 }

		on_complete = {
			custom_effect_tooltip = uztm_upgrade_based_on_allies_and_puppets_eff_cap_tt
			set_temp_variable = { uztm_allies_and_puppets_no = FROM.allies }
			add_to_temp_variable = { uztm_allies_and_puppets_no = FROM.num_subjects }
			clamp_temp_variable = { var = uztm_allies_and_puppets_no min = 0 max = 10 }

			set_temp_variable = { uztm_upgrade_eff_cap = 1 }
			hidden_effect = { RUS_upgrade_uztm = yes }
			set_temp_variable = { uztm_eff_cap = uztm_allies_and_puppets_no }
			multiply_temp_variable = { uztm_eff_cap = 2 }
			set_temp_variable = { uztm_eff_gain = uztm_allies_and_puppets_no }
			multiply_temp_variable = { uztm_eff_gain = 2 }
			set_temp_variable = { uztm_resource = uztm_allies_and_puppets_no }
			multiply_temp_variable = { uztm_resource = 2 }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = uztm_upgrade_will_get
		}
	}

	trait = {
		token = uztm_upgrade_1_3
		name = KR_MIO_Trait_joint_allied_production_department
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = { NOT = { has_variable = uztm_upgrade_level } }

		mutually_exclusive = { uztm_upgrade_1_2 }

		any_parent = { uztm_upgrade_1 uztm_upgrade_2 }
		any_parent = { uztm_upgrade_5 uztm_upgrade_6 }

		position = { x = 5 y = 2 }

		on_complete = {
			custom_effect_tooltip = uztm_upgrade_based_on_allies_and_puppets_eff_gro_tt
			set_temp_variable = { uztm_allies_and_puppets_no = FROM.allies }
			add_to_temp_variable = { uztm_allies_and_puppets_no = FROM.num_subjects }
			clamp_temp_variable = { var = uztm_allies_and_puppets_no min = 0 max = 10 }

			set_temp_variable = { uztm_upgrade_eff_gro = 1 }
			hidden_effect = { RUS_upgrade_uztm = yes }
			set_temp_variable = { uztm_eff_cap = uztm_allies_and_puppets_no }
			set_temp_variable = { uztm_eff_gain = uztm_allies_and_puppets_no }
			multiply_temp_variable = { uztm_eff_gain = 4 }
			set_temp_variable = { uztm_resource = uztm_allies_and_puppets_no }
			multiply_temp_variable = { uztm_resource = 2 }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = uztm_upgrade_will_get
		}
	}

	trait = {
		token = uztm_upgrade_1_4
		name = KR_MIO_Trait_inspiration_from_anti_air_gun_designs
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		any_parent = { uztm_upgrade_5 uztm_upgrade_6 }

		position = { x = 7 y = 2 }

		limit_to_equipment_type = {
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		equipment_bonus = {
			air_attack = 0.1
		}
	}

	trait = {
		token = uztm_upgrade_2_1
		name = KR_MIO_Trait_faster_spa_firerate
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { uztm_upgrade_1_1 }

		position = { x = 2 y = 3 }

		equipment_bonus = {
			soft_attack = 0.08
			defense = 0.08
		}
	}

	trait = {
		token = uztm_upgrade_2_2
		name = KR_MIO_Trait_faster_spat_firerate
		icon = GFX_generic_mio_trait_icon_hard_attack

		any_parent = { uztm_upgrade_3 uztm_upgrade_4 uztm_upgrade_3_nsb uztm_upgrade_4_nsb }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			hard_attack = 0.07
			ap_attack = 0.07
		}
	}

	trait = {
		token = uztm_upgrade_2_3
		name = KR_MIO_Trait_faster_spaa_firerate
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		all_parents = { uztm_upgrade_1_4 }

		position = { x = 6 y = 3 }

		limit_to_equipment_type = {
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		equipment_bonus = {
			air_attack = 0.1
		}
	}

	trait = {
		token = uztm_upgrade_3_1
		name = KR_MIO_Trait_spat_apcr_shells
		icon = GFX_generic_mio_trait_icon_ap_attack

		all_parents = { uztm_upgrade_2_2 }

		position = { x = 4 y = 4 }

		equipment_bonus = {
			hard_attack = 0.08
			ap_attack = 0.08
		}
	}
}
RUS_tstz_organisation = {
	name = tstz
	icon = GFX_idea_tstz
	allowed = {
		is_russian_tag = yes
	}
	available = {
		FROM = {
			owns_state = 217 #Tsaritsyn
			custom_override_tooltip = {
				tooltip = {
					localization_key = has_completed_decision_in_focus
					DECISION = RUS_tsaritsyn_tractor_plant
					FOCUS = "[RUS_UnlockMIOFocusTrigger]"
				}
				has_country_flag = unlock_tstz
			}
		}
	}

	equipment_type = {
		armor
	}

	research_categories = {
		mio_cat_tech_all_armor_and_modules
	}

	ai_will_do = { base = 100 }

	initial_trait = {
		name = RUS_tstz_mio_desc

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.25
		}
	}

	trait = {
		token = tstz_upgrade_1
		name = KR_MIO_Trait_prepare_long_term_production_levels
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		mutually_exclusive = { tstz_upgrade_2 }

		position = { x = 1 y = 0 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.22
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = RUS_tstz_upgrade_double_effect
				TRAIT = KR_MIO_Trait_longer_work_hours
			}
		}
	}

	trait = {
		token = tstz_upgrade_2
		name = KR_MIO_Trait_expand_state_investment
		icon = GFX_generic_mio_department_icon_facilities

		mutually_exclusive = { tstz_upgrade_1 }

		position = { x = 2 y = 0 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.245
		}
	}

	trait = {
		token = tstz_upgrade_3
		name = KR_MIO_Trait_expand_state_investment
		icon = GFX_generic_mio_department_icon_facilities

		mutually_exclusive = { tstz_upgrade_4 }

		position = { x = 6 y = 0 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.245
		}
	}

	trait = {
		token = tstz_upgrade_4
		name = KR_MIO_Trait_prepare_quicker_production_level_rises
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		mutually_exclusive = { tstz_upgrade_3 }

		position = { x = 7 y = 0 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.22
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = RUS_tstz_upgrade_double_effect
				TRAIT = KR_MIO_Trait_expanded_labour_pool
			}
		}
	}

	trait = {
		token = tstz_upgrade_1_1
		name = KR_MIO_Trait_prepare_long_term_conversion_assemblies
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { tstz_upgrade_1 tstz_upgrade_2 }

		mutually_exclusive = { tstz_upgrade_1_2 }

		position = { x = 2 y = 2 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.22
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = RUS_tstz_upgrade_double_effect
				TRAIT = KR_MIO_Trait_dedicated_conversion_bays
			}
		}
	}

	trait = {
		token = tstz_upgrade_1_2
		name = KR_MIO_Trait_expand_state_investment
		icon = GFX_generic_mio_department_icon_facilities

		any_parent = { tstz_upgrade_1 tstz_upgrade_2 }

		mutually_exclusive = { tstz_upgrade_1_1 }

		position = { x = 3 y = 2 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.245
		}
	}

	trait = {
		token = tstz_upgrade_1_3
		name = KR_MIO_Trait_expand_state_investment
		icon = GFX_generic_mio_department_icon_facilities

		any_parent = { tstz_upgrade_3 tstz_upgrade_4 }

		mutually_exclusive = { tstz_upgrade_1_4 }

		position = { x = 5 y = 2 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.245
		}
	}

	trait = {
		token = tstz_upgrade_1_4
		name = KR_MIO_Trait_prepare_long_term_material_saving
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { tstz_upgrade_3 tstz_upgrade_4 }

		mutually_exclusive = { tstz_upgrade_1_3 }

		position = { x = 6 y = 2 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.22
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = RUS_tstz_upgrade_double_effect
				TRAIT = KR_MIO_Trait_material_recycling
			}
		}
	}

	trait = {
		token = tstz_upgrade_2_5
		name = KR_MIO_Trait_improved_tstz
		icon = GFX_icon_tstz_MIO

		special_trait_background = yes

		any_parent = { tstz_upgrade_1_1 tstz_upgrade_1_2 }
		any_parent = { tstz_upgrade_1_3 tstz_upgrade_1_4 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_10
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		available = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_5
				}
			}
		}

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_10
					}
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_9
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_9
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_10
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_8
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_8
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_9
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_7
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_7
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_8
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_6
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_6
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_7
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_5
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_5
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_6
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_4
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_4
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_5
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_3
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_3
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_4
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_2
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_2
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_3
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_1
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_1
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_2
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.005
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_10_double
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		available = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_5
				}
			}
		}

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_10_double
					}
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_9_double
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_9_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_10_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_8_double
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_8_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_9_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_7_double
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_7_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_8_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_6_double
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_6_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_7_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_5_double
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_5_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_6_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_4_double
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_4_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_5_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_3_double
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_3_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_4_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_2_double
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_2_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_3_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_cap_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_1_reset_1_double
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_1_reset_1_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_1_reset_2_double
				}
			}
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.01
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_10
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_5
				}
			}
		}

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_10
					}
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_9
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_9
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_10
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_8
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_8
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_9
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_7
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_7
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_8
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_6
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_6
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_7
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_5
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_5
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_6
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_4
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_4
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_5
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_3
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_3
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_4
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_2
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_2
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_3
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_1
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_1
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_2
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.02
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_10_double
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_5
				}
			}
		}

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_10_double
					}
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_9_double
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_9_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_10_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_8_double
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_8_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_9_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_7_double
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_7_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_8_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_6_double
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_6_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_7_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_5_double
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_5_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_6_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_4_double
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_4_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_5_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_3_double
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_3_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_4_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_2_double
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_2_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_3_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_eff_gro_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_2_reset_1_double
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_2_reset_1_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_2_reset_2_double
				}
			}
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.04
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_10
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		available = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_5
				}
			}
		}

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_10
					}
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_9
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_9
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_10
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_8
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_8
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_9
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_7
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_7
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_8
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_6
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_6
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_7
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_5
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_5
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_6
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_4
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_4
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_5
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_3
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_3
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_4
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_2
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_2
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_3
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_1
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_1
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_1
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_2
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.05
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_10_double
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		available = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_5
				}
			}
		}

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_10_double
					}
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_9_double
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_9_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_10_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_8_double
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_8_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_9_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_7_double
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_7_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_8_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_6_double
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_6_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_7_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_5_double
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_5_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_6_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_4_double
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_4_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_5_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_3_double
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_3_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_4_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_2_double
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_2_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_3_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}

		on_complete = {
			subtract_from_variable = { tstz_conversion_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_3_reset_1_double
		name = KR_MIO_Trait_dedicated_conversion_bays
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_1
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_3_reset_1_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_3_reset_2_double
				}
			}
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.1
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_10
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		available = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_5
				}
			}
		}

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_10
					}
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_9
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_9
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_10
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_8
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_8
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_9
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_7
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_7
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_8
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_6
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_6
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_7
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_5
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_5
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_6
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_4
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_4
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_5
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_3
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_3
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_4
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_2
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_2
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_3
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_1
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_1_4
					}
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_1
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_2
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.02
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_10_double
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		available = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_5
				}
			}
		}

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_10_double
					}
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_9_double
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_9_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_10_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_8_double
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_8_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_9_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_7_double
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_7_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_8_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_6_double
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_6_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_7_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_5_double
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_5_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_6_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_4_double
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_4_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_5_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_3_double
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_3_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_4_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_2_double
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_2_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_3_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}

		on_complete = {
			subtract_from_variable = { tstz_resources_counter = 1 tooltip = RUS_tstz_trait_reset_num_times }
		}
	}

	trait = {
		token = tstz_upgrade_2_4_reset_1_double
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		visible = {
			FROM = {
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_1_4
				}
				NOT = {
					mio:RUS_tstz_organisation = {
						is_mio_trait_completed = tstz_upgrade_2_4_reset_1_double
					}
				}
				mio:RUS_tstz_organisation = {
					is_mio_trait_completed = tstz_upgrade_2_4_reset_2_double
				}
			}
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.04
		}
	}
}
RUS_chtz_organisation = {
	name = chtz
	icon = GFX_idea_chtz
	allowed = {
		is_russian_tag = yes
	}
	available = {
		FROM = {
			owns_state = 572 #Chelyabinsk
			custom_override_tooltip = {
				tooltip = {
					localization_key = has_completed_decision_in_focus
					DECISION = RUS_chelyabinsk_tractor_plant
					FOCUS = "[RUS_UnlockMIOFocusTrigger]"
				}
				has_country_flag = unlock_chtz
			}
		}
	}

	equipment_type = {
		armor
	}

	research_categories = {
		mio_cat_tech_all_armor_and_modules
	}

	on_industrial_manufacturer_assigned = {
		add_to_variable = { RUS_mio_assigned_manufacturer_num = 1 }
		RUS_calculate_daily_funds_gain_and_requirement = yes
		custom_effect_tooltip = RUS_MIO_Research_Gain_tt
		custom_effect_tooltip = tooltip_white_line
	}

	on_industrial_manufacturer_unassigned = {
		subtract_from_variable = { RUS_mio_assigned_manufacturer_num = 1 }
	}

	on_tech_research_completed = {
		if = {
			limit = { NOT = { has_mio_flag = RUS_disable_research_speed_loss } }
			RUS_reset_mio_research_speeds = yes
		}
	}

	on_tech_research_cancelled = {
		RUS_reset_mio_research_speeds = yes
	}

	ai_will_do = { base = 1000 }

	initial_trait = {
		name = RUS_chtz_mio_desc
	}

	trait = {
		token = chtz_upgrade_1
		name = KR_MIO_Trait_prevent_internal_armour_fragmentation
		icon = GFX_generic_mio_trait_icon_breakthrough

		position = { x = 0 y = 0 }

		mutually_exclusive = { chtz_upgrade_2 }

		equipment_bonus = {
			breakthrough = -0.07
			build_cost_ic = -0.02
		}

		on_complete = {
			add_mio_research_bonus = 0.19
			add_to_variable = { total_campaign_xp = 19 }
		}
	}

	trait = {
		token = chtz_upgrade_2
		name = KR_MIO_Trait_r_d_department_expansion
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		position = { x = 1 y = 0 }

		mutually_exclusive = { chtz_upgrade_1 chtz_upgrade_3 }

		on_complete = {
			add_to_variable = { max_research_speed = 0.25 tooltip = KR_mio_manufacturer_trait_research_cap_tt }
		}
	}

	trait = {
		token = chtz_upgrade_3
		name = KR_MIO_Trait_repurposed_infantry_support_weapons
		icon = GFX_generic_mio_trait_icon_soft_attack

		position = { x = 2 y = 0 }

		mutually_exclusive = { chtz_upgrade_2 }

		equipment_bonus = {
			soft_attack = -0.07
			build_cost_ic = -0.02
		}

		on_complete = {
			add_mio_research_bonus = 0.13
			add_to_variable = { total_campaign_xp = 13 }
		}
	}

	trait = {
		token = chtz_upgrade_4
		name = KR_MIO_Trait_simplify_engine_design
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x = 6 y = 0 }

		mutually_exclusive = { chtz_upgrade_5 }

		equipment_bonus = {
			maximum_speed = -0.07
			build_cost_ic = -0.02
		}

		on_complete = {
			add_mio_research_bonus = 0.16
			add_to_variable = { total_campaign_xp = 16 }
		}
	}

	trait = {
		token = chtz_upgrade_5
		name = KR_MIO_Trait_r_d_department_expansion
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		position = { x = 7 y = 0 }

		mutually_exclusive = { chtz_upgrade_4 chtz_upgrade_6 }

		on_complete = {
			add_to_variable = { max_research_speed = 0.25 tooltip = KR_mio_manufacturer_trait_research_cap_tt }
		}
	}

	trait = {
		token = chtz_upgrade_6
		name = KR_MIO_Trait_cheaper_ignition_setup
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		position = { x = 8 y = 0 }

		mutually_exclusive = { chtz_upgrade_5 }

		equipment_bonus = {
			fuel_consumption = 0.35
			build_cost_ic = -0.02
		}

		on_complete = {
			add_mio_research_bonus = 0.11
			add_to_variable = { total_campaign_xp = 11 }
		}
	}

	trait = {
		token = chtz_upgrade_1_1
		name = KR_MIO_Trait_setup_additional_facilities
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			FROM = {
				owns_state = 572
			}
		}

		position = { x = 3 y = 1 }

		mutually_exclusive = { chtz_upgrade_1_2 }

		on_complete = {
			FROM = {
				572 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			add_mio_research_bonus = -0.04
			add_to_variable = { total_campaign_xp = -4 }
		}
	}

	trait = {
		token = chtz_upgrade_1_2
		name = KR_MIO_Trait_standardise_tank_parts
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 1 }

		mutually_exclusive = { chtz_upgrade_1_1 chtz_upgrade_1_3 }

		equipment_bonus = {
			build_cost_ic = -0.02
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 2
		}

		on_complete = {
			custom_effect_tooltip = RUS_manufacturer_research_no_reset_tt
			set_mio_flag = RUS_disable_research_speed_loss
		}
	}

	trait = {
		token = chtz_upgrade_1_3
		name = KR_MIO_Trait_adaptable_hull_design
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 5 y = 1 }

		mutually_exclusive = { chtz_upgrade_1_2 }

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.1
		}

		on_complete = {
			add_mio_research_bonus = 0.06
			add_to_variable = { total_campaign_xp = 6 }
		}
	}

	trait = {
		token = chtz_upgrade_2_1
		name = KR_MIO_Trait_local_arms_factories
		icon = GFX_generic_mio_trait_icon_hard_attack

		position = { x = 1 y = 2 }

		any_parent = { chtz_upgrade_1 chtz_upgrade_2 chtz_upgrade_3 }

		equipment_bonus = {
			hard_attack = -0.07
			build_cost_ic = -0.02
		}
	}

	trait = {
		token = chtz_upgrade_2_2
		name = KR_MIO_Trait_standardised_ammunition_sizes
		icon = GFX_generic_mio_trait_icon_ap_attack

		position = { x = 7 y = 2 }

		any_parent = { chtz_upgrade_4 chtz_upgrade_5 chtz_upgrade_6 }

		equipment_bonus = {
			ap_attack = -0.07
			build_cost_ic = -0.02
		}
	}

	trait = {
		token = chtz_upgrade_3_1
		name = KR_MIO_Trait_earth_pits_for_casting_armour
		icon = GFX_generic_mio_trait_icon_hardness

		position = { x = 3 y = 3 }

		all_parents = { chtz_upgrade_2_1 }
		any_parent = { chtz_upgrade_1_1 chtz_upgrade_1_2 chtz_upgrade_1_3 }

		equipment_bonus = {
			hardness = -0.07
			build_cost_ic = -0.02
		}
	}

	trait = {
		token = chtz_upgrade_3_2
		name = KR_MIO_Trait_designed_obsolesence
		icon = GFX_generic_mio_trait_icon_armor_value

		position = { x = 5 y = 3 }

		all_parents = { chtz_upgrade_2_2 }
		any_parent = { chtz_upgrade_1_1 chtz_upgrade_1_2 chtz_upgrade_1_3 }

		equipment_bonus = {
			armor_value = -0.07
			build_cost_ic = -0.02
		}
	}

	trait = {
		# This trait only exists to show different MIO name loc before completing Tankograd decision
		# If PDX ever adds scripted loc for trait names, delete one of two duplicate traits
		token = chtz_upgrade_4_1
		name = KR_MIO_Trait_improved_chtz
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = { NOT = { has_country_flag = improve_chtz } }
			NOT = { is_mio_trait_completed = chtz_upgrade_4_1 }
		}

		available = {
			FROM = {
				custom_override_tooltip = {
					tooltip = {
						localization_key = has_completed_decision_in_focus
						DECISION = RUS_create_tankograd
						FOCUS = "[RUS_ChtzUpgradeFocusTrigger]"
					}
					has_country_flag = improve_chtz
				}
			}
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		on_complete = {
			RUS_unlock_chtz_trait = yes
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd
		name = KR_MIO_Trait_improved_tankograd
		icon = GFX_icon_chtz_MIO

		visible = {
			FROM = { has_country_flag = improve_chtz }
			NOT = { is_mio_trait_completed = chtz_upgrade_4_1_tankograd }
		}

		available = {
			FROM = {
				custom_override_tooltip = {
					tooltip = {
						localization_key = has_completed_decision_in_focus
						DECISION = RUS_create_tankograd
						FOCUS = "[RUS_ChtzUpgradeFocusTrigger]"
					}
					has_country_flag = improve_chtz
				}
			}
		}

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		on_complete = {
			RUS_unlock_chtz_trait = yes
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_0
		name = KR_MIO_Trait_improved_tankograd
		icon = GFX_icon_chtz_MIO

		visible = { is_mio_trait_completed = chtz_upgrade_4_1_tankograd_0 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = 0
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_1
		name = KR_MIO_Trait_improved_tankograd
		icon = GFX_icon_chtz_MIO

		visible = { is_mio_trait_completed = chtz_upgrade_4_1_tankograd_1 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.01
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_2
		name = KR_MIO_Trait_improved_tankograd
		icon = GFX_icon_chtz_MIO

		visible = { is_mio_trait_completed = chtz_upgrade_4_1_tankograd_2 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.02
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_3
		name = KR_MIO_Trait_improved_tankograd
		icon = GFX_icon_chtz_MIO

		visible = { is_mio_trait_completed = chtz_upgrade_4_1_tankograd_3 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.03
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_4
		name = KR_MIO_Trait_improved_tankograd
		icon = GFX_icon_chtz_MIO

		visible = { is_mio_trait_completed = chtz_upgrade_4_1_tankograd_4 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.04
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_5
		name = KR_MIO_Trait_improved_tankograd
		icon = GFX_icon_chtz_MIO

		visible = { is_mio_trait_completed = chtz_upgrade_4_1_tankograd_5 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_6
		name = KR_MIO_Trait_improved_tankograd
		icon = GFX_icon_chtz_MIO

		visible = { is_mio_trait_completed = chtz_upgrade_4_1_tankograd_6 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.06
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_7
		name = KR_MIO_Trait_improved_tankograd
		icon = GFX_icon_chtz_MIO

		visible = { is_mio_trait_completed = chtz_upgrade_4_1_tankograd_7 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.07
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_8
		name = KR_MIO_Trait_improved_tankograd
		icon = GFX_icon_chtz_MIO

		visible = { is_mio_trait_completed = chtz_upgrade_4_1_tankograd_8 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.08
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_9
		name = KR_MIO_Trait_improved_tankograd
		icon = GFX_icon_chtz_MIO

		visible = { is_mio_trait_completed = chtz_upgrade_4_1_tankograd_9 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.09
		}
	}

	trait = {
		token = chtz_upgrade_4_1_tankograd_10
		name = KR_MIO_Trait_improved_tankograd
		icon = GFX_icon_chtz_MIO

		visible = { is_mio_trait_completed = chtz_upgrade_4_1_tankograd_10 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { chtz_upgrade_3_1 chtz_upgrade_3_2 }

		equipment_bonus = {
			build_cost_ic = -0.10
		}
	}
}

#################
### Ship MIOs ###
#################
RUS_bz_organisation = {
	name = bz
	icon = GFX_idea_bz
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 195 } } #Petrograd

	equipment_type = {
		mio_cat_eq_all_battleship
		mio_cat_eq_all_carrier
	}

	research_categories = {
		mio_cat_tech_all_capital_ship_and_modules
		mio_cat_tech_all_carrier_and_modules
		tp_tech
	}

	on_design_team_assigned_to_tech = {
		FROM = { add_to_variable = { BZ_Research_Number = 1 } }
	}

	on_tech_research_cancelled = {
		FROM = { subtract_from_variable = { BZ_Research_Number = 1 } }
	}

	on_tech_research_completed = {
		FROM = { subtract_from_variable = { BZ_Research_Number = 1 } }
	}

	on_industrial_manufacturer_assigned = {
		RUS_calculate_daily_funds_gain_and_requirement = yes
		custom_effect_tooltip = {
			localization_key = RUS_MIO_XP_Gain_tt XP_ICON = RUS_Navy_XP_icon
		}
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_bz_mio_desc
	}

	trait = {
		token = bz_upgrade_1
		name = KR_MIO_Trait_double_bottom
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 0 y = 0 }

		mutually_exclusive = { bz_upgrade_2 }

		limit_to_equipment_type = { ship_hull_heavy }

		equipment_bonus = {
			naval_torpedo_enemy_critical_chance_factor = -0.1
		}

		on_complete = {
			multiply_variable = { weekly_funds_requirement = 0.33 }
			custom_effect_tooltip = RUS_manufacturer_trait_xp_min_funds_tt
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 1 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = bz_upgrade_2
		name = KR_MIO_Trait_double_hull
		icon = GFX_generic_mio_trait_icon_naval_torpedo_hit_chance_factor

		position = { x = 2 y = 0 }

		mutually_exclusive = { bz_upgrade_1 }

		limit_to_equipment_type = { ship_hull_heavy }

		equipment_bonus = {
			naval_torpedo_enemy_critical_chance_factor = -0.2
			build_cost_ic = 0.1
		}

		on_complete = {
			add_to_variable = { total_campaign_xp = 30 }
			FROM = {
				navy_experience = 30
				custom_effect_tooltip = tooltip_white_line
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 1 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = bz_upgrade_3
		name = KR_MIO_Trait_increased_anti_air_explosive_shell_packaging
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		position = { x = 4 y = 0 }

		equipment_bonus = {
			anti_air_attack = 0.1
		}

		on_complete = {
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 1 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = bz_upgrade_4
		name = KR_MIO_Trait_additional_aircraft_spacing
		icon = GFX_generic_mio_department_icon_ship_carrier_utility

		position = { x = 6 y = 0 }

		mutually_exclusive = { bz_upgrade_5 }

		limit_to_equipment_type = { ship_hull_carrier }

		equipment_bonus = {
			carrier_size = 2
		}

		on_complete = {
			add_to_variable = { total_campaign_xp = 50 }
			FROM = {
				navy_experience = 50
				custom_effect_tooltip = tooltip_white_line
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 1 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = bz_upgrade_5
		name = KR_MIO_Trait_universalized_carrier_designs
		icon = GFX_KR_generic_mio_trait_icon_navy_xp

		position = { x = 8 y = 0 }

		mutually_exclusive = { bz_upgrade_4 }

		limit_to_equipment_type = { ship_hull_carrier }

		equipment_bonus = {
			build_cost_ic = -0.15
		}

		on_complete = {
			hidden_effect = {
				set_variable = { RUS_mio_xp_gain = 0.3 }
			}
			custom_effect_tooltip = {
				localization_key = RUS_manufacturer_trait_xp_gained_tt
				XP = RUS_Navy_XP_icon
			}
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 1 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = bz_upgrade_1_1
		name = KR_MIO_Trait_stable_firing_mechanisms
		icon = GFX_generic_mio_trait_icon_batteries_hit_chance

		any_parent = { bz_upgrade_1 bz_upgrade_2 }

		position = { x = 1 y = 1 }

		limit_to_equipment_type = { ship_hull_heavy }

		equipment_bonus = {
			naval_light_gun_hit_chance_factor = 0.1
			naval_heavy_gun_hit_chance_factor = 0.1
		}
	}

	trait = {
		token = bz_upgrade_1_2
		name = KR_MIO_Trait_autonomous_turbine_columns
		icon = GFX_generic_mio_trait_icon_naval_speed

		all_parents = { bz_upgrade_3 }

		position = { x = 3 y = 1 }

		mutually_exclusive = { bz_upgrade_1_3 }

		equipment_bonus = {
			naval_speed = 0.05
		}
	}

	trait = {
		token = bz_upgrade_1_3
		name = KR_MIO_Trait_impulse_type_turbines
		icon = GFX_generic_mio_trait_icon_naval_speed

		all_parents = { bz_upgrade_3 }

		position = { x = 5 y = 1 }

		mutually_exclusive = { bz_upgrade_1_2 }

		equipment_bonus = {
			build_cost_ic = 0.05
			naval_speed = 0.1
		}
	}

	trait = {
		token = bz_upgrade_1_4
		name = KR_MIO_Trait_standardise_carrier_parts
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { bz_upgrade_4 bz_upgrade_5 }

		position = { x = 7 y = 1 }

		limit_to_equipment_type = { ship_hull_carrier }

		equipment_bonus = {
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = bz_upgrade_2_1
		name = KR_MIO_Trait_additional_capital_ship_testing
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { bz_upgrade_1_1 }

		position = { x = 1 y = 2 }

		limit_to_equipment_type = { ship_hull_heavy }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = bz_upgrade_2_2
		name = KR_MIO_Trait_welded_armoured_decks
		icon = GFX_generic_mio_trait_icon_armor_value

		any_parent = { bz_upgrade_1_2 bz_upgrade_1_3 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			armor_value = 0.1
			naval_torpedo_damage_reduction_factor = 0.25
		}
	}

	trait = {
		token = bz_upgrade_2_3
		name = KR_MIO_Trait_additional_carrier_ship_testing
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { bz_upgrade_1_4 }

		position = { x = 7 y = 2 }

		limit_to_equipment_type = { ship_hull_carrier }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = bz_upgrade_3_1
		name = KR_MIO_Trait_copy_italian_internal_systems
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { bz_upgrade_2_1 }

		position = { x = 0 y = 3 }

		mutually_exclusive = { bz_upgrade_3_2 }

		limit_to_equipment_type = { ship_hull_heavy }

		equipment_bonus = {
			max_strength = 0.1
		}
	}

	trait = {
		token = bz_upgrade_3_2
		name = KR_MIO_Trait_copy_american_internal_systems
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { bz_upgrade_2_1 }

		position = { x = 2 y = 3 }

		mutually_exclusive = { bz_upgrade_3_1 }

		limit_to_equipment_type = { ship_hull_heavy }

		equipment_bonus = {
			max_strength = 0.2
		}

		production_bonus = {
			production_resource_need_factor = 0.4
		}
	}

	trait = {
		token = bz_upgrade_3_3
		name = KR_MIO_Trait_utilize_polar_experience
		icon = GFX_generic_mio_department_icon_ship_capital_ship_utility

		all_parents = { bz_upgrade_2_2 }

		position = { x = 3 y = 3 }

		mutually_exclusive = { bz_upgrade_3_4 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.25
		}
	}

	trait = {
		token = bz_upgrade_3_4
		name = KR_MIO_Trait_expanded_fuel_storage
		icon = GFX_generic_mio_trait_icon_naval_range

		all_parents = { bz_upgrade_2_2 }

		position = { x = 5 y = 3 }

		mutually_exclusive = { bz_upgrade_3_3 }

		equipment_bonus = {
			naval_range = 0.2
		}
	}

	trait = {
		token = bz_upgrade_3_5
		name = KR_MIO_Trait_individual_fire_pumps
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { bz_upgrade_2_3 }

		position = { x = 6 y = 3 }

		limit_to_equipment_type = { ship_hull_carrier }

		mutually_exclusive = { bz_upgrade_3_6 }

		equipment_bonus = {
			max_strength = 0.1
		}
	}

	trait = {
		token = bz_upgrade_3_6
		name = KR_MIO_Trait_fire_main_pipe
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { bz_upgrade_2_3 }

		position = { x = 8 y = 3 }

		limit_to_equipment_type = { ship_hull_carrier }

		mutually_exclusive = { bz_upgrade_3_5 }

		equipment_bonus = {
			max_strength = 0.2
		}

		production_bonus = {
			production_resource_need_factor = 0.4
		}
	}

	trait = {
		token = bz_upgrade_4_1
		name = KR_MIO_Trait_improved_baltiysky_zavod
		icon = GFX_icon_bz_MIO

		special_trait_background = yes

		any_parent = { bz_upgrade_3_1 bz_upgrade_3_2 }
		any_parent = { bz_upgrade_3_3 bz_upgrade_3_4 }
		any_parent = { bz_upgrade_3_5 bz_upgrade_3_6 }

		available = {
			FROM = {
				if = {
					limit = { original_tag = FER }
					has_completed_focus = FER_return_to_kremlin
				}
				else = {
					has_completed_focus = RUS_petrograd_dockyards
				}
			}
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}
}
RUS_av_organisation = {
	name = av
	icon = GFX_idea_av
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 195 } } #Petrograd

	equipment_type = {
		mio_cat_eq_all_destroyer
		mio_cat_eq_all_cruiser
	}

	research_categories = {
		mio_cat_tech_all_destroyer_and_modules
		mio_cat_tech_all_cruiser_and_modules
		tp_tech
	}

	ai_will_do = { base = 1000 }

	initial_trait = {
		name = RUS_av_mio_desc
	}

	on_industrial_manufacturer_assigned = {
		custom_effect_tooltip = RUS_av_decaying_funds_bonus_tt
		if = {
			limit = { check_variable = { FROM.RUS_decaying_funds_bonus_mios^num > 0 } }
			RUS_show_decaying_funds_bonuses = yes
		}
		else = {
			custom_effect_tooltip = RUS_av_no_decaying_funds_bonus_mios
		}
	}

	trait = {
		token = av_upgrade_1
		name = KR_MIO_Trait_improved_propeller_design
		icon = GFX_generic_mio_trait_icon_naval_speed

		position = { x = 0 y = 0 }

		mutually_exclusive = { av_upgrade_2 }

		equipment_bonus = {
			naval_speed = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 2 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = av_upgrade_2
		name = KR_MIO_Trait_collaborate_with_national_companies
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 2 y = 0 }

		mutually_exclusive = { av_upgrade_1 }

		on_complete = {
			add_to_variable = { Weekly_funds_decay = -0.01 tooltip = RUS_av_reduce_decaying_funds_bonus_tt }
			custom_effect_tooltip = tooltip_white_line
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 2 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = av_upgrade_3
		name = KR_MIO_Trait_additional_fuel_capacity_for_plane_catapult_module
		icon = GFX_generic_mio_trait_icon_surface_detection

		position = { x = 6 y = 0 }

		mutually_exclusive = { av_upgrade_4 }

		equipment_bonus = {
			surface_detection = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 2 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = av_upgrade_4
		name = KR_MIO_Trait_collaborate_with_national_companies
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 8 y = 0 }

		mutually_exclusive = { av_upgrade_3 }

		on_complete = {
			add_to_variable = { Funds_Bonus = 0.5 tooltip = RUS_av_max_decaying_funds_bonus_tt }
			custom_effect_tooltip = tooltip_white_line
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 2 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = av_upgrade_1_1
		name = KR_MIO_Trait_improve_light_gunnery_targetting
		icon = GFX_generic_mio_trait_icon_batteries_hit_chance

		any_parent = { av_upgrade_1 av_upgrade_2 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			naval_light_gun_hit_chance_factor = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
		}
	}

	trait = {
		token = av_upgrade_1_3
		name = KR_MIO_Trait_improve_torpedo_targetting
		icon = GFX_generic_mio_trait_icon_naval_torpedo_hit_chance_factor

		any_parent = { av_upgrade_3 av_upgrade_4 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			naval_torpedo_hit_chance_factor = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
		}
	}

	trait = {
		token = av_upgrade_2_1
		name = KR_MIO_Trait_improved_admiralteyskiye_verfi
		icon = GFX_icon_av_MIO

		special_trait_background = yes

		all_parents = { av_upgrade_1_1 av_upgrade_1_3 av_upgrade_4_2 }

		available = {
			FROM = {
				if = {
					limit = { original_tag = FER }
					has_completed_focus = FER_return_to_kremlin
				}
				else = {
					has_completed_focus = RUS_petrograd_dockyards
				}
			}
		}

		position = { x = 4 y = 2 }

		equipment_bonus = {
			lg_attack = 0.1
			hg_attack = 0.1
			torpedo_attack = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = { unlock_decision_tooltip = { decision = RUS_AV_Repeatable_Random_Funds show_effect_tooltip = yes } }
			hidden_effect = { FROM = { activate_targeted_decision = { decision = RUS_AV_Repeatable_Random_Funds target = FROM } } }
		}
	}

	trait = {
		token = av_upgrade_3_1
		name = KR_MIO_Trait_sonobuoys
		icon = GFX_generic_mio_trait_icon_sub_detection

		position = { x = 0 y = 3 }

		mutually_exclusive = { av_upgrade_3_2 }

		equipment_bonus = {
			sub_detection = 0.1
			sub_attack = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 2 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = av_upgrade_3_2
		name = KR_MIO_Trait_collaborate_with_national_companies
		icon = GFX_generic_mio_department_icon_facilities

		position = { x = 2 y = 3 }

		mutually_exclusive = { av_upgrade_3_1 }

		on_complete = {
			set_temp_variable = { RUS_funds_decay_granted_temp = Number_of_funds_decay_granted }
			multiply_temp_variable = { RUS_funds_decay_granted_temp = 3 }
			custom_override_tooltip = {
				tooltip = {
					localization_key = RUS_AV_Number_Of_Funds_Bonus_Granted_tt
					FUNDS_DECAY_GRANT_NUM = "[?RUS_funds_decay_granted_temp]"
				}
				RUS_AV_set_random_decaying_funds_bonus = yes
				RUS_AV_set_random_decaying_funds_bonus = yes
				RUS_AV_set_random_decaying_funds_bonus = yes
			}
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 2 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = av_upgrade_3_3
		name = KR_MIO_Trait_welded_armoured_decks
		icon = GFX_generic_mio_trait_icon_max_strength

		position = { x = 6 y = 3 }

		mutually_exclusive = { av_upgrade_3_4 }

		equipment_bonus = {
			max_strength = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 2 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = av_upgrade_3_4
		name = KR_MIO_Trait_collaborate_with_national_companies
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 8 y = 3 }

		mutually_exclusive = { av_upgrade_3_3 }

		on_complete = {
			add_to_variable = { Number_of_funds_decay_granted = 1 tooltip = RUS_AV_double_whammy_tt }
			custom_effect_tooltip = tooltip_white_line
			RUS_AV_set_random_decaying_funds_bonus = yes
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 2 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = av_upgrade_4_1
		name = KR_MIO_Trait_denser_small_calibre_penetration_materials
		icon = GFX_generic_mio_trait_icon_lg_attack

		any_parent = { av_upgrade_3_1 av_upgrade_3_2 }

		position = { x = 2 y = 4 }

		equipment_bonus = {
			lg_armor_piercing = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
		}
	}

	trait = {
		token = av_upgrade_4_2
		name = KR_MIO_Trait_efficient_engine_designs
		icon = GFX_generic_mio_trait_icon_naval_range

		all_parents = { av_upgrade_4_1 av_upgrade_4_3 }

		position = { x = 4 y = 4 }

		equipment_bonus = {
			naval_range = 0.1
			naval_weather_penalty_factor = -0.25
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
		}
	}

	trait = {
		token = av_upgrade_4_3
		name = KR_MIO_Trait_denser_heavy_calibre_penetration_materials
		icon = GFX_generic_mio_trait_icon_hg_attack

		any_parent = { av_upgrade_3_3 av_upgrade_3_4 }

		position = { x = 6 y = 4 }

		equipment_bonus = {
			hg_armor_piercing = 0.1
		}

		on_complete = {
			RUS_AV_set_random_decaying_funds_bonus = yes
		}
	}
}
RUS_as_organisation = {
	name = as
	icon = GFX_idea_as
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 218 } } #Rostov

	equipment_type = {
		mio_cat_eq_all_carrier
		mio_cat_eq_all_battleship
		mio_cat_eq_all_cruiser
		mio_cat_eq_all_destroyer
		submarine
		convoy_1
	}

	research_categories = {
		mio_cat_tech_all_carrier_and_modules
		mio_cat_tech_all_capital_ship_and_modules
		mio_cat_tech_all_destroyer_and_modules
		mio_cat_tech_all_cruiser_and_modules
		mio_cat_tech_all_submarine_and_modules
		tp_tech
	}

	on_industrial_manufacturer_assigned = {
		add_to_variable = { RUS_mio_assigned_manufacturer_num = 1 }
		RUS_calculate_daily_funds_gain_and_requirement = yes
		custom_effect_tooltip = RUS_MIO_Research_Gain_tt
		custom_effect_tooltip = tooltip_white_line
	}

	on_industrial_manufacturer_unassigned = {
		subtract_from_variable = { RUS_mio_assigned_manufacturer_num = 1 }
	}

	on_tech_research_completed = {
		if = {
			limit = { NOT = { has_mio_flag = RUS_disable_research_speed_loss } }
			RUS_reset_mio_research_speeds = yes
		}
	}

	on_tech_research_cancelled = {
		RUS_reset_mio_research_speeds = yes
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_as_mio_desc
	}

	trait = {
		token = as_upgrade_1
		name = KR_MIO_Trait_inexpensive_green_water_hulls
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 1 y = 0 }

		mutually_exclusive = { as_upgrade_2 }

		equipment_bonus = {
			naval_range = -0.1
		}

		production_bonus = {
			production_cost_factor = -0.05
		}

		on_complete = {
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 3 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = as_upgrade_2
		name = KR_MIO_Trait_extremely_inexpensive_green_water_hulls
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 3 y = 0 }

		mutually_exclusive = { as_upgrade_1 }

		equipment_bonus = {
			naval_range = -0.25
		}

		production_bonus = {
			production_cost_factor = -0.1
		}

		on_complete = {
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 3 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = as_upgrade_3
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_production_capacity

		position = { x = 5 y = 0 }

		mutually_exclusive = { as_upgrade_4 }

		production_bonus = {
			production_capacity_factor = 0.1
		}

		on_complete = {
			add_mio_research_bonus = 0.04
			add_to_variable = { total_campaign_xp = 4 }
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 3 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = as_upgrade_4
		name = KR_MIO_Trait_r_d_department_expansion
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 7 y = 0 }

		mutually_exclusive = { as_upgrade_3 }

		on_complete = {
			custom_effect_tooltip = RUS_manufacturer_trait_xp_min_funds_tt
			custom_effect_tooltip = tooltip_white_line
			multiply_variable = { weekly_funds_requirement = 0.33 }
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 3 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = as_upgrade_1_1
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_production_capacity

		any_parent = { as_upgrade_1 as_upgrade_2 }

		position = { x = 0 y = 1 }

		mutually_exclusive = { as_upgrade_1_2 }

		production_bonus = {
			production_capacity_factor = 0.1
		}

		on_complete = {
			add_mio_research_bonus = 0.20
			add_to_variable = { total_campaign_xp = 20 }
		}
	}

	trait = {
		token = as_upgrade_1_2
		name = KR_MIO_Trait_r_d_department_expansion
		icon = GFX_KR_generic_mio_trait_icon_research_bonus

		any_parent = { as_upgrade_1 as_upgrade_2 }

		position = { x = 2 y = 1 }

		mutually_exclusive = { as_upgrade_1_1 }

		on_complete = {
			add_to_variable = { weekly_research_speed_gain = 0.03 tooltip = KR_mio_manufacturer_trait_research_gain_tt }
		}
	}

	trait = {
		token = as_upgrade_1_3
		name = KR_MIO_Trait_collaborate_with_the_admiralty_shipyards
		icon = GFX_generic_mio_trait_icon_naval_speed

		any_parent = { as_upgrade_1 as_upgrade_2 as_upgrade_3 as_upgrade_4 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}

	trait = {
		token = as_upgrade_1_4
		name = KR_MIO_Trait_additional_dockyard_facilities
		icon = GFX_generic_mio_trait_icon_production_capacity

		any_parent = { as_upgrade_3 as_upgrade_4 }

		position = { x = 6 y = 1 }

		mutually_exclusive = { as_upgrade_1_5 }

		production_bonus = {
			production_capacity_factor = 0.1
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 2
		}

		on_complete = {
			add_mio_research_bonus = 0.07
			add_to_variable = { total_campaign_xp = 7 }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = RUS_manufacturer_research_no_reset_tt
			set_mio_flag = RUS_disable_research_speed_loss
		}
	}

	trait = {
		token = as_upgrade_1_5
		name = KR_MIO_Trait_r_d_department_expansion
		icon = GFX_KR_generic_mio_trait_icon_research_bonus

		any_parent = { as_upgrade_3 as_upgrade_4 }

		position = { x = 8 y = 1 }

		mutually_exclusive = { as_upgrade_1_4 }

		on_complete = {
			add_to_variable = { max_research_speed = 0.5 tooltip = KR_mio_manufacturer_trait_research_cap_tt }
		}
	}

	trait = {
		token = as_upgrade_2_1
		name = KR_MIO_Trait_efficient_engine_designs
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		any_parent = { as_upgrade_1_1 as_upgrade_1_2 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			fuel_consumption = -0.35
		}
	}

	trait = {
		token = as_upgrade_2_2
		name = KR_MIO_Trait_simplified_internal_compartments
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { as_upgrade_1_3 }

		position = { x = 3 y = 2 }

		mutually_exclusive = { as_upgrade_2_3 }

		production_bonus = {
			production_resource_need_factor = -0.2
		}
	}

	trait = {
		token = as_upgrade_2_3
		name = KR_MIO_Trait_simplified_ship_designs
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { as_upgrade_1_3 }

		position = { x = 5 y = 2 }

		mutually_exclusive = { as_upgrade_2_2 }

		equipment_bonus = {
			armor_value = -0.1
		}

		production_bonus = {
			production_resource_need_factor = -0.4
		}
	}

	trait = {
		token = as_upgrade_2_4
		name = KR_MIO_Trait_petrograd_arms_designs
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { as_upgrade_1_4 as_upgrade_1_5 }

		position = { x = 7 y = 2 }

		equipment_bonus = {
			reliability = 0.15
		}
	}

	trait = {
		token = as_upgrade_3_1
		name = KR_MIO_Trait_improved_ship_camouflage_patterns
		icon = GFX_generic_mio_trait_icon_surface_visibility

		all_parents = { as_upgrade_2_1 as_upgrade_2_4 }
		any_parent = { as_upgrade_2_2 as_upgrade_2_3 }

		position = { x = 4 y = 3 }

		equipment_bonus = {
			surface_visibility = -0.1
			sub_visibility = -0.1
		}
	}

	trait = {
		token = as_upgrade_4_1
		name = KR_MIO_Trait_improved_azovskaya_sudoverf
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		available = {
			FROM = {
				if = {
					limit = { original_tag = FER }
					has_completed_focus = FER_return_to_kremlin
				}
				else = {
					has_completed_focus = RUS_yekaterinas_legacy
				}
			}
		}

		visible = { NOT = { is_mio_trait_completed = as_upgrade_4_1 } }

		position = { x = 4 y = 4 }

		on_complete = {
			RUS_unlock_as_trait = yes
		}
	}

	trait = {
		token = as_upgrade_4_1_0
		name = KR_MIO_Trait_improved_azovskaya_sudoverf
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_0 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = 0
		}
	}

	trait = {
		token = as_upgrade_4_1_1
		name = KR_MIO_Trait_improved_azovskaya_sudoverf
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_1 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.01
		}
	}

	trait = {
		token = as_upgrade_4_1_2
		name = KR_MIO_Trait_improved_azovskaya_sudoverf
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_2 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = as_upgrade_4_1_3
		name = KR_MIO_Trait_improved_azovskaya_sudoverf
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_3 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = as_upgrade_4_1_4
		name = KR_MIO_Trait_improved_azovskaya_sudoverf
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_4 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = as_upgrade_4_1_5
		name = KR_MIO_Trait_improved_azovskaya_sudoverf
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_5 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.05
		}
	}

	trait = {
		token = as_upgrade_4_1_6
		name = KR_MIO_Trait_improved_azovskaya_sudoverf
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_6 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.06
		}
	}

	trait = {
		token = as_upgrade_4_1_7
		name = KR_MIO_Trait_improved_azovskaya_sudoverf
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_7 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.07
		}
	}

	trait = {
		token = as_upgrade_4_1_8
		name = KR_MIO_Trait_improved_azovskaya_sudoverf
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_8 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.08
		}
	}

	trait = {
		token = as_upgrade_4_1_9
		name = KR_MIO_Trait_improved_azovskaya_sudoverf
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_9 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.09
		}
	}

	trait = {
		token = as_upgrade_4_1_10
		name = KR_MIO_Trait_improved_azovskaya_sudoverf
		icon = GFX_icon_as_MIO

		special_trait_background = yes

		all_parents = { as_upgrade_3_1 }

		visible = { is_mio_trait_completed = as_upgrade_4_1_10 }

		position = { x = 4 y = 4 }

		production_bonus = {
			production_cost_factor = -0.10
		}
	}
}
RUS_dalzavod_organisation = {
	name = dalzavod
	icon = GFX_idea_dalzavod
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 408 } } #Vladivostok

	equipment_type = {
		ship_hull_submarine
		convoy_1
	}

	research_categories = {
		mio_cat_tech_all_submarine_and_modules
		tp_tech
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_dalzavod_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = dalzavod_upgrade_1
		name = KR_MIO_Trait_lessner_s_533_mm_torpedoes
		icon = GFX_generic_mio_trait_icon_torpedo_attack

		position = { x = 0 y = 0 }

		mutually_exclusive = { dalzavod_upgrade_2 }

		limit_to_equipment_type = { ship_hull_submarine }

		equipment_bonus = {
			torpedo_attack = 0.2
		}

		on_complete = {
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 4 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = dalzavod_upgrade_2
		name = KR_MIO_Trait_kolomna_engines
		icon = GFX_generic_mio_trait_icon_sub_visibility

		position = { x = 2 y = 0 }

		mutually_exclusive = { dalzavod_upgrade_1 }

		limit_to_equipment_type = { ship_hull_submarine }

		equipment_bonus = {
			sub_visibility = -0.1
		}

		on_complete = {
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 4 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = dalzavod_upgrade_3
		name = KR_MIO_Trait_establish_petrograd_mine_production_facilities
		icon = GFX_generic_mio_trait_icon_mines

		position = { x = 4 y = 0 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.25
		}

		equipment_bonus = {
			naval_weather_penalty_factor = -0.2
		}

		on_complete = {
			FROM = {
				activate_targeted_decision = { decision = RUS_dalzavod_mining_baltic_sea target = FROM }
				set_variable = { RUS_dalzavod_mines_number = 100 }
			}
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 4 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = dalzavod_upgrade_4
		name = KR_MIO_Trait_standardise_convoy_parts
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 6 y = 0 }

		mutually_exclusive = { dalzavod_upgrade_5 }

		limit_to_equipment_type = { convoy_1 }

		equipment_bonus = {
			build_cost_ic = -0.1
		}

		on_complete = {
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 4 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = dalzavod_upgrade_5
		name = KR_MIO_Trait_additional_anti_air_weapons
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		position = { x = 8 y = 0 }

		mutually_exclusive = { dalzavod_upgrade_4 }

		limit_to_equipment_type = { convoy_1 }

		equipment_bonus = {
			anti_air_attack = 1.0
		}

		on_complete = {
			FROM = {
				set_temp_variable = { RUS_dalzavod_upgrade_MIO = 4 }
				RUS_upgrade_dalzavod_idea_check = yes
			}
		}
	}

	trait = {
		token = dalzavod_upgrade_1_1
		name = KR_MIO_Trait_collaborate_with_baltiysky_zavod
		icon = GFX_generic_mio_trait_icon_sub_visibility

		any_parent = { dalzavod_upgrade_1 dalzavod_upgrade_2 }

		position = { x = 1 y = 1 }

		limit_to_equipment_type = { ship_hull_submarine }

		equipment_bonus = {
			sub_visibility = -0.1
		}
	}

	trait = {
		token = dalzavod_upgrade_1_2
		name = KR_MIO_Trait_additional_mine_workshops
		icon = GFX_generic_mio_trait_icon_mines

		all_parents = { dalzavod_upgrade_3 }

		position = { x = 3 y = 1 }

		mutually_exclusive = { dalzavod_upgrade_1_3 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.2
		}

		on_complete = {
			custom_effect_tooltip = RUS_dalzavod_increase_mines_tt
			FROM = { add_to_variable = { RUS_dalzavod_mines_number = 50 } }
			custom_effect_tooltip = tooltip_white_line
		}
	}

	trait = {
		token = dalzavod_upgrade_1_3
		name = KR_MIO_Trait_establish_rostov_mine_production_facilities
		icon = GFX_generic_mio_trait_icon_mines

		all_parents = { dalzavod_upgrade_3 }

		position = { x = 5 y = 1 }

		mutually_exclusive = { dalzavod_upgrade_1_2 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.2
		}

		on_complete = {
			FROM = {
				activate_targeted_decision = { decision = RUS_dalzavod_mining_black_sea target = FROM }
			}
			custom_effect_tooltip = tooltip_white_line
		}
	}

	trait = {
		token = dalzavod_upgrade_1_4
		name = KR_MIO_Trait_convoy_camouflage
		icon = GFX_generic_mio_trait_icon_surface_visibility

		any_parent = { dalzavod_upgrade_4 dalzavod_upgrade_5 }

		position = { x = 7 y = 1 }

		limit_to_equipment_type = { convoy_1 }

		equipment_bonus = {
			surface_visibility = -0.5
		}
	}

	trait = {
		token = dalzavod_upgrade_2_1
		name = KR_MIO_Trait_additional_workforce_hiring_for_mine_production
		icon = GFX_generic_mio_trait_icon_mines

		any_parent = { dalzavod_upgrade_1_2 dalzavod_upgrade_1_3 }

		position = { x = 3 y = 2 }

		mutually_exclusive = { dalzavod_upgrade_2_2 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.2
		}

		on_complete = {
			custom_effect_tooltip = RUS_dalzavod_increase_mines_tt
			FROM = { add_to_variable = { RUS_dalzavod_mines_number = 50 } }
			custom_effect_tooltip = tooltip_white_line
		}
	}

	trait = {
		token = dalzavod_upgrade_2_2
		name = KR_MIO_Trait_establish_vladivostok_mine_production_facilities
		icon = GFX_generic_mio_trait_icon_mines

		any_parent = { dalzavod_upgrade_1_2 dalzavod_upgrade_1_3 }

		position = { x = 5 y = 2 }

		mutually_exclusive = { dalzavod_upgrade_2_1 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.2
		}

		on_complete = {
			FROM = {
				activate_targeted_decision = { decision = RUS_dalzavod_mining_far_east target = FROM }
			}
			custom_effect_tooltip = tooltip_white_line
		}
	}

	trait = {
		token = dalzavod_upgrade_3_1
		name = KR_MIO_Trait_petrograd_hull_technologies
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { dalzavod_upgrade_1_1 }

		position = { x = 2 y = 3 }

		limit_to_equipment_type = { ship_hull_submarine }

		equipment_bonus = {
			max_strength = 0.2
		}
	}

	trait = {
		token = dalzavod_upgrade_3_2
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_mines

		any_parent = { dalzavod_upgrade_2_1 dalzavod_upgrade_2_2 }

		position = { x = 3 y = 3 }

		mutually_exclusive = { dalzavod_upgrade_3_3 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.2
		}

		on_complete = {
			custom_effect_tooltip = RUS_dalzavod_increase_mines_tt
			FROM = { add_to_variable = { RUS_dalzavod_mines_number = 50 } }
			custom_effect_tooltip = tooltip_white_line
		}
	}

	trait = {
		token = dalzavod_upgrade_3_3
		name = KR_MIO_Trait_establish_murmansk_mine_production_facilities
		icon = GFX_generic_mio_trait_icon_mines

		any_parent = { dalzavod_upgrade_2_1 dalzavod_upgrade_2_2 }

		position = { x = 5 y = 3 }

		mutually_exclusive = { dalzavod_upgrade_3_2 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.2
		}

		on_complete = {
			FROM = {
				activate_targeted_decision = { decision = RUS_dalzavod_mining_barents target = FROM }
			}
			custom_effect_tooltip = tooltip_white_line
		}
	}

	trait = {
		token = dalzavod_upgrade_3_4
		name = KR_MIO_Trait_additional_armour_plating_for_convoys
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { dalzavod_upgrade_1_4 }

		position = { x = 6 y = 3 }

		limit_to_equipment_type = { convoy_1 }

		equipment_bonus = {
			max_strength = 0.2
		}
	}

	trait = {
		token = dalzavod_upgrade_4_1
		name = KR_MIO_Trait_improved_dalzavod
		icon = GFX_icon_dalzavod_MIO

		special_trait_background = yes

		all_parents = { dalzavod_upgrade_3_1 dalzavod_upgrade_3_4 }
		any_parent = { dalzavod_upgrade_3_2 dalzavod_upgrade_3_3 }

		available = {
			FROM = {
				if = {
					limit = { original_tag = FER }
					has_completed_focus = FER_masters_over_siberia
				}
				else = {
					has_completed_focus = RUS_eastern_shores
				}
			}
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			naval_speed = 0.2
		}
	}
}

##################
### Plane MIOs ###
##################
RUS_gamayun_organisation = {
	name = gamayun_non_socrus
	icon = GFX_idea_gamayun
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 249 } } #Kazan

	equipment_type = {
		small_plane_naval_bomber_airframe
		medium_plane_airframe
		large_plane_maritime_patrol_plane_airframe
		cv_small_plane_naval_bomber_airframe
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_naval_bomber_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	on_tech_research_completed = {
		FROM = {
			if = {
				limit = { has_character = RUS_igor_sikorsky }
				if = {
					limit = { RUS_igor_sikorsky = { is_hired_as_advisor = yes } }
					set_temp_variable = { ideology_change_var = 2 }
					change_ruling_party_popularity = yes
				}
			}
		}
	}

	on_industrial_manufacturer_assigned = {
		if = {
			limit = { RUS_has_gamayun_upgrade_3 = yes }
			custom_effect_tooltip = RUS_gamayun_random_factories_tt
			effect_tooltip = { RUS_Show_Gamayun_Notification_List = yes }
		}
		else = {
			custom_effect_tooltip = {
				localization_key = KR_mio_has_completed_trait_NOT TRAIT = KR_MIO_Trait_gamayun_private_investments
			}
		}
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_gamayun_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = gamayun_upgrade_1
		name = KR_MIO_Trait_experimental_radar
		icon = GFX_generic_mio_trait_icon_sub_detection

		all_parents = { gamayun_upgrade_3 }

		position = { x = 1 y = 0 }

		mutually_exclusive = { gamayun_upgrade_2 }

		equipment_bonus = {
			sub_detection = 0.2
			surface_detection = 0.1
		}
	}

	trait = {
		token = gamayun_upgrade_2
		name = KR_MIO_Trait_optical_sights
		icon = GFX_generic_mio_trait_icon_surface_detection

		all_parents = { gamayun_upgrade_3 }

		position = { x = 2 y = 0 }

		mutually_exclusive = { gamayun_upgrade_1 }

		equipment_bonus = {
			sub_detection = 0.1
			surface_detection = 0.2
		}
	}

	trait = {
		token = gamayun_upgrade_3
		name = KR_MIO_Trait_gamayun_private_investments
		icon = GFX_icon_gamayun_investment

		position = { x = 4 y = 0 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.25
		}

		on_complete = {
			custom_effect_tooltip = RUS_gamayun_random_factories_tt
			effect_tooltip = { RUS_Show_Gamayun_Notification_List = yes }
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				RUS_unlock_gamayun_policies = yes # `unlock_mio_policy_tooltip` doesn't work in the MIO scope for some reason
				hidden_effect = { country_event = { id = russia_events.1002 days = 4 } }
			}
		}
	}

	trait = {
		token = gamayun_upgrade_4
		name = KR_MIO_Trait_expanded_fuel_storage
		icon = GFX_generic_mio_trait_icon_air_range

		all_parents = { gamayun_upgrade_3 }

		position = { x = 6 y = 0 }

		mutually_exclusive = { gamayun_upgrade_5 }

		equipment_bonus = {
			air_range = 0.15
		}
	}

	trait = {
		token = gamayun_upgrade_5
		name = KR_MIO_Trait_expanded_fuel_storage
		icon = GFX_generic_mio_trait_icon_air_range

		all_parents = { gamayun_upgrade_3 }

		position = { x = 7 y = 0 }

		mutually_exclusive = { gamayun_upgrade_4 }

		equipment_bonus = {
			air_range = 0.3
			fuel_consumption = 0.25
		}
	}

	trait = {
		token = gamayun_upgrade_1_1
		name = KR_MIO_Trait_reduced_torpedo_size
		icon = GFX_generic_mio_trait_icon_naval_strike_targetting

		any_parent = { gamayun_upgrade_1 gamayun_upgrade_2 }

		position = { x = 0 y = 1 }

		mutually_exclusive = { gamayun_upgrade_1_2 }

		equipment_bonus = {
			naval_strike_targetting = 0.1
		}
	}

	trait = {
		token = gamayun_upgrade_1_2
		name = KR_MIO_Trait_torpedo_impact_testing
		icon = GFX_generic_mio_trait_icon_naval_strike_targetting

		any_parent = { gamayun_upgrade_1 gamayun_upgrade_2 }

		position = { x = 1 y = 1 }

		mutually_exclusive = { gamayun_upgrade_1_1 }

		equipment_bonus = {
			naval_strike_targetting = 0.15
			build_cost_ic = 0.05
		}
	}

	trait = {
		token = gamayun_upgrade_1_3
		name = KR_MIO_Trait_attract_foreign_private_investments
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { gamayun_upgrade_3 }

		position = { x = 3 y = 1 }

		mutually_exclusive = { gamayun_upgrade_1_4 }

		on_complete = {
			add_to_variable = { RUS_starting_construction_progress_min = 0.20 }
			add_to_variable = { RUS_starting_construction_progress_max = 0.20 }
			custom_effect_tooltip = gamayun_upgrade_1_3_tt
		}
	}

	trait = {
		token = gamayun_upgrade_1_4
		name = KR_MIO_Trait_attract_government_investments
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { gamayun_upgrade_3 }

		position = { x = 5 y = 1 }

		mutually_exclusive = { gamayun_upgrade_1_3 }

		on_complete = {
			subtract_from_variable = { RUS_factory_interval_min = 50 }
			subtract_from_variable = { RUS_factory_interval_max = 50 }
			custom_effect_tooltip = gamayun_upgrade_1_4_tt
		}
	}

	trait = {
		token = gamayun_upgrade_1_5
		name = KR_MIO_Trait_lighter_fuselage
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { gamayun_upgrade_4 gamayun_upgrade_5 }

		position = { x = 7 y = 1 }

		mutually_exclusive = { gamayun_upgrade_1_6 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = gamayun_upgrade_1_6
		name = KR_MIO_Trait_experimental_fuselage_designs
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { gamayun_upgrade_4 gamayun_upgrade_5 }

		position = { x = 8 y = 1 }

		mutually_exclusive = { gamayun_upgrade_1_5 }

		equipment_bonus = {
			maximum_speed = 0.15
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.2
		}
	}

	trait = {
		token = gamayun_upgrade_2_1
		name = KR_MIO_Trait_improved_materials_for_radiator_cooling
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { gamayun_upgrade_1_1 gamayun_upgrade_1_2 }

		position = { x = 0 y = 3 }

		mutually_exclusive = { gamayun_upgrade_2_2 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = gamayun_upgrade_2_2
		name = KR_MIO_Trait_improve_engine_overheat_limit
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { gamayun_upgrade_1_1 gamayun_upgrade_1_2 }

		position = { x = 1 y = 3 }

		mutually_exclusive = { gamayun_upgrade_2_1 }

		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = gamayun_upgrade_2_3
		name = KR_MIO_Trait_focus_on_light_industry_investments
		icon = GFX_icon_gamayun_civ_chance

		any_parent = { gamayun_upgrade_1_3 gamayun_upgrade_1_4 }

		position = { x = 2 y = 2 }

		mutually_exclusive = { gamayun_upgrade_2_4 gamayun_upgrade_2_5 }

		on_complete = {
			add_to_variable = { RUS_gamayun_civilian_factory_chance = 27 }
			subtract_from_variable = { RUS_gamayun_military_factory_chance = 13 }
			subtract_from_variable = { RUS_gamayun_dockyard_chance = 13 }
			custom_effect_tooltip = gamayun_upgrade_2_3_tt
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_focus_on_heavy_industry_investments TRAIT_2 = KR_MIO_Trait_focus_on_naval_industry_investments
			}
		}
	}

	trait = {
		token = gamayun_upgrade_2_4
		name = KR_MIO_Trait_focus_on_heavy_industry_investments
		icon = GFX_icon_gamayun_mil_chance

		any_parent = { gamayun_upgrade_1_3 gamayun_upgrade_1_4 }

		position = { x = 4 y = 2 }

		mutually_exclusive = { gamayun_upgrade_2_3 gamayun_upgrade_2_5 }

		on_complete = {
			add_to_variable = { RUS_gamayun_military_factory_chance = 27 }
			subtract_from_variable = { RUS_gamayun_civilian_factory_chance = 13 }
			subtract_from_variable = { RUS_gamayun_dockyard_chance = 13 }
			custom_effect_tooltip = gamayun_upgrade_2_4_tt
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_focus_on_light_industry_investments TRAIT_2 = KR_MIO_Trait_focus_on_naval_industry_investments
			}
		}
	}

	trait = {
		token = gamayun_upgrade_2_5
		name = KR_MIO_Trait_focus_on_naval_industry_investments
		icon = GFX_icon_gamayun_dockyard_chance

		any_parent = { gamayun_upgrade_1_3 gamayun_upgrade_1_4 }

		position = { x = 6 y = 2 }

		mutually_exclusive = { gamayun_upgrade_2_3 gamayun_upgrade_2_4 }

		on_complete = {
			add_to_variable = { RUS_gamayun_dockyard_chance = 27 }
			subtract_from_variable = { RUS_gamayun_military_factory_chance = 13 }
			subtract_from_variable = { RUS_gamayun_civilian_factory_chance = 13 }
			custom_effect_tooltip = gamayun_upgrade_2_5_tt
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_focus_on_light_industry_investments TRAIT_2 = KR_MIO_Trait_focus_on_heavy_industry_investments
			}
		}
	}

	trait = {
		token = gamayun_upgrade_2_6
		name = KR_MIO_Trait_standardized_torpedo_locks
		icon = GFX_generic_mio_trait_icon_naval_strike_attack

		any_parent = { gamayun_upgrade_1_5 gamayun_upgrade_1_6 }

		position = { x = 7 y = 3 }

		mutually_exclusive = { gamayun_upgrade_2_7 }

		equipment_bonus = {
			naval_strike_attack = 0.1
		}
	}

	trait = {
		token = gamayun_upgrade_2_7
		name = KR_MIO_Trait_heavier_torpedo_payload
		icon = GFX_generic_mio_trait_icon_naval_strike_attack

		any_parent = { gamayun_upgrade_1_5 gamayun_upgrade_1_6 }

		position = { x = 8 y = 3 }

		mutually_exclusive = { gamayun_upgrade_2_6 }

		equipment_bonus = {
			naval_strike_attack = 0.15
			build_cost_ic = 0.05
		}
	}

	trait = {
		token = gamayun_upgrade_3_1
		name = KR_MIO_Trait_additional_minelaying_storage
		icon = GFX_generic_mio_trait_icon_mines

		position = { x = 3 y = 3 }

		mutually_exclusive = { gamayun_upgrade_3_2 }

		equipment_bonus = {
			mines_planting = 0.2
			mines_sweeping = 0.1
		}
	}

	trait = {
		token = gamayun_upgrade_3_2
		name = KR_MIO_Trait_stronger_magnetic_demining_coil
		icon = GFX_generic_mio_trait_icon_mines

		position = { x = 5 y = 3 }

		mutually_exclusive = { gamayun_upgrade_3_1 }

		equipment_bonus = {
			mines_planting = 0.1
			mines_sweeping = 0.2
		}
	}

	trait = {
		token = gamayun_upgrade_4_1
		name = KR_MIO_Trait_improved_gamayun
		icon = GFX_icon_gamayun_MIO

		visible = {
			FROM = { NOT = { has_country_flag = RUS_rename_industries } }
		}

		available = {
			if = {
				limit = { FROM = { original_tag = RUS } }
				FROM = { has_completed_focus = RUS_enter_hundred }
			}
		}

		any_parent = { gamayun_upgrade_2_1 gamayun_upgrade_2_2 }
		any_parent = { gamayun_upgrade_2_3 gamayun_upgrade_2_4 gamayun_upgrade_2_5 }
		any_parent = { gamayun_upgrade_2_6 gamayun_upgrade_2_7 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		equipment_bonus = {
			defense = 0.15
		}
	}

	trait = {
		token = gamayun_upgrade_4_1_soc_rus
		name = KR_MIO_Trait_improved_kapo
		icon = GFX_icon_gamayun_MIO

		visible = {
			FROM = { has_country_flag = RUS_rename_industries }
		}

		available = {
			FROM = { has_completed_focus = RUS_enter_hundred }
		}

		any_parent = { gamayun_upgrade_2_1 gamayun_upgrade_2_2 }
		any_parent = { gamayun_upgrade_2_3 gamayun_upgrade_2_4 gamayun_upgrade_2_5 }
		any_parent = { gamayun_upgrade_2_6 gamayun_upgrade_2_7 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		equipment_bonus = {
			defense = 0.15
		}
	}
}
RUS_duks_organisation = {
	name = duks
	icon = GFX_idea_duks
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 219 } } #Moscow

	equipment_type = {
		small_plane_airframe
		medium_plane_fighter_airframe
		mothership_equipment
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_medium_aircraft_and_modules
		jet_technology
		plane_modules_tech
	}

	on_tech_research_completed = {
		FROM = {
			if = {
				limit = { has_character = RUS_igor_sikorsky }
				if = {
					limit = { RUS_igor_sikorsky = { is_hired_as_advisor = yes } }
					set_temp_variable = { ideology_change_var = 2 }
					change_ruling_party_popularity = yes
				}
			}
		}
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_duks_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = duks_upgrade_1
		name = KR_MIO_Trait_improved_aerodynamic_profile
		icon = GFX_generic_mio_trait_icon_air_superiority

		position = { x = 0 y = 0 }

		mutually_exclusive = { duks_upgrade_2 }

		equipment_bonus = {
			air_superiority = 0.05
		}
	}

	trait = {
		token = duks_upgrade_2
		name = KR_MIO_Trait_expanded_fuel_storage
		icon = GFX_generic_mio_trait_icon_air_range

		position = { x = 1 y = 0 }

		mutually_exclusive = { duks_upgrade_1 }

		equipment_bonus = {
			air_range = 0.1
		}
	}

	trait = {
		token = duks_upgrade_3
		name = KR_MIO_Trait_reduce_machine_gun_spread
		icon = GFX_generic_mio_trait_icon_air_attack

		position = { x = 7 y = 0 }

		mutually_exclusive = { duks_upgrade_4 }

		equipment_bonus = {
			air_attack = 0.05
		}
	}

	trait = {
		token = duks_upgrade_4
		name = KR_MIO_Trait_eliminate_aircraft_weak_spots
		icon = GFX_generic_mio_trait_icon_air_defence

		position = { x = 8 y = 0 }

		mutually_exclusive = { duks_upgrade_3 }

		equipment_bonus = {
			air_defence = 0.05
		}
	}

	trait = {
		token = duks_upgrade_1_1
		name = KR_MIO_Trait_lighter_fuselage
		icon = GFX_generic_mio_trait_icon_air_superiority

		any_parent = { duks_upgrade_1 duks_upgrade_2 }

		position = { x = 2 y = 1 }

		mutually_exclusive = { duks_upgrade_1_2 }

		equipment_bonus = {
			air_superiority = 0.1
			air_range = 0.05
		}
	}

	trait = {
		token = duks_upgrade_1_2
		name = KR_MIO_Trait_improved_gliding_potential
		icon = GFX_generic_mio_trait_icon_air_range

		any_parent = { duks_upgrade_1 duks_upgrade_2 }

		position = { x = 3 y = 1 }

		mutually_exclusive = { duks_upgrade_1_1 }

		equipment_bonus = {
			air_superiority = 0.05
			air_range = 0.1
		}
	}

	trait = {
		token = duks_upgrade_1_3
		name = KR_MIO_Trait_improved_ammunition_yawing
		icon = GFX_generic_mio_trait_icon_air_attack

		any_parent = { duks_upgrade_3 duks_upgrade_4 }

		position = { x = 5 y = 1 }

		mutually_exclusive = { duks_upgrade_1_4 }

		equipment_bonus = {
			air_attack = 0.1
			air_defence = 0.05
		}
	}

	trait = {
		token = duks_upgrade_1_4
		name = KR_MIO_Trait_redesigned_cockpit
		icon = GFX_generic_mio_trait_icon_air_defence

		any_parent = { duks_upgrade_3 duks_upgrade_4 }

		position = { x = 6 y = 1 }

		mutually_exclusive = { duks_upgrade_1_3 }

		equipment_bonus = {
			air_attack = 0.05
			air_defence = 0.1
		}
	}

	trait = {
		token = duks_upgrade_2_1
		name = KR_MIO_Trait_improved_duks
		icon = GFX_icon_duks_MIO

		special_trait_background = yes

		available = {
			FROM = {
				if = {
					limit = { original_tag = FER }
					has_completed_focus = FER_return_to_kremlin
				}
				else = {
					has_completed_focus = RUS_polikarpov_fighters
				}
			}
		}

		any_parent = { duks_upgrade_1_1 duks_upgrade_1_2 }
		any_parent = { duks_upgrade_1_3 duks_upgrade_1_4 }
		any_parent = { duks_upgrade_3_1 duks_upgrade_3_2 }
		any_parent = { duks_upgrade_3_3 duks_upgrade_3_4 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			air_superiority = 0.05
			air_agility = 0.05
			air_attack = 0.05
			air_defence = 0.05
		}
	}

	trait = {
		token = duks_upgrade_3_1
		name = KR_MIO_Trait_improved_turning_capabilities
		icon = GFX_generic_mio_trait_icon_air_agility

		any_parent = { duks_upgrade_4_1 duks_upgrade_4_2 }

		position = { x = 2 y = 3 }

		mutually_exclusive = { duks_upgrade_3_2 }

		equipment_bonus = {
			air_agility = 0.1
			air_range = 0.05
		}
	}

	trait = {
		token = duks_upgrade_3_2
		name = KR_MIO_Trait_eliminate_wasteful_fuel_use
		icon = GFX_generic_mio_trait_icon_air_range

		any_parent = { duks_upgrade_4_1 duks_upgrade_4_2 }

		position = { x = 3 y = 3 }

		mutually_exclusive = { duks_upgrade_3_1 }

		equipment_bonus = {
			air_agility = 0.05
			air_range = 0.1
		}
	}

	trait = {
		token = duks_upgrade_3_3
		name = KR_MIO_Trait_internal_component_isolation
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { duks_upgrade_4_3 duks_upgrade_4_4 }

		position = { x = 5 y = 3 }

		mutually_exclusive = { duks_upgrade_3_4 }

		equipment_bonus = {
			reliability = 0.1
			maximum_speed = 0.05
		}
	}

	trait = {
		token = duks_upgrade_3_4
		name = KR_MIO_Trait_improved_materials_for_radiator_cooling
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { duks_upgrade_4_3 duks_upgrade_4_4 }

		position = { x = 6 y = 3 }

		mutually_exclusive = { duks_upgrade_3_3 }

		equipment_bonus = {
			reliability = 0.05
			maximum_speed = 0.1
		}
	}

	trait = {
		token = duks_upgrade_4_1
		name = KR_MIO_Trait_increase_wing_loading_limit
		icon = GFX_generic_mio_trait_icon_air_agility

		position = { x = 0 y = 4 }

		mutually_exclusive = { duks_upgrade_4_2 }

		equipment_bonus = {
			air_agility = 0.05
		}
	}

	trait = {
		token = duks_upgrade_4_2
		name = KR_MIO_Trait_increased_fuel_tank_capacity
		icon = GFX_generic_mio_trait_icon_air_range

		position = { x = 1 y = 4 }

		mutually_exclusive = { duks_upgrade_4_1 }

		equipment_bonus = {
			air_range = 0.1
		}
	}

	trait = {
		token = duks_upgrade_4_3
		name = KR_MIO_Trait_eliminate_random_engine_fires
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 7 y = 4 }

		mutually_exclusive = { duks_upgrade_4_4 }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = duks_upgrade_4_4
		name = KR_MIO_Trait_improved_propeller_design
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x = 8 y = 4 }

		mutually_exclusive = { duks_upgrade_4_3 }

		equipment_bonus = {
			maximum_speed = 0.05
		}
	}
}
RUS_tsagi_organisation = {
	name = tsagi
	icon = GFX_idea_tsagi
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 219 } } #Moscow

	equipment_type = {
		medium_plane_airframe
		large_plane_airframe
		strat_bomber_intercontinental_equipment
		ballistic_missile_equipment
		guided_missile_equipment
	}

	research_categories = {
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		jet_technology
		plane_modules_tech
	}

	on_industrial_manufacturer_assigned = {
		add_to_variable = { RUS_mio_assigned_manufacturer_num = 1 }
		RUS_calculate_daily_funds_gain_and_requirement = yes
		custom_effect_tooltip = RUS_MIO_Research_Gain_tt
		custom_effect_tooltip = tooltip_white_line
	}

	on_industrial_manufacturer_unassigned = {
		subtract_from_variable = { RUS_mio_assigned_manufacturer_num = 1 }
	}

	on_tech_research_completed = {
		if = {
			limit = { NOT = { has_mio_flag = RUS_disable_research_speed_loss } }
			RUS_reset_mio_research_speeds = yes
		}
		FROM = {
			if = {
				limit = { has_character = RUS_igor_sikorsky }
				if = {
					limit = { RUS_igor_sikorsky = { is_hired_as_advisor = yes } }
					set_temp_variable = { ideology_change_var = 2 }
					change_ruling_party_popularity = yes
				}
			}
		}
	}

	on_tech_research_cancelled = {
		RUS_reset_mio_research_speeds = yes
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_tsagi_mio_desc
	}

	trait = {
		token = tsagi_upgrade_1
		name = KR_MIO_Trait_simplify_missile_assembly
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 3 y = 0 }

		mutually_exclusive = { tsagi_upgrade_2 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			add_mio_research_bonus = 0.11
			add_to_variable = { total_campaign_xp = 11 }
		}
	}

	trait = {
		token = tsagi_upgrade_2
		name = KR_MIO_Trait_r_d_department_expansion
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		position = { x = 5 y = 0 }

		mutually_exclusive = { tsagi_upgrade_1 }

		on_complete = {
			add_to_variable = { weekly_research_speed_gain = 0.01 tooltip = KR_mio_manufacturer_trait_research_gain_tt }
		}
	}

	trait = {
		token = tsagi_upgrade_1_1
		name = KR_MIO_Trait_hexagonal_bombs
		icon = GFX_generic_mio_trait_icon_strategic_attack

		position = { x = 0 y = 1 }

		mutually_exclusive = { tsagi_upgrade_1_2 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_bombing = 0.1
		}

		on_complete = {
			add_mio_research_bonus = 0.09
			add_to_variable = { total_campaign_xp = 9 }
		}
	}

	trait = {
		token = tsagi_upgrade_1_2
		name = KR_MIO_Trait_r_d_department_expansion
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		position = { x = 2 y = 1 }

		mutually_exclusive = { tsagi_upgrade_1_1 }

		on_complete = {
			add_to_variable = { weekly_research_speed_gain = 0.01 tooltip = KR_mio_manufacturer_trait_research_gain_tt }
		}
	}

	trait = {
		token = tsagi_upgrade_1_3
		name = KR_MIO_Trait_expanded_fuel_storage
		icon = GFX_generic_mio_trait_icon_air_range

		any_parent = { tsagi_upgrade_1 tsagi_upgrade_2 }

		position = { x = 4 y = 1 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_range = 0.1
		}
	}

	trait = {
		token = tsagi_upgrade_1_4
		name = KR_MIO_Trait_experimental_radar
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 6 y = 1 }

		mutually_exclusive = { tsagi_upgrade_1_5 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 2
		}

		on_complete = {
			add_mio_research_bonus = 0.09
			add_to_variable = { total_campaign_xp = 9 }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = RUS_manufacturer_research_no_reset_tt
			set_mio_flag = RUS_disable_research_speed_loss
		}
	}

	trait = {
		token = tsagi_upgrade_1_5
		name = KR_MIO_Trait_r_d_department_expansion
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		position = { x = 8 y = 1 }

		mutually_exclusive = { tsagi_upgrade_1_4 }

		on_complete = {
			add_to_variable = { weekly_research_speed_gain = 0.01 tooltip = KR_mio_manufacturer_trait_research_gain_tt }
		}
	}

	trait = {
		token = tsagi_upgrade_2_1
		name = KR_MIO_Trait_cluster_munitions
		icon = GFX_generic_mio_trait_icon_strategic_attack

		any_parent = { tsagi_upgrade_1_1 tsagi_upgrade_1_2 }

		position = { x = 1 y = 2 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_bombing = 0.1
		}
	}

	trait = {
		token = tsagi_upgrade_2_2
		name = KR_MIO_Trait_heavier_explosive_payload
		icon = GFX_generic_mio_trait_icon_strategic_attack

		all_parents = { tsagi_upgrade_1_3 }

		position = { x = 4 y = 2 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_bombing = 0.05
		}
	}

	trait = {
		token = tsagi_upgrade_2_3
		name = KR_MIO_Trait_air_ground_radar
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { tsagi_upgrade_1_4 tsagi_upgrade_1_5 }

		position = { x = 7 y = 2 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = tsagi_upgrade_3_1
		name = KR_MIO_Trait_eliminate_wasteful_fuel_use
		icon = GFX_generic_mio_trait_icon_air_range

		all_parents = { tsagi_upgrade_2_1 }

		position = { x = 0 y = 3 }

		mutually_exclusive = { tsagi_upgrade_3_2 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_range = 0.1
		}
	}

	trait = {
		token = tsagi_upgrade_3_2
		name = KR_MIO_Trait_improve_engine_overheat_limit
		icon = GFX_generic_mio_trait_icon_air_range

		all_parents = { tsagi_upgrade_2_1 }

		position = { x = 2 y = 3 }

		mutually_exclusive = { tsagi_upgrade_3_1 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
		}

		equipment_bonus = {
			air_range = 0.2
			fuel_consumption = 0.25
		}
	}

	trait = {
		token = tsagi_upgrade_3_3
		name = KR_MIO_Trait_eliminate_wasteful_fuel_use
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		all_parents = { tsagi_upgrade_2_1 }

		position = { x = 3 y = 3 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
		}

		equipment_bonus = {
			fuel_consumption = -0.1
		}
	}

	trait = {
		token = tsagi_upgrade_3_4
		name = KR_MIO_Trait_eliminate_random_engine_fires
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { tsagi_upgrade_2_3 }

		position = { x = 5 y = 3 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = tsagi_upgrade_3_5
		name = KR_MIO_Trait_additional_weakspot_protection
		icon = GFX_generic_mio_trait_icon_air_defence

		all_parents = { tsagi_upgrade_2_3 }

		position = { x = 6 y = 3 }

		mutually_exclusive = { tsagi_upgrade_3_6 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_defence = 0.1
			reliability = -0.15
		}
	}

	trait = {
		token = tsagi_upgrade_3_6
		name = KR_MIO_Trait_extensive_bomber_testing
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { tsagi_upgrade_2_3 }

		position = { x = 8 y = 3 }

		mutually_exclusive = { tsagi_upgrade_3_5 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_defence = -0.1
			reliability = 0.15
		}
	}

	trait = {
		token = tsagi_upgrade_4_1
		name = KR_MIO_Trait_improved_tsagi
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		available = {
			FROM = {
				if = {
					limit = { original_tag = FER }
					has_completed_focus = FER_return_to_kremlin
				}
				else = {
					has_completed_focus = RUS_project_m
				}
			}
		}

		visible = { NOT = { is_mio_trait_completed = tsagi_upgrade_4_1 } }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		on_complete = {
			RUS_unlock_tsagi_trait = yes
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_0
		name = KR_MIO_Trait_improved_tsagi
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_0 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_agility = 0
			maximum_speed = 0
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_1
		name = KR_MIO_Trait_improved_tsagi
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_1 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_agility = 0.01
			maximum_speed = 0.01
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_2
		name = KR_MIO_Trait_improved_tsagi
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_2 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_agility = 0.02
			maximum_speed = 0.02
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_3
		name = KR_MIO_Trait_improved_tsagi
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_3 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_agility = 0.03
			maximum_speed = 0.03
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_4
		name = KR_MIO_Trait_improved_tsagi
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_4 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_agility = 0.04
			maximum_speed = 0.04
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_5
		name = KR_MIO_Trait_improved_tsagi
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_5 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_agility = 0.05
			maximum_speed = 0.05
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_6
		name = KR_MIO_Trait_improved_tsagi
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_6 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_agility = 0.06
			maximum_speed = 0.06
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_7
		name = KR_MIO_Trait_improved_tsagi
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_7 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_agility = 0.07
			maximum_speed = 0.07
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_8
		name = KR_MIO_Trait_improved_tsagi
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_8 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_agility = 0.08
			maximum_speed = 0.08
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_9
		name = KR_MIO_Trait_improved_tsagi
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_9 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_agility = 0.09
			maximum_speed = 0.09
		}
	}

	trait = {
		token = tsagi_upgrade_4_1_10
		name = KR_MIO_Trait_improved_tsagi
		icon = GFX_icon_tsagi_MIO

		special_trait_background = yes

		visible = { is_mio_trait_completed = tsagi_upgrade_4_1_10 }

		any_parent = { tsagi_upgrade_3_1 tsagi_upgrade_3_2 }
		all_parents = { tsagi_upgrade_3_3 }
		all_parents = { tsagi_upgrade_3_4 }
		all_parents = { tsagi_upgrade_2_2 }
		any_parent = { tsagi_upgrade_3_5 tsagi_upgrade_3_6 }

		position = { x = 4 y = 4 }

		limit_to_equipment_type = {
			medium_plane_airframe
			large_plane_airframe
			strat_bomber_intercontinental_equipment
			ballistic_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_agility = 0.1
			maximum_speed = 0.1
		}
	}
}
RUS_osoavia_organisation = {
	name = osoavia
	icon = GFX_idea_osoavia
	allowed = {
		is_russian_tag = yes
	}
	available = {
		FROM = {
			owns_any_state_of = {
				219 #Moscow
				566 #Irkutsk
			}
		}
	}

	equipment_type = {
		small_plane_cas_airframe
		medium_plane_airframe
		cv_small_plane_cas_airframe
	}

	research_categories = {
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	on_design_team_assigned_to_tech = {
		FROM = { add_to_variable = { OSOAVIA_Research_Number = 1 } }
	}

	on_tech_research_cancelled = {
		FROM = { subtract_from_variable = { OSOAVIA_Research_Number = 1 } }
	}

	on_tech_research_completed = {
		FROM = {
			subtract_from_variable = { OSOAVIA_Research_Number = 1 }
			if = {
				limit = { has_character = RUS_igor_sikorsky }
				if = {
					limit = { RUS_igor_sikorsky = { is_hired_as_advisor = yes } }
					set_temp_variable = { ideology_change_var = 2 }
					change_ruling_party_popularity = yes
				}
			}
		}
	}

	on_industrial_manufacturer_assigned = {
		RUS_calculate_daily_funds_gain_and_requirement = yes
		custom_effect_tooltip = {
			localization_key = RUS_MIO_XP_Gain_tt XP_ICON = RUS_Air_XP_icon
		}
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = RUS_osoavia_mio_desc
	}

	trait = {
		token = osoavia_upgrade_1
		name = KR_MIO_Trait_r_d_department_expansion
		icon = GFX_KR_generic_mio_trait_icon_air_xp

		position = { x = 0 y = 0 }

		mutually_exclusive = { osoavia_upgrade_2 }

		on_complete = {
			hidden_effect = {
				set_variable = { RUS_mio_xp_gain = 0.3 }
			}
			custom_effect_tooltip = {
				localization_key = RUS_manufacturer_trait_xp_gained_tt
				XP = RUS_Air_XP_icon
			}
		}
	}

	trait = {
		token = osoavia_upgrade_2
		name = KR_MIO_Trait_improved_bomb_fins
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		position = { x = 2 y = 0 }

		mutually_exclusive = { osoavia_upgrade_1 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}

		on_complete = {
			add_to_variable = { total_campaign_xp = 70 }
			FROM = { air_experience = 70 }
		}
	}

	trait = {
		token = osoavia_upgrade_3
		name = KR_MIO_Trait_r_d_department_expansion
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 6 y = 0 }

		mutually_exclusive = { osoavia_upgrade_4 }

		on_complete = {
			multiply_variable = { weekly_funds_requirement = 0.33 }
			custom_effect_tooltip = RUS_manufacturer_trait_xp_min_funds_tt
		}
	}

	trait = {
		token = osoavia_upgrade_4
		name = KR_MIO_Trait_standardise_parts
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 8 y = 0 }

		mutually_exclusive = { osoavia_upgrade_3 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			add_to_variable = { total_campaign_xp = 25 }
			FROM = { air_experience = 25 }
		}
	}

	trait = {
		token = osoavia_upgrade_1_1
		name = KR_MIO_Trait_externally_mounted_bombs
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		any_parent = { osoavia_upgrade_1 osoavia_upgrade_2 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}

	trait = {
		token = osoavia_upgrade_1_2
		name = KR_MIO_Trait_eliminate_wasteful_fuel_use
		icon = GFX_generic_mio_trait_icon_air_range

		position = { x = 3 y = 1 }

		mutually_exclusive = { osoavia_upgrade_1_3 }

		equipment_bonus = {
			air_range = 0.15
		}
	}

	trait = {
		token = osoavia_upgrade_1_3
		name = KR_MIO_Trait_engine_turbocharger
		icon = GFX_generic_mio_trait_icon_air_agility

		position = { x = 5 y = 1 }

		mutually_exclusive = { osoavia_upgrade_1_2 }

		equipment_bonus = {
			air_agility = 0.1
		}
	}

	trait = {
		token = osoavia_upgrade_1_4
		name = KR_MIO_Trait_simplify_assembly_procedures
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { osoavia_upgrade_3 osoavia_upgrade_4 }

		position = { x = 7 y = 1 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = osoavia_upgrade_2_1
		name = KR_MIO_Trait_improved_aerodynamic_profile
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { osoavia_upgrade_1_1 }
		any_parent = { osoavia_upgrade_1_2 osoavia_upgrade_1_3 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			maximum_speed = 0.05
			air_range = 0.05
		}
	}

	trait = {
		token = osoavia_upgrade_2_2
		name = KR_MIO_Trait_eliminate_random_engine_fires
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { osoavia_upgrade_1_2 osoavia_upgrade_1_3 }
		all_parents = { osoavia_upgrade_1_4 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			reliability = 0.05
			air_agility = 0.05
		}
	}

	trait = {
		token = osoavia_upgrade_3_1
		name = KR_MIO_Trait_lighter_fuselage
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { osoavia_upgrade_2_1 osoavia_upgrade_2_2 }

		position = { x = 3 y = 3 }

		mutually_exclusive = { osoavia_upgrade_3_2 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = osoavia_upgrade_3_2
		name = KR_MIO_Trait_reinforced_undercarriage
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { osoavia_upgrade_2_1 osoavia_upgrade_2_2 }

		position = { x = 5 y = 3 }

		mutually_exclusive = { osoavia_upgrade_3_1 }

		equipment_bonus = {
			reliability = 0.15
		}
	}

	trait = {
		token = osoavia_upgrade_4_1
		name = KR_MIO_Trait_improved_osoavia
		icon = GFX_icon_osoavia_MIO

		available = {
			FROM = {
				if = {
					limit = { original_tag = FER }
					has_completed_focus = FER_return_to_kremlin
				}
				else = {
					has_completed_focus = RUS_the_flying_tank
				}
			}
		}

		special_trait_background = yes

		any_parent = { osoavia_upgrade_3_1 osoavia_upgrade_3_2 }

		position = { x = 4 y = 4 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}
}
RUS_skorost_organisation = {
	name = skorost_non_socrus
	icon = GFX_idea_skorost
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 219 } } #Moscow

	equipment_type = {
		small_plane_airframe
		medium_plane_airframe
		large_plane_airframe
		cv_small_plane_airframe
		transport_plane_equipment
		helicopter_equipment
		mothership_equipment
		strat_bomber_intercontinental_equipment
		nuclear_missile
		ballistic_missile_equipment
		sam_missile_equipment
		guided_missile_equipment
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	on_tech_research_completed = {
		FROM = {
			if = {
				limit = { has_character = RUS_igor_sikorsky }
				if = {
					limit = { RUS_igor_sikorsky = { is_hired_as_advisor = yes } }
					set_temp_variable = { ideology_change_var = 2 }
					change_ruling_party_popularity = yes
				}
			}
		}
	}

	ai_will_do = { base = 1000 }

	initial_trait = {
		name = RUS_skorost_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = skorost_upgrade_1
		name = KR_MIO_Trait_standardise_small_airframes
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		position = { x = 0 y = 0 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = skorost_upgrade_2
		name = KR_MIO_Trait_increased_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { skorost_upgrade_1 }

		position = { x = 3 y = 0 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = skorost_upgrade_3
		name = KR_MIO_Trait_simplify_assembly_procedures
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { skorost_upgrade_4 }

		position = { x = 5 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = skorost_upgrade_4
		name = KR_MIO_Trait_standardise_medium_airframes
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		position = { x = 8 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = skorost_upgrade_1_1
		name = KR_MIO_Trait_long_term_plane_production_contracts
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { skorost_upgrade_1 }

		position = { x = 0 y = 1 }

		mutually_exclusive = { skorost_upgrade_1_2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = skorost_upgrade_1_2
		name = KR_MIO_Trait_favour_long_term_plane_production_contracts
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { skorost_upgrade_1 }

		position = { x = 2 y = 1 }

		mutually_exclusive = { skorost_upgrade_1_1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = -0.20
		}
	}

	trait = {
		token = skorost_upgrade_1_3
		name = KR_MIO_Trait_favour_rapid_plane_upscaling_plans
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { skorost_upgrade_4 }

		position = { x = 6 y = 1 }

		mutually_exclusive = { skorost_upgrade_1_4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.2
			production_efficiency_cap_factor = -0.05
		}
	}

	trait = {
		token = skorost_upgrade_1_4
		name = KR_MIO_Trait_rapid_plane_upscaling_plans
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { skorost_upgrade_4 }

		position = { x = 8 y = 1 }

		mutually_exclusive = { skorost_upgrade_1_3 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = skorost_upgrade_2_1
		name = KR_MIO_Trait_improved_skorost
		icon = GFX_icon_skorost_MIO

		visible = {
			FROM = { NOT = { has_country_flag = RUS_rename_industries } }
		}

		available = {
			FROM = {
				if = {
					limit = { original_tag = FER }
					has_completed_focus = FER_return_to_kremlin
				}
				else = {
					has_completed_focus = RUS_over_the_northern_skies
				}
			}
		}

		special_trait_background = yes

		all_parents = { skorost_upgrade_2 }
		all_parents = { skorost_upgrade_3 }
		any_parent = { skorost_upgrade_1_1 skorost_upgrade_1_2 }
		any_parent = { skorost_upgrade_1_3 skorost_upgrade_1_4 }
		any_parent = { skorost_upgrade_3_1 skorost_upgrade_3_2 }
		any_parent = { skorost_upgrade_3_3 skorost_upgrade_3_4 }
		all_parents = { skorost_upgrade_4_2 }
		all_parents = { skorost_upgrade_4_3 }

		position = { x = 4 y = 2 }

		production_bonus = {
			production_capacity_factor = 0.2
		}
	}

	trait = {
		token = skorost_upgrade_2_1_soc_rus
		name = KR_MIO_Trait_improved_krasnaya_skorost
		icon = GFX_icon_skorost_MIO

		visible = {
			FROM = { has_country_flag = RUS_rename_industries }
		}

		available = {
			FROM = { has_completed_focus = RUS_over_the_northern_skies }
		}

		special_trait_background = yes

		all_parents = { skorost_upgrade_2 }
		all_parents = { skorost_upgrade_3 }
		any_parent = { skorost_upgrade_1_1 skorost_upgrade_1_2 }
		any_parent = { skorost_upgrade_1_3 skorost_upgrade_1_4 }
		any_parent = { skorost_upgrade_3_1 skorost_upgrade_3_2 }
		any_parent = { skorost_upgrade_3_3 skorost_upgrade_3_4 }
		all_parents = { skorost_upgrade_4_2 }
		all_parents = { skorost_upgrade_4_3 }

		position = { x = 4 y = 2 }

		production_bonus = {
			production_capacity_factor = 0.2
		}
	}

	trait = {
		token = skorost_upgrade_3_1
		name = KR_MIO_Trait_eliminate_resource_waste
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { skorost_upgrade_4_1 }

		position = { x = 0 y = 3 }

		mutually_exclusive = { skorost_upgrade_3_2 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = skorost_upgrade_3_2
		name = KR_MIO_Trait_favour_further_elimination_of_resource_waste
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { skorost_upgrade_4_1 }

		position = { x = 2 y = 3 }

		mutually_exclusive = { skorost_upgrade_3_1 }

		production_bonus = {
			production_resource_need_factor = -0.2
			production_conversion_speed_factor = -0.4
		}
	}

	trait = {
		token = skorost_upgrade_3_3
		name = KR_MIO_Trait_favour_additional_dedicated_conversion_facilities
		icon = GFX_generic_mio_trait_icon_conversion_speed

		all_parents = { skorost_upgrade_4_4 }

		position = { x = 6 y = 3 }

		mutually_exclusive = { skorost_upgrade_3_4 }

		production_bonus = {
			production_conversion_speed_factor = 0.4
			production_resource_need_factor = 0.2
		}
	}

	trait = {
		token = skorost_upgrade_3_4
		name = KR_MIO_Trait_dedicated_conversion_facilities
		icon = GFX_generic_mio_trait_icon_conversion_speed

		all_parents = { skorost_upgrade_4_4 }

		position = { x = 8 y = 3 }

		mutually_exclusive = { skorost_upgrade_3_3 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = skorost_upgrade_4_1
		name = KR_MIO_Trait_standardise_large_airframes
		icon = GFX_generic_mio_trait_icon_resources

		position = { x = 0 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = skorost_upgrade_4_2
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { skorost_upgrade_4_1 }

		position = { x = 3 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = skorost_upgrade_4_3
		name = KR_MIO_Trait_simplified_dissasembly_procedures
		icon = GFX_generic_mio_trait_icon_conversion_speed

		all_parents = { skorost_upgrade_4_4 }

		position = { x = 5 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = skorost_upgrade_4_4
		name = KR_MIO_Trait_standardise_transport_airframes
		icon = GFX_generic_mio_trait_icon_conversion_speed

		position = { x = 8 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}
}
RUS_sokol_organisation = {
	name = sokol
	icon = GFX_idea_sokol
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 252 } } #Nizhny Novgorod

	visible = { FROM = { RUS_has_sokol_upgrade_1_or_2 = no } }

	equipment_type = {
		small_plane_airframe
		cv_small_plane_airframe
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = RUS_sokol_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	# on_design_team_assigned_to_tech = {
	# 	custom_effect_tooltip = {
	# 		localization_key = KR_mio_has_completed_trait_2_NOT
	# 		TRAIT_1 = KR_MIO_Trait_expand_construction_r_d_department TRAIT_2 = KR_MIO_Trait_expand_production_r_d_department			Currently disabled as it isn't completely WAD
	# 	}
	# }

	on_tech_research_completed = {
		FROM = {
			if = {
				limit = { has_character = RUS_igor_sikorsky }
				if = {
					limit = { RUS_igor_sikorsky = { is_hired_as_advisor = yes } }
					set_temp_variable = { ideology_change_var = 2 }
					change_ruling_party_popularity = yes
				}
			}
		}
	}

	trait = {
		token = sokol_upgrade_1
		name = KR_MIO_Trait_expand_construction_r_d_department
		icon = GFX_icon_sokol_construction_MIO

		position = { x = 3 y = 0 }

		mutually_exclusive = { sokol_upgrade_2 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.25
			military_industrial_organization_design_team_assign_cost = -1
		}

		on_complete = {
			#custom_effect_tooltip = RUS_sokol_construction_research_cat_tt						Currently disabled as it isn't completely WAD
			hidden_effect = {
				if = {
					limit = { is_military_industrial_organization = RUS_sokol_organisation }
					set_temp_variable = { RUS_sokol_upgrade = 1 }
					RUS_complete_sokol_upgrade = yes
				}
				#add_mio_funds_gain_factor = 0.25
			}
		}
	}

	trait = {
		token = sokol_upgrade_2
		name = KR_MIO_Trait_expand_production_r_d_department
		icon = GFX_icon_sokol_production_MIO

		position = { x = 5 y = 0 }

		mutually_exclusive = { sokol_upgrade_1 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.25
			military_industrial_organization_design_team_assign_cost = 3
			military_industrial_organization_funds_gain = 1
		}

		on_complete = {
			#custom_effect_tooltip = RUS_sokol_production_research_cat_tt						Currently disabled as it isn't completely WAD
			hidden_effect = {
				if = {
					limit = { is_military_industrial_organization = RUS_sokol_organisation }
					set_temp_variable = { RUS_sokol_upgrade = 2 }
					RUS_complete_sokol_upgrade = yes
				}
				#add_mio_funds_gain_factor = 0.25
			}
		}
	}

	trait = {
		token = sokol_upgrade_1_1
		name = KR_MIO_Trait_cheaper_materials
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { sokol_upgrade_1 sokol_upgrade_2 }

		position = { x = 3 y = 1 }

		mutually_exclusive = { sokol_upgrade_1_2 }

		equipment_bonus = {
			build_cost_ic = -0.012
		}
	}

	trait = {
		token = sokol_upgrade_1_2
		name = KR_MIO_Trait_oversimplify_fighter_design
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { sokol_upgrade_1 sokol_upgrade_2 }

		position = { x = 5 y = 1 }

		mutually_exclusive = { sokol_upgrade_1_1 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}

		production_bonus = {
			production_resource_need_factor = 0.15
		}
	}

	trait = {
		token = sokol_upgrade_2_1
		name = KR_MIO_Trait_sacrifice_air_superiority
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 0 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_2 }

		equipment_bonus = {
			build_cost_ic = -0.012
		}
	}

	trait = {
		token = sokol_upgrade_2_2
		name = KR_MIO_Trait_sacrifice_manoeuvrability
		icon = GFX_generic_mio_trait_icon_air_superiority

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 2 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_1 }

		equipment_bonus = {
			air_superiority = -0.1
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_2_3
		name = KR_MIO_Trait_standardise_fighter_parts
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 3 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_4 }

		equipment_bonus = {
			build_cost_ic = -0.012
		}
	}

	trait = {
		token = sokol_upgrade_2_4
		name = KR_MIO_Trait_sacrifice_cockpit_protection
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 5 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_3 }

		equipment_bonus = {
			build_cost_ic = -0.025
			air_ground_attack = -0.1
		}
	}

	trait = {
		token = sokol_upgrade_2_5
		name = KR_MIO_Trait_simplify_assembly_procedures
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 6 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_6 }

		equipment_bonus = {
			build_cost_ic = -0.012
		}
	}

	trait = {
		token = sokol_upgrade_2_6
		name = KR_MIO_Trait_sacrifice_upscaling_potential
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { sokol_upgrade_1_1 sokol_upgrade_1_2 }

		position = { x = 8 y = 2 }

		mutually_exclusive = { sokol_upgrade_2_5 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.30
		}
	}

	trait = {
		token = sokol_upgrade_3_1
		name = KR_MIO_Trait_sacrifice_reliability
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { sokol_upgrade_2_1 sokol_upgrade_2_2 }

		position = { x = 1 y = 3 }

		equipment_bonus = {
			reliability = -0.1
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_3_2
		name = KR_MIO_Trait_simplify_engine_design
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		any_parent = { sokol_upgrade_2_1 sokol_upgrade_2_2 }

		position = { x = 2 y = 3 }

		equipment_bonus = {
			fuel_consumption = 0.2
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_3_3
		name = KR_MIO_Trait_sacrifice_maximum_speed
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { sokol_upgrade_2_3 sokol_upgrade_2_4 }

		position = { x = 4 y = 3 }

		equipment_bonus = {
			maximum_speed = -0.1
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_3_4
		name = KR_MIO_Trait_sacrifice_fuel_capacity
		icon = GFX_generic_mio_trait_icon_air_range

		any_parent = { sokol_upgrade_2_5 sokol_upgrade_2_6 }

		position = { x = 6 y = 3 }

		equipment_bonus = {
			air_range = -0.1
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_3_5
		name = KR_MIO_Trait_sacrifice_ammunition_storage
		icon = GFX_generic_mio_trait_icon_air_attack

		any_parent = { sokol_upgrade_2_5 sokol_upgrade_2_6 }

		position = { x = 7 y = 3 }

		equipment_bonus = {
			air_attack = -0.1
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_4_1
		name = KR_MIO_Trait_rush_production_process
		icon = GFX_generic_mio_trait_icon_air_defence

		all_parents = { sokol_upgrade_3_1 sokol_upgrade_3_2 sokol_upgrade_3_3 }

		position = { x = 3 y = 4 }

		equipment_bonus = {
			air_defence = 0.1
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = sokol_upgrade_4_2
		name = KR_MIO_Trait_sacrifice_long_term_production_goals
		icon = GFX_generic_mio_trait_icon_air_agility

		all_parents = { sokol_upgrade_3_3 sokol_upgrade_3_4 sokol_upgrade_3_5 }

		position = { x = 5 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.025
			air_agility = 0.1
		}
	}
}
RUS_sokol_construction_organisation = {
	include = RUS_sokol_organisation
	# Everything not shown below is copied from RUS_sokol_organisation

	visible = {
		FROM = {
			mio:RUS_sokol_organisation = {
				is_mio_trait_completed = sokol_upgrade_1
			}
		}
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		construction_tech
		plane_modules_tech
	}

	# on_design_team_assigned_to_tech = {
	# 	custom_effect_tooltip = RUS_sokol_construction_research_cat_tt					Currently disabled as it isn't completely WAD
	# 	FROM = { add_to_variable = { Sokol_Research_Number = 1 } }
	# }

	# on_tech_research_cancelled = {
	# 	FROM = { subtract_from_variable = { Sokol_Research_Number = 1 } }				Currently disabled as it isn't completely WAD
	# }

	on_tech_research_completed = {
		FROM = {
			#subtract_from_variable = { Sokol_Research_Number = 1 }						Currently disabled as it isn't completely WAD
			if = {
				limit = { has_character = RUS_igor_sikorsky }
				if = {
					limit = { RUS_igor_sikorsky = { is_hired_as_advisor = yes } }
					set_temp_variable = { ideology_change_var = 2 }
					change_ruling_party_popularity = yes
				}
			}
		}
	}
}
RUS_sokol_production_organisation = {
	include = RUS_sokol_organisation
	# Everything not shown below is copied from RUS_sokol_organisation

	visible = {
		FROM = {
			mio:RUS_sokol_organisation = {
				is_mio_trait_completed = sokol_upgrade_2
			}
		}
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		cat_production
		concentrated_industry_category
		dispersed_industry_category
		plane_modules_tech
	}

	# on_design_team_assigned_to_tech = {
	# 	custom_effect_tooltip = RUS_sokol_production_research_cat_tt				Currently disabled as it isn't completely WAD
	# 	FROM = { add_to_variable = { Sokol_Research_Number = 1 } }
	# }

	# on_tech_research_cancelled = {
	# 	FROM = { subtract_from_variable = { Sokol_Research_Number = 1 } }			Currently disabled as it isn't completely WAD
	# }

	on_tech_research_completed = {
		FROM = {
			#subtract_from_variable = { Sokol_Research_Number = 1 }					Currently disabled as it isn't completely WAD
			if = {
				limit = { has_character = RUS_igor_sikorsky }
				if = {
					limit = { RUS_igor_sikorsky = { is_hired_as_advisor = yes } }
					set_temp_variable = { ideology_change_var = 2 }
					change_ruling_party_popularity = yes
				}
			}
		}
	}
}
###############################
### Materiel Equipment MIOs ###
###############################
RUS_toz_organisation = {
	name = toz
	icon = GFX_idea_toz
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 223 } } #Tula

	equipment_type = {
		infantry_equipment
	}

	research_categories = {
		infantry_weapons
		night_vision
		cat_special_forces_generic
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_toz_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = toz_upgrade_1
		name = KR_MIO_Trait_optical_sights
		icon = GFX_generic_mio_trait_icon_soft_attack

		position = { x = 0 y = 0 }

		mutually_exclusive = { toz_upgrade_2 }

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = toz_upgrade_2
		name = KR_MIO_Trait_experimental_anti_tank_grenades
		icon = GFX_idea_toz_medal_MIO

		position = { x = 1 y = 0 }

		mutually_exclusive = { toz_upgrade_1 }

		on_complete = {
			if = {
				limit = { NOT = { has_mio_flag = TOZ_Medal_Decision_Taken } }
				set_temp_variable = { RUS_show_TOZ_medal_modifier = 1 }
				RUS_unlock_TOZ_medal_decision = yes
			}
			else = {
				custom_effect_tooltip = toz_medal_upgrade_tt
				set_temp_variable = { RUS_medal_modifier_tt = 0.1 tooltip = army_attack_factor_tooltip }
			}
		}
	}

	trait = {
		token = toz_upgrade_3
		name = KR_MIO_Trait_expanded_fragmentation_grenades
		icon = GFX_generic_mio_trait_icon_defense

		position = { x = 7 y = 0 }

		mutually_exclusive = { toz_upgrade_4 }

		equipment_bonus = {
			defense = 0.05
		}
	}

	trait = {
		token = toz_upgrade_4
		name = KR_MIO_Trait_experimental_body_armour
		icon = GFX_idea_toz_medal_MIO

		position = { x = 8 y = 0 }

		mutually_exclusive = { toz_upgrade_3 }

		on_complete = {
			if = {
				limit = { NOT = { has_mio_flag = TOZ_Medal_Decision_Taken } }
				set_temp_variable = { RUS_show_TOZ_medal_modifier = 2 }
				RUS_unlock_TOZ_medal_decision = yes
			}
			else = {
				custom_effect_tooltip = toz_medal_upgrade_tt
				set_temp_variable = { RUS_medal_modifier_tt = 0.1 tooltip = army_defence_factor_tooltip }
			}
		}
	}

	trait = {
		token = toz_upgrade_1_1
		name = KR_MIO_Trait_thoroughly_tested_designs
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { toz_upgrade_1 toz_upgrade_2 }

		position = { x = 1 y = 1 }

		mutually_exclusive = { toz_upgrade_1_2 }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = toz_upgrade_1_2
		name = KR_MIO_Trait_experimental_anti_vehicle_mines
		icon = GFX_idea_toz_medal_MIO

		any_parent = { toz_upgrade_1 toz_upgrade_2 }

		position = { x = 2 y = 1 }

		mutually_exclusive = { toz_upgrade_1_1 }

		on_complete = {
			if = {
				limit = { NOT = { has_mio_flag = TOZ_Medal_Decision_Taken } }
				set_temp_variable = { RUS_show_TOZ_medal_modifier = 3 }
				RUS_unlock_TOZ_medal_decision = yes
			}
			else = {
				custom_effect_tooltip = toz_medal_upgrade_tt
				set_temp_variable = { RUS_medal_modifier_tt = 0.1 tooltip = army_org_factor_tooltip }
			}
		}
	}

	trait = {
		token = toz_upgrade_1_3
		name = KR_MIO_Trait_fire_selectors
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { toz_upgrade_1 toz_upgrade_2 }
		any_parent = { toz_upgrade_3 toz_upgrade_4 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			breakthrough = 0.05
		}
	}

	trait = {
		token = toz_upgrade_1_4
		name = KR_MIO_Trait_lmg_rotary_feed_cylinders
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { toz_upgrade_3 toz_upgrade_4 }

		position = { x = 6 y = 1 }

		mutually_exclusive = { toz_upgrade_1_5 }

		equipment_bonus = {
			breakthrough = 0.05
		}
	}

	trait = {
		token = toz_upgrade_1_5
		name = KR_MIO_Trait_experimental_semi_automatic_rifles
		icon = GFX_idea_toz_medal_MIO

		any_parent = { toz_upgrade_3 toz_upgrade_4 }

		position = { x = 7 y = 1 }

		mutually_exclusive = { toz_upgrade_1_4 }

		on_complete = {
			if = {
				limit = { NOT = { has_mio_flag = TOZ_Medal_Decision_Taken } }
				set_temp_variable = { RUS_show_TOZ_medal_modifier = 4 }
				RUS_unlock_TOZ_medal_decision = yes
			}
			else = {
				custom_effect_tooltip = toz_medal_upgrade_tt
				set_temp_variable = { RUS_medal_modifier_tt = 0.1 tooltip = breakthrough_factor_tooltip }
			}
		}
	}

	trait = {
		token = toz_upgrade_2_1
		name = KR_MIO_Trait_cheap_mortar_spring_loaded_shock_absorbers
		icon = GFX_KR_generic_mio_trait_icon_funds

		any_parent = { toz_upgrade_1_1 toz_upgrade_1_2 }

		position = { x = 1 y = 3 }

		mutually_exclusive = { toz_upgrade_2_2 toz_upgrade_2_3 }

		equipment_bonus = {
			soft_attack = 0.01
			defense = 0.01
		}

		on_complete = {
			set_variable = { FROM.TOZ_Required_Funds = 400 tooltip = RUS_toz_medals_decision_cost_tt }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_mortar_spring_loaded_shock_absorbers TRAIT_2 = KR_MIO_Trait_high_quality_mortar_spring_loaded_shock_absorbers
			}
		}
	}

	trait = {
		token = toz_upgrade_2_2
		name = KR_MIO_Trait_mortar_spring_loaded_shock_absorbers
		icon = GFX_KR_generic_mio_trait_icon_funds

		any_parent = { toz_upgrade_1_1 toz_upgrade_1_2 }

		position = { x = 2 y = 3 }

		mutually_exclusive = { toz_upgrade_2_1 toz_upgrade_2_3 }

		equipment_bonus = {
			soft_attack = 0.03
			defense = 0.03
			build_cost_ic = 0.075
		}

		on_complete = {
			set_variable = { FROM.TOZ_Required_Funds = 300 tooltip = RUS_toz_medals_decision_cost_tt }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_cheap_mortar_spring_loaded_shock_absorbers TRAIT_2 = KR_MIO_Trait_high_quality_mortar_spring_loaded_shock_absorbers
			}
		}
	}

	trait = {
		token = toz_upgrade_2_3
		name = KR_MIO_Trait_high_quality_mortar_spring_loaded_shock_absorbers
		icon = GFX_KR_generic_mio_trait_icon_funds

		any_parent = { toz_upgrade_1_1 toz_upgrade_1_2 }

		position = { x = 3 y = 3 }

		mutually_exclusive = { toz_upgrade_2_1 toz_upgrade_2_2 }

		equipment_bonus = {
			soft_attack = 0.05
			defense = 0.05
			build_cost_ic = 0.15
		}

		on_complete = {
			set_variable = { FROM.TOZ_Required_Funds = 200 tooltip = RUS_toz_medals_decision_cost_tt }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_cheap_mortar_spring_loaded_shock_absorbers TRAIT_2 = KR_MIO_Trait_mortar_spring_loaded_shock_absorbers
			}
		}
	}

	trait = {
		token = toz_upgrade_2_4
		name = KR_MIO_Trait_smoothed_hmg_feeding_system
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { toz_upgrade_1_3 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = toz_upgrade_2_5
		name = KR_MIO_Trait_cheap_mine_tilt_rod_fuses
		icon = GFX_KR_generic_mio_trait_icon_manpower

		any_parent = { toz_upgrade_1_4 toz_upgrade_1_5 }

		position = { x = 5 y = 3 }

		mutually_exclusive = { toz_upgrade_2_6 toz_upgrade_2_7 }

		equipment_bonus = {
			breakthrough = 0.01
			reliability = 0.01
		}

		on_complete = {
			add_to_variable = { FROM.TOZ_Divisions = 2 tooltip = RUS_toz_medals_division_num_tt }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_mine_tilt_rod_fuses TRAIT_2 = KR_MIO_Trait_high_quality_mine_tilt_rod_fuses
			}
		}
	}

	trait = {
		token = toz_upgrade_2_6
		name = KR_MIO_Trait_mine_tilt_rod_fuses
		icon = GFX_KR_generic_mio_trait_icon_manpower

		any_parent = { toz_upgrade_1_4 toz_upgrade_1_5 }

		position = { x = 6 y = 3 }

		mutually_exclusive = { toz_upgrade_2_5 toz_upgrade_2_7 }

		equipment_bonus = {
			breakthrough = 0.03
			reliability = 0.03
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.25
		}

		on_complete = {
			add_to_variable = { FROM.TOZ_Divisions = 4 tooltip = RUS_toz_medals_division_num_tt }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_cheap_mine_tilt_rod_fuses TRAIT_2 = KR_MIO_Trait_high_quality_mine_tilt_rod_fuses
			}
		}
	}

	trait = {
		token = toz_upgrade_2_7
		name = KR_MIO_Trait_high_quality_mine_tilt_rod_fuses
		icon = GFX_KR_generic_mio_trait_icon_manpower

		any_parent = { toz_upgrade_1_4 toz_upgrade_1_5 }

		position = { x = 7 y = 3 }

		mutually_exclusive = { toz_upgrade_2_5 toz_upgrade_2_6 }

		equipment_bonus = {
			breakthrough = 0.05
			reliability = 0.05
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.5
		}

		on_complete = {
			add_to_variable = { FROM.TOZ_Divisions = 6 tooltip = RUS_toz_medals_division_num_tt }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_cheap_mine_tilt_rod_fuses TRAIT_2 = KR_MIO_Trait_mine_tilt_rod_fuses
			}
		}
	}

	trait = {
		token = toz_upgrade_3_1
		name = KR_MIO_Trait_heavier_mortar_strike_packages
		icon = GFX_generic_mio_trait_icon_soft_attack

		all_parents = { toz_upgrade_2_4 }

		position = { x = 4 y = 3 }

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = toz_upgrade_4_1
		name = KR_MIO_Trait_improved_toz
		icon = GFX_icon_toz_MIO

		available = {
			FROM = {
				custom_override_tooltip = {
					tooltip = {
						localization_key = has_completed_decision_in_focus
						DECISION = RUS_tula_arms_factory
						FOCUS = "[RUS_TozUpgradeFocusTrigger]"
					}
					has_country_flag = improve_toz
				}
			}
		}

		special_trait_background = yes

		any_parent = { toz_upgrade_2_1 toz_upgrade_2_2 toz_upgrade_2_3 }
		all_parents = { toz_upgrade_3_1 }
		any_parent = { toz_upgrade_2_5 toz_upgrade_2_6 toz_upgrade_2_7 }

		position = { x = 4 y = 4 }

		equipment_bonus = {
			defense = 0.05
			breakthrough = 0.05
			reliability = 0.05
		}
	}
}
RUS_vpoz_organisation = {
	name = vpoz
	icon = GFX_idea_vpoz
	allowed = {
		is_russian_tag = yes
	}
	available = {
		FROM = {
			if = {
				limit = { original_tag = RUS }
				has_completed_focus = RUS_military_production
			}
			else_if = {
				limit = { original_tag = FER }
				has_completed_focus = FER_masters_over_siberia
			}
			else = {
				has_completed_focus = RUS_secret_weapons_development
			}
			owns_state = 249 #Kazan
		}
	}

	equipment_type = {
		infantry_equipment
		support_equipment
	}

	research_categories = {
		infantry_weapons
		support_tech
		night_vision
		cat_special_forces_generic
	}

	on_industrial_manufacturer_assigned = {
		add_to_variable = { RUS_mio_assigned_manufacturer_num = 1 }
		RUS_calculate_daily_funds_gain_and_requirement = yes
		custom_effect_tooltip = RUS_MIO_Research_Gain_tt
		custom_effect_tooltip = tooltip_white_line
	}

	on_industrial_manufacturer_unassigned = {
		subtract_from_variable = { RUS_mio_assigned_manufacturer_num = 1 }
	}

	on_tech_research_completed = {
		if = {
			limit = { NOT = { has_mio_flag = RUS_disable_research_speed_loss } }
			RUS_reset_mio_research_speeds = yes
		}
	}

	on_tech_research_cancelled = {
		RUS_reset_mio_research_speeds = yes
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = RUS_vpoz_mio_desc
	}

	trait = {
		token = vpoz_upgrade_1
		name = KR_MIO_Trait_lighter_infantry_equipment
		icon = GFX_generic_mio_trait_icon_maximum_speed

		mutually_exclusive = { vpoz_upgrade_2 }

		position = { x = 0 y = 0 }

		limit_to_equipment_type = { infantry_equipment }

		equipment_bonus = {
			maximum_speed = 0.15
		}
	}

	trait = {
		token = vpoz_upgrade_2
		name = KR_MIO_Trait_incendiary_bottles
		icon = GFX_generic_mio_trait_icon_hard_attack

		mutually_exclusive = { vpoz_upgrade_1 }

		position = { x = 2 y = 0 }

		limit_to_equipment_type = { infantry_equipment }

		equipment_bonus = {
			hard_attack = 1.0
			ap_attack = 1.0
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 2
		}

		on_complete = {
			custom_effect_tooltip = RUS_manufacturer_research_no_reset_tt
			set_mio_flag = RUS_disable_research_speed_loss
		}
	}

	trait = {
		token = vpoz_upgrade_4
		name = KR_MIO_Trait_clear_cycling_jamming_faults
		icon = GFX_generic_mio_trait_icon_reliability

		mutually_exclusive = { vpoz_upgrade_5 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = vpoz_upgrade_5
		name = KR_MIO_Trait_increased_fire_rate
		icon = GFX_generic_mio_trait_icon_defense

		mutually_exclusive = { vpoz_upgrade_4 }

		position = { x = 8 y = 0 }

		limit_to_equipment_type = { infantry_equipment }

		equipment_bonus = {
			defense = 0.05
		}
	}

	trait = {
		token = vpoz_upgrade_1_1
		name = KR_MIO_Trait_repurposed_civilian_motorcycles
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x = 0 y = 2 }

		any_parent = { vpoz_upgrade_1 vpoz_upgrade_2 }

		limit_to_equipment_type = { infantry_equipment }

		equipment_bonus = {
			maximum_speed = 0.15
		}
	}

	trait = {
		token = vpoz_upgrade_1_2
		name = KR_MIO_Trait_incendiary_anti_tank_ampulla_throwers
		icon = GFX_generic_mio_trait_icon_hard_attack

		mutually_exclusive = { vpoz_upgrade_1_3 }

		position = { x = 2 y = 2 }

		any_parent = { vpoz_upgrade_1 vpoz_upgrade_2 }

		limit_to_equipment_type = { infantry_equipment }

		equipment_bonus = {
			hard_attack = 1.0
			ap_attack = 1.0
		}

		on_complete = {
			add_mio_research_bonus = 0.14
			add_to_variable = { total_campaign_xp = 14 }
		}
	}

	trait = {
		token = vpoz_upgrade_1_3
		name = KR_MIO_Trait_government_enticement
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		mutually_exclusive = { vpoz_upgrade_1_2 vpoz_upgrade_1_4 }

		position = { x = 4 y = 2 }

		on_complete = {
			set_temp_variable = { max_research_speed_to_add = research_bonus }
			custom_effect_tooltip = RUS_manufacturer_trait_research_cap_vpoz_tt
			add_to_variable = { max_research_speed = max_research_speed_to_add }
		}
	}

	trait = {
		token = vpoz_upgrade_1_4
		name = KR_MIO_Trait_extended_smg_lmg_magazines
		icon = GFX_generic_mio_trait_icon_soft_attack

		mutually_exclusive = { vpoz_upgrade_1_3 }

		position = { x = 6 y = 2 }

		any_parent = { vpoz_upgrade_4 vpoz_upgrade_5 }

		limit_to_equipment_type = { infantry_equipment }

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			add_mio_research_bonus = 0.08
			add_to_variable = { total_campaign_xp = 8 }
		}
	}

	trait = {
		token = vpoz_upgrade_2_1
		name = KR_MIO_Trait_easily_breaks_easily_fixed
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 2 y = 4 }

		all_parents = { vpoz_upgrade_1_1 }
		any_parent = { vpoz_upgrade_1_2 vpoz_upgrade_1_3 vpoz_upgrade_1_4 }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = vpoz_upgrade_2_2
		name = KR_MIO_Trait_emergency_replacement_parts
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 6 y = 4 }

		all_parents = { vpoz_upgrade_1_1 }
		any_parent = { vpoz_upgrade_1_2 vpoz_upgrade_1_3 vpoz_upgrade_1_4 }

		equipment_bonus = {
			reliability = 0.05
		}
	}
}
RUS_imz_organisation = {
	name = imz
	icon = GFX_idea_imz
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 399 } } #Izhevsk

	equipment_type = {
		infantry_equipment
		support_equipment
	}

	research_categories = {
		infantry_weapons
		support_tech
		night_vision
		cat_special_forces_generic
	}

	ai_will_do = { base = 1000 }

	initial_trait = {
		name = RUS_imz_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = imz_upgrade_1
		name = KR_MIO_Trait_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		position = { x = 1 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = imz_upgrade_2
		name = KR_MIO_Trait_long_life_production_runs
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		position = { x = 3 y = 1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = imz_upgrade_3
		name = KR_MIO_Trait_create_the_metallurgical_department
		icon = GFX_generic_mio_trait_icon_resources

		position = { x = 5 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.05
		}
	}

	trait = {
		token = imz_upgrade_4
		name = KR_MIO_Trait_standardise_parts
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 7 y = 0 }

		production_bonus = {
			production_cost_factor = -0.025
		}
	}

	trait = {
		token = imz_upgrade_1_1
		name = KR_MIO_Trait_absorb_the_sez
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		position = { x = 0 y = 2 }

		mutually_exclusive = { imz_upgrade_1_2 }

		all_parents = { imz_upgrade_1 imz_upgrade_2 }

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = imz_upgrade_1_2
		name = KR_MIO_Trait_collaborate_with_the_votkinsk_factory
		icon = GFX_KR_generic_mio_trait_icon_production_output

		position = { x = 2 y = 2 }

		mutually_exclusive = { imz_upgrade_1_1 imz_upgrade_1_3 }

		all_parents = { imz_upgrade_1 imz_upgrade_2 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
			production_efficiency_cap_factor = 0.05
			production_resource_need_factor = -0.1
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 2.0
		}
	}

	trait = {
		token = imz_upgrade_1_3
		name = KR_MIO_Trait_collaborate_with_soz
		icon = GFX_generic_mio_trait_icon_resources

		position = { x = 4 y = 2 }

		all_parents = { imz_upgrade_3 imz_upgrade_2 }

		mutually_exclusive = { imz_upgrade_1_2 imz_upgrade_1_4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
			production_resource_need_factor = -0.05
		}
	}

	trait = {
		token = imz_upgrade_1_4
		name = KR_MIO_Trait_joint_front_line_designer_development_teams
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		position = { x = 6 y = 2 }

		mutually_exclusive = { imz_upgrade_1_3 imz_upgrade_1_5 }

		all_parents = { imz_upgrade_3 imz_upgrade_4 }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.15
		}
		production_bonus = {
			production_resource_need_factor = -0.3
		}
	}

	trait = {
		token = imz_upgrade_1_5
		name = KR_MIO_Trait_create_the_society_of_new_designs
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 8 y = 2 }

		mutually_exclusive = { imz_upgrade_1_4 }

		all_parents = { imz_upgrade_3 imz_upgrade_4 }

		production_bonus = {
			production_cost_factor = -0.025
		}
	}

	trait = {
		token = imz_upgrade_2_1
		name = KR_MIO_Trait_influence_from_competing_branches
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		position = { x = 3 y = 3 }

		any_parent = { imz_upgrade_1_1 imz_upgrade_1_2 imz_upgrade_1_3 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = imz_upgrade_2_2
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 5 y = 3 }

		any_parent = { imz_upgrade_1_5 imz_upgrade_1_4 imz_upgrade_1_3 }

		production_bonus = {
			production_resource_need_factor = -0.05
			production_cost_factor = -0.025
		}
	}

	trait = {
		token = imz_upgrade_3_1
		name = KR_MIO_Trait_improved_imz
		icon = GFX_icon_imz_MIO

		special_trait_background = yes

		position = { x = 4 y = 4 }

		all_parents = { imz_upgrade_2_1 imz_upgrade_2_2 }

		available = {
			FROM = {
				custom_override_tooltip = {
					tooltip = {
						localization_key = has_completed_decision_in_focus
						DECISION = RUS_izhevsk_mechanical_plant
						FOCUS = "[RUS_AmoImzUpgradeFocusTrigger]"
					}
					has_country_flag = improve_imz
				}
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
			production_efficiency_cap_factor = 0.025
			production_resource_need_factor = -0.05
			production_cost_factor = -0.025
		}
	}
}
RUS_obukhov_organisation = {
	name = obukhov_non_socrus
	icon = GFX_idea_obukhov
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 195 } } #Petrograd

	equipment_type = {
		artillery_equipment
		anti_tank_equipment
		anti_air_equipment
		super_heavy_artillery_equipment
		self_propelled_super_heavy_artillery_equipment
	}

	research_categories = {
		mio_cat_all_artillery_equipment
		mio_cat_tech_all_destroyer_and_modules
		mio_cat_tech_all_cruiser_and_modules
		mio_cat_tech_all_armor_and_modules
	}

	on_industrial_manufacturer_assigned = {
		if = { #Check if the trait to give army xp is unlocked
			limit = { RUS_has_obukhov_upgrade_5_or_6 = yes }
			RUS_calculate_daily_funds_gain_and_requirement = yes
			custom_effect_tooltip = {
				localization_key = RUS_MIO_XP_Gain_tt XP_ICON = RUS_Army_XP_icon
			}
		}
		else = {
			custom_effect_tooltip = {
				localization_key = KR_mio_has_completed_trait_2_NOT
				TRAIT_1 = KR_MIO_Trait_expanded_engineer_department TRAIT_2 = KR_MIO_Trait_expand_the_society_of_inventors
			}
		}
	}

	on_design_team_assigned_to_tech = {
		FROM = { add_to_variable = { Obukhov_Research_Number = 1 } }
	}

	on_tech_research_cancelled = {
		FROM = { subtract_from_variable = { Obukhov_Research_Number = 1 } }
	}

	on_tech_research_completed = {
		FROM = { subtract_from_variable = { Obukhov_Research_Number = 1 } }
	}

	ai_will_do = { base = 1000 }

	initial_trait = {
		name = RUS_obukhov_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = obukhov_upgrade_1
		name = KR_MIO_Trait_collaborate_with_kondakov
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		position = { x = 0 y = 0 }

		limit_to_equipment_type = { anti_air_equipment }

		mutually_exclusive = { obukhov_upgrade_2 obukhov_upgrade_3 }

		equipment_bonus = {
			air_attack = 0.07
			soft_attack = 1.0
			defense = 1.0
			build_cost_ic = 0.1
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_collaborate_with_the_moscow_ordnance_factory TRAIT_2 = KR_MIO_Trait_internal_development_of_anti_air_guns
			}
		}
	}

	trait = {
		token = obukhov_upgrade_2
		name = KR_MIO_Trait_collaborate_with_the_moscow_ordnance_factory
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		position = { x = 2 y = 0 }

		limit_to_equipment_type = { anti_air_equipment }

		mutually_exclusive = { obukhov_upgrade_1 obukhov_upgrade_3 }

		equipment_bonus = {
			air_attack = 0.15
			build_cost_ic = -0.1
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_collaborate_with_kondakov TRAIT_2 = KR_MIO_Trait_internal_development_of_anti_air_guns
			}
		}
	}

	trait = {
		token = obukhov_upgrade_3
		name = KR_MIO_Trait_internal_development_of_anti_air_guns
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		position = { x = 4 y = 0 }

		limit_to_equipment_type = { anti_air_equipment }

		mutually_exclusive = { obukhov_upgrade_1 obukhov_upgrade_2 }

		equipment_bonus = {
			air_attack = 0.07
			hard_attack = 1.0
			ap_attack = 0.1
			build_cost_ic = 0.1
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_collaborate_with_kondakov TRAIT_2 = KR_MIO_Trait_collaborate_with_the_moscow_ordnance_factory
			}
		}
	}

	trait = {
		token = obukhov_upgrade_5
		name = KR_MIO_Trait_expanded_engineer_department
		icon = GFX_KR_generic_mio_trait_icon_army_xp

		ai_will_do = { base = 1000 }

		special_trait_background = yes

		position = { x = 5 y = 0 }

		limit_to_equipment_type = {
			artillery_equipment
			super_heavy_artillery_equipment
			self_propelled_super_heavy_artillery_equipment
		}

		mutually_exclusive = { obukhov_upgrade_6 }

		equipment_bonus = {
			reliability = 0.05
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.25
		}

		on_complete = {
			RUS_calculate_daily_funds_gain_and_requirement = yes
			custom_effect_tooltip = {
				localization_key = RUS_MIO_XP_Gain_tt XP_ICON = RUS_Army_XP_icon
			}
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				RUS_unlock_obukhov_policies = yes # `unlock_mio_policy_tooltip` doesn't work in the MIO scope for some reason
			}
			hidden_effect = {
				if = {
					limit = {
						FROM = {
							mio:RUS_obukhov_organisation = {
								is_mio_assigned_to_task = yes
							}
						}
					}
					FROM = { add_ideas = RUS_obukhov_army_xp }
				}
			}
		}
	}

	trait = {
		token = obukhov_upgrade_6
		name = KR_MIO_Trait_expand_the_society_of_inventors
		icon = GFX_KR_generic_mio_trait_icon_army_xp

		ai_will_do = { base = 1000 }

		special_trait_background = yes

		position = { x = 7 y = 0 }

		limit_to_equipment_type = {
			artillery_equipment
			super_heavy_artillery_equipment
			self_propelled_super_heavy_artillery_equipment
		}

		mutually_exclusive = { obukhov_upgrade_5 }

		equipment_bonus = {
			defense = 0.05
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.25
		}

		on_complete = {
			RUS_calculate_daily_funds_gain_and_requirement = yes
			custom_effect_tooltip = {
				localization_key = RUS_MIO_XP_Gain_tt XP_ICON = RUS_Army_XP_icon
			}
			custom_effect_tooltip = tooltip_white_line
			FROM = {
				RUS_unlock_obukhov_policies = yes # `unlock_mio_policy_tooltip` doesn't work in the MIO scope for some reason
			}
			hidden_effect = {
				set_variable = { RUS_mio_xp_gain = 0.3 }
				if = {
					limit = {
						FROM = {
							mio:RUS_obukhov_organisation = {
								is_mio_assigned_to_task = yes
							}
						}
					}
					FROM = { add_ideas = RUS_obukhov_army_xp }
				}
			}
		}
	}

	trait = {
		token = obukhov_upgrade_7
		name = KR_MIO_Trait_extended_barrel_life
		icon = GFX_KR_generic_mio_trait_icon_army_xp

		position = { x = 8 y = 0 }

		limit_to_equipment_type = { anti_tank_equipment }

		mutually_exclusive = { obukhov_upgrade_8 }

		equipment_bonus = {
			reliability = 0.15
			soft_attack = 1.0
			defense = 1.0
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = RUS_manufacturer_trait_xp_gained_tt
				XP = RUS_Army_XP_icon
			}
		}
	}

	trait = {
		token = obukhov_upgrade_8
		name = KR_MIO_Trait_increased_firing_range
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 9 y = 0 }

		limit_to_equipment_type = { anti_tank_equipment }

		mutually_exclusive = { obukhov_upgrade_7 }

		equipment_bonus = {
			hard_attack = 0.05
			ap_attack = 0.1
		}

		on_complete = {
			multiply_variable = { weekly_funds_requirement = 0.33 }
			custom_effect_tooltip = RUS_manufacturer_trait_xp_min_funds_tt
			custom_effect_tooltip = tooltip_white_line
			FROM = { army_experience = 50 }
			add_to_variable = { total_campaign_xp = 50 }
		}
	}

	trait = {
		token = obukhov_upgrade_1_1
		name = KR_MIO_Trait_tsaritsyn_factory_s_repair_procedures
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { obukhov_upgrade_1 obukhov_upgrade_2 obukhov_upgrade_3 }

		position = { x = 1 y = 1 }

		limit_to_equipment_type = { anti_air_equipment }

		mutually_exclusive = { obukhov_upgrade_1_2 }

		equipment_bonus = {
			reliability = 0.15
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.3
		}
	}

	trait = {
		token = obukhov_upgrade_1_2
		name = KR_MIO_Trait_improved_repair_procedures
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { obukhov_upgrade_1 obukhov_upgrade_2 obukhov_upgrade_3 }

		position = { x = 3 y = 1 }

		limit_to_equipment_type = { anti_air_equipment }

		mutually_exclusive = { obukhov_upgrade_1_1 }

		equipment_bonus = {
			reliability = 0.15
		}

		production_bonus = {
			production_resource_need_factor = 0.5
		}
	}

	trait = {
		token = obukhov_upgrade_1_4
		name = KR_MIO_Trait_collaborate_with_the_ona
		icon = GFX_generic_mio_trait_icon_defense

		any_parent = { obukhov_upgrade_5 obukhov_upgrade_6 }

		position = { x = 5 y = 1 }

		limit_to_equipment_type = {
			artillery_equipment
			super_heavy_artillery_equipment
			self_propelled_super_heavy_artillery_equipment
		}

		mutually_exclusive = { obukhov_upgrade_1_5 }

		equipment_bonus = {
			defense = 0.05
		}
	}

	trait = {
		token = obukhov_upgrade_1_5
		name = KR_MIO_Trait_specialise_in_heavy_artillery
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { obukhov_upgrade_5 obukhov_upgrade_6 }

		position = { x = 7 y = 1 }

		limit_to_equipment_type = {
			artillery_equipment
			super_heavy_artillery_equipment
			self_propelled_super_heavy_artillery_equipment
		}

		mutually_exclusive = { obukhov_upgrade_1_4 }

		equipment_bonus = {
			breakthrough = 0.05
		}
	}

	trait = {
		token = obukhov_upgrade_1_6
		name = KR_MIO_Trait_arkhangelsk_contracts
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		any_parent = { obukhov_upgrade_7 obukhov_upgrade_8 }

		available = {
			FROM = {
				owns_state = 214
			}
		}

		position = { x = 8 y = 1 }

		mutually_exclusive = { obukhov_upgrade_1_7 }

		on_complete = {
			FROM = {
				214 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	trait = {
		token = obukhov_upgrade_1_7
		name = KR_MIO_Trait_apc_shells
		icon = GFX_generic_mio_trait_icon_hard_attack

		any_parent = { obukhov_upgrade_7 obukhov_upgrade_8 }

		position = { x = 9 y = 1 }

		limit_to_equipment_type = { anti_tank_equipment }

		mutually_exclusive = { obukhov_upgrade_1_6 }

		equipment_bonus = {
			hard_attack = 0.05
		}
	}

	trait = {
		token = obukhov_upgrade_2_1
		name = KR_MIO_Trait_short_term_government_contracts
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		any_parent = { obukhov_upgrade_1_1 obukhov_upgrade_1_2 }

		position = { x = 1 y = 2 }

		limit_to_equipment_type = { anti_air_equipment }

		mutually_exclusive = { obukhov_upgrade_2_2 }

		production_bonus = {
			production_efficiency_cap_factor = -0.1
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.2
		}
	}

	trait = {
		token = obukhov_upgrade_2_2
		name = KR_MIO_Trait_long_term_government_contracts
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		any_parent = { obukhov_upgrade_1_1 obukhov_upgrade_1_2 }

		position = { x = 3 y = 2 }

		limit_to_equipment_type = { anti_air_equipment }

		mutually_exclusive = { obukhov_upgrade_2_1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = obukhov_upgrade_2_4
		name = KR_MIO_Trait_specialize_in_siege_artillery
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { obukhov_upgrade_1_4 obukhov_upgrade_1_5 }

		position = { x = 5 y = 2 }

		limit_to_equipment_type = {
			artillery_equipment
			super_heavy_artillery_equipment
			self_propelled_super_heavy_artillery_equipment
		}

		mutually_exclusive = { obukhov_upgrade_2_5 }

		equipment_bonus = {
			breakthrough = 0.05
		}
	}

	trait = {
		token = obukhov_upgrade_2_5
		name = KR_MIO_Trait_specialize_in_naval_artillery
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		any_parent = { obukhov_upgrade_1_4 obukhov_upgrade_1_5 }

		position = { x = 7 y = 2 }

		mutually_exclusive = { obukhov_upgrade_2_4 }

		on_complete = {
			FROM = {
				214 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	trait = {
		token = obukhov_upgrade_2_6
		name = KR_MIO_Trait_apcbc_shells
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { obukhov_upgrade_1_6 obukhov_upgrade_1_7 }

		position = { x = 8 y = 2 }

		limit_to_equipment_type = { anti_tank_equipment }

		mutually_exclusive = { obukhov_upgrade_2_7 }

		equipment_bonus = {
			build_cost_ic = -0.1
		}

		production_bonus = {
			production_efficiency_cap_factor = -0.05
		}
	}

	trait = {
		token = obukhov_upgrade_2_7
		name = KR_MIO_Trait_apbc_shells
		icon = GFX_generic_mio_trait_icon_ap_attack

		any_parent = { obukhov_upgrade_1_6 obukhov_upgrade_1_7 }

		position = { x = 9 y = 2 }

		limit_to_equipment_type = { anti_tank_equipment }

		mutually_exclusive = { obukhov_upgrade_2_6 }

		equipment_bonus = {
			hard_attack = 0.1
			ap_attack = 0.15
		}

		production_bonus = {
			production_resource_need_factor = 0.5
		}
	}

	trait = {
		token = obukhov_upgrade_3_1_lvl4
		name = KR_MIO_Trait_quality_manufacturing_tools
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_1_lvl4 = yes
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.1
		}

		on_complete = {
			RUS_obukhov_eff_cap_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_1_lvl3
		name = KR_MIO_Trait_quality_manufacturing_tools
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_1_lvl3 = yes
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}

		on_complete = {
			RUS_obukhov_eff_cap_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_1_lvl2
		name = KR_MIO_Trait_quality_manufacturing_tools
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_1_lvl2 = yes
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}

		on_complete = {
			RUS_obukhov_eff_cap_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_1_lvl1
		name = KR_MIO_Trait_quality_manufacturing_tools
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_1_lvl1 = yes
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.0125
		}
	}

	trait = {
		token = obukhov_upgrade_3_2_lvl4
		name = KR_MIO_Trait_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_2_lvl4 = yes
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.4
		}

		on_complete = {
			RUS_obukhov_eff_gro_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_2_lvl3
		name = KR_MIO_Trait_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_2_lvl3 = yes
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.2
		}

		on_complete = {
			RUS_obukhov_eff_gro_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_2_lvl2
		name = KR_MIO_Trait_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_2_lvl2 = yes
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}

		on_complete = {
			RUS_obukhov_eff_gro_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_2_lvl1
		name = KR_MIO_Trait_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_2_lvl1 = yes
		}

		position = { x = 3 y = 4 }

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = obukhov_upgrade_3_3_lvl4
		name = KR_MIO_Trait_eliminate_resource_waste
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_3_lvl4 = yes
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.4
		}

		on_complete = {
			RUS_obukhov_resource_need_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_3_lvl3
		name = KR_MIO_Trait_eliminate_resource_waste
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_3_lvl3 = yes
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.2
		}

		on_complete = {
			RUS_obukhov_resource_need_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_3_lvl2
		name = KR_MIO_Trait_eliminate_resource_waste
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_3_lvl2 = yes
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}

		on_complete = {
			RUS_obukhov_resource_need_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_3_lvl1
		name = KR_MIO_Trait_eliminate_resource_waste
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_3_lvl1 = yes
		}

		position = { x = 6 y = 4 }

		production_bonus = {
			production_resource_need_factor = -0.05
		}
	}

	trait = {
		token = obukhov_upgrade_3_4_lvl4
		name = KR_MIO_Trait_dedicated_conversion_facilities
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_4_lvl4 = yes
		}

		position = { x = 9 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 1.0
		}

		on_complete = {
			RUS_obukhov_conversion_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_4_lvl3
		name = KR_MIO_Trait_dedicated_conversion_facilities
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_4_lvl3 = yes
		}

		position = { x = 9 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.5
		}

		on_complete = {
			RUS_obukhov_conversion_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_4_lvl2
		name = KR_MIO_Trait_dedicated_conversion_facilities
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_4_lvl2 = yes
		}

		position = { x = 9 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.25
		}

		on_complete = {
			RUS_obukhov_conversion_tt = yes
		}
	}

	trait = {
		token = obukhov_upgrade_3_4_lvl1
		name = KR_MIO_Trait_dedicated_conversion_facilities
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { obukhov_upgrade_2_1 obukhov_upgrade_2_2 obukhov_upgrade_2_4 obukhov_upgrade_2_5 obukhov_upgrade_2_6 obukhov_upgrade_2_7 }

		visible = {
			RUS_obukhov_upgrade_3_4_lvl1 = yes
		}

		position = { x = 9 y = 4 }

		production_bonus = {
			production_conversion_speed_factor = 0.12
		}
	}
}
RUS_bmz_organisation = {
	name = bmz
	icon = GFX_idea_bmz
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 224 } } #Bryansk

	on_industrial_manufacturer_assigned = {
		add_to_variable = { RUS_mio_assigned_manufacturer_num = 1 }
		RUS_calculate_daily_funds_gain_and_requirement = yes
		custom_effect_tooltip = RUS_MIO_Research_Gain_tt
		custom_effect_tooltip = tooltip_white_line
	}

	on_industrial_manufacturer_unassigned = {
		subtract_from_variable = { RUS_mio_assigned_manufacturer_num = 1 }
	}

	on_tech_research_completed = {
		if = {
			limit = { NOT = { has_mio_flag = RUS_disable_research_speed_loss } }
			RUS_reset_mio_research_speeds = yes
		}
	}

	on_tech_research_cancelled = {
		RUS_reset_mio_research_speeds = yes
	}

	equipment_type = {
		artillery_equipment
		rocket_artillery_equipment
		super_heavy_artillery_equipment
		self_propelled_super_heavy_artillery_equipment
		railway_gun_equipment
		super_heavy_railway_gun_equipment
		train_equipment
	}

	research_categories = {
		mio_cat_all_artillery_equipment
		train_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = RUS_bmz_mio_desc
	}

	trait = {
		token = bmz_upgrade_1
		name = KR_MIO_Trait_apbc_shells
		icon = GFX_generic_mio_trait_icon_breakthrough

		position = { x = 3 y = 0 }

		limit_to_equipment_type = {
			artillery_equipment
			rocket_artillery_equipment
			super_heavy_artillery_equipment
			self_propelled_super_heavy_artillery_equipment
		}

		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = bmz_upgrade_2
		name = KR_MIO_Trait_expand_northern_routes
		icon = GFX_KR_generic_mio_trait_icon_railway

		available = {
			FROM = {
				owns_state = 215
			}
		}

		position = { x = 5 y = 0 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}

		on_complete = {
			FROM = {
				build_railway = {
					level = 1
					start_province = 3189
					target_province = 9119
				}
				custom_effect_tooltip = tooltip_white_line
				215 = {
					add_building_construction = {
						type = supply_node
						level = 1
						instant_build = yes
						province = 9119
					}
				}
			}
		}
	}

	trait = {
		token = bmz_upgrade_1_1
		name = KR_MIO_Trait_simplify_assembly_procedures
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		position = { x = 0 y = 1 }

		mutually_exclusive = { bmz_upgrade_1_2 }

		production_bonus = {
			production_resource_need_factor = -0.5
		}

		on_complete = {
			set_temp_variable = { weekly_research_speed_to_add = research_bonus }
			multiply_temp_variable = { weekly_research_speed_to_add = 0.04 }
			custom_effect_tooltip = RUS_manufacturer_trait_research_gain_bmz_tt
			add_to_variable = { weekly_research_speed_gain = weekly_research_speed_to_add }
		}
	}

	trait = {
		token = bmz_upgrade_1_2
		name = KR_MIO_Trait_standardise_artillery_parts
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 2 y = 1 }

		mutually_exclusive = { bmz_upgrade_1_1 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 2
		}

		on_complete = {
			add_mio_research_bonus = 0.17
			add_to_variable = { total_campaign_xp = 17 }
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = RUS_manufacturer_research_no_reset_tt
			set_mio_flag = RUS_disable_research_speed_loss
		}
	}

	trait = {
		token = bmz_upgrade_1_3
		name = KR_MIO_Trait_expand_southern_routes
		icon = GFX_KR_generic_mio_trait_icon_supply

		available = {
			FROM = {
				owns_state = 1006
			}
		}

		position = { x = 4 y = 1 }

		any_parent = { bmz_upgrade_1 bmz_upgrade_2 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}

		on_complete = {
			FROM = {
				1006 = {
					add_building_construction = {
						type = supply_node
						level = 1
						instant_build = yes
						province = 9691
					}
				}
			}
		}
	}

	trait = {
		token = bmz_upgrade_1_4
		name = KR_MIO_Trait_collaborate_with_the_ona
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		position = { x = 6 y = 1 }

		mutually_exclusive = { bmz_upgrade_1_5 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}

		on_complete = {
			add_to_variable = { max_research_speed = 0.25 tooltip = KR_mio_manufacturer_trait_research_cap_tt }
		}
	}

	trait = {
		token = bmz_upgrade_1_5
		name = KR_MIO_Trait_collaborate_with_motovilikha
		icon = GFX_generic_mio_trait_icon_soft_attack

		position = { x = 8 y = 1 }

		mutually_exclusive = { bmz_upgrade_1_4 }

		limit_to_equipment_type = {
			artillery_equipment
			rocket_artillery_equipment
			super_heavy_artillery_equipment
			self_propelled_super_heavy_artillery_equipment
		}

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			add_mio_research_bonus = 0.12
			add_to_variable = { total_campaign_xp = 12 }
		}
	}

	trait = {
		token = bmz_upgrade_2_1
		name = KR_MIO_Trait_decreased_shell_windage
		icon = GFX_generic_mio_trait_icon_breakthrough

		position = { x = 1 y = 2 }

		any_parent = { bmz_upgrade_1_1 bmz_upgrade_1_2 }

		limit_to_equipment_type = {
			artillery_equipment
			rocket_artillery_equipment
			super_heavy_artillery_equipment
			self_propelled_super_heavy_artillery_equipment
		}

		equipment_bonus = {
			breakthrough = 0.05
		}
	}

	trait = {
		token = bmz_upgrade_2_2
		name = KR_MIO_Trait_crane_operated_reloading_mechanism
		icon = GFX_generic_mio_department_icon_tank_general_spg

		position = { x = 3 y = 2 }

		all_parents = { bmz_upgrade_1_3 }

		limit_to_equipment_type = {
			railway_gun_equipment
			super_heavy_railway_gun_equipment
		}

		equipment_bonus = {
			railway_gun_attack = 0.1
			maximum_speed = 0.1
		}
	}

	trait = {
		token = bmz_upgrade_2_3
		name = KR_MIO_Trait_experimental_prototypes
		icon = GFX_KR_generic_mio_trait_icon_railway_gun

		available = {
			FROM = {
				owns_state = 224
				has_tech = railway_gun
			}
		}

		position = { x = 5 y = 2 }

		all_parents = { bmz_upgrade_1_3 }

		on_complete = {
			FROM = {
				create_railway_gun = {
					name = "Misha"
					equipment = railway_gun_equipment_1
					location = 3335
				}
				create_railway_gun = {
					name = "Masha"
					equipment = railway_gun_equipment_1
					location = 3335
				}
			}
		}
	}

	trait = {
		token = bmz_upgrade_2_4
		name = KR_MIO_Trait_thoroughly_tested_designs
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 7 y = 2 }

		any_parent = { bmz_upgrade_1_4 bmz_upgrade_1_5 }

		limit_to_equipment_type = {
			artillery_equipment
			rocket_artillery_equipment
			super_heavy_artillery_equipment
			self_propelled_super_heavy_artillery_equipment
		}

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = bmz_upgrade_3_1
		name = KR_MIO_Trait_illumination_shells
		icon = GFX_generic_mio_trait_icon_soft_attack

		position = { x = 4 y = 3 }

		all_parents = { bmz_upgrade_2_2 bmz_upgrade_2_3 }

		limit_to_equipment_type = {
			artillery_equipment
			rocket_artillery_equipment
			super_heavy_artillery_equipment
			self_propelled_super_heavy_artillery_equipment
		}

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = bmz_upgrade_4_1
		name = KR_MIO_Trait_standardised_ammunition_sizes
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 2 y = 4 }

		all_parents = { bmz_upgrade_2_1 bmz_upgrade_2_2 }

		equipment_bonus = {
			build_cost_ic = -0.025
		}
	}

	trait = {
		token = bmz_upgrade_4_2
		name = KR_MIO_Trait_increased_propellant
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 6 y = 4 }

		all_parents = { bmz_upgrade_2_3 bmz_upgrade_2_4 }

		limit_to_equipment_type = {
			artillery_equipment
			rocket_artillery_equipment
			super_heavy_artillery_equipment
			self_propelled_super_heavy_artillery_equipment
		}

		equipment_bonus = {
			reliability = 0.05
		}
	}
}
@RUS_amo_cic_base = 3000
RUS_amo_organisation = {
	name = amo_non_socrus
	icon = GFX_idea_amo
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 219 } } #Moscow

	on_tech_research_completed = {
		# Add_cic formula: (RUS_amo_cic_bonus * size) + @RUS_amo_cic_base
		#RUS_amo_cic_bonus further affected by trait amo_upgrade_1_2, trait amo_upgrade_1_4, and policy RUS_mio_policy_expand_weapon_deals
		set_temp_variable = { RUS_amo_cic_trait_sum = RUS_amo_cic_bonus }
		multiply_temp_variable = { RUS_amo_cic_trait_sum = size }
		add_to_temp_variable = { RUS_amo_cic_trait_sum = @RUS_amo_cic_base }

		FROM = { add_cic = RUS_amo_cic_trait_sum }
		add_to_variable = { RUS_amo_total_campaign_cic = RUS_amo_cic_trait_sum }
		custom_effect_tooltip = RUS_amo_research_cic_tt
	}

	equipment_type = {
		motorized_equipment
		mechanized_equipment
		armor
	}

	research_categories = {
		mio_cat_tech_all_motorized_mechanized
		mio_cat_tech_all_armor_and_modules
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_amo_mio_desc
	}

	trait = {
		token = amo_upgrade_1
		name = KR_MIO_Trait_increased_motorised_engine_lifespan
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 1 y = 0 }

		limit_to_equipment_type = { motorized_equipment }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = amo_upgrade_2
		name = KR_MIO_Trait_increased_tank_engine_lifespan
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 4 y = 0 }

		limit_to_equipment_type = {
			armor
		}

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = amo_upgrade_3
		name = KR_MIO_Trait_increased_mechanised_engine_lifespan
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 7 y = 0 }

		limit_to_equipment_type = { mechanized_equipment }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = amo_upgrade_1_1
		name = KR_MIO_Trait_extreme_motorised_engine_output
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x = -1 y = 2 }
		relative_position_id = amo_upgrade_1

		limit_to_equipment_type = { motorized_equipment }

		any_parent = { amo_upgrade_1 amo_upgrade_2 }

		mutually_exclusive = { amo_upgrade_1_2 }

		equipment_bonus = {
			maximum_speed = 0.2
			fuel_consumption = 0.1
		}

		production_bonus = {
			production_resource_need_factor = 0.1
		}

		on_complete = {
			FROM = { add_ideas = RUS_amo_cic_1 }
		}
	}

	trait = {
		token = amo_upgrade_1_2
		name = KR_MIO_Trait_moderate_motorised_engine_output
		icon = GFX_KR_generic_mio_trait_icon_cic

		position = { x = 0 y = 2 }
		relative_position_id = amo_upgrade_1

		any_parent = { amo_upgrade_1 amo_upgrade_2 }

		mutually_exclusive = { amo_upgrade_1_1 }

		limit_to_equipment_type = { motorized_equipment }

		equipment_bonus = {
			maximum_speed = 0.05
		}

		on_complete = {
			add_to_variable = { RUS_amo_cic_bonus = 250 tooltip = RUS_amo_trait_cic_tt }
		}
	}

	trait = {
		token = amo_upgrade_1_3
		name = KR_MIO_Trait_moderate_tank_engine_output
		icon = GFX_KR_generic_mio_trait_icon_fuel_drum

		all_parents = { amo_upgrade_2 }

		position = { x = -1 y = 2 }
		relative_position_id = amo_upgrade_2

		mutually_exclusive = { amo_upgrade_1_3.5 }

		limit_to_equipment_type = { armor }

		equipment_bonus = {
			maximum_speed = 0.05
			fuel_capacity = 1.0
		}
	}

	trait = {
		token = amo_upgrade_1_3.5
		name = KR_MIO_Trait_extreme_tank_engine_output
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { amo_upgrade_2 }

		position = { x = 1 y = 2 }
		relative_position_id = amo_upgrade_2

		mutually_exclusive = { amo_upgrade_1_3 }

		limit_to_equipment_type = { armor }

		equipment_bonus = {
			maximum_speed = 0.2
			fuel_consumption = 0.1
		}

		production_bonus = {
			production_resource_need_factor = 0.1
		}
	}

	trait = {
		token = amo_upgrade_1_4
		name = KR_MIO_Trait_moderate_mechanised_engine_output
		icon = GFX_KR_generic_mio_trait_icon_cic

		position = { x = 0 y = 2 }
		relative_position_id = amo_upgrade_3

		any_parent = { amo_upgrade_2 amo_upgrade_3 }

		mutually_exclusive = { amo_upgrade_1_5 }

		limit_to_equipment_type = { mechanized_equipment }

		equipment_bonus = {
			maximum_speed = 0.05
		}

		on_complete = {
			add_to_variable = { RUS_amo_cic_bonus = 250 tooltip = RUS_amo_trait_cic_tt }
		}
	}

	trait = {
		token = amo_upgrade_1_5
		name = KR_MIO_Trait_extreme_mechanised_engine_output
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x = 1 y = 2 }
		relative_position_id = amo_upgrade_3

		limit_to_equipment_type = { mechanized_equipment }

		any_parent = { amo_upgrade_2 amo_upgrade_3 }

		mutually_exclusive = { amo_upgrade_1_4 }

		equipment_bonus = {
			maximum_speed = 0.2
			fuel_consumption = 0.1
		}

		production_bonus = {
			production_resource_need_factor = 0.1
		}

		on_complete = {
			FROM = { add_ideas = RUS_amo_cic_2 }
		}
	}

	trait = {
		token = amo_upgrade_2_1
		name = KR_MIO_Trait_expanded_external_fuel_tanks
		icon = GFX_KR_generic_mio_trait_icon_fuel_drum

		position = { x = 0 y = 1 }
		relative_position_id = amo_upgrade_1_3

		any_parent = { amo_upgrade_1_1 amo_upgrade_1_2 }
		any_parent = { amo_upgrade_1_3 amo_upgrade_1_3.5 }

		limit_to_equipment_type = { armor }

		equipment_bonus = {
			fuel_capacity = 1.0
		}
	}

	trait = {
		token = amo_upgrade_2_2
		name = KR_MIO_Trait_high_quality_engines
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 2 y = 1 }
		relative_position_id = amo_upgrade_1_3

		any_parent = { amo_upgrade_1_3 amo_upgrade_1_3.5 }
		any_parent = { amo_upgrade_1_4 amo_upgrade_1_5 }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = amo_upgrade_3_1
		name = KR_MIO_Trait_improved_amo
		icon = GFX_icon_amo_MIO

		visible = {
			FROM = { NOT = { has_country_flag = RUS_rename_industries } }
		}

		special_trait_background = yes

		available = {
			FROM = {
				custom_override_tooltip = {
					tooltip = {
						localization_key = has_completed_decision_in_focus
						DECISION = RUS_modernisation_of_AMO
						FOCUS = "[RUS_AmoImzUpgradeFocusTrigger]"
					}
					has_country_flag = improve_amo
				}
			}
		}

		position = { x = 1 y = 2 }
		relative_position_id = amo_upgrade_1_3

		all_parents = { amo_upgrade_2_1 amo_upgrade_2_2 }

		equipment_bonus = {
			reliability = 0.1
			maximum_speed = 0.1
		}
	}

	trait = {
		token = amo_upgrade_3_1_soc_rus
		name = KR_MIO_Trait_improved_zil
		icon = GFX_icon_amo_MIO

		visible = {
			FROM = { has_country_flag = RUS_rename_industries }
		}

		special_trait_background = yes

		available = {
			FROM = {
				custom_override_tooltip = {
					tooltip = {
						localization_key = has_completed_decision_in_focus
						DECISION = RUS_modernisation_of_AMO
						FOCUS = RUS_military_production
					}
					has_country_flag = improve_amo
				}
			}
		}

		position = { x = 1 y = 2 }
		relative_position_id = amo_upgrade_1_3

		all_parents = { amo_upgrade_2_1 amo_upgrade_2_2 }

		equipment_bonus = {
			reliability = 0.1
			maximum_speed = 0.1
		}
	}
}

RUS_naz_organisation = {
	name = naz
	icon = GFX_idea_naz
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 252 } } #Nizhny Novgorod

	equipment_type = {
		motorized_equipment
		mechanized_equipment
		motorized_rocket_equipment
		light_tank_artillery_chassis
		medium_tank_artillery_chassis
		heavy_tank_artillery_chassis
		light_tank_destroyer_chassis
		medium_tank_destroyer_chassis
		heavy_tank_destroyer_chassis
		light_tank_aa_chassis
		medium_tank_aa_chassis
		heavy_tank_aa_chassis
		armored_car_equipment
	}

	research_categories = {
		mio_cat_tech_all_motorized_mechanized
		mio_cat_tech_all_armor_and_modules
	}

	on_tech_research_completed = {
		if = {
			limit = { FROM = { has_country_flag = naz_research_funds_gain } }
			hidden_effect = {
				FROM = {
					country_event = { id = russia_events.1001 days = 1 }
				}
			}
			custom_effect_tooltip = {
				localization_key = RUS_naz_laz_funds_share_tt
				MIO_1 = naz MIO_2 = laz
			}
		}
		else = {
			custom_effect_tooltip = {
				localization_key = KR_mio_has_completed_trait_NOT TRAIT = KR_MIO_Trait_interservice_cooperation
			}
		}
	}

	ai_will_do = { base = 1000 }

	initial_trait = {
		name = RUS_naz_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = naz_upgrade_1
		name = KR_MIO_Trait_standardise_motorised_mechanised_equipment
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 0 y = 0 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
			armored_car_equipment
		}

		production_bonus = {
			production_cost_factor = -0.025
		}
	}

	trait = {
		token = naz_upgrade_2
		name = KR_MIO_Trait_favour_longer_term_contracts_for_motorised_mechanised
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		position = { x = 3 y = 0 }

		mutually_exclusive = { naz_upgrade_3 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
			armored_car_equipment
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = naz_upgrade_3
		name = KR_MIO_Trait_favour_longer_term_contracts_for_spa_spat_spaa
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		position = { x = 5 y = 0 }

		mutually_exclusive = { naz_upgrade_2 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = naz_upgrade_4
		name = KR_MIO_Trait_standardise_spa_spat_spaa
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 8 y = 0 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_cost_factor = -0.025
		}
	}

	trait = {
		token = naz_upgrade_1_1
		name = KR_MIO_Trait_interservice_competition_for_material_suppliers
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { naz_upgrade_1 }
		any_parent = { naz_upgrade_2 naz_upgrade_3 }

		position = { x = 2 y = 1 }

		mutually_exclusive = { naz_upgrade_1_2 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
			armored_car_equipment
		}

		production_bonus = {
			production_resource_need_factor = -0.15
		}
	}

	trait = {
		token = naz_upgrade_1_2
		name = KR_MIO_Trait_interservice_cooperation
		icon = GFX_KR_generic_mio_trait_icon_funds

		any_parent = { naz_upgrade_2 naz_upgrade_3 }

		available = {
			FROM = {
				owns_state = 248
			}
		}

		position = { x = 4 y = 1 }

		mutually_exclusive = { naz_upgrade_1_1 naz_upgrade_1_3 }

		on_complete = {
			custom_effect_tooltip = {
				localization_key = RUS_naz_laz_funds_share_tt
				MIO_1 = naz MIO_2 = laz
			}
			FROM = {
				248 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				set_country_flag = naz_research_funds_gain
			}
		}
	}

	trait = {
		token = naz_upgrade_1_3
		name = KR_MIO_Trait_interservice_competition_for_material_suppliers
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { naz_upgrade_4 }
		any_parent = { naz_upgrade_2 naz_upgrade_3 }

		position = { x = 6 y = 1 }

		mutually_exclusive = { naz_upgrade_1_2 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_resource_need_factor = -0.15
		}
	}

	trait = {
		token = naz_upgrade_2_1
		name = KR_MIO_Trait_simplified_motorised_mechanised_assembly_proccedures
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { naz_upgrade_1 }

		position = { x = 0 y = 2 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
			armored_car_equipment
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = naz_upgrade_2_2
		name = KR_MIO_Trait_favour_rapid_upscaling_of_motorised_mechanised
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { naz_upgrade_1_1 naz_upgrade_1_2 naz_upgrade_1_3 }

		position = { x = 3 y = 2 }

		mutually_exclusive = { naz_upgrade_2_3 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
			armored_car_equipment
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = naz_upgrade_2_3
		name = KR_MIO_Trait_favour_rapid_upscaling_of_spa_spat_spaa
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { naz_upgrade_1_1 naz_upgrade_1_2 naz_upgrade_1_3 }

		position = { x = 5 y = 2 }

		mutually_exclusive = { naz_upgrade_2_2 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = naz_upgrade_2_4
		name = KR_MIO_Trait_simplified_spa_spat_spaa_assembly_proccedures
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { naz_upgrade_4 }

		position = { x = 8 y = 2 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = naz_upgrade_3_1
		name = KR_MIO_Trait_build_our_own_facilities
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { naz_upgrade_2_1 }
		any_parent = { naz_upgrade_2_2 naz_upgrade_2_3 }

		position = { x = 2 y = 3 }

		mutually_exclusive = { naz_upgrade_3_2 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
			armored_car_equipment
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = naz_upgrade_3_2
		name = KR_MIO_Trait_build_joint_facilities
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { naz_upgrade_2_2 naz_upgrade_2_3 }

		position = { x = 4 y = 3 }

		mutually_exclusive = { naz_upgrade_3_1 naz_upgrade_3_3 }

		production_bonus = {
			production_conversion_speed_factor = 0.8
		}
	}

	trait = {
		token = naz_upgrade_3_3
		name = KR_MIO_Trait_build_our_own_facilities
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { naz_upgrade_2_4 }
		any_parent = { naz_upgrade_2_2 naz_upgrade_2_3 }

		position = { x = 6 y = 3 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		mutually_exclusive = { naz_upgrade_3_2 }

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = naz_upgrade_4_1
		name = KR_MIO_Trait_motorised_mechanised_resource_recycling_branch
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { naz_upgrade_2_1 }

		position = { x = 0 y = 4 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
			armored_car_equipment
		}

		production_bonus = {
			production_resource_need_factor = -0.15
		}
	}

	trait = {
		token = naz_upgrade_4_2
		name = KR_MIO_Trait_improved_naz
		icon = GFX_icon_naz_MIO

		visible = {
			FROM = { NOT = { has_country_flag = RUS_rename_industries } }
		}

		available = {
			FROM = {
				if = {
					limit = { original_tag = RUS }
					has_completed_focus = RUS_nizhegorodsky_avtomobilny_focus
				}
				else_if = {
					limit = { original_tag = FER }
					has_completed_focus = FER_return_to_kremlin
				}
				else = {
					has_completed_focus = RUS_secret_weapons_development
				}
			}
		}

		any_parent = { naz_upgrade_3_1 naz_upgrade_3_2 naz_upgrade_3_3 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
			production_cost_factor = -0.05
		}
	}

	trait = {
		token = naz_upgrade_4_2_soc_rus
		name = KR_MIO_Trait_improved_gaz
		icon = GFX_icon_naz_MIO

		visible = {
			FROM = { has_country_flag = RUS_rename_industries }
		}

		available = {
			FROM = { has_completed_focus = RUS_nizhegorodsky_avtomobilny_focus }
		}

		any_parent = { naz_upgrade_3_1 naz_upgrade_3_2 naz_upgrade_3_3 }

		special_trait_background = yes

		position = { x = 4 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
			production_cost_factor = -0.05
		}
	}

	trait = {
		token = naz_upgrade_4_3
		name = KR_MIO_Trait_spa_spat_spaa_resource_recycling_branch
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { naz_upgrade_2_4 }

		position = { x = 8 y = 4 }

		limit_to_equipment_type = {
			light_tank_artillery_chassis
			medium_tank_artillery_chassis
			heavy_tank_artillery_chassis
			light_tank_destroyer_chassis
			medium_tank_destroyer_chassis
			heavy_tank_destroyer_chassis
			light_tank_aa_chassis
			medium_tank_aa_chassis
			heavy_tank_aa_chassis
		}

		production_bonus = {
			production_resource_need_factor = -0.15
		}
	}
}

RUS_laz_organisation = {
	name = laz_non_socrus
	icon = GFX_idea_laz
	allowed = {
		is_russian_tag = yes
	}
	available = { FROM = { owns_state = 248 } } #Yaroslav

	equipment_type = {
		motorized_equipment
		mechanized_equipment
		motorized_rocket_equipment
	}

	research_categories = {
		mio_cat_tech_all_motorized_mechanized
	}

	on_tech_research_completed = {
		if = {
			limit = { FROM = { has_country_flag = laz_research_funds_gain } }
			FROM = {
				mio:RUS_naz_organisation = {
					add_mio_funds = 1000
				}
			}
			custom_effect_tooltip = {
				localization_key = RUS_naz_laz_funds_share_tt
				MIO_1 = laz MIO_2 = naz
			}
		}
		else = {
			custom_effect_tooltip = {
				localization_key = KR_mio_has_completed_trait_NOT TRAIT = KR_MIO_Trait_collaboration_with_novgorod
			}
		}
	}

	ai_will_do = { base = 1 }

	initial_trait = {
		name = RUS_laz_mio_desc

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = laz_upgrade_1
		name = KR_MIO_Trait_collaboration_with_novgorod
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 3 y = 0 }

		mutually_exclusive = { laz_upgrade_2 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
		}

		equipment_bonus = {
			fuel_consumption = -0.1
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = RUS_naz_laz_funds_share_tt
				MIO_1 = laz MIO_2 = naz
			}
			FROM = { set_country_flag = laz_research_funds_gain }
		}
	}

	trait = {
		token = laz_upgrade_2
		name = KR_MIO_Trait_share_engine_design_with_aircraft_department
		icon = GFX_KR_generic_mio_trait_icon_political_power

		position = { x = 5 y = 0 }

		mutually_exclusive = { laz_upgrade_1 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
			motorized_rocket_equipment
		}

		equipment_bonus = {
			fuel_consumption = -0.1
		}

		on_complete = {
			FROM = {
				add_political_power = 75
			}
		}
	}

	trait = {
		token = laz_upgrade_1_1
		name = KR_MIO_Trait_increased_salaries
		icon = GFX_KR_generic_mio_trait_icon_stability

		any_parent = { laz_upgrade_1 laz_upgrade_2 }

		position = { x = 3 y = 1 }

		mutually_exclusive = { laz_upgrade_1_2 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			FROM = {
				add_stability = 0.05
				if = {
					limit = {
						FROM = {
							has_idea = RUS_popular_anger
						}
					}
					set_temp_variable = { RUS_anger_change = -1 }
					if = {
						limit = { check_variable = { RUS_popular_anger = 1 } }
						custom_effect_tooltip = RUS_decrease_pop_anger
						custom_effect_tooltip = tooltip_white_line
						custom_effect_tooltip = RUS_pop_anger_no_effect
					}
					RUS_change_popular_anger = yes
				}
				if = {
					limit = {
						FROM = {
							has_idea = RUS_right_anger
						}
					}
					set_temp_variable = { RUS_anger_change = -1 }
					if = {
						limit = { check_variable = { RUS_right_anger = 1 } }
						custom_effect_tooltip = RUS_decrease_right_anger
						custom_effect_tooltip = tooltip_white_line
						custom_effect_tooltip = RUS_right_anger_no_effect
					}
					RUS_change_right_anger = yes
				}
				if = {
					limit = {
						FROM = {
							has_idea = RUS_left_anger
						}
					}
					set_temp_variable = { RUS_anger_change = -1 }
					if = {
						limit = { check_variable = { RUS_left_anger = 1 } }
						custom_effect_tooltip = RUS_decrease_left_anger
						custom_effect_tooltip = tooltip_white_line
						custom_effect_tooltip = RUS_left_anger_no_effect
					}
					RUS_change_left_anger = yes
				}
			}
		}
	}

	trait = {
		token = laz_upgrade_1_2
		name = KR_MIO_Trait_workplace_propaganda
		icon = GFX_KR_generic_mio_trait_icon_war_support

		any_parent = { laz_upgrade_1 laz_upgrade_2 }

		position = { x = 5 y = 1 }

		mutually_exclusive = { laz_upgrade_1_1 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			FROM = {
				add_war_support = 0.05
				set_temp_variable = { RUS_anger_change = -1 }
				if = {
					limit = {
						OR = {
							has_idea = RUS_military_anger
							has_idea = RUS_military_anger_dem
						}
						check_variable = { RUS_military_anger = 1 }
					}
					custom_effect_tooltip = RUS_decrease_mil_anger
					custom_effect_tooltip = tooltip_white_line
					custom_effect_tooltip = RUS_mil_anger_no_effect
				}
				RUS_change_military_anger = yes
			}
		}
	}

	trait = {
		token = laz_upgrade_2_1
		name = KR_MIO_Trait_slightly_reduce_motorised_mechanised_small_arms_vulnerabilities
		icon = GFX_generic_mio_trait_icon_hardness

		any_parent = { laz_upgrade_1 laz_upgrade_2 }

		position = { x = 0 y = 2 }

		mutually_exclusive = { laz_upgrade_2_2 laz_upgrade_2_3 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
		}

		equipment_bonus = {
			hardness = 0.1
			maximum_speed = -0.1
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_moderately_reduce_motorised_mechanised_small_arms_vulnerabilities TRAIT_2 = KR_MIO_Trait_greatly_reduce_motorised_mechanised_small_arms_vulnerabilities
			}
		}
	}

	trait = {
		token = laz_upgrade_2_2
		name = KR_MIO_Trait_moderately_reduce_motorised_mechanised_small_arms_vulnerabilities
		icon = GFX_generic_mio_trait_icon_hardness

		any_parent = { laz_upgrade_1 laz_upgrade_2 }

		position = { x = 1 y = 2 }

		mutually_exclusive = { laz_upgrade_2_1 laz_upgrade_2_3 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
		}

		equipment_bonus = {
			hardness = 0.2
			maximum_speed = -0.1
		}

		production_bonus = {
			production_resource_need_factor = 0.25
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_slightly_reduce_motorised_mechanised_small_arms_vulnerabilities TRAIT_2 = KR_MIO_Trait_greatly_reduce_motorised_mechanised_small_arms_vulnerabilities
			}
		}
	}

	trait = {
		token = laz_upgrade_2_3
		name = KR_MIO_Trait_greatly_reduce_motorised_mechanised_small_arms_vulnerabilities
		icon = GFX_generic_mio_trait_icon_hardness

		any_parent = { laz_upgrade_1 laz_upgrade_2 }

		position = { x = 2 y = 2 }

		mutually_exclusive = { laz_upgrade_2_1 laz_upgrade_2_2 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
		}

		equipment_bonus = {
			hardness = 0.3
			build_cost_ic = 0.1
			maximum_speed = -0.1
		}

		production_bonus = {
			production_resource_need_factor = 0.25
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_slightly_reduce_motorised_mechanised_small_arms_vulnerabilities TRAIT_2 = KR_MIO_Trait_moderately_reduce_motorised_mechanised_small_arms_vulnerabilities
			}
		}
	}

	trait = {
		token = laz_upgrade_2_4
		name = KR_MIO_Trait_r_d_department_expansion
		icon = GFX_KR_generic_mio_trait_icon_assign_cost

		any_parent = { laz_upgrade_1_1 laz_upgrade_1_2 }

		mutually_exclusive = { laz_upgrade_2_5 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			reliability = 0.1
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.5
		}
	}

	trait = {
		token = laz_upgrade_2_5
		name = KR_MIO_Trait_expanded_design_department
		icon = GFX_KR_generic_mio_trait_icon_funds

		any_parent = { laz_upgrade_1_1 laz_upgrade_1_2 }

		mutually_exclusive = { laz_upgrade_2_4 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			reliability = 0.1
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.1
		}
	}

	trait = {
		token = laz_upgrade_2_6
		name = KR_MIO_Trait_improved_fragmentation_rockets
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { laz_upgrade_1 laz_upgrade_2 }

		position = { x = 6 y = 2 }

		mutually_exclusive = { laz_upgrade_2_7 laz_upgrade_2_8 }

		limit_to_equipment_type = {
			motorized_rocket_equipment
		}

		equipment_bonus = {
			soft_attack = 0.05
			maximum_speed = -0.1
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_improved_shrapnel_rockets TRAIT_2 = KR_MIO_Trait_larger_rocket_rack
			}
		}
	}

	trait = {
		token = laz_upgrade_2_7
		name = KR_MIO_Trait_improved_shrapnel_rockets
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { laz_upgrade_1 laz_upgrade_2 }

		position = { x = 7 y = 2 }

		mutually_exclusive = { laz_upgrade_2_6 laz_upgrade_2_8 }

		limit_to_equipment_type = {
			motorized_rocket_equipment
		}

		equipment_bonus = {
			soft_attack = 0.1
			maximum_speed = -0.1
		}

		production_bonus = {
			production_resource_need_factor = 0.25
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_improved_fragmentation_rockets TRAIT_2 = KR_MIO_Trait_larger_rocket_rack
			}
		}
	}

	trait = {
		token = laz_upgrade_2_8
		name = KR_MIO_Trait_larger_rocket_rack
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { laz_upgrade_1 laz_upgrade_2 }

		position = { x = 8 y = 2 }

		mutually_exclusive = { laz_upgrade_2_6 laz_upgrade_2_7 }

		limit_to_equipment_type = {
			motorized_rocket_equipment
		}

		equipment_bonus = {
			soft_attack = 0.15
			build_cost_ic = 0.1
			maximum_speed = -0.1
		}

		production_bonus = {
			production_resource_need_factor = 0.25
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_improved_fragmentation_rockets TRAIT_2 = KR_MIO_Trait_improved_shrapnel_rockets
			}
		}
	}

	trait = {
		token = laz_upgrade_3_1
		name = KR_MIO_Trait_simplified_motorised_mechanised_transmission
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { laz_upgrade_2_1 laz_upgrade_2_2 laz_upgrade_2_3 }
		any_parent = { laz_upgrade_2_4 laz_upgrade_2_5 }

		mutually_exclusive = { laz_upgrade_3_2 }

		position = { x = 1 y = 3 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
		}

		equipment_bonus = {
			breakthrough = 0.25
			maximum_speed = -0.1
		}
	}

	trait = {
		token = laz_upgrade_3_2
		name = KR_MIO_Trait_smoother_motorised_mechanised_transmission
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { laz_upgrade_2_1 laz_upgrade_2_2 laz_upgrade_2_3 }
		any_parent = { laz_upgrade_2_4 laz_upgrade_2_5 }

		mutually_exclusive = { laz_upgrade_3_1 }

		position = { x = 2 y = 3 }

		limit_to_equipment_type = {
			motorized_equipment
			mechanized_equipment
		}

		equipment_bonus = {
			breakthrough = 0.25
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.3
		}
	}

	trait = {
		token = laz_upgrade_3_3
		name = KR_MIO_Trait_civilian_renovation
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		any_parent = { laz_upgrade_2_4 laz_upgrade_2_5 }

		available = {
			FROM = {
				owns_state = 248
			}
		}

		mutually_exclusive = { laz_upgrade_3_4 }

		position = { x = 3 y = 3 }

		on_complete = {
			FROM = {
				248 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	trait = {
		token = laz_upgrade_3_4
		name = KR_MIO_Trait_military_renovation
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		any_parent = { laz_upgrade_2_4 laz_upgrade_2_5 }

		available = {
			FROM = {
				owns_state = 248
			}
		}

		mutually_exclusive = { laz_upgrade_3_3 }

		position = { x = 5 y = 3 }

		on_complete = {
			FROM = {
				248 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	trait = {
		token = laz_upgrade_3_5
		name = KR_MIO_Trait_heavier_rocket_payload
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { laz_upgrade_2_4 laz_upgrade_2_5 }
		any_parent = { laz_upgrade_2_6 laz_upgrade_2_7 laz_upgrade_2_8 }

		mutually_exclusive = { laz_upgrade_3_6 }

		position = { x = 6 y = 3 }

		limit_to_equipment_type = {
			motorized_rocket_equipment
		}

		equipment_bonus = {
			breakthrough = 0.25
			maximum_speed = -0.1
		}
	}

	trait = {
		token = laz_upgrade_3_6
		name = KR_MIO_Trait_spiral_launch_frame
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { laz_upgrade_2_4 laz_upgrade_2_5 }
		any_parent = { laz_upgrade_2_6 laz_upgrade_2_7 laz_upgrade_2_8 }

		mutually_exclusive = { laz_upgrade_3_5 }

		position = { x = 7 y = 3 }

		limit_to_equipment_type = {
			motorized_rocket_equipment
		}

		equipment_bonus = {
			breakthrough = 0.25
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.3
		}
	}

	trait = {
		token = laz_upgrade_4_1
		name = KR_MIO_Trait_recognise_survivourship_bias_reports
		icon = GFX_KR_generic_mio_trait_icon_land_doctrine

		available = {
			FROM = {
				has_completed_focus = RUS_update_equipment
			}
		}

		any_parent = { laz_upgrade_3_1 laz_upgrade_3_2 laz_upgrade_3_3 laz_upgrade_3_4 }

		mutually_exclusive = { laz_upgrade_4_2 }

		position = { x = 3 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.2
		}

		on_complete = {
			RUS_add_laz_upgrade_4_1 = yes
		}
	}

	trait = {
		token = laz_upgrade_4_2
		name = KR_MIO_Trait_extensive_testing
		icon = GFX_KR_generic_mio_trait_icon_research_bonus

		available = {
			FROM = {
				has_completed_focus = RUS_update_equipment
			}
		}

		any_parent = { laz_upgrade_3_3 laz_upgrade_3_4 laz_upgrade_3_5 laz_upgrade_3_6 }

		mutually_exclusive = { laz_upgrade_4_1 }

		position = { x = 5 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.2
		}

		on_complete = {
			FROM = {
				add_tech_bonus = {
					name = KR_MIO_Trait_extensive_testing
					bonus = 3.0
					uses = 1
					category = cat_mechanized_equipment
				}
			}
		}
	}
}
