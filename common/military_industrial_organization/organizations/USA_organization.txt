######################################
### Revamped USA MIOs by Deliberus ###
######################################

##################
### Armor MIOs ###
##################

USA_american_car_and_foundry_organisation = { #American Car and Foundry
	name = USA_american_car_and_foundry
	icon = GFX_idea_USA_american_car_and_foundry

	allowed = { is_american_tag = yes }
	available = {
		360 = { is_owned_and_controlled_by = FROM } #Philadelphia
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = { armor }

	research_categories = { mio_cat_tech_all_armor_and_modules }

	ai_will_do = { base = 10 }

	initial_trait = {
		name = generic_mio_initial_trait_fast_tanks_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_1
		name = KR_MIO_Trait_reactivate_tank_park_reserves
		icon = GFX_KR_generic_mio_trait_icon_light_tank_division

		available = { 360 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { american_car_and_foundry_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				USA_add_light_armored_div = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { american_car_and_foundry_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_armored_division
							STRENGTH = "100%"
							LOCATION = "[360.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_light_armored_division
							STRENGTH = "100%"
							LOCATION = "[360.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_tank_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { american_car_and_foundry_stockpile_trait_unlocked = yes }
						360 = {
							create_unit = {
								division = "division_template = \"Light Armored Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						360 = {
							create_unit = {
								division = "division_template = \"Light Armored Division\""
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { american_car_and_foundry_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = light_tank_chassis
						amount = 200
					}
				}
			}
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_2
		name = KR_MIO_Trait_increased_fuel_efficiency
		icon = GFX_KR_generic_mio_trait_icon_fuel_drum

		mutually_exclusive = { american_car_and_foundry_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			fuel_capacity = 0.5
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_3
		name = KR_MIO_Trait_expanded_fuel_storage
		icon = GFX_KR_generic_mio_trait_icon_fuel_drum

		mutually_exclusive = { american_car_and_foundry_upgrade_4 }

		position = { x = 2 y = 0 }

		equipment_bonus = {
			fuel_capacity = 0.5
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_4
		name = KR_MIO_Trait_suspension_improvements
		icon = GFX_generic_mio_trait_icon_maximum_speed

		mutually_exclusive = { american_car_and_foundry_upgrade_3 }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_5
		name = KR_MIO_Trait_high_quality_engines
		icon = GFX_generic_mio_trait_icon_maximum_speed

		mutually_exclusive = { american_car_and_foundry_upgrade_6 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			reliability = -0.2
			maximum_speed = 0.1
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_6
		name = KR_MIO_Trait_extensive_testing
		icon = GFX_generic_mio_trait_icon_reliability

		mutually_exclusive = { american_car_and_foundry_upgrade_5 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_7
		name = KR_MIO_Trait_increase_worker_salaries
		icon = GFX_icon_SPA_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { american_car_and_foundry_upgrade_8 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					SPA_strength = -1
					tooltip = USA_change_socialist_strength
				}
			}
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_8
		name = KR_MIO_Trait_workplace_agitation
		icon = GFX_icon_SPA_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { american_car_and_foundry_upgrade_7 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					SPA_strength = 1
					tooltip = USA_change_socialist_strength
				}
			}
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_1_1
		name = KR_MIO_Trait_larger_externally_mounted_fuel_tanks
		icon = GFX_KR_generic_mio_trait_icon_fuel_drum

		any_parent = { american_car_and_foundry_upgrade_1 american_car_and_foundry_upgrade_2 }

		position = { x = 0 y = 1 }

		equipment_bonus = {
			fuel_capacity = 0.5
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_1_2
		name = KR_MIO_Trait_improve_engine_overheat_limit
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { american_car_and_foundry_upgrade_3 american_car_and_foundry_upgrade_4 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_1_3
		name = KR_MIO_Trait_extended_engine_lifespan
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { american_car_and_foundry_upgrade_5 american_car_and_foundry_upgrade_6 }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_1_4
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_light_tank_mio_equipment_tt
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_1_5
		name = KR_MIO_Trait_standardise_parts
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_2_1
		name = KR_MIO_Trait_clear_gearbox_faults
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { american_car_and_foundry_upgrade_1_1 american_car_and_foundry_upgrade_1_2 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			maximum_speed = 0.1
			fuel_capacity = 0.5
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_2_2
		name = KR_MIO_Trait_smoothed_steering
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { american_car_and_foundry_upgrade_1_2 american_car_and_foundry_upgrade_1_3 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			reliability = 0.1
			maximum_speed = 0.1
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_2_3
		name = KR_MIO_Trait_acquire_chrysler_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			393 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			360 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { american_car_and_foundry_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				360 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = michigan_military_factories_removed }
					add_to_variable = { michigan_military_factories_removed = 1 }
				}
				else = {
					set_variable = { michigan_military_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_2_4
		name = KR_MIO_Trait_acquire_pacific_car_and_foundry_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			386 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			360 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { american_car_and_foundry_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				386 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				360 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_variable = washington_civilian_factories_removed }
				add_to_variable = { washington_civilian_factories_removed = 2 }
			}
			else = {
				set_variable = { washington_civilian_factories_removed = 2 }
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_armour_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_american_car_and_foundry }
	override_trait = {
		token = KR_MIO_Trait_merge_with_chrysler
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_fisher_body
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_pacific_car_and_foundry
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_buick
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_baldwin
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 5 y = 4 }
	}
}
USA_chrysler_organisation = { #Detroit Arsenal for WCA
	name = USA_chrysler
	icon = GFX_idea_chrysler

	allowed = { is_american_tag = yes }
	available = {
		393 = { is_owned_and_controlled_by = FROM } #Michigan
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = { armor }

	research_categories = { mio_cat_tech_all_armor_and_modules }

	ai_will_do = { base = 10 }

	initial_trait = {
		name = chrysler_mio_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = chrysler_upgrade_1
		name = KR_MIO_Trait_reactivate_tank_park_reserves
		icon = GFX_KR_generic_mio_trait_icon_medium_tank_division

		available = { 393 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { chrysler_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				USA_add_medium_armored_div = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { chrysler_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_medium_armored_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_medium_armored_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_medium_tank_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { chrysler_stockpile_trait_unlocked = yes }
						393 = {
							create_unit = {
								division = "division_template = \"Medium Armored Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						393 = {
							create_unit = {
								division = "division_template = \"Medium Armored Division\""
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { chrysler_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = medium_tank_chassis
						amount = 200
					}
				}
			}
		}
	}

	trait = {
		token = chrysler_upgrade_2
		name = KR_MIO_Trait_side_skurts
		icon = GFX_generic_mio_trait_icon_hardness

		mutually_exclusive = { chrysler_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			hardness = 0.1
		}
	}

	trait = {
		token = chrsyler_upgrade_3
		name = KR_MIO_Trait_increased_anti_air_explosive_shell_packaging
		icon = GFX_generic_mio_trait_icon_air_attack

		position = { x = 3 y = 0 }

		equipment_bonus = {
			air_attack = 0.1
		}
	}

	trait = {
		token = chrysler_upgrade_4
		name = KR_MIO_Trait_improved_dozer_equipment
		icon = GFX_generic_mio_trait_icon_entrenchment

		mutually_exclusive = { chrysler_upgrade_5 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			entrenchment = 0.5
		}
	}

	trait = {
		token = chrysler_upgrade_5
		name = KR_MIO_Trait_additional_space_for_fuel_drums
		icon = GFX_KR_generic_mio_trait_icon_fuel_drum

		mutually_exclusive = { chrysler_upgrade_4 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			fuel_capacity = 0.5
		}
	}

	trait = {
		token = chrysler_upgrade_6
		name = KR_MIO_Trait_increase_worker_salaries
		icon = GFX_icon_SPA_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { chrysler_upgrade_7 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					SPA_strength = -1
					tooltip = USA_change_socialist_strength
				}
			}
		}
	}

	trait = {
		token = chrysler_upgrade_7
		name = KR_MIO_Trait_workplace_agitation
		icon = GFX_icon_SPA_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { chrysler_upgrade_6 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					SPA_strength = 1
					tooltip = USA_change_socialist_strength
				}
			}
		}
	}

	trait = {
		token = chrysler_upgrade_1_1
		name = KR_MIO_Trait_reinforced_tracks
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { chrysler_upgrade_1 chrysler_upgrade_2 }

		mutually_exclusive = { chrysler_upgrade_1_2 }

		position = { x = 0 y = 1 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = chrysler_upgrade_1_2
		name = KR_MIO_Trait_inner_ridged_cannon
		icon = GFX_generic_mio_trait_icon_defense

		any_parent = { chrysler_upgrade_1 chrysler_upgrade_2 }

		mutually_exclusive = { chrysler_upgrade_1_1 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			defense = 0.1
		}
	}

	trait = {
		token = chrysler_upgrade_1_3
		name = KR_MIO_Trait_increased_muzzle_velocity
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { chrsyler_upgrade_3 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			hard_attack = 0.1
			ap_attack = 0.1
		}
	}

	trait = {
		token = chrysler_upgrade_1_4
		name = KR_MIO_Trait_mine_resistant_underside
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { chrysler_upgrade_4 chrysler_upgrade_5 }

		mutually_exclusive = { chrysler_upgrade_1_5 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = chrysler_upgrade_1_5
		name = KR_MIO_Trait_gurdier_alloys
		icon = GFX_generic_mio_trait_icon_armor_value

		any_parent = { chrysler_upgrade_4 chrysler_upgrade_5 }

		mutually_exclusive = { chrysler_upgrade_1_4 }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			armor_value = 0.1
		}
	}

	trait = {
		token = chrysler_upgrade_1_6
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_medium_tank_mio_equipment_tt
		}
	}

	trait = {
		token = chrysler_upgrade_1_7
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = chrysler_upgrade_2_1
		name = KR_MIO_Trait_telescopic_sights
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { chrysler_upgrade_1_1 chrysler_upgrade_1_2 }
		all_parents = { chrysler_upgrade_1_3 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			soft_attack = 0.1
		}
	}

	trait = {
		token = chrysler_upgrade_2_2
		name = KR_MIO_Trait_high_quality_engines
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { chrysler_upgrade_1_4 chrysler_upgrade_1_5 }
		all_parents = { chrysler_upgrade_1_3 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = chrysler_upgrade_2_3
		name = KR_MIO_Trait_acquire_pacific_car_and_foundry_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			386 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			393 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { chrysler_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				386 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				393 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = washington_military_factories_removed }
					add_to_variable = { washington_military_factories_removed = 1 }
				}
				else = {
					set_variable = { washington_military_factories_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = chrysler_upgrade_2_4
		name = KR_MIO_Trait_acquire_american_car_and_foundry_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			360 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			393 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { chrysler_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				360 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				393 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = philadelphia_civilian_factories_removed }
					add_to_variable = { philadelphia_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { philadelphia_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_armour_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_chrysler }
	override_trait = {
		token = KR_MIO_Trait_merge_with_american_car_and_foundry
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_fisher_body
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_pacific_car_and_foundry
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_buick
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_baldwin
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 5 y = 4 }
	}
}
USA_fisher_body_organisation = { #Fisher Body
	name = USA_fisher_tank_arsenal
	icon = GFX_idea_USA_fisher_tank_arsenal

	allowed = { is_american_tag = yes }
	available = {
		393 = { is_owned_and_controlled_by = FROM } #Michigan
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = { armor }

	research_categories = { mio_cat_tech_all_armor_and_modules }

	ai_will_do = { base = 10 }

	initial_trait = {
		name = fisher_body_mio_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = fisher_body_upgrade_1
		name = KR_MIO_Trait_reactivate_tank_park_reserves
		icon = GFX_KR_generic_mio_trait_icon_medium_tank_division

		available = {
			393 = { is_fully_controlled_by = FROM }
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		mutually_exclusive = { fisher_body_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				USA_add_medium_armored_div = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { fisher_body_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_medium_armored_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_medium_armored_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_medium_tank_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { fisher_body_stockpile_trait_unlocked = yes }
						393 = {
							create_unit = {
								division = "division_template = \"Medium Armored Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						393 = {
							create_unit = {
								division = "division_template = \"Medium Armored Division\""
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { fisher_body_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = medium_tank_chassis
						amount = 200
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_2
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		mutually_exclusive = { fisher_body_upgrade_1 }

		position = { x = 1 y = 0 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = fisher_body_upgrade_normal
		name = KR_MIO_Trait_short_term_planning
		icon = GFX_generic_mio_department_icon_tank_general_line_efficiency

		visible = {
			NOT = {
				has_mio_flag = fisher_body_normal_upgrades
				has_mio_flag = fisher_body_improved_upgrades
			}
		}

		position = { x = 2 y = 0 }

		on_complete = {
			custom_effect_tooltip = USA_upgrade_normal
			set_mio_flag = fisher_body_normal_upgrades
			custom_effect_tooltip = tooltip_white_line
			add_mio_size = 1
		}
	}

	trait = {
		token = fisher_body_upgrade_3
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		position = { x = 3 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = fisher_body_upgrade_improved
		name = KR_MIO_Trait_long_term_planning
		icon = GFX_generic_mio_department_icon_tank_general_technology

		visible = {
			NOT = {
				has_mio_flag = fisher_body_normal_upgrades
				has_mio_flag = fisher_body_improved_upgrades
			}
		}

		position = { x = 4 y = 0 }

		on_complete = {
			custom_effect_tooltip = USA_upgrade_improved_civs_and_mils
			set_mio_flag = fisher_body_improved_upgrades
			custom_effect_tooltip = tooltip_white_line
			add_mio_size = 1
		}
	}

	trait = {
		token = fisher_body_upgrade_4
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		mutually_exclusive = { fisher_body_upgrade_5 }

		position = { x = 5 y = 0 }

		production_bonus = {
			production_resource_need_factor = -0.05
		}
	}

	trait = {
		token = fisher_body_upgrade_5
		name = KR_MIO_Trait_interservice_competition_for_material_suppliers
		icon = GFX_generic_mio_trait_icon_resources

		available = {
			custom_override_tooltip = {
				tooltip = {
					localization_key = MIO_more_than_X_funds
					FUNDS = "700"
				}
				check_variable = { funds > 700 }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		mutually_exclusive = { fisher_body_upgrade_4 }

		position = { x = 6 y = 0 }

		production_bonus = {
			production_resource_need_factor = -0.10
		}

		on_complete = {
			add_mio_funds = -700
		}
	}

	trait = {
		token = fisher_body_upgrade_6
		name = KR_MIO_Trait_increase_worker_salaries
		icon = GFX_icon_SPA_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { fisher_body_upgrade_7 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					SPA_strength = -1
					tooltip = USA_change_socialist_strength
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_7
		name = KR_MIO_Trait_workplace_agitation
		icon = GFX_icon_SPA_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { fisher_body_upgrade_6 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					SPA_strength = 1
					tooltip = USA_change_socialist_strength
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_1_1
		name = KR_MIO_Trait_long_life_production_runs
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		any_parent = { fisher_body_upgrade_1 fisher_body_upgrade_2 }

		position = { x = 0 y = 1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = fisher_body_upgrade_1_2
		name = KR_MIO_Trait_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		all_parents = { fisher_body_upgrade_3 }

		mutually_exclusive = { fisher_body_upgrade_1_3 }

		position = { x = 2 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = fisher_body_upgrade_1_3
		name = KR_MIO_Trait_extreme_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		all_parents = { fisher_body_upgrade_3 }

		mutually_exclusive = { fisher_body_upgrade_1_2 }

		position = { x = 4 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.3
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = -0.2
		}
	}

	trait = {
		token = fisher_body_upgrade_1_4
		name = KR_MIO_Trait_eliminate_resource_waste
		icon = GFX_generic_mio_trait_icon_resources

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		any_parent = { fisher_body_upgrade_4 fisher_body_upgrade_5 }

		position = { x = 6 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.05
		}
	}

	trait = {
		token = fisher_body_upgrade_1_5
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_medium_tank_mio_equipment_tt
		}
	}

	trait = {
		token = fisher_body_upgrade_1_6
		name = KR_MIO_Trait_smoothen_bureaucratic_procedures
		icon = GFX_KR_generic_mio_trait_icon_assign_cost

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.5
		}
	}

	trait = {
		token = fisher_body_upgrade_2_1
		name = KR_MIO_Trait_dedicated_conversion_facilities
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		all_parents = { fisher_body_upgrade_1_1 }
		any_parent = { fisher_body_upgrade_1_2 fisher_body_upgrade_1_3 }

		position = { x = 0 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_conversion_speed_factor = 0.25
		}
	}

	trait = {
		token = fisher_body_upgrade_2_2
		name = KR_MIO_Trait_simplified_dissasembly_procedures
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		all_parents = { fisher_body_upgrade_1_4 }
		any_parent = { fisher_body_upgrade_1_2 fisher_body_upgrade_1_3 }

		position = { x = 6 y = 2 }

		production_bonus = {
			production_resource_need_factor = -0.1
			production_conversion_speed_factor = 0.25
		}
	}

	trait = {
		token = fisher_body_upgrade_2_3
		name = KR_MIO_Trait_acquire_pacific_car_and_foundry_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			386 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			393 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { fisher_body_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				386 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				393 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = washington_military_factories_removed }
					add_to_variable = { washington_military_factories_removed = 1 }
				}
				else = {
					set_variable = { washington_military_factories_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = fisher_body_upgrade_2_4
		name = KR_MIO_Trait_acquire_american_car_and_foundry_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			360 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			393 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { fisher_body_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				360 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				393 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = philadelphia_civilian_factories_removed }
					add_to_variable = { philadelphia_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { philadelphia_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = fisher_body_upgrade_1_improved
		name = KR_MIO_Trait_reactivate_tank_park_reserves
		icon = GFX_KR_generic_mio_trait_icon_medium_tank_division

		available = {
			393 = { is_owned_and_controlled_by = FROM }
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		mutually_exclusive = { fisher_body_upgrade_2_improved }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				USA_add_medium_armored_div = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { fisher_body_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_medium_armored_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_medium_armored_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_medium_tank_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { fisher_body_stockpile_trait_unlocked = yes }
						393 = {
							create_unit = {
								division = "division_template = \"Medium Armored Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						393 = {
							create_unit = {
								division = "division_template = \"Medium Armored Division\""
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { fisher_body_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = medium_tank_chassis
						amount = 200
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_2_improved
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		mutually_exclusive = { fisher_body_upgrade_1_improved }

		position = { x = 1 y = 0 }

		production_bonus = {
			production_efficiency_cap_factor = 0.037
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_3_improved
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				industrial_complex > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		position = { x = 3 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.22
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { industrial_complex > 2 }
						remove_building = {
							type = industrial_complex
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_4_improved
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				industrial_complex > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		mutually_exclusive = { fisher_body_upgrade_5_improved }

		position = { x = 5 y = 0 }

		production_bonus = {
			production_resource_need_factor = -0.075
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { industrial_complex > 2 }
						remove_building = {
							type = industrial_complex
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_5_improved
		name = KR_MIO_Trait_eliminate_resource_waste
		icon = GFX_generic_mio_trait_icon_resources

		available = {
			custom_override_tooltip = {
				tooltip = {
					localization_key = MIO_more_than_X_funds
					FUNDS = "700"
				}
				check_variable = { funds > 700 }
			}
			check_variable = { funds > 700 }
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				industrial_complex > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		mutually_exclusive = { fisher_body_upgrade_4_improved }

		position = { x = 6 y = 0 }

		production_bonus = {
			production_resource_need_factor = -0.15
		}

		on_complete = {
			add_mio_funds = -700
			FROM = {
				393 = {
					if = {
						limit = { industrial_complex > 2 }
						remove_building = {
							type = industrial_complex
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_1_1_improved
		name = KR_MIO_Trait_long_life_production_runs
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		available = {
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		any_parent = { fisher_body_upgrade_1_improved fisher_body_upgrade_2_improved }

		position = { x = 0 y = 1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.038
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_1_2_improved
		name = KR_MIO_Trait_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = {
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		all_parents = { fisher_body_upgrade_3_improved }

		mutually_exclusive = { fisher_body_upgrade_1_3_improved }

		position = { x = 2 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.23
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_1_3_improved
		name = KR_MIO_Trait_extreme_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = {
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		all_parents = { fisher_body_upgrade_3_improved }

		mutually_exclusive = { fisher_body_upgrade_1_2_improved }

		position = { x = 4 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.45
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = -0.2
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_1_4_improved
		name = KR_MIO_Trait_interservice_competition_for_material_suppliers
		icon = GFX_generic_mio_trait_icon_resources

		available = {
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				industrial_complex > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		any_parent = { fisher_body_upgrade_4_improved fisher_body_upgrade_5_improved }

		position = { x = 6 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.075
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { industrial_complex > 2 }
						remove_building = {
							type = industrial_complex
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_2_1_improved
		name = KR_MIO_Trait_dedicated_conversion_facilities
		icon = GFX_generic_mio_trait_icon_conversion_speed

		available = {
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				industrial_complex > 2
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		all_parents = { fisher_body_upgrade_1_1_improved }
		any_parent = { fisher_body_upgrade_1_2_improved fisher_body_upgrade_1_3_improved }

		position = { x = 0 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.075
			production_conversion_speed_factor = 0.37
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { industrial_complex > 2 }
						remove_building = {
							type = industrial_complex
							level = 3
						}
					}
				}
				393 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_2_2_improved
		name = KR_MIO_Trait_simplified_dissasembly_procedures
		icon = GFX_generic_mio_trait_icon_conversion_speed

		available = {
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				industrial_complex > 2
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		all_parents = { fisher_body_upgrade_1_4_improved }
		any_parent = { fisher_body_upgrade_1_2_improved fisher_body_upgrade_1_3_improved }

		position = { x = 6 y = 2 }

		production_bonus = {
			production_resource_need_factor = -0.15
			production_conversion_speed_factor = 0.38
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { industrial_complex > 2 }
						remove_building = {
							type = industrial_complex
							level = 3
						}
					}
				}
				393 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	### Merger Traits ###
	include = USA_armour_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_fisher_body }
	override_trait = {
		token = KR_MIO_Trait_merge_with_american_car_and_foundry
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_chrysler
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_pacific_car_and_foundry
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_buick
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_baldwin
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 5 y = 4 }
	}
}
USA_pacific_car_and_foundry_organisation = { #Pacific Car and Foundry
	name = USA_pacific_car_and_foundry
	icon = GFX_idea_USA_pacific_car_and_foundry

	allowed = { is_american_tag = yes }

	available = {
		386 = { is_owned_and_controlled_by = FROM } #Washington
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = { armor }

	research_categories = { mio_cat_tech_all_armor_and_modules }

	ai_will_do = { base = 10 }

	initial_trait = {
		name = pacific_car_and_foundry_mio_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_1
		name = KR_MIO_Trait_standardise_parts
		icon = GFX_generic_mio_trait_icon_air_attack

		position = { x = 0 y = 0 }

		equipment_bonus = {
			air_attack = -0.05
			reliability = -0.05
			build_cost_ic = -0.015
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_2
		name = KR_MIO_Trait_repurposed_infantry_support_weapons
		icon = GFX_generic_mio_trait_icon_soft_attack

		position = { x = 2 y = 0 }

		mutually_exclusive = { pacific_car_and_foundry_upgrade_3 }

		equipment_bonus = {
			soft_attack = -0.05
			build_cost_ic = -0.03
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_3
		name = KR_MIO_Trait_reactivate_tank_park_reserves
		icon = GFX_KR_generic_mio_trait_icon_light_tank_division

		available = { 386 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { pacific_car_and_foundry_upgrade_2 }

		position = { x = 3 y = 0 }

		equipment_bonus = {
			soft_attack = 0.05
			build_cost_ic = 0.03
		}

		on_complete = {
			FROM = {
				USA_add_light_armored_div = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { pacific_car_and_foundry_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_armored_division
							STRENGTH = "100%"
							LOCATION = "[361.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_light_armored_division
							STRENGTH = "100%"
							LOCATION = "[361.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_tank_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { pacific_car_and_foundry_stockpile_trait_unlocked = yes }
						386 = {
							create_unit = {
								division = "division_template = \"Light Armored Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						386 = {
							create_unit = {
								division = "division_template = \"Light Armored Division\""
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { pacific_car_and_foundry_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = light_tank_chassis
						amount = 200
					}
				}
			}
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_4
		name = KR_MIO_Trait_prevent_internal_armour_fragmentation
		icon = GFX_generic_mio_trait_icon_breakthrough

		position = { x = 5 y = 0 }

		equipment_bonus = {
			breakthrough = -0.05
			ap_attack = -0.05
			build_cost_ic = -0.015
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_1_1
		name = KR_MIO_Trait_designed_obsolesence
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { pacific_car_and_foundry_upgrade_1 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			defense = -0.05
			build_cost_ic = -0.015
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_1_2
		name = KR_MIO_Trait_engine_parts_standardisation
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { pacific_car_and_foundry_upgrade_2 pacific_car_and_foundry_upgrade_3 }

		position = { x = 2 y = 1 }

		mutually_exclusive = { pacific_car_and_foundry_upgrade_1_3 }

		equipment_bonus = {
			maximum_speed = -0.05
			build_cost_ic = -0.015
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_1_3
		name = KR_MIO_Trait_extreme_engine_parts_standardisation
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { pacific_car_and_foundry_upgrade_2 pacific_car_and_foundry_upgrade_3 }

		position = { x = 3 y = 1 }

		mutually_exclusive = { pacific_car_and_foundry_upgrade_1_2 }

		equipment_bonus = {
			maximum_speed = -0.1
			build_cost_ic = -0.03
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_1_4
		name = KR_MIO_Trait_adaptable_hull_design
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { pacific_car_and_foundry_upgrade_4 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			hard_attack = -0.05
			build_cost_ic = -0.015
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_1_5
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_light_tank_mio_equipment_tt
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_1_6
		name = KR_MIO_Trait_government_contract_favoritism
		icon = GFX_KR_generic_mio_trait_icon_funds

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_2_1
		name = KR_MIO_Trait_standardised_ammunition_sizes
		icon = GFX_generic_mio_trait_icon_hardness

		all_parents = { pacific_car_and_foundry_upgrade_1_1 }
		any_parent = { pacific_car_and_foundry_upgrade_1_2 pacific_car_and_foundry_upgrade_1_3 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			hardness = -0.05
			build_cost_ic = -0.015
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_2_2
		name = KR_MIO_Trait_mass_produced_interchangable_armour_plates
		icon = GFX_generic_mio_trait_icon_armor_value

		all_parents = { pacific_car_and_foundry_upgrade_1_4 }
		any_parent = { pacific_car_and_foundry_upgrade_1_2 pacific_car_and_foundry_upgrade_1_3 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			armor_value = -0.05
			build_cost_ic = -0.015
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_2_3
		name = KR_MIO_Trait_acquire_chrysler_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			393 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			386 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { pacific_car_and_foundry_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				386 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = michigan_military_factories_removed }
					add_to_variable = { michigan_military_factories_removed = 1 }
				}
				else = {
					set_variable = { michigan_military_factories_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_2_4
		name = KR_MIO_Trait_acquire_american_car_and_foundry_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			360 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			386 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { pacific_car_and_foundry_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				360 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				386 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = philadelphia_civilian_factories_removed }
					add_to_variable = { philadelphia_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { philadelphia_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_armour_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_pacific_car_and_foundry }
	override_trait = {
		token = KR_MIO_Trait_merge_with_american_car_and_foundry
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_chrysler
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_fisher_body
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_buick
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_baldwin
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 5 y = 4 }
	}
}
USA_buick_organisation = { #Buick
	name = USA_buick
	icon = GFX_idea_USA_buick

	allowed = { is_american_tag = yes }

	available = {
		393 = { is_owned_and_controlled_by = FROM } #Michigan
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = { armor }

	research_categories = { mio_cat_tech_all_armor_and_modules }

	ai_will_do = { base = 10 }

	initial_trait = {
		name = buick_mio_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = buick_upgrade_1
		name = KR_MIO_Trait_moderately_increased_muzzle_velocity
		icon = GFX_generic_mio_trait_icon_hard_attack

		position = { x = 0 y = 0 }

		mutually_exclusive = { buick_upgrade_2 buick_upgrade_3 }

		equipment_bonus = {
			hard_attack = 0.05
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_highly_increased_muzzle_velocity TRAIT_2 = KR_MIO_Trait_extremely_increased_muzzle_velocity
			}
		}
	}

	trait = {
		token = buick_upgrade_2
		name = KR_MIO_Trait_highly_increased_muzzle_velocity
		icon = GFX_generic_mio_trait_icon_ap_attack

		position = { x = 1 y = 0 }

		mutually_exclusive = { buick_upgrade_1 buick_upgrade_3 }

		equipment_bonus = {
			hard_attack = -0.1
			ap_attack = 0.1
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_moderately_increased_muzzle_velocity TRAIT_2 = KR_MIO_Trait_extremely_increased_muzzle_velocity
			}
		}
	}

	trait = {
		token = buick_upgrade_3
		name = KR_MIO_Trait_extremely_increased_muzzle_velocity
		icon = GFX_generic_mio_trait_icon_ap_attack

		position = { x = 2 y = 0 }

		mutually_exclusive = { buick_upgrade_1 buick_upgrade_2 }

		equipment_bonus = {
			hard_attack = -0.2
			ap_attack = 0.2
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_moderately_increased_muzzle_velocity TRAIT_2 = KR_MIO_Trait_highly_increased_muzzle_velocity
			}
		}
	}

	trait = {
		token = buick_upgrade_4
		name = KR_MIO_Trait_thicker_side_skurts
		icon = GFX_generic_mio_trait_icon_defense

		position = { x = 4 y = 0 }

		mutually_exclusive = { buick_upgrade_5 buick_upgrade_6 }

		equipment_bonus = {
			defense = 0.05
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_double_plated_side_skurts TRAIT_2 = KR_MIO_Trait_reactivate_tank_park_reserves
			}
		}
	}

	trait = {
		token = buick_upgrade_5
		name = KR_MIO_Trait_double_plated_side_skurts
		icon = GFX_generic_mio_trait_icon_defense

		position = { x = 5 y = 0 }

		mutually_exclusive = { buick_upgrade_4 buick_upgrade_6 }

		equipment_bonus = {
			defense = 0.1
			hard_attack = -0.05
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = KR_mio_trait_mutually_exclusive_with
				TRAIT_1 = KR_MIO_Trait_thicker_side_skurts TRAIT_2 = KR_MIO_Trait_reactivate_tank_park_reserves
			}
		}
	}

	trait = {
		token = buick_upgrade_6
		name = KR_MIO_Trait_reactivate_tank_park_reserves
		icon = GFX_KR_generic_mio_trait_icon_light_tank_division

		available = { 393 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { buick_upgrade_4 buick_upgrade_5 }

		position = { x = 6 y = 0 }

		on_complete = {
			FROM = {
				USA_add_light_armored_div = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { buick_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_armored_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_light_armored_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_tank_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { buick_stockpile_trait_unlocked = yes }
						393 = {
							create_unit = {
								division = "division_template = \"Light Armored Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						393 = {
							create_unit = {
								division = "division_template = \"Light Armored Division\""
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { buick_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = light_tank_chassis
						amount = 200
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = {
					localization_key = KR_mio_trait_mutually_exclusive_with
					TRAIT_1 = KR_MIO_Trait_thicker_side_skurts TRAIT_2 = KR_MIO_Trait_double_plated_side_skurts
				}
			}
		}
	}

	trait = {
		token = buick_upgrade_7
		name = KR_MIO_Trait_increase_worker_salaries
		icon = GFX_icon_SPA_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { buick_upgrade_8 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					SPA_strength = -1
					tooltip = USA_change_socialist_strength
				}
			}
		}
	}

	trait = {
		token = buick_upgrade_8
		name = KR_MIO_Trait_workplace_agitation
		icon = GFX_icon_SPA_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { buick_upgrade_7 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					SPA_strength = 1
					tooltip = USA_change_socialist_strength
				}
			}
		}
	}

	trait = {
		token = buick_upgrade_1_1
		name = KR_MIO_Trait_wedge_breechblocks
		icon = GFX_generic_mio_trait_icon_hard_attack

		any_parent = { buick_upgrade_1 buick_upgrade_2 buick_upgrade_3 }

		position = { x = 0 y = 1 }

		equipment_bonus = {
			hard_attack = 0.05
		}
	}

	trait = {
		token = buick_upgrade_1_2
		name = KR_MIO_Trait_apbc_shells
		icon = GFX_generic_mio_trait_icon_ap_attack

		position = { x = 3 y = 1 }

		equipment_bonus = {
			ap_attack = 0.1
		}
	}

	trait = {
		token = buick_upgrade_1_3
		name = KR_MIO_Trait_top_side_turret_machinegun_protection
		icon = GFX_generic_mio_trait_icon_defense

		any_parent = { buick_upgrade_4 buick_upgrade_5 buick_upgrade_6 }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			defense = 0.05
		}
	}

	trait = {
		token = buick_upgrade_1_4
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_light_tank_mio_equipment_tt
		}
	}

	trait = {
		token = buick_upgrade_1_5
		name = KR_MIO_Trait_expanded_state_investment
		icon = GFX_generic_mio_trait_icon_production_capacity

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = buick_upgrade_2_1
		name = KR_MIO_Trait_telescopic_sights
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { buick_upgrade_1_1 buick_upgrade_1_2 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			hard_attack = 0.05
			ap_attack = 0.1
		}
	}

	trait = {
		token = buick_upgrade_2_2
		name = KR_MIO_Trait_increased_firing_range
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { buick_upgrade_1_2 buick_upgrade_1_3 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			defense = 0.05
			ap_attack = 0.1
		}
	}

	trait = {
		token = buick_upgrade_2_3
		name = KR_MIO_Trait_acquire_pacific_car_and_foundry_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			386 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			393 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { buick_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				386 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				393 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = washington_military_factories_removed }
					add_to_variable = { washington_military_factories_removed = 1 }
				}
				else = {
					set_variable = { washington_military_factories_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = buick_upgrade_2_4
		name = KR_MIO_Trait_acquire_american_car_and_foundry_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			360 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			393 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { buick_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				360 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				393 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = philadelphia_civilian_factories_removed }
					add_to_variable = { philadelphia_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { philadelphia_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_armour_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_buick }
	override_trait = {
		token = KR_MIO_Trait_merge_with_american_car_and_foundry
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_chrysler
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_fisher_body
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_pacific_car_and_foundry
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_baldwin
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 5 y = 4 }
	}
}
USA_baldwin_organisation = { #Baldwin
	name = USA_baldwin
	icon = GFX_idea_USA_baldwin

	allowed = { is_american_tag = yes }

	available = {
		975 = { is_owned_and_controlled_by = FROM } #Michigan
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = { armor }

	research_categories = { mio_cat_tech_all_armor_and_modules }

	ai_will_do = { base = 10 }

	initial_trait = {
		name = baldwin_mio_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = baldwin_upgrade_1
		name = KR_MIO_Trait_composite_armour
		icon = GFX_generic_mio_trait_icon_armor_value

		mutually_exclusive = { baldwin_upgrade_2 }

		position = { x = 0 y = 0 }

		equipment_bonus = {
			armor_value = 0.1
		}
	}

	trait = {
		token = baldwin_upgrade_2
		name = KR_MIO_Trait_reactivate_tank_park_reserves
		icon = GFX_KR_generic_mio_trait_icon_heavy_tank_division

		available = { 975 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { baldwin_upgrade_1 }

		position = { x = 2 y = 0 }

		on_complete = {
			FROM = {
				USA_add_heavy_armored_div = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { baldwin_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_heavy_armored_division
							STRENGTH = "100%"
							LOCATION = "[975.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_heavy_armored_division
							STRENGTH = "100%"
							LOCATION = "[975.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_heavy_tank_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { baldwin_stockpile_trait_unlocked = yes }
						975 = {
							create_unit = {
								division = "division_template = \"Heavy Armored Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						975 = {
							create_unit = {
								division = "division_template = \"Heavy Armored Division\""
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { baldwin_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = heavy_tank_chassis
						amount = 200
					}
				}
			}
		}
	}

	trait = {
		token = baldwin_upgrade_3
		name = KR_MIO_Trait_thicker_armour_plating
		icon = GFX_generic_mio_trait_icon_hardness

		mutually_exclusive = { baldwin_upgrade_4 }

		position = { x = 3 y = 0 }

		equipment_bonus = {
			hardness = 0.05
		}
	}

	trait = {
		token = baldwin_upgrade_4
		name = KR_MIO_Trait_extremely_thick_armour_plating
		icon = GFX_generic_mio_trait_icon_hardness

		available = {
			FROM = { has_army_experience > 25 }
		}

		mutually_exclusive = { baldwin_upgrade_3 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			hardness = 0.1
		}

		on_complete = {
			FROM = { army_experience = -25 }
		}
	}

	trait = {
		token = baldwin_upgrade_1_1
		name = KR_MIO_Trait_gurdier_alloys
		icon = GFX_generic_mio_trait_icon_armor_value

		any_parent = { baldwin_upgrade_1 baldwin_upgrade_2 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			armor_value = 0.1
		}
	}

	trait = {
		token = baldwin_upgrade_1_2
		name = KR_MIO_Trait_mine_resistant_underside
		icon = GFX_generic_mio_trait_icon_hardness

		any_parent = { baldwin_upgrade_3 baldwin_upgrade_4 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			hardness = 0.1
		}
	}

	trait = {
		token = baldwin_upgrade_1_3
		name = KR_MIO_Trait_extensively_detailed_crew_manuals
		icon = GFX_generic_mio_trait_icon_breakthrough

		position = { x = 6 y = 1 }

		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = baldwin_upgrade_1_4
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_heavy_tank_mio_equipment_tt
		}
	}

	trait = {
		token = baldwin_upgrade_1_5
		name = KR_MIO_Trait_hire_additional_designers
		icon = GFX_KR_generic_mio_trait_icon_army_xp

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		on_complete = {
			FROM = { army_experience = 50 }
		}
	}

	trait = {
		token = baldwin_upgrade_2_1
		name = KR_MIO_Trait_fully_cast_turret
		icon = GFX_generic_mio_trait_icon_armor_value

		all_parents = { baldwin_upgrade_1_1 baldwin_upgrade_1_2 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			armor_value = 0.1
		}
	}

	trait = {
		token = baldwin_upgrade_2_2
		name = KR_MIO_Trait_double_layered_armour
		icon = GFX_generic_mio_trait_icon_hardness

		all_parents = { baldwin_upgrade_1_2 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			hardness = 0.1
		}
	}

	trait = {
		token = baldwin_upgrade_2_3
		name = KR_MIO_Trait_ergonomic_interior
		icon = GFX_generic_mio_trait_icon_breakthrough

		all_parents = { baldwin_upgrade_1_2 baldwin_upgrade_1_3 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = baldwin_upgrade_2_4
		name = KR_MIO_Trait_acquire_buick_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			393 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			975 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { baldwin_upgrade_2_5 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				975 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = michigan_military_factories_removed }
					add_to_variable = { michigan_military_factories_removed = 1 }
				}
				else = {
					set_variable = { michigan_military_factories_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = baldwin_upgrade_2_5
		name = KR_MIO_Trait_acquire_pacific_car_and_foundry_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			386 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			975 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { baldwin_upgrade_2_4 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				386 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				975 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = washington_civilian_factories_removed }
					add_to_variable = { washington_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { washington_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_armour_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_baldwin }
	override_trait = {
		token = KR_MIO_Trait_merge_with_american_car_and_foundry
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_chrysler
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_fisher_body
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_pacific_car_and_foundry
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_buick
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 5 y = 4 }
	}
}
USA_armour_merge_organisation = {
	allowed = { always = no } #Used as archetype for merger traits

	trait = {
		token = KR_MIO_Trait_merge_with_american_car_and_foundry
		name = KR_MIO_Trait_merge_with_american_car_and_foundry
		icon = GFX_icon_american_car_and_foundry_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_american_car_and_foundry_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_american_car_and_foundry_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_american_car_and_foundry TYPE = generic_mio_initial_trait_fast_tanks_designer
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_chrysler_organisation }
				set_mio_name_key = USA_MIO_Merger_AMCF_Chrysler
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_fisher_body_organisation }
				set_mio_name_key = USA_MIO_Merger_AMCF_Fisher
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_pacific_car_and_foundry_organisation }
				set_mio_name_key = USA_MIO_Merger_AMCF_PCF
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_buick_organisation }
				set_mio_name_key = USA_MIO_Merger_AMCF_Buick
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_baldwin_organisation }
				set_mio_name_key = USA_MIO_Merger_AMCF_Baldwin
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_chrysler
		name = KR_MIO_Trait_merge_with_chrysler
		icon = GFX_icon_chrysler_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_chrysler_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			defense = 0.03
			breakthrough = 0.03
			reliability = 0.03
			maximum_speed = 0.03
			armor_value = 0.03
			ap_attack = 0.03
			hardness = 0.03
			air_attack = 0.03
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_chrysler_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_chrysler TYPE = chrysler_mio_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_american_car_and_foundry_organisation }
				set_mio_name_key = USA_MIO_Merger_AMCF_Chrysler
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_fisher_body_organisation }
				set_mio_name_key = USA_MIO_Merger_Chrysler_Fisher
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_pacific_car_and_foundry_organisation }
				set_mio_name_key = USA_MIO_Merger_Chrysler_PCF
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_buick_organisation }
				set_mio_name_key = USA_MIO_Merger_Chrysler_Buick
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_baldwin_organisation }
				set_mio_name_key = USA_MIO_Merger_Chrysler_Baldwin
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_fisher_body
		name = KR_MIO_Trait_merge_with_fisher_body
		icon = GFX_icon_fisher_body_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_fisher_body_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_fisher_body_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_fisher_tank_arsenal TYPE = fisher_body_mio_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_american_car_and_foundry_organisation }
				set_mio_name_key = USA_MIO_Merger_AMCF_Fisher
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_chrysler_organisation }
				set_mio_name_key = USA_MIO_Merger_Chrysler_Fisher
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_pacific_car_and_foundry_organisation }
				set_mio_name_key = USA_MIO_Merger_Fisher_PCF
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_buick_organisation }
				set_mio_name_key = USA_MIO_Merger_Fisher_Buick
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_baldwin_organisation }
				set_mio_name_key = USA_MIO_Merger_Fisher_Baldwin
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_pacific_car_and_foundry
		name = KR_MIO_Trait_merge_with_pacific_car_and_foundry
		icon = GFX_icon_pacific_car_and_foundry_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_pacific_car_and_foundry_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_pacific_car_and_foundry_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_pacific_car_and_foundry TYPE = pacific_car_and_foundry_mio_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_american_car_and_foundry_organisation }
				set_mio_name_key = USA_MIO_Merger_AMCF_PCF
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_chrysler_organisation }
				set_mio_name_key = USA_MIO_Merger_Chrysler_PCF
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_fisher_body_organisation }
				set_mio_name_key = USA_MIO_Merger_Fisher_PCF
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_buick_organisation }
				set_mio_name_key = USA_MIO_Merger_PCF_Buick
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_baldwin_organisation }
				set_mio_name_key = USA_MIO_Merger_PCF_Baldwin
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_buick
		name = KR_MIO_Trait_merge_with_buick
		icon = GFX_icon_buick_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_buick_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			hard_attack = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_buick_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_buick TYPE = buick_mio_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_american_car_and_foundry_organisation }
				set_mio_name_key = USA_MIO_Merger_AMCF_Buick
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_chrysler_organisation }
				set_mio_name_key = USA_MIO_Merger_Chrysler_Buick
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_fisher_body_organisation }
				set_mio_name_key = USA_MIO_Merger_Fisher_Buick
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_pacific_car_and_foundry_organisation }
				set_mio_name_key = USA_MIO_Merger_PCF_Buick
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_baldwin_organisation }
				set_mio_name_key = USA_MIO_Merger_Buick_Baldwin
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_baldwin
		name = KR_MIO_Trait_merge_with_baldwin
		icon = GFX_icon_baldwin_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_baldwin_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			armor_value = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_baldwin_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_baldwin TYPE = baldwin_mio_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_american_car_and_foundry_organisation }
				set_mio_name_key = USA_MIO_Merger_AMCF_Baldwin
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_chrysler_organisation }
				set_mio_name_key = USA_MIO_Merger_Chrysler_Baldwin
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_fisher_body_organisation }
				set_mio_name_key = USA_MIO_Merger_Fisher_Baldwin
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_pacific_car_and_foundry_organisation }
				set_mio_name_key = USA_MIO_Merger_PCF_Baldwin
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_buick_organisation }
				set_mio_name_key = USA_MIO_Merger_Buick_Baldwin
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_Maintain_Independence
		name = KR_MIO_Trait_maintain_independence
		icon = GFX_icon_dont_merge

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_is_senior_partner_of_merger = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.1
		}

		on_complete = {
			USA_mio_maintain_independence = yes
		}
	}
}

##################
### Naval MIOs ###
##################
USA_newport_news_shipbuilding_organisation = { #Newport News Shipbuilding
	name = USA_newport_news_shipbuilding
	icon = GFX_idea_newport_news_shipbuilding

	allowed = { is_american_tag = yes }
	available = {
		362 = { is_owned_and_controlled_by = FROM } #Virginia
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		mio_cat_eq_all_battleship
		mio_cat_eq_all_carrier
	}

	research_categories = {
		mio_cat_tech_all_capital_ship_and_modules
		mio_cat_tech_all_carrier_and_modules
		tp_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = newport_news_shipbuilding_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_1
		name = KR_MIO_Trait_reactivate_mothballed_vessels
		icon = GFX_generic_mio_department_icon_ship_carrier

		available = {
			FROM = {
				any_controlled_state = {
					is_coastal = yes
					is_fully_controlled_by = FROM
				}
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { newport_news_shipbuilding_stockpile_trait_unlocked = yes }
					create_ship = { type = ship_hull_carrier_1 equipment_variant = "Yorktown Class" }
					create_ship = { type = ship_hull_carrier_1 equipment_variant = "Yorktown Class" }
				}
				else = {
					create_ship = { type = ship_hull_carrier_1 equipment_variant = "Yorktown Class" }
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2
		name = KR_MIO_Trait_autonomous_turbine_columns
		icon = GFX_generic_mio_trait_icon_naval_speed

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			naval_speed = 0.05
		}
	}

	trait = {
		token = newport_news_shipbuilding_normal
		name = KR_MIO_Trait_short_term_planning
		icon = GFX_mio_cat_eq_all_battleship

		visible = {
			NOT = {
				has_mio_flag = newport_news_shipbuilding_normal_upgrades
				has_mio_flag = newport_news_shipbuilding_improved_upgrades
			}
		}

		position = { x = 2 y = 0 }

		on_complete = {
			custom_effect_tooltip = USA_upgrade_normal
			set_mio_flag = newport_news_shipbuilding_normal_upgrades
			custom_effect_tooltip = tooltip_white_line
			add_mio_size = 1
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_3
		name = KR_MIO_Trait_denser_shell_tipped_penetration_materials
		icon = GFX_generic_mio_trait_icon_ap_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		position = { x = 3 y = 0 }

		equipment_bonus = {
			hg_armor_piercing = 0.05
			lg_armor_piercing = 0.05
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_improved
		name = KR_MIO_Trait_long_term_planning
		icon = GFX_generic_mio_department_icon_ship_capital_ship_utility

		visible = {
			NOT = {
				has_mio_flag = newport_news_shipbuilding_normal_upgrades
				has_mio_flag = newport_news_shipbuilding_improved_upgrades
			}
		}

		position = { x = 4 y = 0 }

		on_complete = {
			custom_effect_tooltip = USA_upgrade_improved_civs_and_docks
			set_mio_flag = newport_news_shipbuilding_improved_upgrades
			custom_effect_tooltip = tooltip_white_line
			add_mio_size = 1
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_4
		name = KR_MIO_Trait_increased_shell_payload
		icon = GFX_generic_mio_trait_icon_hg_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_5 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			hg_attack = 0.05
			lg_attack = 0.05
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_5
		name = KR_MIO_Trait_increased_shell_velocity
		icon = GFX_generic_mio_trait_icon_hg_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_4 }

		position = { x = 6 y = 0 }

		limit_to_equipment_type = { mio_cat_eq_all_battleship }

		equipment_bonus = {
			hg_attack = 0.1
			lg_attack = 0.1
			build_cost_ic = 0.05
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_6
		name = KR_MIO_Trait_increase_worker_salaries
		icon = GFX_icon_Long_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_7 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					Long_strength = -1
					tooltip = USA_change_longist_strength
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_7
		name = KR_MIO_Trait_workplace_agitation
		icon = GFX_icon_Long_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_6 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					Long_strength = 1
					tooltip = USA_change_longist_strength
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_1_1
		name = KR_MIO_Trait_additional_aircraft_spacing
		icon = GFX_generic_mio_department_icon_ship_carrier_utility

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		all_parents = { newport_news_shipbuilding_upgrade_3 }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_1_2 }

		position = { x = 2 y = 1 }

		limit_to_equipment_type = { mio_cat_eq_all_carrier }

		equipment_bonus = {
			carrier_size = 1
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_1_2
		name = KR_MIO_Trait_improve_light_gunnery_targetting
		icon = GFX_generic_mio_trait_icon_ap_attack

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		all_parents = { newport_news_shipbuilding_upgrade_3 }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_1_1 }

		position = { x = 4 y = 1 }

		limit_to_equipment_type = { mio_cat_eq_all_battleship }

		equipment_bonus = {
			hg_armor_piercing = 0.1
			lg_armor_piercing = 0.1
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_1_3
		name = KR_MIO_Trait_construct_additional_mothball_bays
		icon = GFX_KR_generic_mio_trait_icon_naval_base

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_naval_mio_equipment_tt
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_1_4
		name = KR_MIO_Trait_smoothen_bureaucratic_procedures
		icon = GFX_KR_generic_mio_trait_icon_assign_cost

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.5
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_1
		name = KR_MIO_Trait_stable_firing_mechanisms
		icon = GFX_generic_mio_trait_icon_batteries_hit_chance

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		any_parent = { newport_news_shipbuilding_upgrade_1 newport_news_shipbuilding_upgrade_2 }
		any_parent = { newport_news_shipbuilding_upgrade_1_1 newport_news_shipbuilding_upgrade_1_2 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			naval_heavy_gun_hit_chance_factor = 0.1
			naval_light_gun_hit_chance_factor = 0.1
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_2
		name = KR_MIO_Trait_external_armour_belt
		icon = GFX_generic_mio_trait_icon_armor_value

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		any_parent = { newport_news_shipbuilding_upgrade_1_1 newport_news_shipbuilding_upgrade_1_2 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			armor_value = 0.1
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_3
		name = KR_MIO_Trait_improve_engine_overheat_limit
		icon = GFX_generic_mio_trait_icon_naval_speed

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		any_parent = { newport_news_shipbuilding_upgrade_1_1 newport_news_shipbuilding_upgrade_1_2 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_4
		name = KR_MIO_Trait_increase_gun_calibre
		icon = GFX_generic_mio_trait_icon_lg_attack

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		any_parent = { newport_news_shipbuilding_upgrade_4 newport_news_shipbuilding_upgrade_5 }
		any_parent = { newport_news_shipbuilding_upgrade_1_1 newport_news_shipbuilding_upgrade_1_2 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			hg_attack = 0.05
			lg_attack = 0.05
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_5
		name = KR_MIO_Trait_acquire_kaiser_shipyard_assets
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			797 = {
				dockyard > 0
				is_owned_and_controlled_by = FROM
			}
			362 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { newport_news_shipbuilding_upgrade_2_6 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				797 = {
					if = {
						limit = { dockyard > 0 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
				}
				362 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = san_francisco_dockyards_removed }
					add_to_variable = { san_francisco_dockyards_removed = 1 }
				}
				else = {
					set_variable = { san_francisco_dockyards_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_6
		name = KR_MIO_Trait_acquire_brooklyn_naval_yard_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			358 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			362 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { newport_news_shipbuilding_upgrade_2_5 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				358 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				362 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_york_city_civilian_factories_removed }
					add_to_variable = { new_york_city_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { new_york_city_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_1_improved
		name = KR_MIO_Trait_reactivate_mothballed_vessels
		icon = GFX_generic_mio_department_icon_ship_carrier

		available = {
			FROM = {
				any_controlled_state = {
					is_coastal = yes
					is_fully_controlled_by = FROM
				}
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_2_improved }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { newport_news_shipbuilding_stockpile_trait_unlocked = yes }
					create_ship = { type = ship_hull_carrier_1 equipment_variant = "Yorktown Class" }
					create_ship = { type = ship_hull_carrier_1 equipment_variant = "Yorktown Class" }
				}
				else = {
					create_ship = { type = ship_hull_carrier_1 equipment_variant = "Yorktown Class" }
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_improved
		name = KR_MIO_Trait_autonomous_turbine_columns
		icon = GFX_generic_mio_trait_icon_naval_speed

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
			362 = { #Virginia
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_1_improved }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			naval_speed = 0.075
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_3_improved
		name = KR_MIO_Trait_denser_shell_tipped_penetration_materials
		icon = GFX_generic_mio_trait_icon_ap_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
			362 = { #Virginia
				is_owned_and_controlled_by = FROM
				dockyard > 2
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		position = { x = 3 y = 0 }

		equipment_bonus = {
			hg_armor_piercing = 0.075
			lg_armor_piercing = 0.075
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { dockyard > 2 }
						remove_building = {
							type = dockyard
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_4_improved
		name = KR_MIO_Trait_increased_shell_payload
		icon = GFX_generic_mio_trait_icon_hg_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
			362 = { #Virginia
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_5_improved }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			hg_attack = 0.075
			lg_attack = 0.075
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_5_improved
		name = KR_MIO_Trait_increased_shell_velocity
		icon = GFX_generic_mio_trait_icon_hg_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
			362 = { #Virginia
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_4_improved }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			hg_attack = 0.15
			lg_attack = 0.15
			build_cost_ic = 0.05
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_1_1_improved
		name = KR_MIO_Trait_additional_aircraft_spacing
		icon = GFX_generic_mio_department_icon_ship_carrier_utility

		available = {
			FROM = {
				362 = { #Virginia
					is_owned_and_controlled_by = FROM
					industrial_complex > 4
				}
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		all_parents = { newport_news_shipbuilding_upgrade_3_improved }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_1_2_improved }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			carrier_size = 2
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_1_2_improved
		name = KR_MIO_Trait_improve_light_gunnery_targetting
		icon = GFX_generic_mio_trait_icon_ap_attack

		available = {
			FROM = {
				362 = { #Virginia
					is_owned_and_controlled_by = FROM
					industrial_complex > 2
				}
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		all_parents = { newport_news_shipbuilding_upgrade_3_improved }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_1_1_improved }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			hg_armor_piercing = 0.15
			lg_armor_piercing = 0.15
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 2 }
						remove_building = {
							type = industrial_complex
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_1_improved
		name = KR_MIO_Trait_stable_firing_mechanisms
		icon = GFX_generic_mio_trait_icon_batteries_hit_chance

		available = {
			FROM = {
				362 = { #Virginia
					is_owned_and_controlled_by = FROM
					dockyard > 2
				}
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		any_parent = { newport_news_shipbuilding_upgrade_1_improved newport_news_shipbuilding_upgrade_2_improved }
		any_parent = { newport_news_shipbuilding_upgrade_1_1_improved newport_news_shipbuilding_upgrade_1_2_improved }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			naval_heavy_gun_hit_chance_factor = 0.15
			naval_light_gun_hit_chance_factor = 0.15
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { dockyard > 2 }
						remove_building = {
							type = dockyard
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_2_improved
		name = KR_MIO_Trait_external_armour_belt
		icon = GFX_generic_mio_trait_icon_armor_value

		available = {
			FROM = {
				362 = { #Virginia
					is_owned_and_controlled_by = FROM
					dockyard > 2
				}
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		any_parent = { newport_news_shipbuilding_upgrade_1_1_improved newport_news_shipbuilding_upgrade_1_2_improved }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			armor_value = 0.15
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { dockyard > 2 }
						remove_building = {
							type = dockyard
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_3_improved
		name = KR_MIO_Trait_improve_engine_overheat_limit
		icon = GFX_generic_mio_trait_icon_naval_speed

		available = {
			FROM = {
				362 = { #Virginia
					is_owned_and_controlled_by = FROM
					dockyard > 2
				}
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		any_parent = { newport_news_shipbuilding_upgrade_1_1_improved newport_news_shipbuilding_upgrade_1_2_improved }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			naval_speed = 0.15
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { dockyard > 2 }
						remove_building = {
							type = dockyard
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_4_improved
		name = KR_MIO_Trait_increase_gun_calibre
		icon = GFX_generic_mio_trait_icon_lg_attack

		available = {
			FROM = {
				362 = { #Virginia
					is_owned_and_controlled_by = FROM
					dockyard > 2
				}
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		any_parent = { newport_news_shipbuilding_upgrade_4_improved newport_news_shipbuilding_upgrade_5_improved }
		any_parent = { newport_news_shipbuilding_upgrade_1_1_improved newport_news_shipbuilding_upgrade_1_2_improved }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			hg_attack = 0.075
			lg_attack = 0.075
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { dockyard > 2 }
						remove_building = {
							type = dockyard
							level = 3
						}
					}
				}
			}
		}
	}

	### Merger Traits ###
	include = USA_naval_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_newport_news_shipbuilding }
	override_trait = {
		token = KR_MIO_Trait_merge_with_norfolk_naval_shipyard
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_kaiser_shipyards
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_brooklyn_naval_yards
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_electric_boat
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_higgins
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_mare_island_naval_shipyard
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 6 y = 4 }
	}
}

USA_norfolk_naval_shipyard_organisation = { #Norfolk Naval Shipyard
	name = USA_norfolk_naval_shipyard
	icon = GFX_idea_norfolk_naval_yard

	allowed = { is_american_tag = yes }
	available = {
		362 = { is_owned_and_controlled_by = FROM } #Virginia
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		mio_cat_eq_all_cruiser
		mio_cat_eq_all_destroyer
	}

	research_categories = {
		mio_cat_tech_all_cruiser_and_modules
		mio_cat_tech_all_destroyer_and_modules
		tp_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = norfolk_naval_shipyard_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_1
		name = KR_MIO_Trait_increased_passive_sonar_range
		icon = GFX_generic_mio_trait_icon_sub_detection

		position = { x = 1 y = 0 }

		equipment_bonus = {
			sub_detection = 0.15
			lg_attack = -0.3
			hg_attack = -0.3
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_2
		name = KR_MIO_Trait_reactivate_mothballed_vessels
		icon = GFX_military_industrial_organization_light_cruiser

		available = {
			FROM = {
				any_controlled_state = {
					is_coastal = yes
					is_fully_controlled_by = FROM
				}
			}
		}

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_3 }

		position = { x = 3 y = 0 }

		equipment_bonus = {
			torpedo_attack = -0.3
		}

		on_complete = {
			FROM = {
				if = {
					limit = { norfolk_naval_shipyard_stockpile_trait_unlocked = yes }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" }
				}
				else = {
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" }
				}
			}
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_3
		name = KR_MIO_Trait_increased_fuel_tank_capacity
		icon = GFX_generic_mio_trait_icon_naval_range

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_2 }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			naval_range = 0.1
			torpedo_attack = -0.3
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_4
		name = KR_MIO_Trait_additional_anti_air_weapon_systems
		icon = GFX_generic_mio_trait_icon_air_attack

		position = { x = 5 y = 0 }

		equipment_bonus = {
			air_attack = 0.2
			hg_armor_piercing = -0.3
			lg_armor_piercing = -0.3
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_5
		name = KR_MIO_Trait_increase_worker_salaries
		icon = GFX_icon_Long_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_6 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					Long_strength = -1
					tooltip = USA_change_longist_strength
				}
			}
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_6
		name = KR_MIO_Trait_workplace_agitation
		icon = GFX_icon_Long_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_5 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					Long_strength = 1
					tooltip = USA_change_longist_strength
				}
			}
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_1_1
		name = KR_MIO_Trait_greatly_increased_active_sonar_range
		icon = GFX_generic_mio_trait_icon_sub_detection

		any_parent = { norfolk_naval_shipyard_upgrade_2 norfolk_naval_shipyard_upgrade_3 }
		all_parents = { norfolk_naval_shipyard_upgrade_4 }

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_1_2 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			sub_detection = 0.2
			sub_attack = -0.1
			naval_range = 0.2
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_1_2
		name = KR_MIO_Trait_increased_activate_sonar_range
		icon = GFX_generic_mio_trait_icon_sub_detection

		any_parent = { norfolk_naval_shipyard_upgrade_2 norfolk_naval_shipyard_upgrade_3 }
		all_parents = { norfolk_naval_shipyard_upgrade_4 }

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_1_1 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			sub_detection = 0.1
			naval_range = 0.2
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_1_3
		name = KR_MIO_Trait_construct_additional_mothball_bays
		icon = GFX_KR_generic_mio_trait_icon_naval_base

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_naval_mio_equipment_tt
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_1_4
		name = KR_MIO_Trait_hire_additional_designers
		icon = GFX_KR_generic_mio_trait_icon_navy_xp

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		on_complete = {
			FROM = { navy_experience = 50 }
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_2_1
		name = KR_MIO_Trait_increased_depth_charge_inventory
		icon = GFX_generic_mio_trait_icon_sub_attack

		all_parents = { norfolk_naval_shipyard_upgrade_1 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			sub_attack = 0.15
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_2_2
		name = KR_MIO_Trait_increased_depth_charge_payload
		icon = GFX_generic_mio_trait_icon_sub_attack

		all_parents = { norfolk_naval_shipyard_upgrade_1 }
		any_parent = { norfolk_naval_shipyard_upgrade_1_1 norfolk_naval_shipyard_upgrade_1_2 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			sub_attack = 0.1
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_2_3
		name = KR_MIO_Trait_greatly_increased_anti_air_fire_rate
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		any_parent = { norfolk_naval_shipyard_upgrade_1_1 norfolk_naval_shipyard_upgrade_1_2 }

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_2_4 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			anti_air_attack = 0.2
			build_cost_ic = 0.1
			naval_range = 0.2
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_2_4
		name = KR_MIO_Trait_increased_anti_air_fire_rate
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		any_parent = { norfolk_naval_shipyard_upgrade_1_1 norfolk_naval_shipyard_upgrade_1_2 }

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_2_3 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			anti_air_attack = 0.1
			naval_range = 0.2
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_2_5
		name = KR_MIO_Trait_increased_fragmentation_shell_fragments
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		any_parent = { norfolk_naval_shipyard_upgrade_1_1 norfolk_naval_shipyard_upgrade_1_2 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			anti_air_attack = 0.2
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_2_6
		name = KR_MIO_Trait_acquire_kaiser_shipyard_assets
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			797 = {
				dockyard > 0
				is_owned_and_controlled_by = FROM
			}
			362 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_2_7 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				797 = {
					if = {
						limit = { dockyard > 0 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
				}
				362 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = san_francisco_dockyards_removed }
					add_to_variable = { san_francisco_dockyards_removed = 1 }
				}
				else = {
					set_variable = { san_francisco_dockyards_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_2_7
		name = KR_MIO_Trait_acquire_brooklyn_naval_yard_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			358 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			362 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_2_6 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				358 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				362 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_york_city_civilian_factories_removed }
					add_to_variable = { new_york_city_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { new_york_city_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_naval_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_norfolk_naval_shipyard }
	override_trait = {
		token = KR_MIO_Trait_merge_with_newport_news_shipbuilding
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_kaiser_shipyards
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_brooklyn_naval_yards
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_electric_boat
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_higgins
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_mare_island_naval_shipyard
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 6 y = 4 }
	}
}

USA_kaiser_shipyards_organisation = { #Kaiser Shipyards
	name = USA_kaiser_shipyards
	icon = GFX_idea_USA_kaiser_shipyards

	allowed = { is_american_tag = yes }
	available = {
		797 = { is_owned_and_controlled_by = FROM } #San Francisco
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		mio_cat_eq_all_carrier
		mio_cat_eq_all_battleship
		mio_cat_eq_all_cruiser
		mio_cat_eq_all_destroyer
		submarine
		convoy_1
	}

	research_categories = {
		mio_cat_tech_all_carrier_and_modules
		mio_cat_tech_all_capital_ship_and_modules
		mio_cat_tech_all_destroyer_and_modules
		mio_cat_tech_all_cruiser_and_modules
		mio_cat_tech_all_submarine_and_modules
		tp_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = kaiser_shipyards_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_1
		name = KR_MIO_Trait_sturdier_hulls
		icon = GFX_generic_mio_trait_icon_max_strength

		position = { x = 1 y = 0 }

		limit_to_equipment_type = { convoy_1 }

		equipment_bonus = {
			max_strength = 0.5
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_2
		name = KR_MIO_Trait_reactivate_mothballed_vessels
		icon = GFX_military_industrial_organization_light_cruiser

		available = {
			FROM = {
				any_controlled_state = {
					is_coastal = yes
					is_fully_controlled_by = FROM
				}
			}
		}

		mutually_exclusive = { kaiser_shipyards_upgrade_3 }

		position = { x = 2 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { kaiser_shipyards_stockpile_trait_unlocked = yes }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Olympia Class" }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Olympia Class" }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Olympia Class" }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Olympia Class" }
				}
				else = {
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Olympia Class" }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Olympia Class" }
				}
			}
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_3
		name = KR_MIO_Trait_dedicated_refit_bays
		icon = GFX_KR_generic_mio_trait_icon_naval_refit_speed

		available = {
			custom_override_tooltip = {
				tooltip = {
					localization_key = MIO_more_than_X_funds
					FUNDS = "700"
				}
				check_variable = { funds > 700 }
			}
		}

		mutually_exclusive = { kaiser_shipyards_upgrade_2 }

		position = { x = 4 y = 0 }

		on_complete = {
			FROM = { add_ideas = kaiser_shipyards_upgrade_3_hidden_upgrade }
			add_mio_funds = -700
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_1_1
		name = KR_MIO_Trait_additional_anti_air_weapon_systems
		icon = GFX_generic_mio_trait_icon_air_attack

		any_parent = { kaiser_shipyards_upgrade_2 kaiser_shipyards_upgrade_3 }

		position = { x = 2 y = 1 }

		limit_to_equipment_type = { convoy_1 }

		equipment_bonus = {
			air_attack = 0.5
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_1_2
		name = KR_MIO_Trait_convoy_camouflage
		icon = GFX_generic_mio_trait_icon_surface_visibility

		any_parent = { kaiser_shipyards_upgrade_2 kaiser_shipyards_upgrade_3 }

		position = { x = 3 y = 1 }

		limit_to_equipment_type = { convoy_1 }

		equipment_bonus = {
			surface_visibility = -0.75
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_1_3
		name = KR_MIO_Trait_dedicated_conversion_facilities
		icon = GFX_KR_generic_mio_trait_icon_naval_refit_cost

		any_parent = { kaiser_shipyards_upgrade_2 kaiser_shipyards_upgrade_3 }

		position = { x = 4 y = 1 }

		on_complete = {
			FROM = { add_ideas = kaiser_shipyards_upgrade_1_3_hidden_upgrade }
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_1_4
		name = KR_MIO_Trait_dedicated_repair_bays
		icon = GFX_KR_generic_mio_trait_icon_naval_refit

		any_parent = { kaiser_shipyards_upgrade_2 kaiser_shipyards_upgrade_3 }

		position = { x = 5 y = 1 }

		on_complete = {
			FROM = { add_ideas = kaiser_shipyards_upgrade_1_4_hidden_upgrade }
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_1_5
		name = KR_MIO_Trait_construct_additional_mothball_bays
		icon = GFX_KR_generic_mio_trait_icon_naval_base

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_naval_mio_equipment_tt
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_1_6
		name = KR_MIO_Trait_r_d_department_expansion
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.3
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_2_1
		name = KR_MIO_Trait_harden_external_armour_belt
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { kaiser_shipyards_upgrade_1 kaiser_shipyards_upgrade_1_1 }

		position = { x = 0 y = 2 }

		limit_to_equipment_type = { convoy_1 }

		equipment_bonus = {
			max_strength = 0.5
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_2_2
		name = KR_MIO_Trait_extensive_testing
		icon = GFX_KR_generic_mio_trait_icon_naval_accident_chance

		all_parents = { kaiser_shipyards_upgrade_1_1 kaiser_shipyards_upgrade_1_2 }

		position = { x = 2 y = 2 }

		mutually_exclusive = { kaiser_shipyards_upgrade_2_3 }

		on_complete = {
			FROM = { add_ideas = kaiser_shipyards_upgrade_2_2_hidden_upgrade }
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_2_3
		name = KR_MIO_Trait_extensive_testing_programs
		icon = GFX_KR_generic_mio_trait_icon_naval_accident_chance

		all_parents = { kaiser_shipyards_upgrade_1_2 kaiser_shipyards_upgrade_1_3 }

		position = { x = 4 y = 2 }

		mutually_exclusive = { kaiser_shipyards_upgrade_2_2 }

		on_complete = {
			FROM = { add_ideas = kaiser_shipyards_upgrade_2_3_hidden_upgrade }
		}

		production_bonus = {
			production_capacity_factor = -0.05
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_2_4
		name = KR_MIO_Trait_acquire_brooklyn_naval_yard_assets
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			358 = {
				dockyard > 0
				is_owned_and_controlled_by = FROM
			}
			797 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { kaiser_shipyards_upgrade_2_5 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				358 = {
					if = {
						limit = { dockyard > 0 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
				}
				797 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_york_city_dockyards_removed }
					add_to_variable = { new_york_city_dockyards_removed = 1 }
				}
				else = {
					set_variable = { new_york_city_dockyards_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_2_5
		name = KR_MIO_Trait_acquire_higgins_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			371 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			797 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { kaiser_shipyards_upgrade_2_4 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				371 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				797 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_orleans_civilian_factory_removed }
					add_to_variable = { new_orleans_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { new_orleans_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_naval_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_kaiser_shipyards }
	override_trait = {
		token = KR_MIO_Trait_merge_with_newport_news_shipbuilding
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_norfolk_naval_shipyard
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_brooklyn_naval_yards
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_electric_boat
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_higgins
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_mare_island_naval_shipyard
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 6 y = 4 }
	}
}

USA_brooklyn_naval_yards_organisation = { #New York Shipbuilding
	name = USA_brooklyn_naval_yards
	icon = GFX_idea_USA_brooklyn_naval_yards

	allowed = { is_american_tag = yes }
	available = {
		358 = { is_owned_and_controlled_by = FROM } #New York City
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		mio_cat_eq_all_carrier
		mio_cat_eq_all_battleship
		mio_cat_eq_all_cruiser
		mio_cat_eq_all_destroyer
		submarine
		convoy_1
	}

	research_categories = {
		mio_cat_tech_all_carrier_and_modules
		mio_cat_tech_all_capital_ship_and_modules
		mio_cat_tech_all_destroyer_and_modules
		mio_cat_tech_all_cruiser_and_modules
		mio_cat_tech_all_submarine_and_modules
		tp_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = brooklyn_naval_yards_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_1
		name = KR_MIO_Trait_reactivate_mothballed_vessels
		icon = GFX_military_industrial_organization_capital_ship

		available = {
			FROM = {
				any_controlled_state = {
					is_coastal = yes
					is_fully_controlled_by = FROM
				}
			}
		}

		mutually_exclusive = { brooklyn_naval_yards_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { brooklyn_naval_yards_stockpile_trait_unlocked = yes }
					create_ship = { type = ship_hull_heavy_2 equipment_variant = "Iowa Class" }
					create_ship = { type = ship_hull_heavy_2 equipment_variant = "Iowa Class" }
				}
				else = {
					create_ship = { type = ship_hull_heavy_2 equipment_variant = "Iowa Class" }
				}
			}
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_2
		name = KR_MIO_Trait_anti_torpedo_bulge
		icon = GFX_generic_mio_trait_icon_naval_torpedo_damage_reduction_factor

		mutually_exclusive = { brooklyn_naval_yards_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			naval_torpedo_damage_reduction_factor = 0.15
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_3
		name = KR_MIO_Trait_counter_flooding_system
		icon = GFX_generic_mio_trait_icon_max_strength

		position = { x = 3 y = 0 }

		equipment_bonus = {
			max_strength = 0.1
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_4
		name = KR_MIO_Trait_flooding_boundries
		icon = GFX_KR_generic_mio_trait_icon_naval_torpedo_enemy_critical_chance_factor

		mutually_exclusive = { brooklyn_naval_yards_upgrade_5 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			naval_torpedo_enemy_critical_chance_factor = -0.25
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_5
		name = KR_MIO_Trait_harden_external_armour_belt
		icon = GFX_KR_generic_mio_trait_icon_naval_torpedo_enemy_critical_chance_factor

		mutually_exclusive = { brooklyn_naval_yards_upgrade_4 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			naval_torpedo_enemy_critical_chance_factor = -0.35
			naval_torpedo_damage_reduction_factor = -0.1
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_1_1
		name = KR_MIO_Trait_eliminate_random_engine_fires
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { brooklyn_naval_yards_upgrade_3 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_1_2
		name = KR_MIO_Trait_isolated_and_secure_magazine_storage
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { brooklyn_naval_yards_upgrade_3 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_1_3
		name = KR_MIO_Trait_construct_additional_mothball_bays
		icon = GFX_KR_generic_mio_trait_icon_naval_base

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_naval_mio_equipment_tt
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_1_4
		name = KR_MIO_Trait_government_contract_favoritism
		icon = GFX_KR_generic_mio_trait_icon_funds

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_2_1
		name = KR_MIO_Trait_regular_inspections
		icon = GFX_KR_generic_mio_trait_icon_naval_weather_penalty_factor

		any_parent = { brooklyn_naval_yards_upgrade_1 brooklyn_naval_yards_upgrade_2 }
		all_parents = { brooklyn_naval_yards_upgrade_1_1 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.1
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_2_2
		name = KR_MIO_Trait_double_bottom
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { brooklyn_naval_yards_upgrade_1_1 brooklyn_naval_yards_upgrade_1_2 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			max_strength = 0.1
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_2_3
		name = KR_MIO_Trait_extensive_testing
		icon = GFX_KR_generic_mio_trait_icon_naval_weather_penalty_factor

		any_parent = { brooklyn_naval_yards_upgrade_4 brooklyn_naval_yards_upgrade_5 }
		all_parents = { brooklyn_naval_yards_upgrade_1_2 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.1
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_2_4
		name = KR_MIO_Trait_acquire_kaiser_shipyard_assets
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			797 = {
				dockyard > 0
				is_owned_and_controlled_by = FROM
			}
			358 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { brooklyn_naval_yards_upgrade_2_5 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				797 = {
					if = {
						limit = { dockyard > 0 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
				}
				358 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = san_francisco_dockyards_removed }
					add_to_variable = { san_francisco_dockyards_removed = 1 }
				}
				else = {
					set_variable = { san_francisco_dockyards_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_2_5
		name = KR_MIO_Trait_acquire_higgins_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			371 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			358 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { brooklyn_naval_yards_upgrade_2_4 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				371 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				358 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_orleans_civilian_factory_removed }
					add_to_variable = { new_orleans_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { new_orleans_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_naval_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_brooklyn_naval_yards }
	override_trait = {
		token = KR_MIO_Trait_merge_with_newport_news_shipbuilding
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_norfolk_naval_shipyard
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_kaiser_shipyards
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_electric_boat
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_higgins
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_mare_island_naval_shipyard
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 6 y = 4 }
	}
}
USA_electric_boat_organisation = { #Electric Boat
	name = USA_electric_boat
	icon = GFX_idea_electric_boat_company

	allowed = { is_american_tag = yes }
	available = {
		931 = { is_owned_and_controlled_by = FROM } #Connecticut
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		submarine
	}

	research_categories = {
		mio_cat_tech_all_submarine_and_modules
		tp_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = generic_mio_initial_trait_submarine_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = electric_boat_upgrade_1
		name = KR_MIO_Trait_reactivate_mothballed_vessels
		icon = GFX_military_industrial_organization_submarine

		available = {
			FROM = {
				any_controlled_state = {
					is_coastal = yes
					is_fully_controlled_by = FROM
				}
			}
		}

		mutually_exclusive = { electric_boat_upgrade_2 }

		position = { x = 0 y = 0 }

		equipment_bonus = {
			sub_visibility = -0.05
		}

		on_complete = {
			FROM = {
				if = {
					limit = { electric_boat_stockpile_trait_unlocked = yes }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" }
				}
				else = {
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" }
				}
			}
		}
	}

	trait = {
		token = electric_boat_upgrade_2
		name = KR_MIO_Trait_reduce_propellor_noise
		icon = GFX_generic_mio_trait_icon_sub_visibility

		mutually_exclusive = { electric_boat_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			sub_visibility = -0.15
			torpedo_attack = -0.15
			surface_detection = -0.1
		}
	}

	trait = {
		token = electric_boat_upgrade_3
		name = KR_MIO_Trait_improved_hydrodynamic_design
		icon = GFX_generic_mio_trait_icon_naval_speed

		position = { x = 2 y = 0 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}

	trait = {
		token = electric_boat_upgrade_4
		name = KR_MIO_Trait_high_quality_engines
		icon = GFX_generic_mio_trait_icon_naval_speed

		position = { x = 4 y = 0 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}

	trait = {
		token = electric_boat_upgrade_5
		name = KR_MIO_Trait_increase_mine_capacity
		icon = GFX_generic_mio_trait_icon_mines

		mutually_exclusive = { electric_boat_upgrade_6 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			mines_planting = 0.2
		}
	}

	trait = {
		token = electric_boat_upgrade_6
		name = KR_MIO_Trait_significantly_increase_mine_capacity
		icon = GFX_generic_mio_trait_icon_mines

		mutually_exclusive = { electric_boat_upgrade_5 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			mines_planting = 0.4
			naval_speed = -0.1
		}
	}

	trait = {
		token = electric_boat_upgrade_1_1
		name = KR_MIO_Trait_open_cycle_propulsion
		icon = GFX_generic_mio_trait_icon_naval_speed

		all_parents = { electric_boat_upgrade_3 electric_boat_upgrade_4 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}

	trait = {
		token = electric_boat_upgrade_1_2
		name = KR_MIO_Trait_construct_additional_mothball_bays
		icon = GFX_KR_generic_mio_trait_icon_naval_base

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_naval_mio_equipment_tt
		}
	}

	trait = {
		token = electric_boat_upgrade_1_3
		name = KR_MIO_Trait_eliminate_resource_waste
		icon = GFX_generic_mio_trait_icon_resources

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.3
		}
	}

	trait = {
		token = electric_boat_upgrade_2_1
		name = KR_MIO_Trait_large_torpedo_banks
		icon = GFX_generic_mio_trait_icon_torpedo_attack

		any_parent = { electric_boat_upgrade_1 electric_boat_upgrade_2 }
		all_parents = { electric_boat_upgrade_1_1 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			torpedo_attack = 0.075
		}
	}

	trait = {
		token = electric_boat_upgrade_2_2
		name = KR_MIO_Trait_longer_radar_range
		icon = GFX_generic_mio_trait_icon_surface_detection

		all_parents = { electric_boat_upgrade_1_1 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			surface_detection = 0.15
		}
	}

	trait = {
		token = electric_boat_upgrade_2_3
		name = KR_MIO_Trait_increased_contact_detonator_reliability
		icon = GFX_generic_mio_trait_icon_torpedo_attack

		any_parent = { electric_boat_upgrade_5 electric_boat_upgrade_6 }
		all_parents = { electric_boat_upgrade_1_1 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			torpedo_attack = 0.075
		}
	}

	trait = {
		token = electric_boat_upgrade_2_4
		name = KR_MIO_Trait_acquire_kaiser_shipyard_assets
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			797 = {
				dockyard > 0
				is_owned_and_controlled_by = FROM
			}
			931 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { electric_boat_upgrade_2_5 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				797 = {
					if = {
						limit = { dockyard > 0 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = san_francisco_dockyards_removed }
					add_to_variable = { san_francisco_dockyards_removed = 1 }
				}
				else = {
					set_variable = { san_francisco_dockyards_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = electric_boat_upgrade_2_5
		name = KR_MIO_Trait_acquire_higgins_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			371 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			931 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { electric_boat_upgrade_2_4 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				371 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_naval_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_electric_boat }
	override_trait = {
		token = KR_MIO_Trait_merge_with_newport_news_shipbuilding
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_norfolk_naval_shipyard
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_kaiser_shipyards
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_brooklyn_naval_yards
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_higgins
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_mare_island_naval_shipyard
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 6 y = 4 }
	}
}
USA_higgins_organisation = { #Higgins
	name = USA_higgins
	icon = GFX_idea_USA_higgins

	allowed = { is_american_tag = yes }
	available = {
		371 = { is_owned_and_controlled_by = FROM } #New Orleans
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		mio_cat_eq_all_cruiser
		mio_cat_eq_all_destroyer
	}

	research_categories = {
		mio_cat_tech_all_cruiser_and_modules
		mio_cat_tech_all_destroyer_and_modules
		tp_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = higgins_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = higgins_upgrade_1
		name = KR_MIO_Trait_longer_catapult_launch_system
		icon = GFX_generic_mio_trait_icon_surface_detection

		mutually_exclusive = { higgins_upgrade_2 }

		position = { x = 0 y = 0 }

		equipment_bonus = {
			surface_detection = 0.1
			hg_attack = -0.3
			lg_attack = -0.3
		}
	}

	trait = {
		token = higgins_upgrade_2
		name = KR_MIO_Trait_improved_ship_camouflage_patterns
		icon = GFX_generic_mio_trait_icon_surface_visibility

		mutually_exclusive = { higgins_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			surface_visibility = -0.25
			hg_attack = -0.3
			lg_attack = -0.3
		}
	}

	trait = {
		token = higgins_upgrade_3
		name = KR_MIO_Trait_longer_radar_range
		icon = GFX_generic_mio_trait_icon_surface_detection

		position = { x = 2 y = 0 }

		equipment_bonus = {
			surface_detection = 0.1
			torpedo_attack = -0.1
		}
	}

	trait = {
		token = higgins_upgrade_4
		name = KR_MIO_Trait_high_quality_optics
		icon = GFX_generic_mio_trait_icon_surface_detection

		position = { x = 3 y = 0 }

		equipment_bonus = {
			surface_detection = 0.1
			torpedo_attack = -0.1
		}
	}

	trait = {
		token = higgins_upgrade_5
		name = KR_MIO_Trait_additional_radar_arrays
		icon = GFX_generic_mio_trait_icon_surface_detection

		position = { x = 4 y = 0 }

		equipment_bonus = {
			surface_detection = 0.1
			torpedo_attack = -0.1
		}
	}

	trait = {
		token = higgins_upgrade_6
		name = KR_MIO_Trait_improved_hydrodynamic_design
		icon = GFX_generic_mio_trait_icon_naval_speed

		mutually_exclusive = { higgins_upgrade_7 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			naval_speed = 0.1
			hg_armor_piercing = -0.3
			lg_armor_piercing = -0.3
		}
	}

	trait = {
		token = higgins_upgrade_7
		name = KR_MIO_Trait_reactivate_mothballed_vessels
		icon = GFX_military_industrial_organization_destroyer

		available = {
			FROM = {
				any_controlled_state = {
					is_coastal = yes
					is_fully_controlled_by = FROM
				}
			}
		}

		mutually_exclusive = { higgins_upgrade_6 }

		position = { x = 6 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { higgins_stockpile_trait_unlocked = yes }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" }
				}
				else = {
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" }
				}
			}
		}
	}

	trait = {
		token = higgins_upgrade_8
		name = KR_MIO_Trait_increase_worker_salaries
		icon = GFX_icon_Long_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { higgins_upgrade_9 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					Long_strength = -1
					tooltip = USA_change_longist_strength
				}
			}
		}
	}

	trait = {
		token = higgins_upgrade_9
		name = KR_MIO_Trait_workplace_agitation
		icon = GFX_icon_Long_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { higgins_upgrade_8 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					Long_strength = 1
					tooltip = USA_change_longist_strength
				}
			}
		}
	}

	trait = {
		token = higgins_upgrade_1_1
		name = KR_MIO_Trait_high_quality_engines
		icon = GFX_generic_mio_trait_icon_naval_speed

		any_parent = { higgins_upgrade_1 higgins_upgrade_2 }
		all_parents = { higgins_upgrade_3 higgins_upgrade_4 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}

	trait = {
		token = higgins_upgrade_1_2
		name = KR_MIO_Trait_autonomous_turbine_columns
		icon = GFX_generic_mio_trait_icon_naval_speed

		any_parent = { higgins_upgrade_6 higgins_upgrade_7 }
		all_parents = { higgins_upgrade_4 higgins_upgrade_5 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}

	trait = {
		token = higgins_upgrade_1_3
		name = KR_MIO_Trait_construct_additional_mothball_bays
		icon = GFX_KR_generic_mio_trait_icon_naval_base

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_naval_mio_equipment_tt
		}
	}

	trait = {
		token = higgins_upgrade_1_4
		name = KR_MIO_Trait_additional_fuel_capacity_for_plane_catapult_module
		icon = GFX_generic_mio_trait_icon_surface_detection

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		equipment_bonus = {
			surface_detection = 0.2
		}
	}

	trait = {
		token = higgins_upgrade_2_1
		name = KR_MIO_Trait_improved_propeller_design
		icon = GFX_generic_mio_trait_icon_surface_detection

		all_parents = { higgins_upgrade_1_1 higgins_upgrade_4 higgins_upgrade_1_2 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}

	trait = {
		token = higgins_upgrade_2_2
		name = KR_MIO_Trait_acquire_kaiser_shipyard_assets
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			797 = {
				dockyard > 0
				is_owned_and_controlled_by = FROM
			}
			371 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { higgins_upgrade_2_3 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				797 = {
					if = {
						limit = { dockyard > 0 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
				}
				371 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = san_francisco_dockyards_removed }
					add_to_variable = { san_francisco_dockyards_removed = 1 }
				}
				else = {
					set_variable = { san_francisco_dockyards_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = higgins_upgrade_2_3
		name = KR_MIO_Trait_acquire_brooklyn_naval_yard_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			358 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			371 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { higgins_upgrade_2_2 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				358 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				371 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_york_city_civilian_factories_removed }
					add_to_variable = { new_york_city_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { new_york_city_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_naval_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_higgins }
	override_trait = {
		token = KR_MIO_Trait_merge_with_newport_news_shipbuilding
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_norfolk_naval_shipyard
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_kaiser_shipyards
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_brooklyn_naval_yards
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_electric_boat
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_mare_island_naval_shipyard
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 6 y = 4 }
	}
}
USA_mare_island_naval_shipyard_organisation = { #Mare Island Naval Shipyard
	name = USA_mare_island_naval_shipyard
	icon = GFX_idea_USA_mare_island_naval_shipyard

	allowed = { is_american_tag = yes }
	available = {
		797 = { is_owned_and_controlled_by = FROM } #San Francisco
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		mio_cat_eq_all_carrier
		mio_cat_eq_all_battleship
		mio_cat_eq_all_cruiser
		mio_cat_eq_all_destroyer
		submarine
		convoy_1
	}

	research_categories = {
		mio_cat_tech_all_carrier_and_modules
		mio_cat_tech_all_capital_ship_and_modules
		mio_cat_tech_all_destroyer_and_modules
		mio_cat_tech_all_cruiser_and_modules
		mio_cat_tech_all_submarine_and_modules
		tp_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = mare_island_naval_shipyard_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_1
		name = KR_MIO_Trait_reactivate_mothballed_vessels
		icon = GFX_military_industrial_organization_convoy_1

		mutually_exclusive = { mare_island_naval_shipyard_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { mare_island_naval_shipyard_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = convoy
						amount = 500
						producer = FROM
					}
				}
				else = {
					add_equipment_to_stockpile = {
						type = convoy
						amount = 250
						producer = FROM
					}
				}
			}
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_2
		name = KR_MIO_Trait_prioritise_standardising_destroyer_parts
		icon = GFX_generic_mio_trait_icon_production_capacity

		mutually_exclusive = { mare_island_naval_shipyard_upgrade_1 }

		position = { x = 1 y = 0 }

		limit_to_equipment_type = { mio_cat_eq_all_destroyer }

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_3
		name = KR_MIO_Trait_smoothen_bureaucratic_procedures
		icon = GFX_KR_generic_mio_trait_icon_assign_cost

		position = { x = 3 y = 0 }

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.5
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_4
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_production_capacity

		mutually_exclusive = { mare_island_naval_shipyard_upgrade_5 }

		position = { x = 5 y = 0 }

		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_5
		name = KR_MIO_Trait_prioritise_standardising_cruiser_parts
		icon = GFX_generic_mio_trait_icon_production_capacity

		mutually_exclusive = { mare_island_naval_shipyard_upgrade_4 }

		position = { x = 6 y = 0 }

		limit_to_equipment_type = { mio_cat_eq_all_cruiser }

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_1_1
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mare_island_naval_shipyard_upgrade_3 }

		mutually_exclusive = { mare_island_naval_shipyard_upgrade_1_2 }

		position = { x = 2 y = 1 }

		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_1_2
		name = KR_MIO_Trait_additional_dockyard_facilities
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mare_island_naval_shipyard_upgrade_3 }

		mutually_exclusive = { mare_island_naval_shipyard_upgrade_1_1 }

		position = { x = 4 y = 1 }

		production_bonus = {
			production_capacity_factor = 0.1
			production_resource_need_factor = 0.25
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_1_3
		name = KR_MIO_Trait_construct_additional_mothball_bays
		icon = GFX_KR_generic_mio_trait_icon_naval_base

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_naval_mio_equipment_tt
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_1_4
		name = KR_MIO_Trait_standardised_ammunition_sizes
		icon = GFX_generic_mio_trait_icon_production_capacity

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_2_1
		name = KR_MIO_Trait_simplify_engine_design
		icon = GFX_generic_mio_trait_icon_production_capacity

		any_parent = { mare_island_naval_shipyard_upgrade_1 mare_island_naval_shipyard_upgrade_2 }
		any_parent = { mare_island_naval_shipyard_upgrade_1_1 mare_island_naval_shipyard_upgrade_1_2 }

		position = { x = 0 y = 2 }

		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_2_2
		name = KR_MIO_Trait_eliminate_resource_waste
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { mare_island_naval_shipyard_upgrade_1 mare_island_naval_shipyard_upgrade_2 }
		any_parent = { mare_island_naval_shipyard_upgrade_1_1 mare_island_naval_shipyard_upgrade_1_2 }

		position = { x = 1 y = 2 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_2_3
		name = KR_MIO_Trait_restructure_development_procedures
		icon = GFX_KR_generic_mio_trait_icon_assign_cost

		any_parent = { mare_island_naval_shipyard_upgrade_1_1 mare_island_naval_shipyard_upgrade_1_2 }

		position = { x = 3 y = 2 }

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.5
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_2_4
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { mare_island_naval_shipyard_upgrade_4 mare_island_naval_shipyard_upgrade_5 }
		any_parent = { mare_island_naval_shipyard_upgrade_1_1 mare_island_naval_shipyard_upgrade_1_2 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_2_5
		name = KR_MIO_Trait_long_life_production_runs
		icon = GFX_generic_mio_trait_icon_production_capacity

		any_parent = { mare_island_naval_shipyard_upgrade_4 mare_island_naval_shipyard_upgrade_5 }
		any_parent = { mare_island_naval_shipyard_upgrade_1_1 mare_island_naval_shipyard_upgrade_1_2 }

		position = { x = 6 y = 2 }

		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_2_6
		name = KR_MIO_Trait_acquire_brooklyn_naval_yard_assets
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			358 = {
				dockyard > 0
				is_owned_and_controlled_by = FROM
			}
			797 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { mare_island_naval_shipyard_upgrade_2_7 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				358 = {
					if = {
						limit = { dockyard > 0 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
				}
				797 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_york_city_dockyards_removed }
					add_to_variable = { new_york_city_dockyards_removed = 1 }
				}
				else = {
					set_variable = { new_york_city_dockyards_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_2_7
		name = KR_MIO_Trait_acquire_higgins_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			371 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			797 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { mare_island_naval_shipyard_upgrade_2_6 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				371 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				797 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_orleans_civilian_factory_removed }
					add_to_variable = { new_orleans_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { new_orleans_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_naval_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_mare_island_naval_shipyard }
	override_trait = {
		token = KR_MIO_Trait_merge_with_newport_news_shipbuilding
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_norfolk_naval_shipyard
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_kaiser_shipyards
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_brooklyn_naval_yards
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_electric_boat
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_higgins
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 6 y = 4 }
	}
}
USA_naval_merge_organisation = {
	allowed = { always = no } #Used as archetype for merger traits

	trait = {
		token = KR_MIO_Trait_merge_with_newport_news_shipbuilding
		name = KR_MIO_Trait_merge_with_newport_news_shipbuilding
		icon = GFX_icon_newport_news_shipbuilding_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_newport_news_shipbuilding_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			hg_attack = 0.1
			lg_attack = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_newport_news_shipbuilding_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_newport_news_shipbuilding TYPE = newport_news_shipbuilding_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_norfolk_naval_shipyard_organisation }
				set_mio_name_key = USA_MIO_Merger_Newport_Norfolk
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_kaiser_shipyards_organisation }
				set_mio_name_key = USA_MIO_Merger_Newport_Kaiser
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_brooklyn_naval_yards_organisation }
				set_mio_name_key = USA_MIO_Merger_Newport_Brooklyn
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_electric_boat_organisation }
				set_mio_name_key = USA_MIO_Merger_Newport_EB
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_higgins_organisation }
				set_mio_name_key = USA_MIO_Merger_Newport_Higgins
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_mare_island_naval_shipyard_organisation }
				set_mio_name_key = USA_MIO_Merger_Newport_Mare
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_norfolk_naval_shipyard
		name = KR_MIO_Trait_merge_with_norfolk_naval_shipyard
		icon = GFX_icon_norfolk_naval_yard_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_norfolk_naval_shipyard_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			naval_range = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_norfolk_naval_shipyard_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_norfolk_naval_shipyard TYPE = norfolk_naval_shipyard_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_newport_news_shipbuilding_organisation }
				set_mio_name_key = USA_MIO_Merger_Newport_Norfolk
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_kaiser_shipyards_organisation }
				set_mio_name_key = USA_MIO_Merger_Norfolk_Kaiser
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_brooklyn_naval_yards_organisation }
				set_mio_name_key = USA_MIO_Merger_Norfolk_Brooklyn
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_electric_boat_organisation }
				set_mio_name_key = USA_MIO_Merger_Norfolk_EB
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_higgins_organisation }
				set_mio_name_key = USA_MIO_Merger_Norfolk_Higgins
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_mare_island_naval_shipyard_organisation }
				set_mio_name_key = USA_MIO_Merger_Norfolk_Mare
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_kaiser_shipyards
		name = KR_MIO_Trait_merge_with_kaiser_shipyards
		icon = GFX_icon_kaiser_shipyards_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_kaiser_shipyards_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			air_attack = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_kaiser_shipyards_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_kaiser_shipyards TYPE = kaiser_shipyards_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_newport_news_shipbuilding_organisation }
				set_mio_name_key = USA_MIO_Merger_Newport_Kaiser
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_norfolk_naval_shipyard_organisation }
				set_mio_name_key = USA_MIO_Merger_Norfolk_Kaiser
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_brooklyn_naval_yards_organisation }
				set_mio_name_key = USA_MIO_Merger_Kaiser_Brooklyn
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_electric_boat_organisation }
				set_mio_name_key = USA_MIO_Merger_Kaiser_EB
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_higgins_organisation }
				set_mio_name_key = USA_MIO_Merger_Kaiser_Higgins
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_mare_island_naval_shipyard_organisation }
				set_mio_name_key = USA_MIO_Merger_Kaiser_Mare
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_brooklyn_naval_yards
		name = KR_MIO_Trait_merge_with_brooklyn_naval_yards
		icon = GFX_icon_brooklyn_naval_yards_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_brooklyn_naval_yards_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			max_strength = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_brooklyn_naval_yards_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_brooklyn_naval_yards TYPE = brooklyn_naval_yards_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_newport_news_shipbuilding_organisation }
				set_mio_name_key = USA_MIO_Merger_Newport_Brooklyn
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_norfolk_naval_shipyard_organisation }
				set_mio_name_key = USA_MIO_Merger_Norfolk_Brooklyn
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_kaiser_shipyards_organisation }
				set_mio_name_key = USA_MIO_Merger_Kaiser_Brooklyn
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_electric_boat_organisation }
				set_mio_name_key = USA_MIO_Merger_Brooklyn_EB
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_higgins_organisation }
				set_mio_name_key = USA_MIO_Merger_Brooklyn_Higgins
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_mare_island_naval_shipyard_organisation }
				set_mio_name_key = USA_MIO_Merger_Brooklyn_Mare
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_electric_boat
		name = KR_MIO_Trait_merge_with_electric_boat
		icon = GFX_icon_electric_boat_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_electric_boat_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			torpedo_attack = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_electric_boat_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_electric_boat TYPE = generic_mio_initial_trait_submarine_designer
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_newport_news_shipbuilding_organisation }
				set_mio_name_key = USA_MIO_Merger_Newport_EB
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_norfolk_naval_shipyard_organisation }
				set_mio_name_key = USA_MIO_Merger_Norfolk_EB
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_kaiser_shipyards_organisation }
				set_mio_name_key = USA_MIO_Merger_Kaiser_EB
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_brooklyn_naval_yards_organisation }
				set_mio_name_key = USA_MIO_Merger_Brooklyn_EB
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_higgins_organisation }
				set_mio_name_key = USA_MIO_Merger_EB_Higgins
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_mare_island_naval_shipyard_organisation }
				set_mio_name_key = USA_MIO_Merger_EB_Mare
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_higgins
		name = KR_MIO_Trait_merge_with_higgins
		icon = GFX_icon_higgins_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_higgins_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			surface_detection = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_higgins_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_higgins TYPE = higgins_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_newport_news_shipbuilding_organisation }
				set_mio_name_key = USA_MIO_Merger_Newport_Higgins
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_norfolk_naval_shipyard_organisation }
				set_mio_name_key = USA_MIO_Merger_Norfolk_Higgins
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_kaiser_shipyards_organisation }
				set_mio_name_key = USA_MIO_Merger_Kaiser_Higgins
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_brooklyn_naval_yards_organisation }
				set_mio_name_key = USA_MIO_Merger_Brooklyn_Higgins
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_electric_boat_organisation }
				set_mio_name_key = USA_MIO_Merger_EB_Higgins
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_mare_island_naval_shipyard_organisation }
				set_mio_name_key = USA_MIO_Merger_Higgins_Mare
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_mare_island_naval_shipyard
		name = KR_MIO_Trait_merge_with_mare_island_naval_shipyard
		icon = GFX_icon_mare_island_naval_shipyard_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_mare_island_naval_shipyard_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_capacity_factor = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_mare_island_naval_shipyard_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_mare_island_naval_shipyard TYPE = mare_island_naval_shipyard_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_newport_news_shipbuilding_organisation }
				set_mio_name_key = USA_MIO_Merger_Newport_Mare
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_norfolk_naval_shipyard_organisation }
				set_mio_name_key = USA_MIO_Merger_Norfolk_Mare
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_kaiser_shipyards_organisation }
				set_mio_name_key = USA_MIO_Merger_Kaiser_Mare
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_brooklyn_naval_yards_organisation }
				set_mio_name_key = USA_MIO_Merger_Brooklyn_Mare
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_electric_boat_organisation }
				set_mio_name_key = USA_MIO_Merger_EB_Mare
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_higgins_organisation }
				set_mio_name_key = USA_MIO_Merger_Higgins_Mare
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_Maintain_Independence
		name = KR_MIO_Trait_maintain_independence
		icon = GFX_icon_dont_merge

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_is_senior_partner_of_merger = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.1
		}

		on_complete = {
			USA_mio_maintain_independence = yes
		}
	}
}

#####################
### Airplane MIOs ###
#####################
USA_bell_organisation = { #Bell
	name = USA_bell
	icon = GFX_idea_bell

	allowed = { is_american_tag = yes }
	available = {
		930 = { is_owned_and_controlled_by = FROM } #Buffalo
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		small_plane_airframe
		medium_plane_airframe
		large_plane_airframe
		cv_small_plane_airframe
		transport_plane_equipment
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = bell_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = bell_upgrade_1
		name = KR_MIO_Trait_standardise_parts
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 0 y = 0 }

		equipment_bonus = {
			build_cost_ic = -0.015
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = -0.1
		}
	}

	trait = {
		token = bell_upgrade_2
		name = KR_MIO_Trait_reactivate_plane_reserves
		icon = GFX_generic_mio_department_icon_plane_tactical_bomber

		mutually_exclusive = { bell_upgrade_3 }

		position = { x = 2 y = 0 }

		equipment_bonus = {
			build_cost_ic = -0.03
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 1
		}

		on_complete = {
			FROM = {
				if = {
					limit = { has_dlc_bba = yes }
					if = {
						limit = { bell_stockpile_trait_unlocked = yes }
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "200"
								EQUIPMENT = "B-18 Tactical Bomber"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = medium_plane_airframe_1
								amount = 200
								variant_name = "B-18 Tactical Bomber"
								producer = FROM
							}
						}
					}
					else = {
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "100"
								EQUIPMENT = "B-18 Tactical Bomber"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = medium_plane_airframe_1
								amount = 100
								variant_name = "B-18 Tactical Bomber"
								producer = FROM
							}
						}
					}
				}
				else = {
					if = {
						limit = { bell_stockpile_trait_unlocked = yes }
						add_equipment_to_stockpile = {
							type = tac_bomber_equipment_0
							amount = 200
							producer = FROM
						}
					}
					else = {
						add_equipment_to_stockpile = {
							type = tac_bomber_equipment_0
							amount = 100
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = bell_upgrade_3
		name = KR_MIO_Trait_oversimplify_designs
		icon = GFX_KR_generic_mio_trait_icon_air_xp

		available = {
			FROM = { has_air_experience > 50 }
		}

		mutually_exclusive = { bell_upgrade_2 }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			build_cost_ic = -0.03
			air_agility = 0.1
		}

		on_complete = {
			FROM = { air_experience = -50 }
		}
	}

	trait = {
		token = bell_upgrade_4
		name = KR_MIO_Trait_rush_production_process
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 6 y = 0 }

		equipment_bonus = {
			build_cost_ic = -0.015
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = -0.1
		}
	}

	trait = {
		token = bell_upgrade_1_1
		name = KR_MIO_Trait_prioritise_acquiring_machine_tools
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		all_parents = { bell_upgrade_1 }
		any_parent = { bell_upgrade_2 bell_upgrade_3 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			build_cost_ic = -0.015
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = -0.15
		}
	}

	trait = {
		token = bell_upgrade_1_2
		name = KR_MIO_Trait_rush_design_process
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		all_parents = { bell_upgrade_4 }
		any_parent = { bell_upgrade_2 bell_upgrade_3 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			build_cost_ic = -0.015
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = -0.15
		}
	}

	trait = {
		token = bell_upgrade_1_3
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = bell_upgrade_1_4
		name = KR_MIO_Trait_long_life_production_run
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = bell_upgrade_2_1
		name = KR_MIO_Trait_cheaper_materials
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { bell_upgrade_1_1 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.015
		}

		production_bonus = {
			production_resource_need_factor = 0.25
		}
	}

	trait = {
		token = bell_upgrade_2_2
		name = KR_MIO_Trait_government_lobbying
		icon = GFX_KR_generic_mio_trait_icon_assign_cost

		any_parent = { bell_upgrade_2 bell_upgrade_3 }

		mutually_exclusive = { bell_upgrade_2_3 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.03
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 1
		}
	}

	trait = {
		token = bell_upgrade_2_3
		name = KR_MIO_Trait_stricter_design_specifications
		icon = GFX_KR_generic_mio_trait_icon_air_xp

		available = {
			FROM = { has_air_experience > 50 }
		}

		any_parent = { bell_upgrade_2 bell_upgrade_3 }

		mutually_exclusive = { bell_upgrade_2_2 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.03
		}

		on_complete = {
			FROM = { air_experience = -50 }
		}
	}

	trait = {
		token = bell_upgrade_2_4
		name = KR_MIO_Trait_extreme_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { bell_upgrade_1_2 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.015
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.2
		}
	}

	trait = {
		token = bell_upgrade_2_5
		name = KR_MIO_Trait_acquire_lockheed_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			798 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			930 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { bell_upgrade_2_6 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				798 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				930 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = los_angeles_military_factory_removed }
					add_to_variable = { los_angeles_military_factory_removed = 1 }
				}
				else = {
					set_variable = { los_angeles_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = bell_upgrade_2_6
		name = KR_MIO_Trait_acquire_north_american_aviation_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			361 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			930 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { bell_upgrade_2_5 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				930 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = maryland_civlian_factory_removed }
					add_to_variable = { maryland_civlian_factory_removed = 2 }
				}
				else = {
					set_variable = { maryland_civlian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_airplane_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_bell }
	override_trait = {
		token = KR_MIO_Trait_merge_with_consolidated
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_grumman
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_lockheed
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_north_american_aviation
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_curtiss_wright
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_vought
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_boeing
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_douglas
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 8 y = 4 }
	}
}
USA_consolidated_organisation = { #Consolidated
	name = USA_consolidated
	icon = GFX_idea_consolidated_aircraft

	allowed = { is_american_tag = yes }
	available = {
		930 = { is_owned_and_controlled_by = FROM } #Buffalo
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		small_plane_airframe
		medium_plane_airframe
		large_plane_airframe
		cv_small_plane_airframe
		transport_plane_equipment
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = generic_mio_initial_trait_general_aircraft_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = consolidated_upgrade_1
		name = KR_MIO_Trait_improved_aerodynamic_profile
		icon = GFX_generic_mio_trait_icon_air_superiority

		position = { x = 0 y = 0 }

		equipment_bonus = {
			air_superiority = 0.1
			air_range = 0.1
		}
	}

	trait = {
		token = consolidated_upgrade_2
		name = KR_MIO_Trait_reactivate_plane_reserves
		icon = GFX_generic_mio_department_icon_plane_scout

		mutually_exclusive = { consolidated_upgrade_3 }

		position = { x = 2 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { has_dlc_bba = yes }
					if = {
						limit = { NOT = { has_tech = photo_reconnaisance } }
						set_technology = { photo_reconnaisance = 1 }
					}
					create_equipment_variant = {
						name = "A-20 F3A Havoc"
						type = medium_plane_scout_plane_airframe_1
						show_position = no
						modules = {
							fixed_main_weapon_slot = recon_camera
							engine_type_slot = engine_2_2x
							special_type_slot_1 = lmg_defense_turret
						}
					}
					custom_effect_tooltip = tooltip_white_line
					if = {
						limit = { consolidated_stockpile_trait_unlocked = yes }
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "200"
								EQUIPMENT = "A-20 F3A Havoc Scout"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = medium_plane_scout_plane_airframe_1
								amount = 200
								variant_name = "A-20 F3A Havoc"
								producer = FROM
							}
						}
					}
					else = {
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "100"
								EQUIPMENT = "A-20 F3A Havoc Scout"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = medium_plane_scout_plane_airframe_1
								amount = 100
								variant_name = "A-20 F3A Havoc"
								producer = FROM
							}
						}
					}
				}
				else = {
					if = {
						limit = { consolidated_stockpile_trait_unlocked = yes }
						add_equipment_to_stockpile = {
							type = fighter_equipment_0
							amount = 200
							producer = FROM
						}
					}
					else = {
						add_equipment_to_stockpile = {
							type = fighter_equipment_0
							amount = 100
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = consolidated_upgrade_3
		name = KR_MIO_Trait_increased_internal_ammunition_capacity
		icon = GFX_generic_mio_trait_icon_air_attack

		mutually_exclusive = { consolidated_upgrade_2 }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			air_attack = 0.1
			reliability = 0.1
		}
	}

	trait = {
		token = consolidated_upgrade_4
		name = KR_MIO_Trait_space_efficient_designs
		icon = GFX_generic_mio_trait_icon_air_agility

		position = { x = 6 y = 0 }

		equipment_bonus = {
			air_agility = 0.1
			maximum_speed = 0.1
		}
	}

	trait = {
		token = consolidated_upgrade_1_1
		name = KR_MIO_Trait_expanded_bomb_bay
		icon = GFX_generic_mio_trait_icon_strategic_attack

		all_parents = { consolidated_upgrade_1 }
		any_parent = { consolidated_upgrade_2 consolidated_upgrade_3 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			air_bombing = 0.1
		}
	}

	trait = {
		token = consolidated_upgrade_1_2
		name = KR_MIO_Trait_improved_aerodynamic_bomb_profile
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		any_parent = { consolidated_upgrade_2 consolidated_upgrade_3 }

		mutually_exclusive = { consolidated_upgrade_1_3 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}

	trait = {
		token = consolidated_upgrade_1_3
		name = KR_MIO_Trait_vastly_improved_aerodynamic_bomb_profile
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		available = {
			custom_override_tooltip = {
				tooltip = {
					localization_key = MIO_more_than_X_funds
					FUNDS = "700"
				}
				check_variable = { funds > 700 }
			}
			check_variable = { funds > 700 }
		}

		any_parent = { consolidated_upgrade_2 consolidated_upgrade_3 }

		mutually_exclusive = { consolidated_upgrade_1_2 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			air_ground_attack = 0.2
		}

		on_complete = {
			add_mio_funds = -700
		}
	}

	trait = {
		token = consolidated_upgrade_1_4
		name = KR_MIO_Trait_invest_in_aerial_mining_demining_equipment
		icon = GFX_generic_mio_trait_icon_mines

		all_parents = { consolidated_upgrade_4 }
		any_parent = { consolidated_upgrade_2 consolidated_upgrade_3 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			mines_planting = 0.1
			mines_sweeping = 0.1
		}
	}

	trait = {
		token = consolidated_upgrade_1_5
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = consolidated_upgrade_1_6
		name = KR_MIO_Trait_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = consolidated_upgrade_2_1
		name = KR_MIO_Trait_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_air_defence

		all_parents = { consolidated_upgrade_1_1 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			air_defence = 0.1
			thrust = 0.1
			weight = -0.1
		}
	}

	trait = {
		token = consolidated_upgrade_2_2
		name = KR_MIO_Trait_torpedo_impact_testing
		icon = GFX_generic_mio_trait_icon_naval_strike_attack

		all_parents = { consolidated_upgrade_1_4 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			naval_strike_attack = 0.1
			naval_strike_targetting = 0.1
			surface_detection = 0.1
		}
	}

	trait = {
		token = consolidated_upgrade_2_3
		name = KR_MIO_Trait_acquire_douglas_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			798 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			930 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { consolidated_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				798 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				930 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = los_angeles_military_factory_removed }
					add_to_variable = { los_angeles_military_factory_removed = 1 }
				}
				else = {
					set_variable = { los_angeles_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = consolidated_upgrade_2_4
		name = KR_MIO_Trait_acquire_boeing_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			361 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			930 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { consolidated_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				930 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = maryland_civlian_factory_removed }
					add_to_variable = { maryland_civlian_factory_removed = 2 }
				}
				else = {
					set_variable = { maryland_civlian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_airplane_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_consolidated }
	override_trait = {
		token = KR_MIO_Trait_merge_with_bell
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_grumman
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_lockheed
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_north_american_aviation
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_curtiss_wright
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_vought
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_boeing
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_douglas
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 8 y = 4 }
	}
}
USA_grumman_organisation = { #Grumman
	name = USA_grumman
	icon = GFX_idea_grumman

	allowed = { is_american_tag = yes }
	available = {
		358 = { is_owned_and_controlled_by = FROM } #Buffalo
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		small_plane_naval_bomber_airframe
		medium_plane_airframe
		large_plane_maritime_patrol_plane_airframe
		cv_small_plane_naval_bomber_airframe
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_naval_bomber_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = generic_mio_initial_trait_naval_aircraft_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = grumman_upgrade_1
		name = KR_MIO_Trait_reactivate_plane_reserves
		icon = GFX_generic_mio_department_icon_plane_naval_bomber

		mutually_exclusive = { grumman_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { has_dlc_bba = yes }
					create_equipment_variant = {
						name = "TBD-1 Devastator"
						type = small_plane_naval_bomber_airframe_1
						show_position = no
						modules = {
							fixed_main_weapon_slot = torpedo_mounting
							engine_type_slot = engine_2_2x
						}
					}
					custom_effect_tooltip = tooltip_white_line
					if = {
						limit = { grumman_stockpile_trait_unlocked = yes }
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "200"
								EQUIPMENT = "TBD-1 Devastator Naval Bomber"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = small_plane_naval_bomber_airframe_1
								amount = 200
								variant_name = "TBD-1 Devastator"
								producer = FROM
							}
						}
					}
					else = {
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "100"
								EQUIPMENT = "TBD-1 Devastator Naval Bomber"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = small_plane_naval_bomber_airframe_1
								amount = 100
								variant_name = "TBD-1 Devastator"
								producer = FROM
							}
						}
					}
				}
				else = {
					if = {
						limit = { grumman_stockpile_trait_unlocked = yes }
						add_equipment_to_stockpile = {
							type = nav_bomber_equipment_1
							amount = 200
							producer = FROM
						}
					}
					else = {
						add_equipment_to_stockpile = {
							type = nav_bomber_equipment_1
							amount = 100
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = grumman_upgrade_2
		name = KR_MIO_Trait_telescopic_sights
		icon = GFX_generic_mio_trait_icon_surface_detection

		mutually_exclusive = { grumman_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			surface_detection = 0.1
			sub_detection = 0.1
		}
	}

	trait = {
		token = grumman_upgrade_3
		name = KR_MIO_Trait_torpedo_impact_testing
		icon = GFX_generic_mio_trait_icon_naval_strike_attack

		position = { x = 2 y = 0 }

		equipment_bonus = {
			naval_strike_attack = 0.1
		}
	}

	trait = {
		token = grumman_upgrade_4
		name = KR_MIO_Trait_heavier_torpedo_payload
		icon = GFX_generic_mio_trait_icon_naval_strike_attack

		position = { x = 4 y = 0 }

		equipment_bonus = {
			naval_strike_attack = 0.1
		}
	}

	trait = {
		token = grumman_upgrade_5
		name = KR_MIO_Trait_additional_minelaying_storage
		icon = GFX_generic_mio_trait_icon_mines

		mutually_exclusive = { grumman_upgrade_6 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			mines_planting = 0.2
			mines_sweeping = 0.1
		}
	}

	trait = {
		token = grumman_upgrade_6
		name = KR_MIO_Trait_stronger_magnetic_demining_coil
		icon = GFX_generic_mio_trait_icon_mines

		mutually_exclusive = { grumman_upgrade_5 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			mines_planting = 0.1
			mines_sweeping = 0.2
		}
	}

	trait = {
		token = grumman_upgrade_1_1
		name = KR_MIO_Trait_experimental_radar
		icon = GFX_generic_mio_trait_icon_surface_detection

		any_parent = { grumman_upgrade_1 grumman_upgrade_2 }
		all_parents = { grumman_upgrade_3 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			surface_detection = 0.1
			sub_detection = 0.1
		}
	}

	trait = {
		token = grumman_upgrade_1_2
		name = KR_MIO_Trait_increased_fuel_tank_capacity
		icon = GFX_generic_mio_trait_icon_sub_detection

		any_parent = { grumman_upgrade_5 grumman_upgrade_6 }
		all_parents = { grumman_upgrade_4 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			surface_detection = 0.1
			sub_detection = 0.1
		}
	}

	trait = {
		token = grumman_upgrade_1_3
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = grumman_upgrade_1_4
		name = KR_MIO_Trait_eliminate_resource_waste
		icon = GFX_generic_mio_trait_icon_resources

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.25
		}
	}

	trait = {
		token = grumman_upgrade_2_1
		name = KR_MIO_Trait_eliminate_torpedo_lock_jams
		icon = GFX_generic_mio_trait_icon_naval_strike_targetting

		all_parents = { grumman_upgrade_1_1 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			naval_strike_targetting = 0.2
		}
	}

	trait = {
		token = grumman_upgrade_2_2
		name = KR_MIO_Trait_reinforced_fuselage
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { grumman_upgrade_1_2 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			air_defence = 0.1
		}
	}

	trait = {
		token = grumman_upgrade_2_3
		name = KR_MIO_Trait_acquire_lockheed_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			798 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			358 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { grumman_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				798 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				358 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = los_angeles_military_factory_removed }
					add_to_variable = { los_angeles_military_factory_removed = 1 }
				}
				else = {
					set_variable = { los_angeles_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = grumman_upgrade_2_4
		name = KR_MIO_Trait_acquire_north_american_aviation_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			361 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			358 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { grumman_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				358 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = maryland_civlian_factory_removed }
					add_to_variable = { maryland_civlian_factory_removed = 2 }
				}
				else = {
					set_variable = { maryland_civlian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_airplane_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_grumman }
	override_trait = {
		token = KR_MIO_Trait_merge_with_bell
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_consolidated
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_lockheed
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_north_american_aviation
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_curtiss_wright
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_vought
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_boeing
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_douglas
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 8 y = 4 }
	}
}
USA_lockheed_organisation = { #Lockheed
	name = USA_lockheed
	icon = GFX_idea_lockheed

	allowed = { is_american_tag = yes }
	available = {
		798 = { is_owned_and_controlled_by = FROM } #Los Angeles
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		small_plane_airframe
		medium_plane_fighter_airframe
		mothership_equipment
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_medium_aircraft_and_modules
		jet_technology
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = lockheed_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = lockheed_upgrade_1
		name = KR_MIO_Trait_reactivate_plane_reserves
		icon = GFX_generic_mio_department_icon_plane_fighter

		mutually_exclusive = { lockheed_upgrade_2 }

		position = { x = 0 y = 0 }

		equipment_bonus = {
			air_superiority = 0.05
		}

		on_complete = {
			FROM = {
				if = {
					limit = { has_dlc_bba = yes }
					if = {
						limit = { lockheed_stockpile_trait_unlocked = yes }
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "200"
								EQUIPMENT = "P-36A Fighter"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = small_plane_airframe_1
								amount = 200
								variant_name = "P-36A"
								producer = FROM
							}
						}
					}
					else = {
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "100"
								EQUIPMENT = "P-36A Fighter"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = small_plane_airframe_1
								amount = 100
								variant_name = "P-36A"
								producer = FROM
							}
						}
					}
				}
				else = {
					if = {
						limit = { lockheed_stockpile_trait_unlocked = yes }
						add_equipment_to_stockpile = {
							type = fighter_equipment_0
							amount = 200
							producer = FROM
						}
					}
					else = {
						add_equipment_to_stockpile = {
							type = fighter_equipment_0
							amount = 100
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = lockheed_upgrade_2
		name = KR_MIO_Trait_high_quality_materials_for_radiator_cooling
		icon = GFX_generic_mio_trait_icon_air_superiority

		mutually_exclusive = { lockheed_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			air_superiority = 0.15
			weight = 0.2
		}
	}

	trait = {
		token = lockheed_upgrade_1_1
		name = KR_MIO_Trait_space_efficient_designs
		icon = GFX_generic_mio_trait_icon_weight

		any_parent = { lockheed_upgrade_1 lockheed_upgrade_2 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			weight = -0.3
		}
	}

	trait = {
		token = lockheed_upgrade_1_2
		name = KR_MIO_Trait_increased_fire_accuracy
		icon = GFX_generic_mio_trait_icon_air_attack

		any_parent = { lockheed_upgrade_1 lockheed_upgrade_2 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			air_attack = 0.05
		}
	}

	trait = {
		token = lockheed_upgrade_1_3
		name = KR_MIO_Trait_improved_aerodynamic_profile
		icon = GFX_generic_mio_trait_icon_air_agility

		any_parent = { lockheed_upgrade_1 lockheed_upgrade_2 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			air_agility = 0.05
		}
	}

	trait = {
		token = lockheed_upgrade_1_4
		name = KR_MIO_Trait_increased_armament_fire_rate
		icon = GFX_generic_mio_trait_icon_air_attack

		any_parent = { lockheed_upgrade_1 lockheed_upgrade_2 }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			air_attack = 0.05
		}
	}

	trait = {
		token = lockheed_upgrade_1_5
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = lockheed_upgrade_1_6
		name = KR_MIO_Trait_smoothen_bureaucratic_procedures
		icon = GFX_KR_generic_mio_trait_icon_assign_cost

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.5
		}
	}

	trait = {
		token = lockheed_upgrade_2_1
		name = KR_MIO_Trait_increase_wing_loading_limit
		icon = GFX_generic_mio_trait_icon_air_superiority

		any_parent = { lockheed_upgrade_1 lockheed_upgrade_2 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			air_superiority = 0.05
		}
	}

	trait = {
		token = lockheed_upgrade_2_2
		name = KR_MIO_Trait_increased_internal_ammunition_capacity
		icon = GFX_generic_mio_trait_icon_air_attack

		all_parents = { lockheed_upgrade_1_2 }

		mutually_exclusive = { lockheed_upgrade_2_3 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			air_attack = 0.05
		}
	}

	trait = {
		token = lockheed_upgrade_2_3
		name = KR_MIO_Trait_greatly_expanded_ammunition_storage
		icon = GFX_generic_mio_trait_icon_air_attack

		all_parents = { lockheed_upgrade_1_2 }

		mutually_exclusive = { lockheed_upgrade_2_2 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			air_attack = 0.1
			weight = 0.2
		}
	}

	trait = {
		token = lockheed_upgrade_2_4
		name = KR_MIO_Trait_engine_turbocharger
		icon = GFX_generic_mio_trait_icon_air_agility

		all_parents = { lockheed_upgrade_1_3 }

		mutually_exclusive = { lockheed_upgrade_2_5 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			air_agility = 0.05
		}
	}

	trait = {
		token = lockheed_upgrade_2_5
		name = KR_MIO_Trait_redesign_engine
		icon = GFX_generic_mio_trait_icon_air_agility

		all_parents = { lockheed_upgrade_1_3 }

		mutually_exclusive = { lockheed_upgrade_2_4 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			air_agility = 0.1
			weight = 0.2
		}
	}

	trait = {
		token = lockheed_upgrade_2_6
		name = KR_MIO_Trait_acquire_consolidated_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			930 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			798 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { lockheed_upgrade_2_7 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				930 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				798 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = buffalo_military_factory_removed }
					add_to_variable = { buffalo_military_factory_removed = 1 }
				}
				else = {
					set_variable = { buffalo_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = lockheed_upgrade_2_7
		name = KR_MIO_Trait_acquire_grumman_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			358 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			798 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { lockheed_upgrade_2_6 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				358 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				798 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_york_city_civilian_factories_removed }
					add_to_variable = { new_york_city_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { new_york_city_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_airplane_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_lockheed }
	override_trait = {
		token = KR_MIO_Trait_merge_with_bell
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_consolidated
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_grumman
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_north_american_aviation
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_curtiss_wright
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_vought
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_boeing
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_douglas
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 8 y = 4 }
	}
}
USA_north_american_aviation_organisation = { #North American Aviation
	name = USA_north_american_aviation
	icon = GFX_idea_north_american_aviation

	allowed = { is_american_tag = yes }
	available = {
		361 = { is_owned_and_controlled_by = FROM } #Maryland
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		small_plane_airframe
		medium_plane_airframe
		large_plane_airframe
		cv_small_plane_airframe
		transport_plane_equipment
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = north_american_aviation_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1
		name = KR_MIO_Trait_reactivate_plane_reserves
		icon = GFX_generic_mio_department_icon_plane_strategic_bomber

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = north_american_aviation_normal_upgrades
					has_mio_flag = north_american_aviation_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		mutually_exclusive = { north_american_aviation_upgrade_2 }

		position = { x = 0 y = 0 }

		equipment_bonus = {
			air_range = 0.05
		}

		on_complete = {
			FROM = {
				if = {
					limit = { has_dlc_bba = yes }
					if = {
						limit = { NOT = { has_tech = iw_large_airframe } }
						set_technology = { iw_large_airframe = 1 }
					}
					create_equipment_variant = {
						type = large_plane_airframe_0
						name = "B-17"
						show_position = no
						modules = {
							fixed_main_weapon_slot = large_bomb_bay
							fixed_auxiliary_weapon_slot_1 = large_bomb_bay
							fixed_auxiliary_weapon_slot_2 = large_bomb_bay
							fixed_auxiliary_weapon_slot_3 = large_bomb_bay
							engine_type_slot = engine_2_6x
						}
					}
					if = {
						limit = { north_american_aviation_stockpile_trait_unlocked = yes }
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "200"
								EQUIPMENT = "B-17 Strategic Bomber"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = large_plane_airframe_0
								amount = 200
								variant_name = "B-17"
								producer = FROM
							}
						}
					}
					else = {
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "100"
								EQUIPMENT = "B-17 Strategic Bomber"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = large_plane_airframe_0
								amount = 100
								variant_name = "B-17"
								producer = FROM
							}
						}
					}
				}
				else = {
					if = {
						limit = { NOT = { has_tech = strategic_bomber1 } }
						set_technology = { strategic_bomber1 = 1 }
						if = {
							limit = { north_american_aviation_stockpile_trait_unlocked = yes }
							custom_override_tooltip = {
								tooltip = {
									localization_key = add_equipment_to_stockpile_tt
									UNITS = "200"
									EQUIPMENT = USA_strat_bomber_equipment_1
								}
							}
						}
						else = {
							custom_override_tooltip = {
								tooltip = {
									localization_key = add_equipment_to_stockpile_tt
									UNITS = "100"
									EQUIPMENT = USA_strat_bomber_equipment_1
								}
							}
						}
					}
					if = {
						limit = { north_american_aviation_stockpile_trait_unlocked = yes }
						add_equipment_to_stockpile = {
							type = strat_bomber_equipment_1
							amount = 200
							producer = FROM
						}
					}
					else = {
						add_equipment_to_stockpile = {
							type = strat_bomber_equipment_1
							amount = 100
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2
		name = KR_MIO_Trait_efficient_engine_design
		icon = GFX_generic_mio_trait_icon_air_range

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = north_american_aviation_normal_upgrades
					has_mio_flag = north_american_aviation_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		mutually_exclusive = { north_american_aviation_upgrade_1 }

		position = { x = 2 y = 0 }

		equipment_bonus = {
			air_range = 0.1
			build_cost_ic = 0.05
		}
	}

	trait = {
		token = north_american_aviation_upgrade_normal
		name = KR_MIO_Trait_short_term_planning
		icon = GFX_generic_mio_department_icon_plane_heavy_line_efficiency

		visible = {
			NOT = {
				has_mio_flag = north_american_aviation_normal_upgrades
				has_mio_flag = north_american_aviation_improved_upgrades
			}
		}

		position = { x = 3 y = 0 }

		on_complete = {
			custom_effect_tooltip = USA_upgrade_normal
			set_mio_flag = north_american_aviation_normal_upgrades
			custom_effect_tooltip = tooltip_white_line
			add_mio_size = 1
		}
	}

	trait = {
		token = north_american_aviation_upgrade_improved
		name = KR_MIO_Trait_long_term_planning
		icon = GFX_generic_mio_department_icon_plane_heavy_technology

		visible = {
			NOT = {
				has_mio_flag = north_american_aviation_normal_upgrades
				has_mio_flag = north_american_aviation_improved_upgrades
			}
		}

		position = { x = 4 y = 0 }

		on_complete = {
			custom_effect_tooltip = USA_upgrade_improved_civs_and_mils
			set_mio_flag = north_american_aviation_improved_upgrades
			custom_effect_tooltip = tooltip_white_line
			add_mio_size = 1
		}
	}

	trait = {
		token = north_american_aviation_upgrade_3
		name = KR_MIO_Trait_increase_worker_salaries
		icon = GFX_icon_Long_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { north_american_aviation_upgrade_4 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					Long_strength = -1
					tooltip = USA_change_longist_strength
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_4
		name = KR_MIO_Trait_workplace_agitation
		icon = GFX_icon_Long_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { north_american_aviation_upgrade_3 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					Long_strength = 1
					tooltip = USA_change_longist_strength
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_1
		name = KR_MIO_Trait_reinforced_fuselage
		icon = GFX_generic_mio_trait_icon_air_defence

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		any_parent = { north_american_aviation_upgrade_1 north_american_aviation_upgrade_2 }

		mutually_exclusive = { north_american_aviation_upgrade_1_2 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			air_defence = 0.05
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_2
		name = KR_MIO_Trait_eliminate_aircraft_weak_spots
		icon = GFX_generic_mio_trait_icon_air_defence

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		any_parent = { north_american_aviation_upgrade_1 north_american_aviation_upgrade_2 }

		mutually_exclusive = { north_american_aviation_upgrade_1_1 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			air_defence = 0.1
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 1
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_3
		name = KR_MIO_Trait_on_board_fuel_tank_storage
		icon = GFX_generic_mio_trait_icon_air_range

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		any_parent = { north_american_aviation_upgrade_1 north_american_aviation_upgrade_2 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			air_range = 0.1
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_4
		name = KR_MIO_Trait_extensive_testing_programs
		icon = GFX_generic_mio_trait_icon_reliability

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		any_parent = { north_american_aviation_upgrade_1 north_american_aviation_upgrade_2 }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_5
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_6
		name = KR_MIO_Trait_hire_additional_designers
		icon = GFX_KR_generic_mio_trait_icon_air_xp

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		on_complete = {
			FROM = { air_experience = 50 }
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_1
		name = KR_MIO_Trait_high_quality_engines
		icon = GFX_KR_generic_mio_trait_icon_thrust

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		any_parent = { north_american_aviation_upgrade_1_1 north_american_aviation_upgrade_1_2 }

		mutually_exclusive = { north_american_aviation_upgrade_2_2 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			thrust = 0.05
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_2
		name = KR_MIO_Trait_engine_turbocharger
		icon = GFX_KR_generic_mio_trait_icon_thrust

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		any_parent = { north_american_aviation_upgrade_1_1 north_american_aviation_upgrade_1_2 }

		mutually_exclusive = { north_american_aviation_upgrade_2_1 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			thrust = 0.1
		}

		production_bonus = {
			production_resource_need_factor = 0.2
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_3
		name = KR_MIO_Trait_lighter_fuselage
		icon = GFX_generic_mio_trait_icon_air_range

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		all_parents = { north_american_aviation_upgrade_1_3 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			air_range = 0.1
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_4
		name = KR_MIO_Trait_expanded_fuel_storage
		icon = GFX_generic_mio_trait_icon_air_range

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		all_parents = { north_american_aviation_upgrade_1_3 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			air_range = 0.1
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_5
		name = KR_MIO_Trait_improved_gliding_potential
		icon = GFX_generic_mio_trait_icon_air_range

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		all_parents = { north_american_aviation_upgrade_1_3 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			air_range = 0.1
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_6
		name = KR_MIO_Trait_acquire_douglas_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			798 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			361 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { north_american_aviation_upgrade_2_7 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				798 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				361 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = los_angeles_military_factory_removed }
					add_to_variable = { los_angeles_military_factory_removed = 1 }
				}
				else = {
					set_variable = { los_angeles_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_7
		name = KR_MIO_Trait_acquire_consolidated_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			930 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			361 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { north_american_aviation_upgrade_2_6 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				930 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				361 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = buffalo_civilian_factory_removed }
					add_to_variable = { buffalo_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { buffalo_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_improved
		name = KR_MIO_Trait_reactivate_plane_reserves
		icon = GFX_generic_mio_department_icon_plane_strategic_bomber

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = north_american_aviation_normal_upgrades
					has_mio_flag = north_american_aviation_improved_upgrades
				}
			}
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		mutually_exclusive = { north_american_aviation_upgrade_2_improved }

		position = { x = 0 y = 0 }

		equipment_bonus = {
			air_range = 0.075
		}

		on_complete = {
			FROM = {
				if = {
					limit = { has_dlc_bba = yes }
					if = {
						limit = { NOT = { has_tech = iw_large_airframe } }
						set_technology = { iw_large_airframe = 1 }
					}
					create_equipment_variant = {
						type = large_plane_airframe_0
						name = "B-17"
						show_position = no
						modules = {
							fixed_main_weapon_slot = large_bomb_bay
							fixed_auxiliary_weapon_slot_1 = large_bomb_bay
							fixed_auxiliary_weapon_slot_2 = large_bomb_bay
							fixed_auxiliary_weapon_slot_3 = large_bomb_bay
							engine_type_slot = engine_2_6x
						}
					}
					if = {
						limit = { north_american_aviation_stockpile_trait_unlocked = yes }
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "200"
								EQUIPMENT = "B-17 Strategic Bomber"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = large_plane_airframe_0
								amount = 200
								variant_name = "B-17"
								producer = FROM
							}
						}
					}
					else = {
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "100"
								EQUIPMENT = "B-17 Strategic Bomber"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = large_plane_airframe_0
								amount = 100
								variant_name = "B-17"
								producer = FROM
							}
						}
					}
				}
				else = {
					if = {
						limit = { NOT = { has_tech = strategic_bomber1 } }
						set_technology = { strategic_bomber1 = 1 }
						if = {
							limit = { north_american_aviation_stockpile_trait_unlocked = yes }
							custom_override_tooltip = {
								tooltip = {
									localization_key = add_equipment_to_stockpile_tt
									UNITS = "200"
									EQUIPMENT = USA_strat_bomber_equipment_1
								}
							}
						}
						else = {
							custom_override_tooltip = {
								tooltip = {
									localization_key = add_equipment_to_stockpile_tt
									UNITS = "100"
									EQUIPMENT = USA_strat_bomber_equipment_1
								}
							}
						}
					}
					if = {
						limit = { north_american_aviation_stockpile_trait_unlocked = yes }
						add_equipment_to_stockpile = {
							type = strat_bomber_equipment_1
							amount = 200
							producer = FROM
						}
					}
					else = {
						add_equipment_to_stockpile = {
							type = strat_bomber_equipment_1
							amount = 100
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_improved
		name = KR_MIO_Trait_efficient_engine_design
		icon = GFX_generic_mio_trait_icon_air_range

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = north_american_aviation_normal_upgrades
					has_mio_flag = north_american_aviation_improved_upgrades
				}
			}
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		mutually_exclusive = { north_american_aviation_upgrade_1_improved }

		position = { x = 2 y = 0 }

		equipment_bonus = {
			air_range = 0.15
			build_cost_ic = 0.05
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_1_improved
		name = KR_MIO_Trait_reinforced_fuselage
		icon = GFX_generic_mio_trait_icon_air_defence

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		any_parent = { north_american_aviation_upgrade_1_improved north_american_aviation_upgrade_2_improved }

		mutually_exclusive = { north_american_aviation_upgrade_1_2_improved }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			air_defence = 0.075
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_2_improved
		name = KR_MIO_Trait_eliminate_aircraft_weak_spots
		icon = GFX_generic_mio_trait_icon_air_defence

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		any_parent = { north_american_aviation_upgrade_1_improved north_american_aviation_upgrade_2_improved }

		mutually_exclusive = { north_american_aviation_upgrade_1_1_improved }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			air_defence = 0.15
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 1
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_3_improved
		name = KR_MIO_Trait_on_board_fuel_tank_storage
		icon = GFX_generic_mio_trait_icon_air_range

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		any_parent = { north_american_aviation_upgrade_1_improved north_american_aviation_upgrade_2_improved }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			air_range = 0.15
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_4_improved
		name = KR_MIO_Trait_extensive_testing_programs
		icon = GFX_generic_mio_trait_icon_reliability

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		any_parent = { north_american_aviation_upgrade_1_improved north_american_aviation_upgrade_2_improved }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			reliability = 0.15
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_1_improved
		name = KR_MIO_Trait_high_quality_engines
		icon = GFX_KR_generic_mio_trait_icon_thrust

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		any_parent = { north_american_aviation_upgrade_1_1_improved north_american_aviation_upgrade_1_2_improved }

		mutually_exclusive = { north_american_aviation_upgrade_2_2_improved }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			thrust = 0.075
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_2_improved
		name = KR_MIO_Trait_engine_turbocharger
		icon = GFX_KR_generic_mio_trait_icon_thrust

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		any_parent = { north_american_aviation_upgrade_1_1_improved north_american_aviation_upgrade_1_2_improved }

		mutually_exclusive = { north_american_aviation_upgrade_2_1_improved }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			thrust = 0.15
		}

		production_bonus = {
			production_resource_need_factor = 0.2
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_3_improved
		name = KR_MIO_Trait_lighter_fuselage
		icon = GFX_generic_mio_trait_icon_air_range

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		all_parents = { north_american_aviation_upgrade_1_3_improved }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			air_range = 0.15
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_4_improved
		name = KR_MIO_Trait_expanded_fuel_storage
		icon = GFX_generic_mio_trait_icon_air_range

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		all_parents = { north_american_aviation_upgrade_1_3_improved }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			air_range = 0.15
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_5_improved
		name = KR_MIO_Trait_improved_gliding_potential
		icon = GFX_generic_mio_trait_icon_air_range

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		all_parents = { north_american_aviation_upgrade_1_3_improved }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			air_range = 0.15
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	### Merger Traits ###
	include = USA_airplane_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_north_american_aviation }
	override_trait = {
		token = KR_MIO_Trait_merge_with_bell
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_consolidated
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_grumman
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_lockheed
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_curtiss_wright
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_vought
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_boeing
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_douglas
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 8 y = 4 }
	}
}
USA_curtiss_wright_organisation = { #Curtiss-Wright
	name = USA_curtiss_wright
	icon = GFX_idea_USA_curtiss_wright

	allowed = { is_american_tag = yes }
	available = {
		261 = { is_owned_and_controlled_by = FROM } #Ohio
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		small_plane_airframe
		medium_plane_airframe
		large_plane_airframe
		cv_small_plane_airframe
		transport_plane_equipment
		helicopter_equipment
		mothership_equipment
		strat_bomber_intercontinental_equipment
		nuclear_missile
		ballistic_missile_equipment
		sam_missile_equipment
		guided_missile_equipment
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = curtiss_wright_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1
		name = KR_MIO_Trait_reactivate_plane_reserves
		icon = GFX_generic_mio_department_icon_air_transport_production

		mutually_exclusive = { curtiss_wright_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { has_dlc_bba = yes }
					if = {
						limit = { curtiss_wright_stockpile_trait_unlocked = yes }
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "200"
								EQUIPMENT = "Curtiss C46 'Commando' Transport"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = transport_plane_equipment_1
								amount = 200
								variant_name = "Curtiss C46 'Commando'"
								producer = FROM
							}
						}
					}
					else = {
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "100"
								EQUIPMENT = "Curtiss C46 'Commando' Transport"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = transport_plane_equipment_1
								amount = 100
								variant_name = "Curtiss C46 'Commando'"
								producer = FROM
							}
						}
					}
				}
				else = {
					if = {
						limit = { curtiss_wright_stockpile_trait_unlocked = yes }
						add_equipment_to_stockpile = {
							type = transport_plane_equipment
							amount = 200
							producer = FROM
						}
					}
					else = {
						add_equipment_to_stockpile = {
							type = transport_plane_equipment
							amount = 100
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = curtiss_wright_upgrade_2
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		mutually_exclusive = { curtiss_wright_upgrade_1 }

		position = { x = 1 y = 0 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = curtiss_wright_upgrade_3
		name = KR_MIO_Trait_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		mutually_exclusive = { curtiss_wright_upgrade_4 }

		position = { x = 5 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = curtiss_wright_upgrade_4
		name = KR_MIO_Trait_extreme_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		mutually_exclusive = { curtiss_wright_upgrade_3 }

		position = { x = 6 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.3
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = -0.3
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1_1
		name = KR_MIO_Trait_long_life_production_run
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		any_parent = { curtiss_wright_upgrade_1 curtiss_wright_upgrade_2 }

		position = { x = 0 y = 1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1_2
		name = KR_MIO_Trait_eliminate_resource_waste
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { curtiss_wright_upgrade_1 curtiss_wright_upgrade_2 }

		mutually_exclusive = { curtiss_wright_upgrade_1_3 }

		position = { x = 1 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1_3
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { curtiss_wright_upgrade_1 curtiss_wright_upgrade_2 }

		mutually_exclusive = { curtiss_wright_upgrade_1_2 }

		position = { x = 2 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.2
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 2
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1_4
		name = KR_MIO_Trait_dedicated_conversion_facilities
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { curtiss_wright_upgrade_3 curtiss_wright_upgrade_4 }

		mutually_exclusive = { curtiss_wright_upgrade_1_5 }

		position = { x = 4 y = 1 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1_5
		name = KR_MIO_Trait_simplified_dissasembly_procedures
		icon = GFX_generic_mio_trait_icon_conversion_speed

		available = {
			custom_override_tooltip = {
				tooltip = {
					localization_key = MIO_more_than_X_funds
					FUNDS = "1000"
				}
				check_variable = { funds > 1000 }
			}
		}

		any_parent = { curtiss_wright_upgrade_3 curtiss_wright_upgrade_4 }

		mutually_exclusive = { curtiss_wright_upgrade_1_4 }

		position = { x = 5 y = 1 }

		production_bonus = {
			production_conversion_speed_factor = 0.4
		}

		on_complete = {
			add_mio_funds = -1000
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1_6
		name = KR_MIO_Trait_simplify_assembly_procedures
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { curtiss_wright_upgrade_3 curtiss_wright_upgrade_4 }

		position = { x = 6 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1_7
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1_8
		name = KR_MIO_Trait_r_d_department_expansion
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.3
		}
	}

	trait = {
		token = curtiss_wright_upgrade_2_1
		name = KR_MIO_Trait_standardise_parts
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { curtiss_wright_upgrade_1_2 curtiss_wright_upgrade_1_3 }
		any_parent = { curtiss_wright_upgrade_1_4 curtiss_wright_upgrade_1_5 }

		position = { x = 2 y = 2 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = curtiss_wright_upgrade_2_2
		name = KR_MIO_Trait_quality_manufacturing_tools
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { curtiss_wright_upgrade_1_2 curtiss_wright_upgrade_1_3 }
		any_parent = { curtiss_wright_upgrade_1_4 curtiss_wright_upgrade_1_5 }

		position = { x = 4 y = 2 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = curtiss_wright_upgrade_2_3
		name = KR_MIO_Trait_acquire_lockheed_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			798 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			261 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { curtiss_wright_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				798 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				261 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = los_angeles_military_factory_removed }
					add_to_variable = { los_angeles_military_factory_removed = 1 }
				}
				else = {
					set_variable = { los_angeles_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = curtiss_wright_upgrade_2_4
		name = KR_MIO_Trait_acquire_boeing_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			361 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			261 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { curtiss_wright_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				261 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = maryland_civlian_factory_removed }
					add_to_variable = { maryland_civlian_factory_removed = 2 }
				}
				else = {
					set_variable = { maryland_civlian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_airplane_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_curtiss_wright }
	override_trait = {
		token = KR_MIO_Trait_merge_with_bell
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_consolidated
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_grumman
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_lockheed
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_north_american_aviation
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_vought
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_boeing
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_douglas
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 8 y = 4 }
	}
}
USA_vought_organisation = { #Vought
	name = USA_vought
	icon = GFX_idea_USA_vought

	allowed = { is_american_tag = yes }
	available = {
		931 = { is_owned_and_controlled_by = FROM } #Conneticut
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		small_plane_cas_airframe
		medium_plane_airframe
		cv_small_plane_cas_airframe
	}

	research_categories = {
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = vought_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = vought_upgrade_1
		name = KR_MIO_Trait_reactivate_plane_reserves
		icon = GFX_generic_mio_department_icon_plane_cas

		mutually_exclusive = { vought_upgrade_2 }

		position = { x = 1 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { has_dlc_bba = yes }
					if = {
						limit = { vought_stockpile_trait_unlocked = yes }
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "200"
								EQUIPMENT = "A-17 CAS"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = small_plane_cas_airframe_1
								amount = 200
								variant_name = "A-17"
								producer = FROM
							}
						}
					}
					else = {
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "100"
								EQUIPMENT = "A-17 CAS"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = small_plane_cas_airframe_1
								amount = 100
								variant_name = "A-17"
								producer = FROM
							}
						}
					}
				}
				else = {
					if = {
						limit = { vought_stockpile_trait_unlocked = yes }
						add_equipment_to_stockpile = {
							type = CAS_equipment_1
							amount = 200
							producer = FROM
						}
					}
					else = {
						add_equipment_to_stockpile = {
							type = CAS_equipment_1
							amount = 100
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = vought_upgrade_2
		name = KR_MIO_Trait_improved_aerodynamic_bomb_profile
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		mutually_exclusive = { vought_upgrade_1 }

		position = { x = 3 y = 0 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}

	trait = {
		token = vought_upgrade_1_1
		name = KR_MIO_Trait_reinforced_fuselage
		icon = GFX_generic_mio_trait_icon_air_defence

		any_parent = { vought_upgrade_1 vought_upgrade_2 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			air_defence = 0.1
		}
	}

	trait = {
		token = vought_upgrade_1_2
		name = KR_MIO_Trait_improved_aerodynamic_profile
		icon = GFX_KR_generic_mio_trait_icon_thrust

		any_parent = { vought_upgrade_1 vought_upgrade_2 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			thrust = 0.1
		}
	}

	trait = {
		token = vought_upgrade_1_3
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = vought_upgrade_1_4
		name = KR_MIO_Trait_standardise_parts
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_cost_factor = -0.05
		}
	}

	trait = {
		token = vought_upgrade_2_1
		name = KR_MIO_Trait_externally_mounted_bombs
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		all_parents = { vought_upgrade_1_1 }

		mutually_exclusive = { vought_upgrade_2_2 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}

	trait = {
		token = vought_upgrade_2_2
		name = KR_MIO_Trait_heavier_explosive_payload
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		all_parents = { vought_upgrade_1_1 }

		mutually_exclusive = { vought_upgrade_2_1 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			air_ground_attack = 0.2
			weight = 0.1
		}
	}

	trait = {
		token = vought_upgrade_2_3
		name = KR_MIO_Trait_eliminate_random_engine_fires
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { vought_upgrade_1_2 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = vought_upgrade_2_4
		name = KR_MIO_Trait_cluster_munitions
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		all_parents = { vought_upgrade_1_2 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}

	trait = {
		token = vought_upgrade_2_5
		name = KR_MIO_Trait_heat_bombs
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		all_parents = { vought_upgrade_1_2 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}

	trait = {
		token = vought_upgrade_2_6
		name = KR_MIO_Trait_improved_air_brakes
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		all_parents = { vought_upgrade_1_2 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}

	trait = {
		token = vought_upgrade_2_7
		name = KR_MIO_Trait_acquire_douglas_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			798 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			931 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { vought_upgrade_2_8 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				798 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = los_angeles_military_factory_removed }
					add_to_variable = { los_angeles_military_factory_removed = 1 }
				}
				else = {
					set_variable = { los_angeles_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = vought_upgrade_2_8
		name = KR_MIO_Trait_acquire_curtiss_wright_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			261 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			931 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { vought_upgrade_2_7 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				261 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = ohio_civilian_factory_removed }
					add_to_variable = { ohio_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { ohio_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_airplane_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_vought }
	override_trait = {
		token = KR_MIO_Trait_merge_with_bell
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_consolidated
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_grumman
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_lockheed
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_north_american_aviation
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_curtiss_wright
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_boeing
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_douglas
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 8 y = 4 }
	}
}
USA_boeing_organisation = { #Boeing
	name = USA_boeing
	icon = GFX_idea_boeing

	allowed = { is_american_tag = yes }
	available = {
		361 = { is_owned_and_controlled_by = FROM } #Maryland
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		large_plane_airframe
	}

	research_categories = {
		mio_cat_all_heavy_aircraft_and_modules
		jet_technology
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = boeing_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = boeing_upgrade_1
		name = KR_MIO_Trait_reactivate_plane_reserves
		icon = GFX_generic_mio_department_icon_plane_strategic_bomber

		mutually_exclusive = { boeing_upgrade_2 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			air_attack = 1
		}

		on_complete = {
			FROM = {
				if = {
					limit = { has_dlc_bba = yes }
					if = {
						limit = { NOT = { has_tech = iw_large_airframe } }
						set_technology = { iw_large_airframe = 1 }
					}
					create_equipment_variant = {
						type = large_plane_airframe_0
						name = "B-17"
						show_position = no
						modules = {
							fixed_main_weapon_slot = large_bomb_bay
							fixed_auxiliary_weapon_slot_1 = large_bomb_bay
							fixed_auxiliary_weapon_slot_2 = large_bomb_bay
							fixed_auxiliary_weapon_slot_3 = large_bomb_bay
							engine_type_slot = engine_2_6x
						}
					}
					if = {
						limit = { boeing_stockpile_trait_unlocked = yes }
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "200"
								EQUIPMENT = "B-17 Strategic Bomber"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = large_plane_airframe_0
								amount = 200
								variant_name = "B-17"
								producer = FROM
							}
						}
					}
					else = {
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "100"
								EQUIPMENT = "B-17 Strategic Bomber"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = large_plane_airframe_0
								amount = 100
								variant_name = "B-17"
								producer = FROM
							}
						}
					}
				}
				else = {
					if = {
						limit = { NOT = { has_tech = strategic_bomber1 } }
						set_technology = { strategic_bomber1 = 1 }
						if = {
							limit = { boeing_stockpile_trait_unlocked = yes }
							custom_override_tooltip = {
								tooltip = {
									localization_key = add_equipment_to_stockpile_tt
									UNITS = "200"
									EQUIPMENT = USA_strat_bomber_equipment_1
								}
							}
						}
						else = {
							custom_override_tooltip = {
								tooltip = {
									localization_key = add_equipment_to_stockpile_tt
									UNITS = "100"
									EQUIPMENT = USA_strat_bomber_equipment_1
								}
							}
						}
					}
					if = {
						limit = { boeing_stockpile_trait_unlocked = yes }
						add_equipment_to_stockpile = {
							type = strat_bomber_equipment_1
							amount = 200
							producer = FROM
						}
					}
					else = {
						add_equipment_to_stockpile = {
							type = strat_bomber_equipment_1
							amount = 100
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = boeing_upgrade_2
		name = KR_MIO_Trait_air_burst_turret_munitions
		icon = GFX_generic_mio_trait_icon_air_attack

		mutually_exclusive = { boeing_upgrade_1 }

		position = { x = 3 y = 0 }

		equipment_bonus = {
			air_attack = 2
			build_cost_ic = 0.05
		}
	}

	trait = {
		token = boeing_upgrade_3
		name = KR_MIO_Trait_increase_worker_salaries
		icon = GFX_icon_SPA_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { boeing_upgrade_4 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					SPA_strength = -1
					tooltip = USA_change_socialist_strength
				}
			}
		}
	}

	trait = {
		token = boeing_upgrade_4
		name = KR_MIO_Trait_workplace_propaganda
		icon = GFX_icon_Long_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { boeing_upgrade_3 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					Long_strength = -1
					tooltip = USA_change_longist_strength
				}
			}
		}
	}

	trait = {
		token = boeing_upgrade_1_1
		name = KR_MIO_Trait_increased_turret_fire_rate
		icon = GFX_generic_mio_trait_icon_air_attack

		position = { x = 0 y = 1 }

		equipment_bonus = {
			air_attack = 1
		}
	}

	trait = {
		token = boeing_upgrade_1_2
		name = KR_MIO_Trait_additional_turret_ammunition_storage
		icon = GFX_generic_mio_trait_icon_air_attack

		any_parent = { boeing_upgrade_1 boeing_upgrade_2 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			air_attack = 1
		}
	}

	trait = {
		token = boeing_upgrade_1_3
		name = KR_MIO_Trait_improved_aerodynamic_profile
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { boeing_upgrade_1 boeing_upgrade_2 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = boeing_upgrade_1_4
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = boeing_upgrade_1_5
		name = KR_MIO_Trait_dedicated_conversion_facilities
		icon = GFX_generic_mio_trait_icon_conversion_speed

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_conversion_speed_factor = 0.4
		}
	}

	trait = {
		token = boeing_upgrade_2_1
		name = KR_MIO_Trait_increased_turret_accuracy
		icon = GFX_generic_mio_trait_icon_air_attack

		any_parent = { boeing_upgrade_1_1 boeing_upgrade_1_2 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			air_attack = 1
		}
	}

	trait = {
		token = boeing_upgrade_2_2
		name = KR_MIO_Trait_engine_turbocharger
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { boeing_upgrade_1_1 boeing_upgrade_1_2 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			maximum_speed = 0.2
		}
	}

	trait = {
		token = boeing_upgrade_2_3
		name = KR_MIO_Trait_reinforced_fuselage
		icon = GFX_generic_mio_trait_icon_air_defence

		all_parents = { boeing_upgrade_1_3 }

		mutually_exclusive = { boeing_upgrade_2_4 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			air_defence = 0.15
			weight = 0.1
		}
	}

	trait = {
		token = boeing_upgrade_2_4
		name = KR_MIO_Trait_space_efficient_designs
		icon = GFX_generic_mio_trait_icon_air_defence

		all_parents = { boeing_upgrade_1_3 }

		mutually_exclusive = { boeing_upgrade_2_3 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			air_defence = -0.05
			weight = -0.2
		}
	}

	trait = {
		token = boeing_upgrade_2_5
		name = KR_MIO_Trait_high_quality_materials_for_radiator_cooling
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { boeing_upgrade_1_3 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			maximum_speed = 0.2
		}
	}

	trait = {
		token = boeing_upgrade_2_6
		name = KR_MIO_Trait_acquire_lockheed_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			798 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			361 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { boeing_upgrade_2_7 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				798 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				361 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = los_angeles_military_factory_removed }
					add_to_variable = { los_angeles_military_factory_removed = 1 }
				}
				else = {
					set_variable = { los_angeles_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = boeing_upgrade_2_7
		name = KR_MIO_Trait_acquire_curtiss_wright_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			261 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			361 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { boeing_upgrade_2_6 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				261 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				361 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = ohio_civilian_factory_removed }
					add_to_variable = { ohio_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { ohio_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_airplane_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_boeing }
	override_trait = {
		token = KR_MIO_Trait_merge_with_bell
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_consolidated
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_grumman
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_lockheed
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_north_american_aviation
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_curtiss_wright
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_vought
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_douglas
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 8 y = 4 }
	}
}
USA_douglas_organisation = { #Douglas
	name = USA_douglas
	icon = GFX_idea_douglas_aircraft_company

	allowed = { is_american_tag = yes }
	available = {
		798 = { is_owned_and_controlled_by = FROM } #Los Angeles
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		tactical_bomber
		large_plane_airframe
		strat_bomber_intercontinental_equipment
		ballistic_missile_equipment
		guided_missile_equipment
	}

	research_categories = {
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		jet_technology
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = douglas_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = douglas_upgrade_1
		name = KR_MIO_Trait_improved_aerodynamic_profile
		icon = GFX_KR_generic_mio_trait_icon_thrust

		position = { x = 1 y = 0 }

		limit_to_equipment_type = {
			tactical_bomber
			large_plane_airframe
		}

		equipment_bonus = {
			thrust = 0.1
		}
	}

	trait = {
		token = douglas_upgrade_2
		name = KR_MIO_Trait_extensive_testing
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 3 y = 0 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = douglas_upgrade_3
		name = KR_MIO_Trait_reactivate_plane_reserves
		icon = GFX_generic_mio_department_icon_plane_strategic_bomber

		mutually_exclusive = { douglas_upgrade_4 }

		position = { x = 4 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { has_dlc_bba = yes }
					if = {
						limit = { NOT = { has_tech = iw_large_airframe } }
						set_technology = { iw_large_airframe = 1 }
					}
					create_equipment_variant = {
						type = large_plane_airframe_0
						name = "B-17"
						show_position = no
						modules = {
							fixed_main_weapon_slot = large_bomb_bay
							fixed_auxiliary_weapon_slot_1 = large_bomb_bay
							fixed_auxiliary_weapon_slot_2 = large_bomb_bay
							fixed_auxiliary_weapon_slot_3 = large_bomb_bay
							engine_type_slot = engine_2_6x
						}
					}
					if = {
						limit = { douglas_stockpile_trait_unlocked = yes }
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "200"
								EQUIPMENT = "B-17 Strategic Bomber"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = large_plane_airframe_0
								amount = 200
								variant_name = "B-17"
								producer = FROM
							}
						}
					}
					else = {
						custom_override_tooltip = {
							tooltip = {
								localization_key = add_equipment_to_stockpile_tt
								UNITS = "100"
								EQUIPMENT = "B-17 Strategic Bomber"
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = large_plane_airframe_0
								amount = 100
								variant_name = "B-17"
								producer = FROM
							}
						}
					}
				}
				else = {
					if = {
						limit = { NOT = { has_tech = strategic_bomber1 } }
						set_technology = { strategic_bomber1 = 1 }
						if = {
							limit = { douglas_stockpile_trait_unlocked = yes }
							custom_override_tooltip = {
								tooltip = {
									localization_key = add_equipment_to_stockpile_tt
									UNITS = "200"
									EQUIPMENT = USA_strat_bomber_equipment_1
								}
							}
						}
						else = {
							custom_override_tooltip = {
								tooltip = {
									localization_key = add_equipment_to_stockpile_tt
									UNITS = "100"
									EQUIPMENT = USA_strat_bomber_equipment_1
								}
							}
						}
					}
					if = {
						limit = { douglas_stockpile_trait_unlocked = yes }
						add_equipment_to_stockpile = {
							type = strat_bomber_equipment_1
							amount = 200
							producer = FROM
						}
					}
					else = {
						add_equipment_to_stockpile = {
							type = strat_bomber_equipment_1
							amount = 100
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = douglas_upgrade_4
		name = KR_MIO_Trait_hexagonal_bombs
		icon = GFX_generic_mio_trait_icon_strategic_attack

		mutually_exclusive = { douglas_upgrade_3 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			air_bombing = 0.1
		}
	}

	trait = {
		token = douglas_upgrade_1_1
		name = KR_MIO_Trait_eliminate_random_engine_fires
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { douglas_upgrade_2 }
		any_parent = { douglas_upgrade_3 douglas_upgrade_4 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = douglas_upgrade_1_2
		name = KR_MIO_Trait_expanded_fuel_storage
		icon = GFX_generic_mio_trait_icon_air_range

		any_parent = { douglas_upgrade_3 douglas_upgrade_4 }

		mutually_exclusive = { douglas_upgrade_1_3 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			air_bombing = -0.1
			air_range = 0.2
		}
	}

	trait = {
		token = douglas_upgrade_1_3
		name = KR_MIO_Trait_cluster_munitions
		icon = GFX_generic_mio_trait_icon_strategic_attack

		any_parent = { douglas_upgrade_3 douglas_upgrade_4 }

		mutually_exclusive = { douglas_upgrade_1_2 }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			air_bombing = 0.1
		}
	}

	trait = {
		token = douglas_upgrade_1_4
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = douglas_upgrade_1_5
		name = KR_MIO_Trait_government_contract_favoritism
		icon = GFX_KR_generic_mio_trait_icon_funds

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = douglas_upgrade_2_1
		name = KR_MIO_Trait_heavier_explosive_payload
		icon = GFX_generic_mio_trait_icon_strategic_attack

		all_parents = { douglas_upgrade_1 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			air_bombing = 0.1
		}
	}

	trait = {
		token = douglas_upgrade_2_2
		name = KR_MIO_Trait_bigger_bomb_bay
		icon = GFX_generic_mio_trait_icon_strategic_attack

		all_parents = { douglas_upgrade_1 douglas_upgrade_1_1 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			air_bombing = 0.1
		}
	}

	trait = {
		token = douglas_upgrade_2_3
		name = KR_MIO_Trait_improved_aerodynamic_bomb_profile
		icon = GFX_generic_mio_trait_icon_strategic_attack

		all_parents = { douglas_upgrade_1_1 }
		any_parent = { douglas_upgrade_1_2 douglas_upgrade_1_3 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			air_bombing = 0.1
		}
	}

	trait = {
		token = douglas_upgrade_2_4
		name = KR_MIO_Trait_acquire_bell_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			930 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			798 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { douglas_upgrade_2_5 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				930 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				798 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = buffalo_military_factory_removed }
					add_to_variable = { buffalo_military_factory_removed = 1 }
				}
				else = {
					set_variable = { buffalo_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = douglas_upgrade_2_5
		name = KR_MIO_Trait_acquire_lockheed_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			361 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			798 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { douglas_upgrade_2_4 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				798 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = maryland_civlian_factory_removed }
					add_to_variable = { maryland_civlian_factory_removed = 2 }
				}
				else = {
					set_variable = { maryland_civlian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_airplane_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_douglas }
	override_trait = {
		token = KR_MIO_Trait_merge_with_bell
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_consolidated
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_grumman
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_lockheed
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_north_american_aviation
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_curtiss_wright
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_vought
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_boeing
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 8 y = 4 }
	}
}
USA_airplane_merge_organisation = {
	allowed = { always = no } #Used as archetype for merger traits

	trait = {
		token = KR_MIO_Trait_merge_with_bell
		name = KR_MIO_Trait_merge_with_bell
		icon = GFX_icon_bell_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_bell_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_bell_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_bell TYPE = bell_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_consolidated_organisation }
				set_mio_name_key = USA_MIO_Merger_Bell_Consolidated
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_grumman_organisation }
				set_mio_name_key = USA_MIO_Merger_Bell_Grumman
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_lockheed_organisation }
				set_mio_name_key = USA_MIO_Merger_Bell_Lockheed
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_north_american_aviation_organisation }
				set_mio_name_key = USA_MIO_Merger_Bell_NAA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_curtiss_wright_organisation }
				set_mio_name_key = USA_MIO_Merger_Bell_CW
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_vought_organisation }
				set_mio_name_key = USA_MIO_Merger_Bell_Vought
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_boeing_organisation }
				set_mio_name_key = USA_MIO_Merger_Bell_Boeing
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_douglas_organisation }
				set_mio_name_key = USA_MIO_Merger_Bell_Douglas
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_consolidated
		name = KR_MIO_Trait_merge_with_consolidated
		icon = GFX_icon_consolidated_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_consolidated_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			air_attack = 0.03
			air_defence = 0.03
			air_superiority = 0.03
			reliability = 0.03
			naval_strike_attack = 0.03
			naval_strike_targetting = 0.03
			thrust = 0.03
			weight = -0.03
			maximum_speed = 0.03
			air_range = 0.03
			surface_detection = 0.03
			sub_detection = 0.03
			air_ground_attack = 0.03
			strategic_attack = 0.03
			mines_planting = 0.03
			mines_sweeping = 0.03
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_consolidated_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_consolidated TYPE = generic_mio_initial_trait_general_aircraft_designer
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_bell_organisation }
				set_mio_name_key = USA_MIO_Merger_Bell_Consolidated
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_grumman_organisation }
				set_mio_name_key = USA_MIO_Merger_Consolidated_Grumman
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_lockheed_organisation }
				set_mio_name_key = USA_MIO_Merger_Consolidated_Lockheed
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_north_american_aviation_organisation }
				set_mio_name_key = USA_MIO_Merger_Consolidated_NAA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_curtiss_wright_organisation }
				set_mio_name_key = USA_MIO_Merger_Consolidated_CW
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_vought_organisation }
				set_mio_name_key = USA_MIO_Merger_Consolidated_Vought
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_boeing_organisation }
				set_mio_name_key = USA_MIO_Merger_Consolidated_Boeing
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_douglas_organisation }
				set_mio_name_key = USA_MIO_Merger_Consolidated_Douglas
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_grumman
		name = KR_MIO_Trait_merge_with_grumman
		icon = GFX_icon_grumman_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_grumman_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			naval_strike_attack = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_grumman_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_grumman TYPE = generic_mio_initial_trait_naval_aircraft_designer
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_bell_organisation }
				set_mio_name_key = USA_MIO_Merger_Bell_Grumman
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_consolidated_organisation }
				set_mio_name_key = USA_MIO_Merger_Consolidated_Grumman
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_lockheed_organisation }
				set_mio_name_key = USA_MIO_Merger_Grumman_Lockheed
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_north_american_aviation_organisation }
				set_mio_name_key = USA_MIO_Merger_Grumman_NAA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_curtiss_wright_organisation }
				set_mio_name_key = USA_MIO_Merger_Grumman_CW
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_vought_organisation }
				set_mio_name_key = USA_MIO_Merger_Grumman_Vought
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_boeing_organisation }
				set_mio_name_key = USA_MIO_Merger_Grumman_Boeing
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_douglas_organisation }
				set_mio_name_key = USA_MIO_Merger_Grumman_Douglas
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_lockheed
		name = KR_MIO_Trait_merge_with_lockheed
		icon = GFX_icon_lockheed_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_lockheed_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			air_defence = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_lockheed_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_lockheed TYPE = lockheed_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_bell_organisation }
				set_mio_name_key = USA_MIO_Merger_Bell_Lockheed
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_consolidated_organisation }
				set_mio_name_key = USA_MIO_Merger_Consolidated_Lockheed
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_grumman_organisation }
				set_mio_name_key = USA_MIO_Merger_Grumman_Lockheed
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_north_american_aviation_organisation }
				set_mio_name_key = USA_MIO_Merger_Lockheed_NAA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_curtiss_wright_organisation }
				set_mio_name_key = USA_MIO_Merger_Lockheed_CW
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_vought_organisation }
				set_mio_name_key = USA_MIO_Merger_Lockheed_Vought
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_boeing_organisation }
				set_mio_name_key = USA_MIO_Merger_Lockheed_Boeing
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_douglas_organisation }
				set_mio_name_key = USA_MIO_Merger_Lockheed_Douglas
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_north_american_aviation
		name = KR_MIO_Trait_merge_with_north_american_aviation
		icon = GFX_icon_north_american_aviation_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_north_american_aviation_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			air_range = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_north_american_aviation_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_north_american_aviation TYPE = north_american_aviation_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_bell_organisation }
				set_mio_name_key = USA_MIO_Merger_Bell_NAA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_consolidated_organisation }
				set_mio_name_key = USA_MIO_Merger_Consolidated_NAA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_grumman_organisation }
				set_mio_name_key = USA_MIO_Merger_Grumman_NAA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_lockheed_organisation }
				set_mio_name_key = USA_MIO_Merger_Lockheed_NAA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_curtiss_wright_organisation }
				set_mio_name_key = USA_MIO_Merger_NAA_CW
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_vought_organisation }
				set_mio_name_key = USA_MIO_Merger_NAA_Vought
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_boeing_organisation }
				set_mio_name_key = USA_MIO_Merger_NAA_Boeing
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_douglas_organisation }
				set_mio_name_key = USA_MIO_Merger_NAA_Douglas
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_curtiss_wright
		name = KR_MIO_Trait_merge_with_curtiss_wright
		icon = GFX_icon_curtiss_wright_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_curtiss_wright_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_curtiss_wright_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_curtiss_wright TYPE = curtiss_wright_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_bell_organisation }
				set_mio_name_key = USA_MIO_Merger_Bell_CW
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_consolidated_organisation }
				set_mio_name_key = USA_MIO_Merger_Consolidated_CW
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_grumman_organisation }
				set_mio_name_key = USA_MIO_Merger_Grumman_CW
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_lockheed_organisation }
				set_mio_name_key = USA_MIO_Merger_Lockheed_CW
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_north_american_aviation_organisation }
				set_mio_name_key = USA_MIO_Merger_NAA_CW
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_vought_organisation }
				set_mio_name_key = USA_MIO_Merger_CW_Vought
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_boeing_organisation }
				set_mio_name_key = USA_MIO_Merger_CW_Boeing
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_douglas_organisation }
				set_mio_name_key = USA_MIO_Merger_CW_Douglas
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_vought
		name = KR_MIO_Trait_merge_with_vought
		icon = GFX_icon_vought_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_vought_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			weight = -0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_vought_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_vought TYPE = vought_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_bell_organisation }
				set_mio_name_key = USA_MIO_Merger_Bell_Vought
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_consolidated_organisation }
				set_mio_name_key = USA_MIO_Merger_Consolidated_Vought
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_grumman_organisation }
				set_mio_name_key = USA_MIO_Merger_Grumman_Vought
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_lockheed_organisation }
				set_mio_name_key = USA_MIO_Merger_Lockheed_Vought
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_north_american_aviation_organisation }
				set_mio_name_key = USA_MIO_Merger_NAA_Vought
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_curtiss_wright_organisation }
				set_mio_name_key = USA_MIO_Merger_CW_Vought
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_boeing_organisation }
				set_mio_name_key = USA_MIO_Merger_Vought_Boeing
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_douglas_organisation }
				set_mio_name_key = USA_MIO_Merger_Vought_Douglas
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_boeing
		name = KR_MIO_Trait_merge_with_boeing
		icon = GFX_icon_boeing_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_boeing_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			air_attack = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_boeing_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_boeing TYPE = boeing_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_bell_organisation }
				set_mio_name_key = USA_MIO_Merger_Bell_Boeing
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_consolidated_organisation }
				set_mio_name_key = USA_MIO_Merger_Consolidated_Boeing
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_grumman_organisation }
				set_mio_name_key = USA_MIO_Merger_Grumman_Boeing
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_lockheed_organisation }
				set_mio_name_key = USA_MIO_Merger_Lockheed_Boeing
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_north_american_aviation_organisation }
				set_mio_name_key = USA_MIO_Merger_NAA_Boeing
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_curtiss_wright_organisation }
				set_mio_name_key = USA_MIO_Merger_CW_Boeing
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_vought_organisation }
				set_mio_name_key = USA_MIO_Merger_Vought_Boeing
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_douglas_organisation }
				set_mio_name_key = USA_MIO_Merger_Boeing_Douglas
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_douglas
		name = KR_MIO_Trait_merge_with_douglas
		icon = GFX_icon_douglas_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_douglas_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			thrust = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_douglas_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_douglas TYPE = douglas_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_bell_organisation }
				set_mio_name_key = USA_MIO_Merger_Bell_Douglas
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_consolidated_organisation }
				set_mio_name_key = USA_MIO_Merger_Consolidated_Douglas
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_grumman_organisation }
				set_mio_name_key = USA_MIO_Merger_Grumman_Douglas
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_lockheed_organisation }
				set_mio_name_key = USA_MIO_Merger_Lockheed_Douglas
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_north_american_aviation_organisation }
				set_mio_name_key = USA_MIO_Merger_NAA_Douglas
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_curtiss_wright_organisation }
				set_mio_name_key = USA_MIO_Merger_CW_Douglas
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_vought_organisation }
				set_mio_name_key = USA_MIO_Merger_Vought_Douglas
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_boeing_organisation }
				set_mio_name_key = USA_MIO_Merger_Boeing_Douglas
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_Maintain_Independence
		name = KR_MIO_Trait_maintain_independence
		icon = GFX_icon_dont_merge

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_is_senior_partner_of_merger = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.1
		}

		on_complete = {
			USA_mio_maintain_independence = yes
		}
	}
}

#####################
### Materiel MIOs ###
#####################
USA_browning_organisation = { #Browning Arms
	name = USA_browning
	icon = GFX_idea_USA_browning

	allowed = { is_american_tag = yes }
	available = {
		380 = { is_owned_and_controlled_by = FROM } #Utah
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		infantry_equipment
		support_equipment
	}

	research_categories = {
		infantry_weapons
		support_tech
		night_vision
		cat_special_forces_generic
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = browning_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = browning_upgrade_1
		name = KR_MIO_Trait_break_open_old_weapon_stocks
		icon = GFX_KR_generic_mio_trait_icon_infantry_division

		available = { 380 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { browning_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				USA_add_light_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { browning_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[380.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[380.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { browning_stockpile_trait_unlocked = yes }
						380 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						380 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { browning_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
					}
				}
			}
		}
	}

	trait = {
		token = browning_upgrade_2
		name = KR_MIO_Trait_standardise_parts
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		mutually_exclusive = { browning_upgrade_1 }

		position = { x = 1 y = 0 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = browning_upgrade_3
		name = KR_MIO_Trait_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		mutually_exclusive = { browning_upgrade_4 }

		position = { x = 2 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = browning_upgrade_4
		name = KR_MIO_Trait_extreme_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		mutually_exclusive = { browning_upgrade_3 }

		position = { x = 3 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.2
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 1.5
		}
	}

	trait = {
		token = browning_upgrade_5
		name = KR_MIO_Trait_eliminate_resource_waste
		icon = GFX_generic_mio_trait_icon_resources

		mutually_exclusive = { browning_upgrade_6 }

		position = { x = 4 y = 0 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = browning_upgrade_6
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		mutually_exclusive = { browning_upgrade_5 }

		position = { x = 5 y = 0 }

		production_bonus = {
			production_resource_need_factor = -0.2
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 1.5
		}
	}

	trait = {
		token = browning_upgrade_7
		name = KR_MIO_Trait_simplify_dissasembly_procedures
		icon = GFX_generic_mio_trait_icon_conversion_speed

		mutually_exclusive = { browning_upgrade_8 }

		position = { x = 6 y = 0 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = browning_upgrade_8
		name = KR_MIO_Trait_oversimplify_dissasembly_procedures
		icon = GFX_generic_mio_trait_icon_conversion_speed

		mutually_exclusive = { browning_upgrade_7 }

		position = { x = 7 y = 0 }

		production_bonus = {
			production_conversion_speed_factor = 0.4
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 1.5
		}
	}

	trait = {
		token = browning_upgrade_1_1
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { browning_upgrade_1 browning_upgrade_2 }
		any_parent = { browning_upgrade_3 browning_upgrade_4 }

		position = { x = 2 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = browning_upgrade_1_2
		name = KR_MIO_Trait_simplify_assembly_procedures
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { browning_upgrade_5 browning_upgrade_6 }
		any_parent = { browning_upgrade_7 browning_upgrade_8 }

		position = { x = 5 y = 1 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = browning_upgrade_1_3
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_light_infantry_mio_equipment_tt
		}
	}

	trait = {
		token = browning_upgrade_1_4
		name = KR_MIO_Trait_smoothen_bureaucratic_procedures
		icon = GFX_KR_generic_mio_trait_icon_assign_cost

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.5
		}
	}

	trait = {
		token = browning_upgrade_2_1
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { browning_upgrade_1_1 browning_upgrade_1_2 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = browning_upgrade_2_2
		name = KR_MIO_Trait_long_life_production_runs
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { browning_upgrade_1_1 browning_upgrade_1_2 }

		position = { x = 4 y = 2 }

		production_bonus = {
			production_resource_need_factor = -0.15
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = browning_upgrade_2_3
		name = KR_MIO_Trait_acquire_rock_island_arsenal_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			395 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			380 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { browning_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				395 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				380 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = illinois_military_factory_removed }
					add_to_variable = { illinois_military_factory_removed = 1 }
				}
				else = {
					set_variable = { illinois_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = browning_upgrade_2_4
		name = KR_MIO_Trait_acquire_colt_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			931 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			380 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { browning_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				931 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				380 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = connecticut_civilian_factory_removed }
					add_to_variable = { connecticut_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { connecticut_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_materiel_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_browning }
	override_trait = {
		token = KR_MIO_Trait_merge_with_colt
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_remington
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_springfield_armory
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_winchester_repeating_arms
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_army_ordnance_department
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_rock_island_arsenal
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_watervliet_arsenal
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_studebaker
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_ford
		position = { x = 8 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 9 y = 4 }
	}
}
USA_colt_organisation = { #Colt
	name = USA_colt
	icon = GFX_idea_USA_colt

	allowed = { is_american_tag = yes }
	available = {
		931 = { is_owned_and_controlled_by = FROM } #Connecticut
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		infantry_equipment
	}

	research_categories = {
		infantry_weapons
		night_vision
		cat_special_forces_generic
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = colt_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = colt_upgrade_1
		name = KR_MIO_Trait_break_open_old_weapon_stocks
		icon = GFX_KR_generic_mio_trait_icon_infantry_division

		available = { 931 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { colt_upgrade_2 }

		position = { x = 3 y = 0 }

		on_complete = {
			FROM = {
				USA_add_light_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { colt_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[931.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[931.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { colt_stockpile_trait_unlocked = yes }
						931 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						931 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { colt_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
					}
				}
			}
		}
	}

	trait = {
		token = colt_upgrade_2
		name = KR_MIO_Trait_optical_sights
		icon = GFX_generic_mio_trait_icon_soft_attack

		mutually_exclusive = { colt_upgrade_1 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = colt_upgrade_1_1
		name = KR_MIO_Trait_heavier_mortar_strike_packages
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { colt_upgrade_1 colt_upgrade_2 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = colt_upgrade_1_2
		name = KR_MIO_Trait_inner_barrel_rifling
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { colt_upgrade_1 colt_upgrade_2 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			breakthrough = 0.2
		}
	}

	trait = {
		token = colt_upgrade_1_3
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_light_infantry_mio_equipment_tt
		}
	}

	trait = {
		token = colt_upgrade_1_4
		name = KR_MIO_Trait_hire_additional_designers
		icon = GFX_KR_generic_mio_trait_icon_army_xp

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		on_complete = {
			FROM = { army_experience = 50 }
		}
	}

	trait = {
		token = colt_upgrade_2_1
		name = KR_MIO_Trait_extensive_testing
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { colt_upgrade_1_1 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = colt_upgrade_2_2
		name = KR_MIO_Trait_smoothed_hmg_feeding_system
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { colt_upgrade_1_1 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = colt_upgrade_2_3
		name = KR_MIO_Trait_lmg_rotary_feed_cylinders
		icon = GFX_generic_mio_trait_icon_breakthrough

		all_parents = { colt_upgrade_1_1 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = colt_upgrade_2_4
		name = KR_MIO_Trait_increase_mine_explosive_yield
		icon = GFX_generic_mio_trait_icon_breakthrough

		all_parents = { colt_upgrade_1_1 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = colt_upgrade_2_5
		name = KR_MIO_Trait_cheap_mortar_spring_loaded_shock_absorbers
		icon = GFX_generic_mio_trait_icon_breakthrough

		all_parents = { colt_upgrade_1_2 }

		mutually_exclusive = { colt_upgrade_2_6 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = colt_upgrade_2_6
		name = KR_MIO_Trait_high_quality_mortar_spring_loaded_shock_absorbers
		icon = GFX_generic_mio_trait_icon_breakthrough

		all_parents = { colt_upgrade_1_2 }

		mutually_exclusive = { colt_upgrade_2_5 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			breakthrough = 0.2
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = -0.3
		}
	}

	trait = {
		token = colt_upgrade_2_7
		name = KR_MIO_Trait_acquire_rock_island_arsenal_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			395 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			931 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { colt_upgrade_2_8 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				395 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = illinois_military_factory_removed }
					add_to_variable = { illinois_military_factory_removed = 1 }
				}
				else = {
					set_variable = { illinois_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = colt_upgrade_2_8
		name = KR_MIO_Trait_acquire_army_ordnance_department_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			362 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			931 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { colt_upgrade_2_7 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = virginia_civilian_factory_removed }
					add_to_variable = { virginia_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { virginia_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_materiel_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_colt }
	override_trait = {
		token = KR_MIO_Trait_merge_with_browning
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_remington
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_springfield_armory
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_winchester_repeating_arms
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_army_ordnance_department
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_rock_island_arsenal
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_watervliet_arsenal
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_studebaker
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_ford
		position = { x = 8 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 9 y = 4 }
	}
}
USA_remington_organisation = { #Remington Arms
	name = USA_remington
	icon = GFX_idea_USA_remington

	allowed = { is_american_tag = yes }
	available = {
		796 = { is_owned_and_controlled_by = FROM } #Albany
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		infantry_equipment
	}

	research_categories = {
		infantry_weapons
		night_vision
		cat_special_forces_generic
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = remington_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = remington_upgrade_1
		name = KR_MIO_Trait_break_open_old_weapon_stocks
		icon = GFX_KR_generic_mio_trait_icon_infantry_division

		available = {
			796 = { is_fully_controlled_by = FROM }
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		mutually_exclusive = { remington_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				USA_add_light_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { remington_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[931.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[931.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { remington_stockpile_trait_unlocked = yes }
						796 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						796 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { remington_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_2
		name = KR_MIO_Trait_lightweight_infantry_equipment
		icon = GFX_generic_mio_trait_icon_maximum_speed

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		mutually_exclusive = { remington_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = remington_upgrade_3
		name = KR_MIO_Trait_repurposed_civilian_motorcycles
		icon = GFX_generic_mio_trait_icon_maximum_speed

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		position = { x = 2 y = 0 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = remington_upgrade_4
		name = KR_MIO_Trait_extended_hmg_lmg_magazines
		icon = GFX_generic_mio_trait_icon_defense

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			defense = 0.1
		}
	}

	trait = {
		token = remington_upgrade_5
		name = KR_MIO_Trait_incendiary_bottles
		icon = GFX_generic_mio_trait_icon_hard_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		mutually_exclusive = { remington_upgrade_6 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			hard_attack = 0.5
			ap_attack = 0.5
		}
	}

	trait = {
		token = remington_upgrade_6
		name = KR_MIO_Trait_mass_incendiary_bottle_production
		icon = GFX_generic_mio_trait_icon_hard_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		mutually_exclusive = { remington_upgrade_5 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			hard_attack = 1
			ap_attack = 1
			build_cost_ic = 0.05
		}
	}

	trait = {
		token = remington_upgrade_1_1
		name = KR_MIO_Trait_increased_fire_rate
		icon = GFX_generic_mio_trait_icon_defense

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		any_parent = { remington_upgrade_1 remington_upgrade_2 }
		all_parents = { remington_upgrade_3 }

		mutually_exclusive = { remington_upgrade_1_2 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			defense = 0.1
		}
	}

	trait = {
		token = remington_upgrade_1_2
		name = KR_MIO_Trait_increased_hmg_lmg_accuracy
		icon = GFX_generic_mio_trait_icon_defense

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		any_parent = { remington_upgrade_5 remington_upgrade_6 }
		all_parents = { remington_upgrade_4 }

		mutually_exclusive = { remington_upgrade_1_1 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			defense = 0.2
			build_cost_ic = 0.05
		}
	}

	trait = {
		token = remington_upgrade_1_3
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_light_infantry_mio_equipment_tt
		}
	}

	trait = {
		token = remington_upgrade_1_4
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = remington_upgrade_2_1
		name = KR_MIO_Trait_increased_recoilless_rifle_velocity
		icon = GFX_generic_mio_trait_icon_ap_attack

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		any_parent = { remington_upgrade_1_1 remington_upgrade_1_2 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			ap_attack = 1
		}
	}

	trait = {
		token = remington_upgrade_normal
		name = KR_MIO_Trait_short_term_planning
		icon = GFX_generic_mio_department_icon_infantry_offense

		visible = {
			NOT = {
				has_mio_flag = remington_normal_upgrades
				has_mio_flag = remington_improved_upgrades
			}
		}

		position = { x = 2 y = 2 }

		on_complete = {
			custom_effect_tooltip = USA_upgrade_normal
			set_mio_flag = remington_normal_upgrades
			custom_effect_tooltip = tooltip_white_line
			add_mio_size = 1
		}
	}

	trait = {
		token = remington_upgrade_2_2
		name = KR_MIO_Trait_improve_engine_overheat_limit
		icon = GFX_generic_mio_trait_icon_maximum_speed

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		any_parent = { remington_upgrade_1_1 remington_upgrade_1_2 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = remington_upgrade_improved
		name = KR_MIO_Trait_long_term_planning
		icon = GFX_generic_mio_department_icon_infantry_quality

		visible = {
			NOT = {
				has_mio_flag = remington_normal_upgrades
				has_mio_flag = remington_improved_upgrades
			}
		}

		position = { x = 4 y = 2 }

		on_complete = {
			custom_effect_tooltip = USA_upgrade_improved_civs_and_mils
			set_mio_flag = remington_improved_upgrades
			custom_effect_tooltip = tooltip_white_line
			add_mio_size = 1
		}
	}

	trait = {
		token = remington_upgrade_2_3
		name = KR_MIO_Trait_increased_bazooka_payload
		icon = GFX_generic_mio_trait_icon_hard_attack

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		any_parent = { remington_upgrade_1_1 remington_upgrade_1_2 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			hard_attack = 1
		}
	}

	trait = {
		token = remington_upgrade_2_4
		name = KR_MIO_Trait_acquire_rock_island_arsenal_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			395 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			796 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { remington_upgrade_2_5 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				395 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				796 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = illinois_military_factory_removed }
					add_to_variable = { illinois_military_factory_removed = 1 }
				}
				else = {
					set_variable = { illinois_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = remington_upgrade_2_5
		name = KR_MIO_Trait_acquire_army_ordnance_department_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			362 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			796 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { remington_upgrade_2_4 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				796 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = virginia_civilian_factory_removed }
					add_to_variable = { virginia_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { virginia_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = remington_upgrade_1_improved
		name = KR_MIO_Trait_break_open_old_weapon_stocks
		icon = GFX_KR_generic_mio_trait_icon_infantry_division

		available = {
			796 = { is_fully_controlled_by = FROM }
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		mutually_exclusive = { remington_upgrade_2_improved }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				USA_add_light_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { remington_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[931.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[931.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { remington_stockpile_trait_unlocked = yes }
						796 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						796 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { remington_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_2_improved
		name = KR_MIO_Trait_lightweight_infantry_equipment
		icon = GFX_generic_mio_trait_icon_maximum_speed

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		mutually_exclusive = { remington_upgrade_1_improved }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			maximum_speed = 0.15
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_3_improved
		name = KR_MIO_Trait_repurposed_civilian_motorcycles
		icon = GFX_generic_mio_trait_icon_maximum_speed

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		position = { x = 2 y = 0 }

		equipment_bonus = {
			maximum_speed = 0.15
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_4_improved
		name = KR_MIO_Trait_extended_hmg_lmg_magazines
		icon = GFX_generic_mio_trait_icon_defense

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			defense = 0.15
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_5_improved
		name = KR_MIO_Trait_incendiary_bottles
		icon = GFX_generic_mio_trait_icon_hard_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		mutually_exclusive = { remington_upgrade_6_improved }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			hard_attack = 0.75
			ap_attack = 0.75
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_6_improved
		name = KR_MIO_Trait_mass_incendiary_bottle_production
		icon = GFX_generic_mio_trait_icon_hard_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		mutually_exclusive = { remington_upgrade_5_improved }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			hard_attack = 1.5
			ap_attack = 1.5
			build_cost_ic = 0.05
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_1_1_improved
		name = KR_MIO_Trait_increased_hmg_lmg_fire_rate
		icon = GFX_generic_mio_trait_icon_defense

		available = {
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		any_parent = { remington_upgrade_1_improved remington_upgrade_2_improved }
		all_parents = { remington_upgrade_3_improved }

		mutually_exclusive = { remington_upgrade_1_2_improved }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			defense = 0.15
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_1_2_improved
		name = KR_MIO_Trait_increased_hmg_lmg_accuracy
		icon = GFX_generic_mio_trait_icon_defense

		available = {
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		any_parent = { remington_upgrade_5_improved remington_upgrade_6_improved }
		all_parents = { remington_upgrade_4_improved }

		mutually_exclusive = { remington_upgrade_1_1_improved }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			defense = 0.3
			build_cost_ic = 0.05
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_2_1_improved
		name = KR_MIO_Trait_increased_recoilless_rifle_velocity
		icon = GFX_generic_mio_trait_icon_ap_attack

		available = {
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		any_parent = { remington_upgrade_1_1_improved remington_upgrade_1_2_improved }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			ap_attack = 1.5
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_2_2_improved
		name = KR_MIO_Trait_improve_engine_overheat_limit
		icon = GFX_generic_mio_trait_icon_maximum_speed

		available = {
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		any_parent = { remington_upgrade_1_1_improved remington_upgrade_1_2_improved }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			maximum_speed = 0.15
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_2_3_improved
		name = KR_MIO_Trait_increased_bazooka_payload
		icon = GFX_generic_mio_trait_icon_hard_attack

		available = {
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		any_parent = { remington_upgrade_1_1_improved remington_upgrade_1_2_improved }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			hard_attack = 1.5
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	### Merger Traits ###
	include = USA_materiel_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_remington }
	override_trait = {
		token = KR_MIO_Trait_merge_with_browning
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_colt
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_springfield_armory
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_winchester_repeating_arms
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_army_ordnance_department
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_rock_island_arsenal
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_watervliet_arsenal
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_studebaker
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_ford
		position = { x = 8 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 9 y = 4 }
	}
}
USA_springfield_armory_organisation = { #Springfield Armory
	name = USA_springfield_armory
	icon = GFX_idea_springfield_armory

	allowed = { is_american_tag = yes }
	available = {
		932 = { is_owned_and_controlled_by = FROM } #Massachusetts
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		infantry_equipment
	}

	research_categories = {
		infantry_weapons
		night_vision
		cat_special_forces_generic
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = springfield_armory_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = springfield_armory_upgrade_1
		name = KR_MIO_Trait_break_open_old_weapon_stocks
		icon = GFX_KR_generic_mio_trait_icon_infantry_division

		available = { 932 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { springfield_armory_upgrade_2 }

		position = { x = 3 y = 0 }

		on_complete = {
			FROM = {
				USA_add_light_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { springfield_armory_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[932.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[932.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { springfield_armory_stockpile_trait_unlocked = yes }
						932 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						932 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { springfield_armory_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
					}
				}
			}
		}
	}

	trait = {
		token = springfield_armory_upgrade_2
		name = KR_MIO_Trait_heavier_mortar_strike_packages
		icon = GFX_generic_mio_trait_icon_soft_attack

		mutually_exclusive = { springfield_armory_upgrade_1 }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = springfield_armory_upgrade_1_1
		name = KR_MIO_Trait_increased_rifle_magazines
		icon = GFX_generic_mio_trait_icon_defense

		any_parent = { springfield_armory_upgrade_1 springfield_armory_upgrade_2 }

		mutually_exclusive = { springfield_armory_upgrade_1_2 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			defense = 0.05
		}
	}

	trait = {
		token = springfield_armory_upgrade_1_2
		name = KR_MIO_Trait_vastly_increased_rifle_magazines
		icon = GFX_generic_mio_trait_icon_defense

		any_parent = { springfield_armory_upgrade_1 springfield_armory_upgrade_2 }

		mutually_exclusive = { springfield_armory_upgrade_1_1 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			defense = 0.1
			reliability = -0.2
		}
	}

	trait = {
		token = springfield_armory_upgrade_1_3
		name = KR_MIO_Trait_repurposed_civilian_motorcycles
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { springfield_armory_upgrade_1 springfield_armory_upgrade_2 }

		mutually_exclusive = { springfield_armory_upgrade_1_4 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = springfield_armory_upgrade_1_4
		name = KR_MIO_Trait_improve_engine_overheat_limit
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { springfield_armory_upgrade_1 springfield_armory_upgrade_2 }

		mutually_exclusive = { springfield_armory_upgrade_1_3 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			maximum_speed = 0.2
			reliability = -0.2
		}
	}

	trait = {
		token = springfield_armory_upgrade_1_5
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_light_infantry_mio_equipment_tt
		}
	}

	trait = {
		token = springfield_armory_upgrade_1_6
		name = KR_MIO_Trait_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = springfield_armory_upgrade_2_1
		name = KR_MIO_Trait_anti_tank_sticky_bombs
		icon = GFX_generic_mio_trait_icon_hard_attack

		any_parent = { springfield_armory_upgrade_1_1 springfield_armory_upgrade_1_2 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			hard_attack = 1
		}
	}

	trait = {
		token = springfield_armory_upgrade_2_2
		name = KR_MIO_Trait_increased_recoilless_rifle_velocity
		icon = GFX_generic_mio_trait_icon_ap_attack

		any_parent = { springfield_armory_upgrade_1_1 springfield_armory_upgrade_1_2 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			ap_attack = 1
		}
	}

	trait = {
		token = springfield_armory_upgrade_2_3
		name = KR_MIO_Trait_extended_hmg_lmg_magazines
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { springfield_armory_upgrade_1_1 springfield_armory_upgrade_1_2 }
		any_parent = { springfield_armory_upgrade_1_3 springfield_armory_upgrade_1_4 }

		mutually_exclusive = { springfield_armory_upgrade_2_4 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = springfield_armory_upgrade_2_4
		name = KR_MIO_Trait_extremely_extended_hmg_lmg_magazines
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { springfield_armory_upgrade_1_1 springfield_armory_upgrade_1_2 }
		any_parent = { springfield_armory_upgrade_1_3 springfield_armory_upgrade_1_4 }

		mutually_exclusive = { springfield_armory_upgrade_2_3 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			breakthrough = 0.2
			reliability = -0.2
		}
	}

	trait = {
		token = springfield_armory_upgrade_2_5
		name = KR_MIO_Trait_clear_magazine_jam_faults
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { springfield_armory_upgrade_1_3 springfield_armory_upgrade_1_4 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = springfield_armory_upgrade_2_6
		name = KR_MIO_Trait_standardise_rifle_parts
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { springfield_armory_upgrade_1_3 springfield_armory_upgrade_1_4 }

		position = { x = 7 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = springfield_armory_upgrade_2_7
		name = KR_MIO_Trait_acquire_rock_island_arsenal_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			395 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			932 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { springfield_armory_upgrade_2_8 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				395 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				932 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = illinois_military_factory_removed }
					add_to_variable = { illinois_military_factory_removed = 1 }
				}
				else = {
					set_variable = { illinois_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = springfield_armory_upgrade_2_8
		name = KR_MIO_Trait_acquire_army_ordnance_department_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			362 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			932 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { springfield_armory_upgrade_2_7 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				932 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = virginia_civilian_factory_removed }
					add_to_variable = { virginia_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { virginia_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_materiel_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_springfield_armory }
	override_trait = {
		token = KR_MIO_Trait_merge_with_browning
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_colt
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_remington
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_winchester_repeating_arms
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_army_ordnance_department
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_rock_island_arsenal
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_watervliet_arsenal
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_studebaker
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_ford
		position = { x = 8 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 9 y = 4 }
	}
}
USA_winchester_repeating_arms_organisation = { #Winchester Repeating Arms
	name = USA_winchester_repeating_arms
	icon = GFX_idea_USA_winchester_repeating_arms

	allowed = { is_american_tag = yes }
	available = {
		931 = { is_owned_and_controlled_by = FROM } #Connecticut
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		infantry_equipment
	}

	research_categories = {
		infantry_weapons
		night_vision
		cat_special_forces_generic
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = winchester_repeating_arms_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_1
		name = KR_MIO_Trait_break_open_old_weapon_stocks
		icon = GFX_KR_generic_mio_trait_icon_infantry_division

		available = { 931 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { winchester_repeating_arms_upgrade_2 }

		position = { x = 2 y = 0 }

		on_complete = {
			FROM = {
				USA_add_light_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { winchester_repeating_arms_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[931.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[931.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { winchester_repeating_arms_stockpile_trait_unlocked = yes }
						931 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						931 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { winchester_repeating_arms_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
					}
				}
			}
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2
		name = KR_MIO_Trait_cheaper_materials
		icon = GFX_generic_mio_trait_icon_resources

		mutually_exclusive = { winchester_repeating_arms_upgrade_1 }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			build_cost_ic = -0.03
		}

		production_bonus = {
			production_resource_need_factor = 0.3
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_1_1
		name = KR_MIO_Trait_rush_design_process
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { winchester_repeating_arms_upgrade_1 winchester_repeating_arms_upgrade_2 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			build_cost_ic = -0.015
			reliability = -0.1
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_1_2
		name = KR_MIO_Trait_rush_production_process
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { winchester_repeating_arms_upgrade_1 winchester_repeating_arms_upgrade_2 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			build_cost_ic = -0.03
			soft_attack = -0.05
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_1_3
		name = KR_MIO_Trait_simplify_mortar_designs
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { winchester_repeating_arms_upgrade_1 winchester_repeating_arms_upgrade_2 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			build_cost_ic = -0.015
			maximum_speed = -0.15
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_1_4
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_light_infantry_mio_equipment_tt
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_1_5
		name = KR_MIO_Trait_eliminate_resource_waste
		icon = GFX_generic_mio_trait_icon_resources

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.15
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2_1
		name = KR_MIO_Trait_sacrifice_hmg_lmg_magazine_size
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { winchester_repeating_arms_upgrade_1_1 }

		mutually_exclusive = { winchester_repeating_arms_upgrade_2_2 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.015
			defense = -0.05
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2_2
		name = KR_MIO_Trait_sacrifice_hmg_lmg_accuracy
		icon = GFX_generic_mio_trait_icon_breakthrough

		all_parents = { winchester_repeating_arms_upgrade_1_1 }

		mutually_exclusive = { winchester_repeating_arms_upgrade_2_1 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.015
			breakthrough = -0.1
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2_3
		name = KR_MIO_Trait_simplified_bazooka_designs
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { winchester_repeating_arms_upgrade_1_2 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.015
			hard_attack = -0.5
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2_4
		name = KR_MIO_Trait_cheaper_ammunition
		icon = GFX_generic_mio_trait_icon_ap_attack

		all_parents = { winchester_repeating_arms_upgrade_1_2 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.015
			ap_attack = -0.5
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2_5
		name = KR_MIO_Trait_standardise_mines
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { winchester_repeating_arms_upgrade_1_3 }

		mutually_exclusive = { winchester_repeating_arms_upgrade_2_6 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.015
			defense = -0.05
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2_6
		name = KR_MIO_Trait_standardise_optical_sights
		icon = GFX_generic_mio_trait_icon_breakthrough

		all_parents = { winchester_repeating_arms_upgrade_1_3 }

		mutually_exclusive = { winchester_repeating_arms_upgrade_2_5 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.015
			breakthrough = -0.1
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2_7
		name = KR_MIO_Trait_acquire_rock_island_arsenal_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			395 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			931 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { winchester_repeating_arms_upgrade_2_8 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				395 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = illinois_military_factory_removed }
					add_to_variable = { illinois_military_factory_removed = 1 }
				}
				else = {
					set_variable = { illinois_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2_8
		name = KR_MIO_Trait_acquire_army_ordnance_department_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			362 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			931 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { winchester_repeating_arms_upgrade_2_7 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = virginia_civilian_factory_removed }
					add_to_variable = { virginia_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { virginia_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_materiel_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_winchester_repeating_arms }
	override_trait = {
		token = KR_MIO_Trait_merge_with_browning
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_colt
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_remington
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_springfield_armory
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_army_ordnance_department
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_rock_island_arsenal
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_watervliet_arsenal
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_studebaker
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_ford
		position = { x = 8 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 9 y = 4 }
	}
}
USA_army_ordnance_department_organisation = { #Army Ordnance Department
	name = USA_army_ordnance_department
	icon = GFX_idea_army_ordnance_department

	allowed = { is_american_tag = yes }
	available = {
		362 = { is_owned_and_controlled_by = FROM } #Virginia
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		artillery_equipment
		super_heavy_artillery_equipment
		self_propelled_super_heavy_artillery_equipment
		anti_tank_equipment
		anti_air_equipment
		railway_gun_equipment
		super_heavy_railway_gun_equipment
		train_equipment
	}

	research_categories = {
		mio_cat_all_artillery_equipment
		train_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = army_ordnance_department_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_1
		name = KR_MIO_Trait_break_open_old_weapon_stocks
		icon = GFX_KR_generic_mio_trait_icon_artillery_division

		available = { 362 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { army_ordnance_department_upgrade_2 }

		position = { x = 1 y = 0 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}

		on_complete = {
			FROM = {
				USA_add_heavy_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { army_ordnance_department_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_heavy_infantry_division
							STRENGTH = "100%"
							LOCATION = "[362.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_heavy_infantry_division
							STRENGTH = "100%"
							LOCATION = "[362.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_heavy_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { army_ordnance_department_stockpile_trait_unlocked = yes }
						362 = {
							create_unit = {
								division = "division_template = \"Heavy Infantry Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						362 = {
							create_unit = {
								division = "division_template = \"Heavy Infantry Division\" start_experience_factor = 0.1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { army_ordnance_department_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 1500
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 100
					}
				}
			}
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_2
		name = KR_MIO_Trait_longer_work_hours
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		mutually_exclusive = { army_ordnance_department_upgrade_1 }

		position = { x = 2 y = 0 }

		production_bonus = {
			production_efficiency_cap_factor = 0.1
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.15
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_3
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		position = { x = 3 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_4
		name = KR_MIO_Trait_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		mutually_exclusive = { army_ordnance_department_upgrade_5 }

		position = { x = 4 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_5
		name = KR_MIO_Trait_extreme_rapid_upscaling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		mutually_exclusive = { army_ordnance_department_upgrade_4 }

		position = { x = 5 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.2
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.15
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_6
		name = KR_MIO_Trait_increase_worker_salaries
		icon = GFX_icon_Long_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { army_ordnance_department_upgrade_7 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					Long_strength = -1
					tooltip = USA_change_longist_strength
				}
			}
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_7
		name = KR_MIO_Trait_workplace_agitation
		icon = GFX_icon_Long_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { army_ordnance_department_upgrade_6 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					Long_strength = 1
					tooltip = USA_change_longist_strength
				}
			}
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_1_1
		name = KR_MIO_Trait_material_recycling
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { army_ordnance_department_upgrade_1 army_ordnance_department_upgrade_2 }

		mutually_exclusive = { army_ordnance_department_upgrade_1_2 }

		position = { x = 0 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_1_2
		name = KR_MIO_Trait_eliminate_resource_waste
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { army_ordnance_department_upgrade_1 army_ordnance_department_upgrade_2 }

		mutually_exclusive = { army_ordnance_department_upgrade_1_1 }

		position = { x = 1 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.2
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.15
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_1_3
		name = KR_MIO_Trait_long_life_production_runs
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		any_parent = { army_ordnance_department_upgrade_1 army_ordnance_department_upgrade_2 }
		all_parents = { army_ordnance_department_upgrade_3 }
		any_parent = { army_ordnance_department_upgrade_4 army_ordnance_department_upgrade_5 }

		position = { x = 3 y = 1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_1_4
		name = KR_MIO_Trait_dedicated_conversion_facilities
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { army_ordnance_department_upgrade_4 army_ordnance_department_upgrade_5 }

		mutually_exclusive = { army_ordnance_department_upgrade_1_5 }

		position = { x = 5 y = 1 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_1_5
		name = KR_MIO_Trait_simplify_dissasembly_procedures
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { army_ordnance_department_upgrade_4 army_ordnance_department_upgrade_5 }

		mutually_exclusive = { army_ordnance_department_upgrade_1_4 }

		position = { x = 6 y = 1 }

		production_bonus = {
			production_conversion_speed_factor = 0.4
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.15
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_1_6
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_heavy_infantry_mio_equipment_tt
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_1_7
		name = KR_MIO_Trait_hire_additional_designers
		icon = GFX_KR_generic_mio_trait_icon_army_xp

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		on_complete = {
			FROM = { army_experience = 50 }
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_2_1
		name = KR_MIO_Trait_interservice_competition_for_material_suppliers
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { army_ordnance_department_upgrade_1_1 army_ordnance_department_upgrade_1_2 }

		position = { x = 0 y = 2 }

		production_bonus = {
			production_resource_need_factor = -0.15
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_2_2
		name = KR_MIO_Trait_quality_manufacturing_tools
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { army_ordnance_department_upgrade_1_4 army_ordnance_department_upgrade_1_5 }

		position = { x = 6 y = 2 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_2_3
		name = KR_MIO_Trait_acquire_rock_island_arsenal_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			395 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			362 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { army_ordnance_department_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				395 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				362 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = illinois_military_factory_removed }
					add_to_variable = { illinois_military_factory_removed = 1 }
				}
				else = {
					set_variable = { illinois_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_2_4
		name = KR_MIO_Trait_acquire_colt_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			931 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			362 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { army_ordnance_department_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				931 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				362 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = connecticut_civilian_factory_removed }
					add_to_variable = { connecticut_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { connecticut_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_materiel_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_army_ordnance_department }
	override_trait = {
		token = KR_MIO_Trait_merge_with_browning
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_colt
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_remington
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_springfield_armory
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_winchester_repeating_arms
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_rock_island_arsenal
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_watervliet_arsenal
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_studebaker
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_ford
		position = { x = 8 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 9 y = 4 }
	}
}
USA_rock_island_arsenal_organisation = { #Rock Island Arsenal
	name = USA_rock_island_arsenal
	icon = GFX_idea_rock_island_arsenal

	allowed = { is_american_tag = yes }
	available = {
		395 = { is_owned_and_controlled_by = FROM } #Illinois
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		artillery_equipment
		anti_tank_equipment
		anti_air_equipment
		super_heavy_artillery_equipment
		self_propelled_super_heavy_artillery_equipment
	}

	research_categories = {
		mio_cat_all_artillery_equipment
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = rock_island_arsenal_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_1
		name = KR_MIO_Trait_break_open_old_weapon_stocks
		icon = GFX_KR_generic_mio_trait_icon_artillery_division

		available = { 395 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { rock_island_arsenal_upgrade_2 }

		position = { x = 0 y = 0 }

		equipment_bonus = {
			reliability = 0.2
		}

		on_complete = {
			FROM = {
				USA_add_heavy_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { rock_island_arsenal_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_heavy_infantry_division
							STRENGTH = "100%"
							LOCATION = "[395.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_heavy_infantry_division
							STRENGTH = "100%"
							LOCATION = "[395.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_heavy_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { rock_island_arsenal_stockpile_trait_unlocked = yes }
						395 = {
							create_unit = {
								division = "division_template = \"Heavy Infantry Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						395 = {
							create_unit = {
								division = "division_template = \"Heavy Infantry Division\" start_experience_factor = 0.1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { rock_island_arsenal_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 1500
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 100
					}
				}
			}
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_2
		name = KR_MIO_Trait_heavier_explosive_payload
		icon = GFX_generic_mio_trait_icon_soft_attack

		mutually_exclusive = { rock_island_arsenal_upgrade_1 }

		position = { x = 2 y = 0 }

		equipment_bonus = {
			reliability = 0.2
			soft_attack = 0.05
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_3
		name = KR_MIO_Trait_increase_worker_salaries
		icon = GFX_icon_SPA_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { rock_island_arsenal_upgrade_4 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					SPA_strength = -1
					tooltip = USA_change_socialist_strength
				}
			}
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_4
		name = KR_MIO_Trait_workplace_agitation
		icon = GFX_icon_SPA_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { rock_island_arsenal_upgrade_3 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				add_to_variable = {
					SPA_strength = 1
					tooltip = USA_change_socialist_strength
				}
			}
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_1_1
		name = KR_MIO_Trait_decreased_shell_windage
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { rock_island_arsenal_upgrade_1 rock_island_arsenal_upgrade_2 }

		mutually_exclusive = { rock_island_arsenal_upgrade_1_2 }

		position = { x = 0 y = 1 }

		equipment_bonus = {
			soft_attack = 0.05
			breakthrough = 0.1
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_1_2
		name = KR_MIO_Trait_illumination_shells
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { rock_island_arsenal_upgrade_1 rock_island_arsenal_upgrade_2 }

		mutually_exclusive = { rock_island_arsenal_upgrade_1_1 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			soft_attack = 0.05
			breakthrough = 0.2
		}

		production_bonus = {
			production_efficiency_cap_factor = -0.05
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_1_3
		name = KR_MIO_Trait_apbc_shells
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { rock_island_arsenal_upgrade_1 rock_island_arsenal_upgrade_2 }

		position = { x = 4 y = 1 }

		limit_to_equipment_type = { anti_tank_equipment }

		equipment_bonus = {
			soft_attack = 2
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_1_4
		name = KR_MIO_Trait_increased_fragmentation_shell_fragments
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { rock_island_arsenal_upgrade_1 rock_island_arsenal_upgrade_2 }

		position = { x = 6 y = 1 }

		limit_to_equipment_type = { anti_air_equipment }

		equipment_bonus = {
			soft_attack = 2
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_1_5
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_heavy_infantry_mio_equipment_tt
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_1_6
		name = KR_MIO_Trait_expanded_labour_pool
		icon = GFX_generic_mio_trait_icon_production_capacity

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_2_1
		name = KR_MIO_Trait_specialise_in_heavy_artillery
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { rock_island_arsenal_upgrade_1_1 rock_island_arsenal_upgrade_1_2 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			breakthrough = 0.2
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_2_2
		name = KR_MIO_Trait_increased_propellant
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { rock_island_arsenal_upgrade_1_1 rock_island_arsenal_upgrade_1_2 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			breakthrough = 0.2
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_2_3
		name = KR_MIO_Trait_apcbc_shells
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { rock_island_arsenal_upgrade_1_3 }

		position = { x = 5 y = 2 }

		limit_to_equipment_type = { anti_tank_equipment }

		equipment_bonus = {
			hard_attack = 0.25
			ap_attack = 0.25
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_2_4
		name = KR_MIO_Trait_expertly_timed_fuses
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { rock_island_arsenal_upgrade_1_4 }

		position = { x = 7 y = 2 }

		limit_to_equipment_type = { anti_air_equipment }

		equipment_bonus = {
			air_attack = 0.1
			hard_attack = 1
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_2_5
		name = KR_MIO_Trait_acquire_winchester_repeating_arms_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			931 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			395 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { rock_island_arsenal_upgrade_2_6 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				931 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				395 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = connecticut_military_factory_removed }
					add_to_variable = { connecticut_military_factory_removed = 2 }
				}
				else = {
					set_variable = { connecticut_military_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_2_6
		name = KR_MIO_Trait_acquire_army_ordnance_department_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			362 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			395 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { rock_island_arsenal_upgrade_2_5 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				395 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = virginia_civilian_factory_removed }
					add_to_variable = { virginia_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { virginia_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_materiel_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_rock_island_arsenal }
	override_trait = {
		token = KR_MIO_Trait_merge_with_browning
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_colt
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_remington
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_springfield_armory
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_winchester_repeating_arms
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_army_ordnance_department
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_watervliet_arsenal
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_studebaker
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_ford
		position = { x = 8 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 9 y = 4 }
	}
}
USA_watervliet_arsenal_organisation = { #Watervliet Arsenal
	name = USA_watervliet_arsenal
	icon = GFX_idea_USA_watervliet_arsenal

	allowed = { is_american_tag = yes }
	available = {
		796 = { is_owned_and_controlled_by = FROM } #Albany
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		artillery_equipment
		anti_tank_equipment
		anti_air_equipment
		super_heavy_artillery_equipment
		self_propelled_super_heavy_artillery_equipment
	}

	research_categories = {
		mio_cat_all_artillery_equipment
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = watervliet_arsenal_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_1
		name = KR_MIO_Trait_increased_firing_range
		icon = GFX_generic_mio_trait_icon_hardness

		position = { x = 1 y = 0 }

		limit_to_equipment_type = { anti_tank_equipment }

		equipment_bonus = {
			hardness = 1
			defense = 1
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_2
		name = KR_MIO_Trait_break_open_old_weapon_stocks
		icon = GFX_KR_generic_mio_trait_icon_artillery_division

		available = { 796 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { watervliet_arsenal_upgrade_3 }

		position = { x = 2 y = 0 }

		limit_to_equipment_type = {
			artillery_equipment
			super_heavy_artillery_equipment
			self_propelled_super_heavy_artillery_equipment
		}

		equipment_bonus = {
			hard_attack = 3
			ap_attack = 3
		}

		on_complete = {
			FROM = {
				USA_add_heavy_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { watervliet_arsenal_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_heavy_infantry_division
							STRENGTH = "100%"
							LOCATION = "[796.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_heavy_infantry_division
							STRENGTH = "100%"
							LOCATION = "[796.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_heavy_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { watervliet_arsenal_stockpile_trait_unlocked = yes }
						796 = {
							create_unit = {
								division = "division_template = \"Heavy Infantry Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						796 = {
							create_unit = {
								division = "division_template = \"Heavy Infantry Division\" start_experience_factor = 0.1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { watervliet_arsenal_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 1500
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 100
					}
				}
			}
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_3
		name = KR_MIO_Trait_specialize_in_siege_artillery
		icon = GFX_generic_mio_trait_icon_defense

		mutually_exclusive = { watervliet_arsenal_upgrade_2 }

		position = { x = 5 y = 0 }

		limit_to_equipment_type = {
			artillery_equipment
			super_heavy_artillery_equipment
			self_propelled_super_heavy_artillery_equipment
		}

		equipment_bonus = {
			defense = 0.1
			hard_attack = 1.5
			ap_attack = 1.5
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_4
		name = KR_MIO_Trait_increased_air_burst_munition_fragments
		icon = GFX_generic_mio_trait_icon_air_attack

		position = { x = 6 y = 0 }

		limit_to_equipment_type = { anti_air_equipment }

		equipment_bonus = {
			air_attack = 0.05
			defense = 0.5
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_1_1
		name = KR_MIO_Trait_bigger_gun_shields
		icon = GFX_generic_mio_trait_icon_hardness

		all_parents = { watervliet_arsenal_upgrade_1 }

		position = { x = 0 y = 1 }

		limit_to_equipment_type = { anti_tank_equipment }

		equipment_bonus = {
			hardness = 1
			defense = 1
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_1_2
		name = KR_MIO_Trait_stable_firing_mechanisms
		icon = GFX_generic_mio_trait_icon_air_attack

		all_parents = { watervliet_arsenal_upgrade_4 }

		position = { x = 7 y = 1 }

		limit_to_equipment_type = { anti_air_equipment }

		equipment_bonus = {
			air_attack = 0.05
			defense = 0.5
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_1_3
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_heavy_infantry_mio_equipment_tt
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_1_4
		name = KR_MIO_Trait_government_contract_favoritism
		icon = GFX_generic_mio_department_icon_facilities

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.2
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_2_1
		name = KR_MIO_Trait_extensive_testing
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { watervliet_arsenal_upgrade_1_1 }

		position = { x = 0 y = 2 }

		limit_to_equipment_type = { anti_tank_equipment }

		equipment_bonus = {
			reliability = 0.15
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_2_2
		name = KR_MIO_Trait_increased_shell_payload
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { watervliet_arsenal_upgrade_1 }
		any_parent = { watervliet_arsenal_upgrade_2 watervliet_arsenal_upgrade_3 }

		mutually_exclusive = { watervliet_arsenal_upgrade_2_3 }

		position = { x = 2 y = 2 }

		limit_to_equipment_type = {
			artillery_equipment
			super_heavy_artillery_equipment
			self_propelled_super_heavy_artillery_equipment
		}

		equipment_bonus = {
			defense = 0.15
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_2_3
		name = KR_MIO_Trait_decreased_shell_windage
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { watervliet_arsenal_upgrade_4 }
		any_parent = { watervliet_arsenal_upgrade_2 watervliet_arsenal_upgrade_3 }

		mutually_exclusive = { watervliet_arsenal_upgrade_2_2 }

		position = { x = 5 y = 2 }

		limit_to_equipment_type = {
			artillery_equipment
			super_heavy_artillery_equipment
			self_propelled_super_heavy_artillery_equipment
		}

		equipment_bonus = {
			hard_attack = 1.5
			ap_attack = 1.5
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_2_4
		name = KR_MIO_Trait_extensive_testing_programs
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { watervliet_arsenal_upgrade_1_2 }

		position = { x = 7 y = 2 }

		limit_to_equipment_type = { anti_air_equipment }

		equipment_bonus = {
			reliability = 0.15
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_2_5
		name = KR_MIO_Trait_acquire_rock_island_arsenal_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			395 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			796 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { watervliet_arsenal_upgrade_2_6 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				395 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				796 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = illinois_military_factory_removed }
					add_to_variable = { illinois_military_factory_removed = 1 }
				}
				else = {
					set_variable = { illinois_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_2_6
		name = KR_MIO_Trait_acquire_army_ordnance_department_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			362 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			796 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { watervliet_arsenal_upgrade_2_5 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				796 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = virginia_civilian_factory_removed }
					add_to_variable = { virginia_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { virginia_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_materiel_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_watervliet_arsenal }
	override_trait = {
		token = KR_MIO_Trait_merge_with_browning
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_colt
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_remington
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_springfield_armory
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_winchester_repeating_arms
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_army_ordnance_department
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_rock_island_arsenal
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_studebaker
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_ford
		position = { x = 8 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 9 y = 4 }
	}
}
USA_studebaker_organisation = { #Studebaker
	name = USA_studebaker
	icon = GFX_idea_USA_studebaker

	allowed = { is_american_tag = yes }
	available = {
		396 = { is_owned_and_controlled_by = FROM } #Albany
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		motorized_equipment
		mechanized_equipment
		armored_car_equipment
	}

	research_categories = {
		mio_cat_tech_all_motorized_mechanized
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = studebaker_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = studebaker_upgrade_1
		name = KR_MIO_Trait_reduce_small_arms_vulnerabilities
		icon = GFX_generic_mio_trait_icon_hardness

		position = { x = 0 y = 0 }

		equipment_bonus = {
			hardness = 0.15
		}
	}

	trait = {
		token = studebaker_upgrade_2
		name = KR_MIO_Trait_break_open_old_weapon_stocks
		icon = GFX_KR_generic_mio_trait_icon_motorized_division

		available = { 396 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { studebaker_upgrade_3 }

		position = { x = 2 y = 0 }

		on_complete = {
			FROM = {
				USA_add_motorised_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { studebaker_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_motorized_division
							STRENGTH = "100%"
							LOCATION = "[396.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_motorized_division
							STRENGTH = "100%"
							LOCATION = "[396.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_motorized_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { studebaker_stockpile_trait_unlocked = yes }
						396 = {
							create_unit = {
								division = "division_template = \"Light Motorized Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						396 = {
							create_unit = {
								division = "division_template = \"Light Motorized Division\""
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { studebaker_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 300
					}
				}
			}
		}
	}

	trait = {
		token = studebaker_upgrade_3
		name = KR_MIO_Trait_composite_armour
		icon = GFX_generic_mio_trait_icon_armor_value

		mutually_exclusive = { studebaker_upgrade_2 }

		position = { x = 4 y = 0 }

		limit_to_equipment_type = {
			mechanized_equipment
			armored_car_equipment
		}

		equipment_bonus = {
			armor_value = 0.3
		}
	}

	trait = {
		token = studebaker_upgrade_4
		name = KR_MIO_Trait_closed_chassis
		icon = GFX_generic_mio_trait_icon_hardness

		position = { x = 6 y = 0 }

		equipment_bonus = {
			hardness = 0.15
		}
	}

	trait = {
		token = studebaker_upgrade_1_1
		name = KR_MIO_Trait_bullet_proof_panels
		icon = GFX_generic_mio_trait_icon_armor_value

		any_parent = { studebaker_upgrade_2 studebaker_upgrade_3 }

		position = { x = 1 y = 1 }

		limit_to_equipment_type = {
			mechanized_equipment
			armored_car_equipment
		}

		equipment_bonus = {
			armor_value = 0.35
		}
	}

	trait = {
		token = studebaker_upgrade_1_2
		name = KR_MIO_Trait_high_quality_engines
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { studebaker_upgrade_2 studebaker_upgrade_3 }

		mutually_exclusive = { studebaker_upgrade_1_3 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			defense = -0.1
			breakthrough = 0.2
		}
	}

	trait = {
		token = studebaker_upgrade_1_3
		name = KR_MIO_Trait_increased_hmg_lmg_fire_rate
		icon = GFX_generic_mio_trait_icon_defense

		any_parent = { studebaker_upgrade_2 studebaker_upgrade_3 }

		mutually_exclusive = { studebaker_upgrade_1_2 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			defense = 0.1
			breakthrough = -0.2
		}
	}

	trait = {
		token = studebaker_upgrade_1_4
		name = KR_MIO_Trait_armoured_pulpit_mount
		icon = GFX_generic_mio_trait_icon_armor_value

		any_parent = { studebaker_upgrade_2 studebaker_upgrade_3 }

		position = { x = 5 y = 1 }

		limit_to_equipment_type = {
			mechanized_equipment
			armored_car_equipment
		}

		equipment_bonus = {
			armor_value = 0.35
		}
	}

	trait = {
		token = studebaker_upgrade_1_5
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_mechanized_mio_equipment_tt
		}
	}

	trait = {
		token = studebaker_upgrade_1_6
		name = KR_MIO_Trait_r_d_department_expansion
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.3
		}
	}

	trait = {
		token = studebaker_upgrade_2_1
		name = KR_MIO_Trait_mine_resistant_underside
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { studebaker_upgrade_1 studebaker_upgrade_1_1 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			breakthrough = 0.15
		}
	}

	trait = {
		token = studebaker_upgrade_2_2
		name = KR_MIO_Trait_prevent_internal_armour_fragmentation
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { studebaker_upgrade_4 studebaker_upgrade_1_4 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			breakthrough = 0.15
		}
	}

	trait = {
		token = studebaker_upgrade_2_3
		name = KR_MIO_Trait_acquire_springfield_armory_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			932 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			396 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { studebaker_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				932 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				396 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = massachussets_military_factory_removed }
					add_to_variable = { massachussets_military_factory_removed = 1 }
				}
				else = {
					set_variable = { massachussets_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = studebaker_upgrade_2_4
		name = KR_MIO_Trait_acquire_army_ordnance_department_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			362 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			396 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { studebaker_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				396 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = virginia_civilian_factory_removed }
					add_to_variable = { virginia_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { virginia_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_materiel_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_studebaker }
	override_trait = {
		token = KR_MIO_Trait_merge_with_browning
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_colt
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_remington
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_springfield_armory
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_winchester_repeating_arms
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_army_ordnance_department
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_rock_island_arsenal
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_watervliet_arsenal
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_ford
		position = { x = 8 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 9 y = 4 }
	}
}
USA_ford_organisation = { #Ford
	name = USA_ford
	icon = GFX_idea_ford_motor_company

	allowed = { is_american_tag = yes }
	available = {
		393 = { is_owned_and_controlled_by = FROM } #Michigan
		USA_mio_is_junior_partner_of_merger = no
	}

	equipment_type = {
		motorized_equipment
		mechanized_equipment
		armored_car_equipment
	}

	research_categories = {
		mio_cat_tech_all_motorized_mechanized
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = ford_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = ford_upgrade_1
		name = KR_MIO_Trait_break_open_old_weapon_stocks
		icon = GFX_KR_generic_mio_trait_icon_motorized_division

		available = { 393 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { ford_upgrade_2 }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			maximum_speed = 0.05
		}

		on_complete = {
			FROM = {
				USA_add_motorised_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { ford_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_motorized_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_motorized_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_motorized_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { ford_stockpile_trait_unlocked = yes }
						393 = {
							create_unit = {
								division = "division_template = \"Light Motorized Division\" start_experience_factor = 0.75"
								owner = FROM
							}
						}
					}
					else = {
						393 = {
							create_unit = {
								division = "division_template = \"Light Motorized Division\""
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { ford_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 300
					}
				}
			}
		}
	}

	trait = {
		token = ford_upgrade_2
		name = KR_MIO_Trait_high_quality_engines
		icon = GFX_generic_mio_trait_icon_maximum_speed

		mutually_exclusive = { ford_upgrade_1 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			maximum_speed = 0.1
			breakthrough = -0.2
		}
	}

	trait = {
		token = ford_upgrade_1_1
		name = KR_MIO_Trait_extended_testing_programs
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { ford_upgrade_1 ford_upgrade_2 }

		mutually_exclusive = { ford_upgrade_1_2 }

		position = { x = 0 y = 1 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = ford_upgrade_1_2
		name = KR_MIO_Trait_extensive_testing
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { ford_upgrade_1 ford_upgrade_2 }

		mutually_exclusive = { ford_upgrade_1_1 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			reliability = 0.2
			build_cost_ic = 0.05
		}
	}

	trait = {
		token = ford_upgrade_1_3
		name = KR_MIO_Trait_fuel_efficient_engines
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		any_parent = { ford_upgrade_1 ford_upgrade_2 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			fuel_consumption = -0.25
		}
	}

	trait = {
		token = ford_upgrade_1_4
		name = KR_MIO_Trait_utilise_lighter_materials
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { ford_upgrade_1 ford_upgrade_2 }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = ford_upgrade_1_5
		name = KR_MIO_Trait_construct_additional_storage_yards
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_mechanized_mio_equipment_tt
		}
	}

	trait = {
		token = ford_upgrade_1_6
		name = KR_MIO_Trait_standardise_parts
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_cost_factor = -0.05
		}
	}

	trait = {
		token = ford_upgrade_2_1
		name = KR_MIO_Trait_clear_random_engine_jams
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { ford_upgrade_1_1 ford_upgrade_1_2 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = ford_upgrade_2_2
		name = KR_MIO_Trait_expanded_fuel_storage
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		all_parents = { ford_upgrade_1_3 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			fuel_consumption = -0.25
		}
	}

	trait = {
		token = ford_upgrade_2_3
		name = KR_MIO_Trait_stress_tested_gearbox
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { ford_upgrade_1_4 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = ford_upgrade_2_4
		name = KR_MIO_Trait_suspension_improvements
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { ford_upgrade_1_4 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = ford_upgrade_2_5
		name = KR_MIO_Trait_acquire_springfield_armory_assets
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			932 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			393 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { ford_upgrade_2_6 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				932 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				393 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = massachussets_military_factory_removed }
					add_to_variable = { massachussets_military_factory_removed = 1 }
				}
				else = {
					set_variable = { massachussets_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = ford_upgrade_2_6
		name = KR_MIO_Trait_acquire_army_ordnance_department_assets
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			362 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			393 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { ford_upgrade_2_5 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				393 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = virginia_civilian_factory_removed }
					add_to_variable = { virginia_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { virginia_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	### Merger Traits ###
	include = USA_materiel_merge_organisation

	remove_trait = { KR_MIO_Trait_merge_with_ford }
	override_trait = {
		token = KR_MIO_Trait_merge_with_browning
		position = { x = 0 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_colt
		position = { x = 1 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_remington
		position = { x = 2 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_springfield_armory
		position = { x = 3 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_winchester_repeating_arms
		position = { x = 4 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_army_ordnance_department
		position = { x = 5 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_rock_island_arsenal
		position = { x = 6 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_watervliet_arsenal
		position = { x = 7 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_merge_with_studebaker
		position = { x = 8 y = 4 }
	}
	override_trait = {
		token = KR_MIO_Trait_Maintain_Independence
		position = { x = 9 y = 4 }
	}
}
USA_materiel_merge_organisation = {
	allowed = { always = no } #Used as archetype for merger traits

	trait = {
		token = KR_MIO_Trait_merge_with_browning
		name = KR_MIO_Trait_merge_with_browning
		icon = GFX_icon_browning_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_browning_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_browning_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_browning TYPE = browning_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_colt_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_Colt
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_remington_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_Remington
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_springfield_armory_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_Springfield
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_winchester_repeating_arms_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_Winchester
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_army_ordnance_department_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_AOD
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_rock_island_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_RIA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_watervliet_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_Watervliet
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_studebaker_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_Studebaker
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_ford_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_Ford
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_colt
		name = KR_MIO_Trait_merge_with_colt
		icon = GFX_icon_colt_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_colt_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_colt_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_colt TYPE = colt_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_browning_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_Colt
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_remington_organisation }
				set_mio_name_key = USA_MIO_Merger_Colt_Remington
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_springfield_armory_organisation }
				set_mio_name_key = USA_MIO_Merger_Colt_Springfield
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_winchester_repeating_arms_organisation }
				set_mio_name_key = USA_MIO_Merger_Colt_Winchester
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_army_ordnance_department_organisation }
				set_mio_name_key = USA_MIO_Merger_Colt_AOD
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_rock_island_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_Colt_RIA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_watervliet_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_Colt_Watervliet
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_studebaker_organisation }
				set_mio_name_key = USA_MIO_Merger_Colt_Studebaker
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_ford_organisation }
				set_mio_name_key = USA_MIO_Merger_Colt_Ford
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_remington
		name = KR_MIO_Trait_merge_with_remington
		icon = GFX_icon_remington_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_remington_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_remington_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_remington TYPE = remington_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_browning_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_Remington
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_colt_organisation }
				set_mio_name_key = USA_MIO_Merger_Colt_Remington
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_springfield_armory_organisation }
				set_mio_name_key = USA_MIO_Merger_Remington_Springfield
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_winchester_repeating_arms_organisation }
				set_mio_name_key = USA_MIO_Merger_Remington_Winchester
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_army_ordnance_department_organisation }
				set_mio_name_key = USA_MIO_Merger_Remington_AOD
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_rock_island_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_Remington_RIA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_watervliet_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_Remington_Watervliet
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_studebaker_organisation }
				set_mio_name_key = USA_MIO_Merger_Remington_Studebaker
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_ford_organisation }
				set_mio_name_key = USA_MIO_Merger_Remington_Ford
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_springfield_armory
		name = KR_MIO_Trait_merge_with_springfield_armory
		icon = GFX_icon_springfield_armory_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_springfield_armory_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			breakthrough = 0.03
			defense = 0.03
			reliability = 0.03
			maximum_speed = 0.03
			ap_attack = 0.03
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_springfield_armory_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_springfield_armory TYPE = springfield_armory_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_browning_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_Springfield
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_colt_organisation }
				set_mio_name_key = USA_MIO_Merger_Colt_Springfield
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_remington_organisation }
				set_mio_name_key = USA_MIO_Merger_Remington_Springfield
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_winchester_repeating_arms_organisation }
				set_mio_name_key = USA_MIO_Merger_Springfield_Winchester
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_army_ordnance_department_organisation }
				set_mio_name_key = USA_MIO_Merger_Springfield_AOD
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_rock_island_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_Springfield_RIA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_watervliet_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_Springfield_Watervliet
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_studebaker_organisation }
				set_mio_name_key = USA_MIO_Merger_Springfield_Studebaker
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_ford_organisation }
				set_mio_name_key = USA_MIO_Merger_Springfield_Ford
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_winchester_repeating_arms
		name = KR_MIO_Trait_merge_with_winchester_repeating_arms
		icon = GFX_icon_winchester_repeating_arms_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_winchester_repeating_arms_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_winchester_repeating_arms_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_winchester_repeating_arms TYPE = winchester_repeating_arms_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_browning_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_Winchester
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_colt_organisation }
				set_mio_name_key = USA_MIO_Merger_Colt_Winchester
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_remington_organisation }
				set_mio_name_key = USA_MIO_Merger_Remington_Winchester
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_springfield_armory_organisation }
				set_mio_name_key = USA_MIO_Merger_Springfield_Winchester
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_army_ordnance_department_organisation }
				set_mio_name_key = USA_MIO_Merger_Winchester_AOD
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_rock_island_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_Winchester_RIA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_watervliet_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_Winchester_Watervliet
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_studebaker_organisation }
				set_mio_name_key = USA_MIO_Merger_Winchester_Studebaker
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_ford_organisation }
				set_mio_name_key = USA_MIO_Merger_Winchester_Ford
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_army_ordnance_department
		name = KR_MIO_Trait_merge_with_army_ordnance_department
		icon = GFX_icon_army_ordnance_department_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_army_ordnance_department_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_army_ordnance_department_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_army_ordnance_department TYPE = army_ordnance_department_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_browning_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_AOD
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_colt_organisation }
				set_mio_name_key = USA_MIO_Merger_Colt_AOD
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_remington_organisation }
				set_mio_name_key = USA_MIO_Merger_Remington_AOD
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_springfield_armory_organisation }
				set_mio_name_key = USA_MIO_Merger_Springfield_AOD
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_winchester_repeating_arms_organisation }
				set_mio_name_key = USA_MIO_Merger_Winchester_AOD
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_rock_island_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_AOD_RIA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_watervliet_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_AOD_Watervliet
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_studebaker_organisation }
				set_mio_name_key = USA_MIO_Merger_AOD_Studebaker
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_ford_organisation }
				set_mio_name_key = USA_MIO_Merger_AOD_Ford
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_rock_island_arsenal
		name = KR_MIO_Trait_merge_with_rock_island_arsenal
		icon = GFX_icon_rock_island_arsenal_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_rock_island_arsenal_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_rock_island_arsenal_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_rock_island_arsenal TYPE = rock_island_arsenal_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_browning_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_RIA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_colt_organisation }
				set_mio_name_key = USA_MIO_Merger_Colt_RIA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_remington_organisation }
				set_mio_name_key = USA_MIO_Merger_Remington_RIA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_springfield_armory_organisation }
				set_mio_name_key = USA_MIO_Merger_Springfield_RIA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_winchester_repeating_arms_organisation }
				set_mio_name_key = USA_MIO_Merger_Winchester_RIA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_army_ordnance_department_organisation }
				set_mio_name_key = USA_MIO_Merger_AOD_RIA
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_watervliet_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_RIA_Watervliet
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_studebaker_organisation }
				set_mio_name_key = USA_MIO_Merger_RIA_Studebaker
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_ford_organisation }
				set_mio_name_key = USA_MIO_Merger_RIA_Ford
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_watervliet_arsenal
		name = KR_MIO_Trait_merge_with_watervliet_arsenal
		icon = GFX_icon_watervliet_arsenal_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_watervliet_arsenal_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_watervliet_arsenal_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_watervliet_arsenal TYPE = watervliet_arsenal_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_browning_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_Watervliet
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_colt_organisation }
				set_mio_name_key = USA_MIO_Merger_Colt_Watervliet
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_remington_organisation }
				set_mio_name_key = USA_MIO_Merger_Remington_Watervliet
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_springfield_armory_organisation }
				set_mio_name_key = USA_MIO_Merger_Springfield_Watervliet
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_winchester_repeating_arms_organisation }
				set_mio_name_key = USA_MIO_Merger_Winchester_Watervliet
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_army_ordnance_department_organisation }
				set_mio_name_key = USA_MIO_Merger_AOD_Watervliet
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_rock_island_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_RIA_Watervliet
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_studebaker_organisation }
				set_mio_name_key = USA_MIO_Merger_Watervliet_Studebaker
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_ford_organisation }
				set_mio_name_key = USA_MIO_Merger_Watervliet_Ford
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_studebaker
		name = KR_MIO_Trait_merge_with_studebaker
		icon = GFX_icon_studebaker_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_studebaker_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_studebaker_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_studebaker TYPE = studebaker_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_browning_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_Studebaker
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_colt_organisation }
				set_mio_name_key = USA_MIO_Merger_Colt_Studebaker
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_remington_organisation }
				set_mio_name_key = USA_MIO_Merger_Remington_Studebaker
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_springfield_armory_organisation }
				set_mio_name_key = USA_MIO_Merger_Springfield_Studebaker
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_winchester_repeating_arms_organisation }
				set_mio_name_key = USA_MIO_Merger_Winchester_Studebaker
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_army_ordnance_department_organisation }
				set_mio_name_key = USA_MIO_Merger_AOD_Studebaker
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_rock_island_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_RIA_Studebaker
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_watervliet_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_Watervliet_Studebaker
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_ford_organisation }
				set_mio_name_key = USA_MIO_Merger_Studebaker_Ford
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_merge_with_ford
		name = KR_MIO_Trait_merge_with_ford
		icon = GFX_icon_ford_MIO

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_has_decided_on_merger_or_independence = no
				set_temp_variable = { MIO_target = mio:USA_ford_organisation }
				USA_mio_has_decided_on_merger_or_independence = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.1
		}

		on_complete = {
			FROM = { set_temp_variable = { MIO_target = mio:USA_ford_organisation } }
			USA_mio_merger_effect = yes
			custom_effect_tooltip = {
				localization_key = KR_unavailable_mio_tt
				MIO = USA_ford TYPE = ford_subtitle
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { is_military_industrial_organization = USA_browning_organisation }
				set_mio_name_key = USA_MIO_Merger_Browning_Ford
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_colt_organisation }
				set_mio_name_key = USA_MIO_Merger_Colt_Ford
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_remington_organisation }
				set_mio_name_key = USA_MIO_Merger_Remington_Ford
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_springfield_armory_organisation }
				set_mio_name_key = USA_MIO_Merger_Springfield_Ford
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_winchester_repeating_arms_organisation }
				set_mio_name_key = USA_MIO_Merger_Winchester_Ford
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_army_ordnance_department_organisation }
				set_mio_name_key = USA_MIO_Merger_AOD_Ford
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_rock_island_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_RIA_Ford
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_watervliet_arsenal_organisation }
				set_mio_name_key = USA_MIO_Merger_Watervliet_Ford
			}
			else_if = {
				limit = { is_military_industrial_organization = USA_studebaker_organisation }
				set_mio_name_key = USA_MIO_Merger_Studebaker_Ford
			}
		}
	}

	trait = {
		token = KR_MIO_Trait_Maintain_Independence
		name = KR_MIO_Trait_maintain_independence
		icon = GFX_icon_dont_merge

		available = {
			FROM = {
				set_temp_variable = { MIO_target = ROOT }
				USA_mio_is_senior_partner_of_merger = no
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.1
		}

		on_complete = {
			USA_mio_maintain_independence = yes
		}
	}
}
